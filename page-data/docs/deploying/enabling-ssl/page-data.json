{"componentChunkName":"component---src-templates-docs-js","path":"/docs/deploying/enabling-ssl","result":{"data":{"docs":{"html":"<h1 id=\"enabling-ssltls\"><a href=\"#enabling-ssltls\" aria-label=\"enabling ssltls permalink\" class=\"anchor\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>Enabling SSL/TLS</h1>\n<p>Transport Layer Security (TLS) is a protocol for encrypting data that is sent over the internet. It provides three important features:</p>\n<ul>\n<li>Data Privacy: The data that is exchanged between a server and client is not visible to anyone else.</li>\n<li>Data Integrity: The data that is exchanged between a server and client cannot be modified by anyone else.</li>\n<li>Server Authenticity: The server can prove its identity to the client and so prove the origin of sent data.</li>\n</ul>\n<p>TLS evolved out of Netscape’s Secure Sockets Layer (SSL) protocol in order to fix most of its security flaws. The industry still uses the terms somewhat interchangeably for historical reasons. Any web site that you visit starting with https:// rather than http:// is using TLS/SSL for communication between your browser and their server.</p>\n<blockquote>\n<p>This guide will demonstrate how to enable the TLS protocol directly on your Kitura server. Another way to enable TLS is via an SSL/TLS proxy. In this case an intermediary application between your server and clients performs the encryption and decryption. Some cloud providers offer this service by default, which may be a more appropriate solution.</p>\n</blockquote>\n<hr>\n<h2 id=\"step-1-create-our-certificate-and-key-pair\"><a href=\"#step-1-create-our-certificate-and-key-pair\" aria-label=\"step 1 create our certificate and key pair permalink\" class=\"anchor\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>Step 1: Create our certificate and key pair</h2>\n<blockquote>\n<p>In this guide, we will use OpenSSL to generate our self-signed certificate.\nOpenSSL is included by default on Linux. On MacOS we can install it using Homebrew:</p>\n<div class=\"gatsby-highlight\" data-language=\"text\"><pre class=\"language-text\"><code class=\"language-text\">brew install openssl</code></pre></div>\n</blockquote>\n<p>To enable TLS, a server needs a certificate and a corresponding secret key. Certificates are files that bind together information about the identity of the owner of a site and the public half of an asymmetric key pair (usually RSA). Certificates are usually digitally signed by a certificate authority (CA) who verifies that the identity information in the certificate is correct. This creates a chain of certificates between the site owner certificate and a CA certificate and transitive trust. Assuming that we trust the CA, we can trust the validity of the server certificate.</p>\n<blockquote>\n<p>If you want to create a CA-signed certificate chain, <a href=\"https://letsencrypt.org\">Let’s Encrypt</a> is a Certificate Authority (CA), provided by the non-profit Internet Security Research Group (ISRG) that makes it easy to generate and install free TLS/SSL certificates.</p>\n</blockquote>\n<p>In this guide, we will use OpenSSL to generate a self-signed certificate.</p>\n<p>Create a Credentials folder in the root of your project:</p>\n<div class=\"gatsby-highlight\" data-language=\"text\"><pre class=\"language-text\"><code class=\"language-text\">mkdir Credentials &amp;&amp; cd Credentials</code></pre></div>\n<p>Inside this folder we create a 2048 bit RSA private key using OpenSSL:</p>\n<div class=\"gatsby-highlight\" data-language=\"text\"><pre class=\"language-text\"><code class=\"language-text\">openssl genrsa -out key.pem 2048</code></pre></div>\n<p>We use this private key to create a certificate:</p>\n<div class=\"gatsby-highlight\" data-language=\"text\"><pre class=\"language-text\"><code class=\"language-text\">openssl req -new -sha256 -key key.pem -out csr.csr</code></pre></div>\n<p>At this stage you provide additional information that will be stored in the certificate.</p>\n<p>These choices are optional, except for Common Name, which must be the server's hostname. In our case, this is \"localhost\".</p>\n<p>Next we use OpenSSL to convert the certificate to PEM format:</p>\n<div class=\"gatsby-highlight\" data-language=\"text\"><pre class=\"language-text\"><code class=\"language-text\">openssl req -x509 -sha256 -days 365 -key key.pem -in csr.csr -out cert.pem</code></pre></div>\n<p>Finally we encrypt the key and certificate together using a password. For simplicity we will use \"password\".</p>\n<div class=\"gatsby-highlight\" data-language=\"text\"><pre class=\"language-text\"><code class=\"language-text\">openssl pkcs12 -export -out cert.pfx -inkey key.pem -in cert.pem</code></pre></div>\n<hr>\n<h2 id=\"step-2-setting-up-your-ssl-configuration\"><a href=\"#step-2-setting-up-your-ssl-configuration\" aria-label=\"step 2 setting up your ssl configuration permalink\" class=\"anchor\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>Step 2: Setting up your SSL configuration</h2>\n<p>Now we have created our certificate, we are going to set up our SSL configuration so that it can direct Kitura to the required files.</p>\n<p>Open your <code class=\"language-text\">Application.swift</code> file:</p>\n<div class=\"gatsby-highlight\" data-language=\"text\"><pre class=\"language-text\"><code class=\"language-text\">open Sources/Application/Application.swift</code></pre></div>\n<p>We are going to use <a href=\"https://github.com/IBM-Swift/FileKit\">FileKit</a> to access our certificate file, so we need to <a href=\"https://github.com/IBM-Swift/FileKit#add-dependencies\">add FileKit to our dependencies</a>.</p>\n<p>We also need to add <code class=\"language-text\">FileKit</code> to our import statements:</p>\n<div class=\"gatsby-highlight\" data-language=\"swift\"><pre class=\"language-swift\"><code class=\"language-swift\"><span class=\"token keyword\">import</span> <span class=\"token builtin\">FileKit</span></code></pre></div>\n<p>Now we initialize an <code class=\"language-text\">SSLConfig</code> struct. On macOS we use Apple Secure Transport under the covers, which requires the path to our <code class=\"language-text\">cert.pfx</code> file and the password we used to encrypt the file. On Linux we use OpenSSL under the covers, which requires the paths to the certificate and private key PEM files.</p>\n<p>We use <code class=\"language-text\">#if</code> to check which operating system we're running on and provide the appropriate files to our configuration.</p>\n<p>Inside the <code class=\"language-text\">App</code> class, add the following code:</p>\n<div class=\"gatsby-highlight\" data-language=\"swift\"><pre class=\"language-swift\"><code class=\"language-swift\">#<span class=\"token keyword\">if</span> <span class=\"token function\">os</span><span class=\"token punctuation\">(</span><span class=\"token builtin\">Linux</span><span class=\"token punctuation\">)</span>\n<span class=\"token keyword\">let</span> sslConfig <span class=\"token operator\">=</span>  <span class=\"token function\">SSLConfig</span><span class=\"token punctuation\">(</span>withCACertificateDirectory<span class=\"token punctuation\">:</span> <span class=\"token constant\">nil</span><span class=\"token punctuation\">,</span>\n                             usingCertificateFile<span class=\"token punctuation\">:</span> <span class=\"token builtin\">FileKit</span><span class=\"token punctuation\">.</span>projectFolder <span class=\"token operator\">+</span> <span class=\"token string\">\"/Credentials/cert.pem\"</span><span class=\"token punctuation\">,</span>\n                             withKeyFile<span class=\"token punctuation\">:</span> <span class=\"token builtin\">FileKit</span><span class=\"token punctuation\">.</span>projectFolder <span class=\"token operator\">+</span> <span class=\"token string\">\"/Credentials/key.pem\"</span><span class=\"token punctuation\">,</span>\n                             usingSelfSignedCerts<span class=\"token punctuation\">:</span> <span class=\"token boolean\">true</span><span class=\"token punctuation\">)</span>\n#<span class=\"token keyword\">else</span> <span class=\"token comment\">// on macOS</span>\n\n<span class=\"token keyword\">let</span> sslConfig <span class=\"token operator\">=</span>  <span class=\"token function\">SSLConfig</span><span class=\"token punctuation\">(</span>withChainFilePath<span class=\"token punctuation\">:</span> <span class=\"token builtin\">FileKit</span><span class=\"token punctuation\">.</span>projectFolder <span class=\"token operator\">+</span> <span class=\"token string\">\"/Credentials/cert.pfx\"</span><span class=\"token punctuation\">,</span>\n                             withPassword<span class=\"token punctuation\">:</span> <span class=\"token string\">\"password\"</span><span class=\"token punctuation\">,</span>\n                             usingSelfSignedCerts<span class=\"token punctuation\">:</span> <span class=\"token boolean\">true</span><span class=\"token punctuation\">)</span>\n\n#endif</code></pre></div>\n<hr>\n<h2 id=\"step-3-configure-our-kitura-server-to-use-ssl\"><a href=\"#step-3-configure-our-kitura-server-to-use-ssl\" aria-label=\"step 3 configure our kitura server to use ssl permalink\" class=\"anchor\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>Step 3: Configure our Kitura server to use SSL</h2>\n<p>Now we have our SSL configuration, we need to pass it to Kitura. We do this as part of the <code class=\"language-text\">addHTTPServer</code> function, using the <code class=\"language-text\">withSSL</code> parameter.</p>\n<p>Inside the run function, replace:</p>\n<div class=\"gatsby-highlight\" data-language=\"swift\"><pre class=\"language-swift\"><code class=\"language-swift\"><span class=\"token builtin\">Kitura</span><span class=\"token punctuation\">.</span><span class=\"token function\">addHTTPServer</span><span class=\"token punctuation\">(</span>onPort<span class=\"token punctuation\">:</span> <span class=\"token number\">8080</span><span class=\"token punctuation\">,</span> with<span class=\"token punctuation\">:</span> router<span class=\"token punctuation\">)</span></code></pre></div>\n<p>With the following code:</p>\n<div class=\"gatsby-highlight\" data-language=\"swift\"><pre class=\"language-swift\"><code class=\"language-swift\"><span class=\"token builtin\">Kitura</span><span class=\"token punctuation\">.</span><span class=\"token function\">addHTTPServer</span><span class=\"token punctuation\">(</span>onPort<span class=\"token punctuation\">:</span> <span class=\"token number\">8080</span><span class=\"token punctuation\">,</span> with<span class=\"token punctuation\">:</span> router<span class=\"token punctuation\">,</span> withSSL<span class=\"token punctuation\">:</span> sslConfig<span class=\"token punctuation\">)</span></code></pre></div>\n<p>To test this, start your server and open your browser at the Kitura landing page:</p>\n<p><a href=\"https://localhost:8080\" target=\"blank\">localhost:8080</a></p>\n<blockquote>\n<p>At this point your browser might stop you with a warning that the SSL certificate it is validating is self-signed. Since you are accessing your own server this isn’t a problem at all. In the advanced settings, you can tell your web-browser to accept the self-signed SSL certificate and continue. In general though, your browser should only trust server certificates which are issued by a valid CA.</p>\n</blockquote>\n<p>Notice the https in your URL. You are running Kitura using SSL/TLS! This means that the data your application transmits is secure and the server your users are connecting to is authenticated.</p>","frontmatter":{"path":"/docs/deploying/enabling-ssl","title":"Enabling SSL/TLS"}},"docsList":{"nodes":[{"title":"Getting Started","items":[{"title":"Installation","link":"/docs/getting-started/installation"},{"title":"Hello World","link":"/docs/getting-started/hello-world"},{"title":"Create a Server using Kitura CLI","link":"/docs/getting-started/create-server-cli"},{"title":"Create a Server using SPM","link":"/docs/getting-started/create-server-spm"}]},{"title":"Logging","items":[{"title":"What is Logging?","link":"/docs/logging/what-is-logging"},{"title":"HeliumLogger","link":"/docs/logging/helium-logger"}]},{"title":"Routing","items":[{"title":"What is Routing?","link":"/docs/routing/what-is-routing"},{"title":"Codable Routing","link":"/docs/routing/codable-routing"},{"title":"OpenAPI","link":"/docs/routing/kitura-openapi"},{"title":"Raw Routing","link":"/docs/routing/raw-routing"}]},{"title":"Databases","items":[{"title":"What are Databases?","link":"/docs/databases/what-are-databases"},{"title":"SQL - ORM","link":"/docs/databases/orm"},{"title":"SQL - Kuery","link":"/docs/databases/kuery"},{"title":"NoSQL - CouchDB","link":"/docs/databases/couchdb"}]},{"title":"Sessions","items":[{"title":"What are Sessions?","link":"/docs/sessions/what-are-sessions"},{"title":"Codable Routing Session","link":"/docs/sessions/codable-session"},{"title":"Raw Routing Session","link":"/docs/sessions/raw-session"}]},{"title":"Authentication","items":[{"title":"What is Authentication?","link":"/docs/authentication/what-is-authentication"},{"title":"Basic Authentication","link":"/docs/authentication/basic-authentication"},{"title":"JSON Web Tokens","link":"/docs/authentication/jwt"},{"title":"OAuth 2.0 with Google/Facebook","link":"/docs/authentication/oauth2"}]},{"title":"Web Applications","items":[{"title":"What is Templating?","link":"/docs/web/what-is-templating"},{"title":"Static File Server","link":"/docs/web/static-file-server"},{"title":"Stencil","link":"/docs/web/stencil"},{"title":"Markdown","link":"/docs/web/markdown"}]},{"title":"Client","items":[{"title":"What is a client?","link":"/docs/client/client"},{"title":"iOS Client","link":"/docs/client/iOSClient"}]},{"title":"WebSockets","items":[{"title":"What are WebSockets?","link":"/docs/websockets/websockets"},{"title":"Echo Server","link":"/docs/websockets/echo-server"}]},{"title":"Deploying","items":[{"title":"Monitoring","link":"/docs/deploying/monitoring"},{"title":"Enabling SSL/TLS","link":"/docs/deploying/enabling-ssl"},{"title":"Docker","link":"/docs/deploying/docker"},{"title":"Kubernetes","link":"/docs/deploying/kubernetes"},{"title":"Cloud Foundry","link":"/docs/deploying/cloud-foundry"}]},{"title":"Configuring","items":[{"title":"Enabling SwiftNIO","link":"/docs/configuring/swiftnio"}]},{"title":"API","items":[{"title":"Kitura","link":"/docs/api/kitura"},{"title":"HTTP Client","link":"/docs/api/http-client"},{"title":"Sessions","link":"/docs/api/sessions"},{"title":"Authentication","link":"/docs/api/authentication"},{"title":"Web Templating","link":"/docs/api/web-templating"},{"title":"SQL Databases","link":"/docs/api/sql-databases"},{"title":"Non-SQL Databases","link":"/docs/api/non-sql-databases"},{"title":"Cloud Integration","link":"/docs/api/cloud-integration"},{"title":"Middlewares","link":"/docs/api/middlewares"},{"title":"Cryptography","link":"/docs/api/cryptography"},{"title":"Email","link":"/docs/api/email"}]}]}},"pageContext":{"isCreatedByStatefulCreatePages":false}}}