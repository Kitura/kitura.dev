{"componentChunkName":"component---src-templates-blogs-js","path":"/blogs/using-swift-log-with-kitura","result":{"data":{"blog":{"html":"<p><a href=\"https://github.com/apple/swift-log\">swift-log</a> is a new logging API package for Swift, developed by the <a href=\"https://swift.org/server/\">Swift Server Working Group</a>. It aims to provide a consistent and standardised logging solution across the server-side Swift ecosystem.</p>\n<p>With the release of Kitura’s <a href=\"https://github.com/Kitura/LoggerAPI/releases/tag/1.9.0\">LoggerAPI 1.9</a>, you can now easily direct your log messages to a swift-log logging backend.</p>\n<p>In addition, the upcoming Kitura 2.8 release will allow you to <a href=\"https://github.com/Kitura/Kitura/pull/1460\">configure Kitura to log via swift-log</a> with a single line of code:</p>\n<div class=\"gatsby-highlight\" data-language=\"swift\"><pre class=\"language-swift\"><code class=\"language-swift\"><span class=\"token builtin\">Kitura</span><span class=\"token punctuation\">.</span><span class=\"token function\">logTo</span><span class=\"token punctuation\">(</span>mySwiftLogger<span class=\"token punctuation\">)</span></code></pre></div>\n<h2 id=\"why-use-a-logging-api\"><a href=\"#why-use-a-logging-api\" aria-label=\"why use a logging api permalink\" class=\"anchor\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>Why use a logging API?</h2>\n<p>When writing an application, you may wish to generate messages – to aid debugging, to record normal program flow, or audit user input. Some of those messages may be relevant in different contexts – while developing, you may want as much information as possible to understand how your code behaves, whereas in production, that would be too much noise – you want only the important messages that tell you when something requires your attention. In addition, producing messages affects performance.</p>\n<p>Logging APIs decouple the production of log messages from their output. They allow code to emit messages at different levels: warnings and errors for important messages, and debug for understanding program execution. Which messages are output and their destination (stdout, database, file) can be configured independently, by the application author or during deployment. This means that an application does not need to be recompiled to toggle logging, or change the logging level. In addition, if all code uses the same logging API, then all messages produced by the application and its dependencies can be sent to a single destination.</p>\n<p>By configuring Kitura and your existing code that uses LoggerAPI to output to swift-log, you can take advantage of swift-log in your own code, combine with other dependencies that adopt swift-log, all logging to the same destination.</p>\n<hr>\n<h2 id=\"configuring-loggerapi-with-swift-log\"><a href=\"#configuring-loggerapi-with-swift-log\" aria-label=\"configuring loggerapi with swift log permalink\" class=\"anchor\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>Configuring LoggerAPI with swift-log</h2>\n<p>To direct your existing LoggerAPI log statements to swift-log, you need only set the Log.swiftLogger property:</p>\n<div class=\"gatsby-highlight\" data-language=\"swift\"><pre class=\"language-swift\"><code class=\"language-swift\"><span class=\"token keyword\">import</span> <span class=\"token builtin\">Logging</span>\n<span class=\"token keyword\">import</span> <span class=\"token builtin\">LoggerAPI</span>\n\n<span class=\"token keyword\">var</span> mySwiftLogger <span class=\"token operator\">=</span> <span class=\"token function\">Logger</span><span class=\"token punctuation\">(</span>label<span class=\"token punctuation\">:</span> <span class=\"token string\">\"my-swift-logger\"</span><span class=\"token punctuation\">)</span>\nmySwiftLogger<span class=\"token punctuation\">.</span>logLevel <span class=\"token operator\">=</span> <span class=\"token punctuation\">.</span>info\n\n<span class=\"token builtin\">Log</span><span class=\"token punctuation\">.</span>swiftLogger <span class=\"token operator\">=</span> mySwiftLogger</code></pre></div>\n<p>Note that there are some minor differences in the hierarchy of logging levels defined by LoggerAPI and swift-log. See the <a href=\"https://kitura.github.io/LoggerAPI/index.html\">LoggerAPI documentation</a> Log.isLogging() for details of how log levels are mapped.</p>\n<h2 id=\"how-does-swift-log-compare-to-loggerapi\"><a href=\"#how-does-swift-log-compare-to-loggerapi\" aria-label=\"how does swift log compare to loggerapi permalink\" class=\"anchor\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>How does swift-log compare to LoggerAPI?</h2>\n<p>Both LoggerAPI and swift-log provide a means to decouple log message production from the logging implementation (backend). In both cases, the producer (your own code, or one of your dependencies) calls a logging API function indicating the logging level and the message content. And in both cases, the application author decides what level of log messages should be logged, and where the log messages should be sent.</p>\n<p>There are some differences in the architecture, however: LoggerAPI provides a global <code class=\"language-text\">Log</code> type that can be invoked from anywhere in your code, and from any thread. Swift-log provides a local <code class=\"language-text\">Logger</code> with instance functions for logging, and this must be passed around or stored as a property. LoggerAPI effectively allows you to store an instance globally, and internally uses locks to provide thread-safe access to these global loggers.</p>\n<p>There are pro’s and con’s to each approach, which are nicely summarised in the <a href=\"https://forums.swift.org/t/logging/16027/3\">thread for the swift-log pitch on the Swift Forums</a>.</p>\n<p>If you wish to use swift-log throughout your application, you can configure Kitura to log to it, but then use your own swift-log Logger instances to perform logging. Because the logging backend configuration is global, all log messages will be emitted to the same destination.</p>","frontmatter":{"path":"/blogs/using-swift-log-with-kitura","title":"Using swift-log with Kitura","author":"David Jones","date":"2019-06-12"}}},"pageContext":{"isCreatedByStatefulCreatePages":false}}}