(window.webpackJsonp=window.webpackJsonp||[]).push([[0],{0:function(n,a,s){"use strict";n.exports=s(170)},113:function(n,a,s){"use strict";s(2),Object.defineProperty(a,"__esModule",{value:!0});var t=s(222);Object.defineProperty(a,"AllSubstringsIndexStrategy",{enumerable:!0,get:function(){return t.AllSubstringsIndexStrategy}});var e=s(223);Object.defineProperty(a,"ExactWordIndexStrategy",{enumerable:!0,get:function(){return e.ExactWordIndexStrategy}});var o=s(224);Object.defineProperty(a,"PrefixIndexStrategy",{enumerable:!0,get:function(){return o.PrefixIndexStrategy}})},114:function(n,a,s){"use strict";s(2),Object.defineProperty(a,"__esModule",{value:!0});var t=s(225);Object.defineProperty(a,"CaseSensitiveSanitizer",{enumerable:!0,get:function(){return t.CaseSensitiveSanitizer}});var e=s(226);Object.defineProperty(a,"LowerCaseSanitizer",{enumerable:!0,get:function(){return e.LowerCaseSanitizer}})},115:function(n,a,s){"use strict";!function n(){if("undefined"!=typeof __REACT_DEVTOOLS_GLOBAL_HOOK__&&"function"==typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE){0;try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(n)}catch(a){console.error(a)}}}(),n.exports=s(197)},147:function(n,a,s){s(106),s(16),s(14),s(6),s(21),s(32),a.__esModule=!0;a.ATTRIBUTE_NAMES={BODY:"bodyAttributes",HTML:"htmlAttributes",TITLE:"titleAttributes"};var t=a.TAG_NAMES={BASE:"base",BODY:"body",HEAD:"head",HTML:"html",LINK:"link",META:"meta",NOSCRIPT:"noscript",SCRIPT:"script",STYLE:"style",TITLE:"title"},e=(a.VALID_TAG_NAMES=Object.keys(t).map((function(n){return t[n]})),a.TAG_PROPERTIES={CHARSET:"charset",CSS_TEXT:"cssText",HREF:"href",HTTPEQUIV:"http-equiv",INNER_HTML:"innerHTML",ITEM_PROP:"itemprop",NAME:"name",PROPERTY:"property",REL:"rel",SRC:"src"},a.REACT_TAG_MAP={accesskey:"accessKey",charset:"charSet",class:"className",contenteditable:"contentEditable",contextmenu:"contextMenu","http-equiv":"httpEquiv",itemprop:"itemProp",tabindex:"tabIndex"});a.HELMET_PROPS={DEFAULT_TITLE:"defaultTitle",DEFER:"defer",ENCODE_SPECIAL_CHARACTERS:"encodeSpecialCharacters",ON_CHANGE_CLIENT_STATE:"onChangeClientState",TITLE_TEMPLATE:"titleTemplate"},a.HTML_TAG_MAP=Object.keys(e).reduce((function(n,a){return n[e[a]]=a,n}),{}),a.SELF_CLOSING_TAGS=[t.NOSCRIPT,t.SCRIPT,t.STYLE],a.HELMET_ATTRIBUTE="data-react-helmet"},148:function(n,a,s){"use strict";s(2),Object.defineProperty(a,"__esModule",{value:!0});var t=s(227);Object.defineProperty(a,"TfIdfSearchIndex",{enumerable:!0,get:function(){return t.TfIdfSearchIndex}});var e=s(228);Object.defineProperty(a,"UnorderedSearchIndex",{enumerable:!0,get:function(){return e.UnorderedSearchIndex}})},149:function(n,a,s){"use strict";s(2),Object.defineProperty(a,"__esModule",{value:!0}),a.default=function(n,a){a=a||[];for(var s=n=n||{},t=0;t<a.length;t++)if(null==(s=s[a[t]]))return null;return s}},150:function(n,a,s){"use strict";s(2),Object.defineProperty(a,"__esModule",{value:!0});var t=s(229);Object.defineProperty(a,"SimpleTokenizer",{enumerable:!0,get:function(){return t.SimpleTokenizer}});var e=s(230);Object.defineProperty(a,"StemmingTokenizer",{enumerable:!0,get:function(){return e.StemmingTokenizer}});var o=s(231);Object.defineProperty(a,"StopWordsTokenizer",{enumerable:!0,get:function(){return o.StopWordsTokenizer}})},151:function(n,a,s){"use strict";s(49),s(61),s(6),s(2),Object.defineProperty(a,"__esModule",{value:!0});var t=a.StopWordsMap={a:!0,able:!0,about:!0,across:!0,after:!0,all:!0,almost:!0,also:!0,am:!0,among:!0,an:!0,and:!0,any:!0,are:!0,as:!0,at:!0,be:!0,because:!0,been:!0,but:!0,by:!0,can:!0,cannot:!0,could:!0,dear:!0,did:!0,do:!0,does:!0,either:!0,else:!0,ever:!0,every:!0,for:!0,from:!0,get:!0,got:!0,had:!0,has:!0,have:!0,he:!0,her:!0,hers:!0,him:!0,his:!0,how:!0,however:!0,i:!0,if:!0,in:!0,into:!0,is:!0,it:!0,its:!0,just:!0,least:!0,let:!0,like:!0,likely:!0,may:!0,me:!0,might:!0,most:!0,must:!0,my:!0,neither:!0,no:!0,nor:!0,not:!0,of:!0,off:!0,often:!0,on:!0,only:!0,or:!0,other:!0,our:!0,own:!0,rather:!0,said:!0,say:!0,says:!0,she:!0,should:!0,since:!0,so:!0,some:!0,than:!0,that:!0,the:!0,their:!0,them:!0,then:!0,there:!0,these:!0,they:!0,this:!0,tis:!0,to:!0,too:!0,twas:!0,us:!0,wants:!0,was:!0,we:!0,were:!0,what:!0,when:!0,where:!0,which:!0,while:!0,who:!0,whom:!0,why:!0,will:!0,with:!0,would:!0,yet:!0,you:!0,your:!0};t.constructor=!1,t.hasOwnProperty=!1,t.isPrototypeOf=!1,t.propertyIsEnumerable=!1,t.toLocaleString=!1,t.toString=!1,t.valueOf=!1},157:function(n,a,s){s(50),s(112),s(16),s(14),s(6),s(21),s(38),s(117),s(54),s(26),s(2),s(20),a.__esModule=!0,a.Helmet=void 0;var t=Object.assign||function(n){for(var a=1;a<arguments.length;a++){var s=arguments[a];for(var t in s)Object.prototype.hasOwnProperty.call(s,t)&&(n[t]=s[t])}return n},e=function(){function n(n,a){for(var s=0;s<a.length;s++){var t=a[s];t.enumerable=t.enumerable||!1,t.configurable=!0,"value"in t&&(t.writable=!0),Object.defineProperty(n,t.key,t)}}return function(a,s,t){return s&&n(a.prototype,s),t&&n(a,t),a}}(),o=r(s(0)),p=r(s(53)),c=r(s(216)),i=r(s(218)),l=s(220),u=s(147);function r(n){return n&&n.__esModule?n:{default:n}}function d(n,a){var s={};for(var t in n)a.indexOf(t)>=0||Object.prototype.hasOwnProperty.call(n,t)&&(s[t]=n[t]);return s}var h,k,g,f=(0,c.default)(l.reducePropsToState,l.handleClientStateChange,l.mapStateOnServer)((function(){return null})),w=(h=f,g=k=function(n){function a(){return function(n,a){if(!(n instanceof a))throw new TypeError("Cannot call a class as a function")}(this,a),function(n,a){if(!n)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!a||"object"!=typeof a&&"function"!=typeof a?n:a}(this,n.apply(this,arguments))}return function(n,a){if("function"!=typeof a&&null!==a)throw new TypeError("Super expression must either be null or a function, not "+typeof a);n.prototype=Object.create(a&&a.prototype,{constructor:{value:n,enumerable:!1,writable:!0,configurable:!0}}),a&&(Object.setPrototypeOf?Object.setPrototypeOf(n,a):n.__proto__=a)}(a,n),a.prototype.shouldComponentUpdate=function(n){return!(0,i.default)(this.props,n)},a.prototype.mapNestedChildrenToProps=function(n,a){if(!a)return null;switch(n.type){case u.TAG_NAMES.SCRIPT:case u.TAG_NAMES.NOSCRIPT:return{innerHTML:a};case u.TAG_NAMES.STYLE:return{cssText:a}}throw new Error("<"+n.type+" /> elements are self-closing and can not contain children. Refer to our API for more information.")},a.prototype.flattenArrayTypeChildren=function(n){var a,s=n.child,e=n.arrayTypeChildren,o=n.newChildProps,p=n.nestedChildren;return t({},e,((a={})[s.type]=[].concat(e[s.type]||[],[t({},o,this.mapNestedChildrenToProps(s,p))]),a))},a.prototype.mapObjectTypeChildren=function(n){var a,s,e=n.child,o=n.newProps,p=n.newChildProps,c=n.nestedChildren;switch(e.type){case u.TAG_NAMES.TITLE:return t({},o,((a={})[e.type]=c,a.titleAttributes=t({},p),a));case u.TAG_NAMES.BODY:return t({},o,{bodyAttributes:t({},p)});case u.TAG_NAMES.HTML:return t({},o,{htmlAttributes:t({},p)})}return t({},o,((s={})[e.type]=t({},p),s))},a.prototype.mapArrayTypeChildrenToProps=function(n,a){var s=t({},a);return Object.keys(n).forEach((function(a){var e;s=t({},s,((e={})[a]=n[a],e))})),s},a.prototype.warnOnInvalidChildren=function(n,a){return!0},a.prototype.mapChildrenToProps=function(n,a){var s=this,t={};return o.default.Children.forEach(n,(function(n){if(n&&n.props){var e=n.props,o=e.children,p=d(e,["children"]),c=(0,l.convertReactPropstoHtmlAttributes)(p);switch(s.warnOnInvalidChildren(n,o),n.type){case u.TAG_NAMES.LINK:case u.TAG_NAMES.META:case u.TAG_NAMES.NOSCRIPT:case u.TAG_NAMES.SCRIPT:case u.TAG_NAMES.STYLE:t=s.flattenArrayTypeChildren({child:n,arrayTypeChildren:t,newChildProps:c,nestedChildren:o});break;default:a=s.mapObjectTypeChildren({child:n,newProps:a,newChildProps:c,nestedChildren:o})}}})),a=this.mapArrayTypeChildrenToProps(t,a)},a.prototype.render=function(){var n=this.props,a=n.children,s=d(n,["children"]),e=t({},s);return a&&(e=this.mapChildrenToProps(a,e)),o.default.createElement(h,e)},e(a,null,[{key:"canUseDOM",set:function(n){h.canUseDOM=n}}]),a}(o.default.Component),k.propTypes={base:p.default.object,bodyAttributes:p.default.object,children:p.default.oneOfType([p.default.arrayOf(p.default.node),p.default.node]),defaultTitle:p.default.string,defer:p.default.bool,encodeSpecialCharacters:p.default.bool,htmlAttributes:p.default.object,link:p.default.arrayOf(p.default.object),meta:p.default.arrayOf(p.default.object),noscript:p.default.arrayOf(p.default.object),onChangeClientState:p.default.func,script:p.default.arrayOf(p.default.object),style:p.default.arrayOf(p.default.object),title:p.default.string,titleAttributes:p.default.object,titleTemplate:p.default.string},k.defaultProps={defer:!0,encodeSpecialCharacters:!0},k.peek=h.peek,k.rewind=function(){var n=h.rewind();return n||(n=(0,l.mapStateOnServer)({baseTag:[],bodyAttributes:{},encodeSpecialCharacters:!0,htmlAttributes:{},linkTags:[],metaTags:[],noscriptTags:[],scriptTags:[],styleTags:[],title:"",titleAttributes:{}})),n},g);w.renderStatic=w.rewind,a.Helmet=w,a.default=w},158:function(n){n.exports=JSON.parse('{"data":{"guides":{"edges":[{"node":{"html":"<h2 id=\\"authentication\\"><a href=\\"#authentication\\" aria-label=\\"authentication permalink\\" class=\\"anchor\\"><svg aria-hidden=\\"true\\" focusable=\\"false\\" height=\\"16\\" version=\\"1.1\\" viewBox=\\"0 0 16 16\\" width=\\"16\\"><path fill-rule=\\"evenodd\\" d=\\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\\"></path></svg></a>Authentication</h2>\\n<p> Authenticate requests to Kitura.</p>\\n<table>\\n<thead>\\n<tr>\\n<th>Package</th>\\n<th>Description</th>\\n<th>API Documentation</th>\\n</tr>\\n</thead>\\n<tbody>\\n<tr>\\n<td><a href=\\"https://github.com/IBM-Swift/Kitura-Credentials\\">Kitura-Credentials</a></td>\\n<td>Main credentials framework. Use this together with a suitable plugin.</td>\\n<td><a href=\\"https://ibm-swift.github.io/Kitura-Credentials/\\">API</a></td>\\n</tr>\\n<tr>\\n<td><a href=\\"https://github.com/IBM-Swift/Kitura-CredentialsFacebook\\">Kitura-CredentialsFacebook</a></td>\\n<td>Plugin for Kitura-Credentials which uses Facebook OAuth2.</td>\\n<td><a href=\\"https://ibm-swift.github.io/Kitura-CredentialsFacebook/\\">API</a></td>\\n</tr>\\n<tr>\\n<td><a href=\\"https://github.com/IBM-Swift/Kitura-CredentialsGoogle\\">Kitura-CredentialsGoogle</a></td>\\n<td>Plugin for Kitura-Credentials which uses Google OAuth2.</td>\\n<td><a href=\\"https://ibm-swift.github.io/Kitura-CredentialsGoogle/\\">API</a></td>\\n</tr>\\n<tr>\\n<td><a href=\\"https://github.com/IBM-Swift/Kitura-CredentialsGitHub\\">Kitura-CredentialsGitHub</a></td>\\n<td>Plugin for Kitura-Credentials which uses GitHub OAuth2.</td>\\n<td><a href=\\"https://ibm-swift.github.io/Kitura-CredentialsGitHub/\\">API</a></td>\\n</tr>\\n<tr>\\n<td><a href=\\"https://github.com/IBM-Swift/Kitura-CredentialsHTTP\\">Kitura-CredentialsHTTP</a></td>\\n<td>Plugin for Kitura-Credentials which uses HTTP Basic or Digest authentication.</td>\\n<td><a href=\\"https://ibm-swift.github.io/Kitura-CredentialsHTTP/\\">API</a></td>\\n</tr>\\n<tr>\\n<td><a href=\\"https://github.com/IBM-Swift/Kitura-CredentialsJWT\\">Kitura-CredentialsJWT</a></td>\\n<td>Plugin for Kitura-Credentials which uses JSON Web Tokens.</td>\\n<td><a href=\\"https://ibm-swift.github.io/Kitura-CredentialsJWT/\\">API</a></td>\\n</tr>\\n<tr>\\n<td><a href=\\"https://github.com/crspybits/CredentialsDropbox\\">Kitura-CredentialsDropbox</a></td>\\n<td>Plugin for Kitura-Credentials which uses Dropbox OAuth2.</td>\\n<td>No API available</td>\\n</tr>\\n<tr>\\n<td><a href=\\"https://github.com/jacobvanorder/Kitura-CredentialsTwitter\\">Kitura-CredentialsTwitter</a></td>\\n<td>Plugin for Kitura-Credentials which uses Twitter OAuth2.</td>\\n<td>No API available</td>\\n</tr>\\n<tr>\\n<td><a href=\\"https://github.com/IBM-Swift/Swift-JWT\\">Swift-JWT</a></td>\\n<td>Swift implementation of JSON Web Tokens (JWT).</td>\\n<td><a href=\\"https://ibm-swift.github.io/Swift-JWT/\\">API</a></td>\\n</tr>\\n</tbody>\\n</table>","frontmatter":{"path":"/docs/api/authentication","title":"What is Authentication?"}}},{"node":{"html":"<h2 id=\\"cloud-integration\\"><a href=\\"#cloud-integration\\" aria-label=\\"cloud integration permalink\\" class=\\"anchor\\"><svg aria-hidden=\\"true\\" focusable=\\"false\\" height=\\"16\\" version=\\"1.1\\" viewBox=\\"0 0 16 16\\" width=\\"16\\"><path fill-rule=\\"evenodd\\" d=\\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\\"></path></svg></a>Cloud Integration</h2>\\n<p> Libraries for integrating with cloud.</p>\\n<table>\\n<thead>\\n<tr>\\n<th>Package</th>\\n<th>Description</th>\\n<th>API Documentation</th>\\n</tr>\\n</thead>\\n<tbody>\\n<tr>\\n<td><a href=\\"https://github.com/IBM-Swift/LoggerAPI\\">LoggerAPI</a></td>\\n<td>Logger protocol for differing kinds of loggers.</td>\\n<td><a href=\\"https://ibm-swift.github.io/LoggerAPI/\\">API</a></td>\\n</tr>\\n<tr>\\n<td><a href=\\"https://github.com/IBM-Swift/HeliumLogger\\">HeliumLogger</a></td>\\n<td>A lightweight Swift logging framework.</td>\\n<td><a href=\\"https://ibm-swift.github.io/HeliumLogger/\\">API</a></td>\\n</tr>\\n<tr>\\n<td><a href=\\"https://github.com/IBM-Swift/Health\\">Health</a></td>\\n<td>Add liveness and readiness endpoints to your application.</td>\\n<td><a href=\\"https://ibm-swift.github.io/Health/\\">API</a></td>\\n</tr>\\n<tr>\\n<td><a href=\\"https://github.com/IBM-Swift/CloudEnvironment\\">CloudEnvironment</a></td>\\n<td>ad configuration for services on IBM Cloud.</td>\\n<td><a href=\\"https://ibm-swift.github.io/CloudEnvironment/\\">API</a></td>\\n</tr>\\n<tr>\\n<td><a href=\\"https://github.com/IBM-Swift/Swift-cfenv\\">Swift-cfenv</a></td>\\n<td>Parse Cloud Foundry variables into your application.</td>\\n<td>No API available</td>\\n</tr>\\n<tr>\\n<td><a href=\\"https://github.com/IBM-Swift/Configuration\\">Configuration</a></td>\\n<td>Read application configuration from command-line options, environment variables, and disk.</td>\\n<td><a href=\\"https://ibm-swift.github.io/Configuration/\\">API</a></td>\\n</tr>\\n</tbody>\\n</table>","frontmatter":{"path":"/docs/api/cloud-integration","title":"What is Authentication?"}}},{"node":{"html":"<h2 id=\\"cryptography\\"><a href=\\"#cryptography\\" aria-label=\\"cryptography permalink\\" class=\\"anchor\\"><svg aria-hidden=\\"true\\" focusable=\\"false\\" height=\\"16\\" version=\\"1.1\\" viewBox=\\"0 0 16 16\\" width=\\"16\\"><path fill-rule=\\"evenodd\\" d=\\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\\"></path></svg></a>Cryptography</h2>\\n<p> Libraries for many popular cryptography algorithms.</p>\\n<table>\\n<thead>\\n<tr>\\n<th>Package</th>\\n<th>Description</th>\\n<th>API Documentation</th>\\n</tr>\\n</thead>\\n<tbody>\\n<tr>\\n<td><a href=\\"https://github.com/IBM-Swift/BlueCryptor\\">BlueCryptor</a></td>\\n<td>Cross-platform cryptography library.</td>\\n<td>No API available</td>\\n</tr>\\n<tr>\\n<td><a href=\\"https://github.com/IBM-Swift/BlueCryptor\\">BlueRSA</a></td>\\n<td>Cross-platform RSA wrapper library.</td>\\n<td>No API available</td>\\n</tr>\\n<tr>\\n<td><a href=\\"https://github.com/IBM-Swift/BlueECC\\">BlueECC</a></td>\\n<td>Demonstration application using Kubernetes.</td>\\n<td><a href=\\"https://ibm-swift.github.io/BlueECC/index.html\\">API</a></td>\\n</tr>\\n</tbody>\\n</table>","frontmatter":{"path":"/docs/api/cryptography","title":"What is Authentication?"}}},{"node":{"html":"<h2 id=\\"email\\"><a href=\\"#email\\" aria-label=\\"email permalink\\" class=\\"anchor\\"><svg aria-hidden=\\"true\\" focusable=\\"false\\" height=\\"16\\" version=\\"1.1\\" viewBox=\\"0 0 16 16\\" width=\\"16\\"><path fill-rule=\\"evenodd\\" d=\\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\\"></path></svg></a>Email</h2>\\n<p> Send email from your Kitura application.</p>\\n<table>\\n<thead>\\n<tr>\\n<th>Package</th>\\n<th>Description</th>\\n<th>API Documentation</th>\\n</tr>\\n</thead>\\n<tbody>\\n<tr>\\n<td><a href=\\"https://github.com/IBM-Swift/Swift-SMTP\\">Swift-SMTP</a></td>\\n<td>A Swift SMTP mail client.</td>\\n<td><a href=\\"https://ibm-swift.github.io/Swift-SMTP/\\">API</a></td>\\n</tr>\\n</tbody>\\n</table>","frontmatter":{"path":"/docs/api/email","title":"What is Authentication?"}}},{"node":{"html":"<h2 id=\\"kitura\\"><a href=\\"#kitura\\" aria-label=\\"kitura permalink\\" class=\\"anchor\\"><svg aria-hidden=\\"true\\" focusable=\\"false\\" height=\\"16\\" version=\\"1.1\\" viewBox=\\"0 0 16 16\\" width=\\"16\\"><path fill-rule=\\"evenodd\\" d=\\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\\"></path></svg></a>Kitura</h2>\\n<p> Core packages used by most Kitura applications.</p>\\n<table>\\n<thead>\\n<tr>\\n<th>Package</th>\\n<th>Description</th>\\n<th>API Documentation</th>\\n</tr>\\n</thead>\\n<tbody>\\n<tr>\\n<td><a href=\\"https://github.com/IBM-Swift/Kitura\\">Kitura</a></td>\\n<td>The Kitura framework, including HTTP server, routing, requests, and responses.</td>\\n<td><a href=\\"https://ibm-swift.github.io/Kitura/\\">API</a></td>\\n</tr>\\n<tr>\\n<td><a href=\\"https://github.com/IBM-Swift/Kitura-Websocket\\">Kitura-Websocket</a></td>\\n<td>Bi-directional communications over the WebSocket protocol.</td>\\n<td><a href=\\"https://ibm-swift.github.io/Kitura-WebSocket/\\">API</a></td>\\n</tr>\\n<tr>\\n<td><a href=\\"https://github.com/IBM-Swift/Kitura-OpenAPI\\">Kitura-OpenAPI</a></td>\\n<td>Automatically generate a Swagger/OpenAPI document from your Kitura application.</td>\\n<td><a href=\\"https://ibm-swift.github.io/Kitura-OpenAPI/\\">API</a></td>\\n</tr>\\n</tbody>\\n</table>","frontmatter":{"path":"/docs/api/kitura","title":"What is Authentication?"}}},{"node":{"html":"<h2 id=\\"http-client\\"><a href=\\"#http-client\\" aria-label=\\"http client permalink\\" class=\\"anchor\\"><svg aria-hidden=\\"true\\" focusable=\\"false\\" height=\\"16\\" version=\\"1.1\\" viewBox=\\"0 0 16 16\\" width=\\"16\\"><path fill-rule=\\"evenodd\\" d=\\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\\"></path></svg></a>HTTP Client</h2>\\n<p> Packages for communicating with remote HTTP servers, or with Kitura from iOS.</p>\\n<table>\\n<thead>\\n<tr>\\n<th>Package</th>\\n<th>Description</th>\\n<th>API Documentation</th>\\n</tr>\\n</thead>\\n<tbody>\\n<tr>\\n<td><a href=\\"https://github.com/IBM-Swift/SwiftyRequest\\">SwiftyRequest</a></td>\\n<td>HTTP client, with support for JSON, Codable, and built-in circuit breaking.</td>\\n<td><a href=\\"https://ibm-swift.github.io/SwiftyRequest/\\">API</a></td>\\n</tr>\\n<tr>\\n<td><a href=\\"https://github.com/IBM-Swift/KituraKit\\">KituraKit</a></td>\\n<td>iOS library for communicating with a Kitura server.</td>\\n<td><a href=\\"https://ibm-swift.github.io/KituraKit/\\">API</a></td>\\n</tr>\\n</tbody>\\n</table>","frontmatter":{"path":"/docs/api/http-client","title":"What is Authentication?"}}},{"node":{"html":"<h2 id=\\"middlewares\\"><a href=\\"#middlewares\\" aria-label=\\"middlewares permalink\\" class=\\"anchor\\"><svg aria-hidden=\\"true\\" focusable=\\"false\\" height=\\"16\\" version=\\"1.1\\" viewBox=\\"0 0 16 16\\" width=\\"16\\"><path fill-rule=\\"evenodd\\" d=\\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\\"></path></svg></a>Middlewares</h2>\\n<p> Pluggable functionality which can be added to Kitura routes.</p>\\n<table>\\n<thead>\\n<tr>\\n<th>Package</th>\\n<th>Description</th>\\n<th>API Documentation</th>\\n</tr>\\n</thead>\\n<tbody>\\n<tr>\\n<td><a href=\\"https://github.com/IBM-Swift/Kitura-Cache\\">Kitura-Cache</a></td>\\n<td>In-memory cache based on NSCache.</td>\\n<td><a href=\\"https://ibm-swift.github.io/Kitura-Cache/\\">API</a></td>\\n</tr>\\n<tr>\\n<td><a href=\\"https://github.com/IBM-Swift/Kitura-Compression\\">Kitura-Compression</a></td>\\n<td>Compress your response body data using \\"deflate\\" or \\"gzip\\".</td>\\n<td><a href=\\"https://ibm-swift.github.io/Kitura-Compression/\\">API</a></td>\\n</tr>\\n<tr>\\n<td><a href=\\"https://github.com/IBM-Swift/Kitura-CORS\\">Kitura-CORS</a></td>\\n<td>Support for Cross Origin Resource Sharing.</td>\\n<td><a href=\\"https://ibm-swift.github.io/Kitura-CORS/\\">API</a></td>\\n</tr>\\n</tbody>\\n</table>","frontmatter":{"path":"/docs/api/middlewares","title":"What is Authentication?"}}},{"node":{"html":"<h1 id=\\"kitura-api-documentation\\"><a href=\\"#kitura-api-documentation\\" aria-label=\\"kitura api documentation permalink\\" class=\\"anchor\\"><svg aria-hidden=\\"true\\" focusable=\\"false\\" height=\\"16\\" version=\\"1.1\\" viewBox=\\"0 0 16 16\\" width=\\"16\\"><path fill-rule=\\"evenodd\\" d=\\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\\"></path></svg></a>Kitura API Documentation</h1>\\n<h2 id=\\"contents\\"><a href=\\"#contents\\" aria-label=\\"contents permalink\\" class=\\"anchor\\"><svg aria-hidden=\\"true\\" focusable=\\"false\\" height=\\"16\\" version=\\"1.1\\" viewBox=\\"0 0 16 16\\" width=\\"16\\"><path fill-rule=\\"evenodd\\" d=\\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\\"></path></svg></a>Contents</h2>\\n<ul>\\n<li><a href=\\"#kitura\\">Kitura</a></li>\\n<li><a href=\\"#http-client\\">HTTP Client</a></li>\\n<li><a href=\\"#sessions\\">Sessions</a></li>\\n<li><a href=\\"#authentication\\">Authentication</a></li>\\n<li><a href=\\"#web-templating\\">Web Templating</a></li>\\n<li><a href=\\"#sql-databases\\">SQL Databases</a></li>\\n<li><a href=\\"#non-sql-databases\\">Non-SQL Databases</a></li>\\n<li><a href=\\"#cloud-integration\\">Cloud Integration</a></li>\\n<li><a href=\\"#middlewares\\">Middlewares</a></li>\\n<li><a href=\\"#cryptography\\">Cryptography</a></li>\\n<li><a href=\\"#email\\">Email</a></li>\\n</ul>","frontmatter":{"path":"/docs/api/packages","title":"Kitura Packages"}}},{"node":{"html":"<h2 id=\\"non-sql-databases\\"><a href=\\"#non-sql-databases\\" aria-label=\\"non sql databases permalink\\" class=\\"anchor\\"><svg aria-hidden=\\"true\\" focusable=\\"false\\" height=\\"16\\" version=\\"1.1\\" viewBox=\\"0 0 16 16\\" width=\\"16\\"><path fill-rule=\\"evenodd\\" d=\\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\\"></path></svg></a>Non-SQL Databases</h2>\\n<p> Connect your Kitura app to a No-SQL database.</p>\\n<table>\\n<thead>\\n<tr>\\n<th>Package</th>\\n<th>Description</th>\\n<th>API Documentation</th>\\n</tr>\\n</thead>\\n<tbody>\\n<tr>\\n<td><a href=\\"https://github.com/IBM-Swift/Kitura-CouchDB\\">Kitura-CouchDB</a></td>\\n<td>SDK for connecting to Apache CouchDB and Cloudant.</td>\\n<td><a href=\\"https://ibm-swift.github.io/Kitura-CouchDB/\\">API</a></td>\\n</tr>\\n<tr>\\n<td><a href=\\"https://github.com/IBM-Swift/Kitura-Redis\\">Kitura-Redis</a></td>\\n<td>SDK for connecting to Redis key/value datastore.</td>\\n<td><a href=\\"https://ibm-swift.github.io/Kitura-redis/\\">API</a></td>\\n</tr>\\n</tbody>\\n</table>","frontmatter":{"path":"/docs/api/non-sql-databases","title":"What is Authentication?"}}},{"node":{"html":"<h2 id=\\"sessions\\"><a href=\\"#sessions\\" aria-label=\\"sessions permalink\\" class=\\"anchor\\"><svg aria-hidden=\\"true\\" focusable=\\"false\\" height=\\"16\\" version=\\"1.1\\" viewBox=\\"0 0 16 16\\" width=\\"16\\"><path fill-rule=\\"evenodd\\" d=\\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\\"></path></svg></a>Sessions</h2>\\n<p> Persist user state between requests.</p>\\n<table>\\n<thead>\\n<tr>\\n<th>Package</th>\\n<th>Description</th>\\n<th>API Documentation</th>\\n</tr>\\n</thead>\\n<tbody>\\n<tr>\\n<td><a href=\\"https://github.com/IBM-Swift/Kitura-Session\\">Kitura-Session</a></td>\\n<td>Manage user state between requests, in memory.</td>\\n<td><a href=\\"https://ibm-swift.github.io/Kitura-Session/\\">API</a></td>\\n</tr>\\n<tr>\\n<td><a href=\\"https://github.com/IBM-Swift/Kitura-Session-Redis\\">Kitura-Session-Redis</a></td>\\n<td>Manage user state between requests, using a Redis data store.</td>\\n<td><a href=\\"https://ibm-swift.github.io/Kitura-Session-Redis/\\">API</a></td>\\n</tr>\\n</tbody>\\n</table>","frontmatter":{"path":"/docs/api/sessions","title":"What is Authentication?"}}},{"node":{"html":"<h2 id=\\"sql-databases\\"><a href=\\"#sql-databases\\" aria-label=\\"sql databases permalink\\" class=\\"anchor\\"><svg aria-hidden=\\"true\\" focusable=\\"false\\" height=\\"16\\" version=\\"1.1\\" viewBox=\\"0 0 16 16\\" width=\\"16\\"><path fill-rule=\\"evenodd\\" d=\\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\\"></path></svg></a>SQL Databases</h2>\\n<p> Connect your Kitura app to a relational database.</p>\\n<table>\\n<thead>\\n<tr>\\n<th>Package</th>\\n<th>Description</th>\\n<th>API Documentation</th>\\n</tr>\\n</thead>\\n<tbody>\\n<tr>\\n<td><a href=\\"https://github.com/IBM-Swift/Swift-Kuery-ORM\\">Swift-Kuery-ORM</a></td>\\n<td>Kitura\'s Object Relational Mapper (ORM).</td>\\n<td><a href=\\"https://ibm-swift.github.io/Swift-Kuery-ORM/\\">API</a></td>\\n</tr>\\n<tr>\\n<td><a href=\\"https://github.com/IBM-Swift/Swift-Kuery\\">Swift-Kuery</a></td>\\n<td>SQL database abstraction. Use this together with a database plugin if you do not wish to use an ORM.</td>\\n<td><a href=\\"https://ibm-swift.github.io/Swift-Kuery/\\">API</a></td>\\n</tr>\\n<tr>\\n<td><a href=\\"https://github.com/IBM-Swift/SwiftKueryMySQL\\">SwiftKueryMySQL</a></td>\\n<td>Plugin for Swift-Kuery which uses MySQL.</td>\\n<td><a href=\\"https://ibm-swift.github.io/SwiftKueryMySQL/\\">API</a></td>\\n</tr>\\n<tr>\\n<td><a href=\\"https://github.com/IBM-Swift/Swift-Kuery-PostgreSQL\\">Swift-Kuery-PostgreSQL</a></td>\\n<td>Plugin for Swift-Kuery which uses PostgreSQL.</td>\\n<td><a href=\\"https://ibm-swift.github.io/Swift-Kuery-PostgreSQL/\\">API</a></td>\\n</tr>\\n<tr>\\n<td><a href=\\"https://github.com/IBM-Swift/Swift-Kuery-SQLite\\">Swift-Kuery-SQLite</a></td>\\n<td>Plugin for Swift-Kuery which uses SQLite.</td>\\n<td><a href=\\"https://ibm-swift.github.io/Swift-Kuery-SQLite/\\">API</a></td>\\n</tr>\\n</tbody>\\n</table>","frontmatter":{"path":"/docs/api/sql-databases","title":"What is Authentication?"}}},{"node":{"html":"<h2 id=\\"web-templating\\"><a href=\\"#web-templating\\" aria-label=\\"web templating permalink\\" class=\\"anchor\\"><svg aria-hidden=\\"true\\" focusable=\\"false\\" height=\\"16\\" version=\\"1.1\\" viewBox=\\"0 0 16 16\\" width=\\"16\\"><path fill-rule=\\"evenodd\\" d=\\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\\"></path></svg></a>Web Templating</h2>\\n<p> Create websites in Kitura.</p>\\n<table>\\n<thead>\\n<tr>\\n<th>Package</th>\\n<th>Description</th>\\n<th>API Documentation</th>\\n</tr>\\n</thead>\\n<tbody>\\n<tr>\\n<td><a href=\\"https://github.com/IBM-Swift/Kitura-TemplateEngine\\">Kitura-TemplateEngine</a></td>\\n<td>Main templating framework. Use this together with a suitable plugin.</td>\\n<td><a href=\\"https://ibm-swift.github.io/Kitura-TemplateEngine/\\">API</a></td>\\n</tr>\\n<tr>\\n<td><a href=\\"https://github.com/IBM-Swift/Kitura-StencilTemplateEngine\\">KituraKit-StencilTemplateEngine</a></td>\\n<td>Plugin for Kitura-TemplateEngine which uses Stencil templating.</td>\\n<td><a href=\\"https://ibm-swift.github.io/Kitura-StencilTemplateEngine/\\">API</a></td>\\n</tr>\\n<tr>\\n<td><a href=\\"https://github.com/IBM-Swift/Kitura-Markdown\\">Kitura-Markdown</a></td>\\n<td>Plugin for Kitura-TemplateEngine which uses Markdown templating.</td>\\n<td><a href=\\"https://ibm-swift.github.io/Kitura-Markdown/\\">API</a></td>\\n</tr>\\n<tr>\\n<td><a href=\\"https://github.com/IBM-Swift/Kitura-MustacheTemplateEngine\\">Kitura-MustacheTemplateEngine</a></td>\\n<td>Plugin for Kitura-TemplateEngine which uses Mustache templating.</td>\\n<td><a href=\\"https://ibm-swift.github.io/Kitura-MustacheTemplateEngine/\\">API</a></td>\\n</tr>\\n<tr>\\n<td><a href=\\"https://github.com/IBM-Swift/swift-html-entities\\">swift-html-entities</a></td>\\n<td>HTML5 character encoder/decoder.</td>\\n<td><a href=\\"https://ibm-swift.github.io/swift-html-entities/\\">API</a></td>\\n</tr>\\n</tbody>\\n</table>","frontmatter":{"path":"/docs/api/web-templating","title":"What is Authentication?"}}},{"node":{"html":"<h1 id=\\"what-is-authentication\\"><a href=\\"#what-is-authentication\\" aria-label=\\"what is authentication permalink\\" class=\\"anchor\\"><svg aria-hidden=\\"true\\" focusable=\\"false\\" height=\\"16\\" version=\\"1.1\\" viewBox=\\"0 0 16 16\\" width=\\"16\\"><path fill-rule=\\"evenodd\\" d=\\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\\"></path></svg></a>What is Authentication?</h1>\\n<p>Authentication is the process of confirming a user’s identity. The user provides credentials, such as a username and password, and these credentials are verified to confirm the user is who they claim to be. Once a user is authenticated, you can provide personalized content, or authorize them to access resources that are not available to everyone.</p>\\n<p>Authentication is all around us, anyone who has an account online has to step through authentication procedures each time they login. Even handheld devices use authentication, such as a passcode, or Touch ID and even Face ID. In each case the aim is the same: \\"Is this person who they claim to be?\\".</p>\\n<p>Kitura supports various types of authentication:</p>\\n<h2 id=\\"basic-authentication\\"><a href=\\"#basic-authentication\\" aria-label=\\"basic authentication permalink\\" class=\\"anchor\\"><svg aria-hidden=\\"true\\" focusable=\\"false\\" height=\\"16\\" version=\\"1.1\\" viewBox=\\"0 0 16 16\\" width=\\"16\\"><path fill-rule=\\"evenodd\\" d=\\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\\"></path></svg></a>Basic Authentication</h2>\\n<p>The \\"Basic\\" HTTP authentication scheme is defined in <a href=\\"https://tools.ietf.org/html/rfc7617\\">RFC 7617</a> and transmits credentials as user ID/password pairs, encoded using Base64. The username and password are passed in plain text via the HTTP authorization header:</p>\\n<div class=\\"gatsby-highlight\\" data-language=\\"swift\\"><pre class=\\"language-swift\\"><code class=\\"language-swift\\"><span class=\\"token builtin\\">Authorization</span><span class=\\"token punctuation\\">:</span> <span class=\\"token builtin\\">Basic</span> <span class=\\"token operator\\">&lt;</span><span class=\\"token string\\">\\"username:password\\"</span><span class=\\"token punctuation\\">.</span><span class=\\"token function\\">Base64Encoded</span><span class=\\"token punctuation\\">(</span><span class=\\"token punctuation\\">)</span><span class=\\"token operator\\">></span></code></pre></div>\\n<p>Since the password is not encrypted, this authentication scheme must be used with HTTPS.</p>\\n<p>This is the simplest authentication scheme, however it requires the user to authenticate their credentials with every request and no additional information about the user may be provided during authentication.</p>\\n<p>Kitura supports basic authentication via the <a href=\\"https://github.com/IBM-Swift/Kitura-CredentialsHTTP\\">Kitura-CredentialsHTTP</a> library.</p>\\n<h2 id=\\"json-web-tokens\\"><a href=\\"#json-web-tokens\\" aria-label=\\"json web tokens permalink\\" class=\\"anchor\\"><svg aria-hidden=\\"true\\" focusable=\\"false\\" height=\\"16\\" version=\\"1.1\\" viewBox=\\"0 0 16 16\\" width=\\"16\\"><path fill-rule=\\"evenodd\\" d=\\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\\"></path></svg></a>JSON Web Tokens</h2>\\n<p>A JSON Web Token (JWT) defines a compact and self-contained way for securely transmitting information between parties as a JSON object. You can use a JWT to implement a Single Sign On system, whereby a user logs in once and each subsequent request will include the JWT. This allows the user to access routes, services, and resources that are permitted with that token, without having to authenticate each time.</p>\\n<p>Kitura supports JWTs via the <a href=\\"https://github.com/IBM-Swift/Swift-JWT\\">Swift-JWT</a> library.</p>\\n<h2 id=\\"oauth-20-authentication\\"><a href=\\"#oauth-20-authentication\\" aria-label=\\"oauth 20 authentication permalink\\" class=\\"anchor\\"><svg aria-hidden=\\"true\\" focusable=\\"false\\" height=\\"16\\" version=\\"1.1\\" viewBox=\\"0 0 16 16\\" width=\\"16\\"><path fill-rule=\\"evenodd\\" d=\\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\\"></path></svg></a>OAuth 2.0 Authentication</h2>\\n<p>OAuth 2.0 is an authorization framework that enables you to authenticate a user via a trusted third party, such as Google or Facebook. Because the authentication is delegated to a trusted provider, the user does not have to create, or provide, a username and password to use your service. Once a user is authenticated, they are kept logged in with cookies via a session.</p>\\n<p>Kitura currently supports OAuth 2.0 with the following services:</p>\\n<ul>\\n<li>Facebook with <a href=\\"https://github.com/IBM-Swift/Kitura-CredentialsFacebook\\">Kitura-CredentialsFacebook</a></li>\\n<li>Github with <a href=\\"https://github.com/IBM-Swift/Kitura-CredentialsGitHub\\">Kitura-CredentialsGithub</a></li>\\n<li>Google with <a href=\\"https://github.com/IBM-Swift/Kitura-CredentialsGoogle\\">Kitura-CredentialsGoogle</a></li>\\n<li>Twitter with <a href=\\"https://github.com/jacobvanorder/Kitura-CredentialsTwitter\\">Kitura-CredentialsTwitter</a> (Third party implemented.)</li>\\n</ul>\\n<hr>\\n<h2 id=\\"next-steps\\"><a href=\\"#next-steps\\" aria-label=\\"next steps permalink\\" class=\\"anchor\\"><svg aria-hidden=\\"true\\" focusable=\\"false\\" height=\\"16\\" version=\\"1.1\\" viewBox=\\"0 0 16 16\\" width=\\"16\\"><path fill-rule=\\"evenodd\\" d=\\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\\"></path></svg></a>Next Steps</h2>\\n<p><a href=\\"./basic-authentication\\">Basic authentication guide</a>: Learn how to add basic authentication to codable routes.</p>\\n<p><a href=\\"./jwt\\">JSON web tokens guide</a>: Learn how to use JWTs to implement single sign-on authentication on your Kitura routes.</p>\\n<p><a href=\\"./oauth2\\">OAuth 2.0 Authentication</a>: Learn how to add OAuth 2.0 authentication with Facebook or Google to your Kitura routes.</p>","frontmatter":{"path":"/docs/authentication/what-is-authentication","title":"What is Authentication?"}}},{"node":{"html":"<h1 id=\\"http-basic-authentication-with-codable-routes\\"><a href=\\"#http-basic-authentication-with-codable-routes\\" aria-label=\\"http basic authentication with codable routes permalink\\" class=\\"anchor\\"><svg aria-hidden=\\"true\\" focusable=\\"false\\" height=\\"16\\" version=\\"1.1\\" viewBox=\\"0 0 16 16\\" width=\\"16\\"><path fill-rule=\\"evenodd\\" d=\\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\\"></path></svg></a>HTTP Basic Authentication with Codable routes</h1>\\n<p>Authentication is the process of confirming a user’s identity, usually via a username and password. Authentication ensures that the user is allowed access to the secured system.</p>\\n<p>In this guide, we use <a href=\\"https://github.com/IBM-Swift/Kitura-CredentialsHTTP\\">Kitura-CredentialsHTTP</a> to add HTTP basic authentication to Codable routes.</p>\\n<hr>\\n<h2 id=\\"step-1-define-the-authentication-middleware\\"><a href=\\"#step-1-define-the-authentication-middleware\\" aria-label=\\"step 1 define the authentication middleware permalink\\" class=\\"anchor\\"><svg aria-hidden=\\"true\\" focusable=\\"false\\" height=\\"16\\" version=\\"1.1\\" viewBox=\\"0 0 16 16\\" width=\\"16\\"><path fill-rule=\\"evenodd\\" d=\\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\\"></path></svg></a>Step 1: Define the authentication middleware</h2>\\n<p>To add basic authentication to our server, we need to <a href=\\"https://github.com/IBM-Swift/Kitura-CredentialsHTTP#add-dependencies\\">add Kitura-CredentialsHTTP to our dependencies</a>.</p>\\n<blockquote>\\n<p>If you don\'t have a server, follow our <a href=\\"../getting-started/create-server-cli\\">Create a server</a> guide.</p>\\n</blockquote>\\n<p>Next, we will define a <code class=\\"language-text\\">TypeSafeMiddleware</code> which conforms to <code class=\\"language-text\\">TypeSafeHTTPBasic</code>.</p>\\n<p>This will be initialized when our route is successfully authenticated and we will be able to access the authenticated user\'s id within our Codable route.</p>\\n<p>If you don\'t already have one, create a <code class=\\"language-text\\">Middlewares</code> folder:</p>\\n<div class=\\"gatsby-highlight\\" data-language=\\"text\\"><pre class=\\"language-text\\"><code class=\\"language-text\\">mkdir Sources/Application/Middlewares</code></pre></div>\\n<p>Create a new file, called <code class=\\"language-text\\">MyBasicAuth.swift</code>:</p>\\n<div class=\\"gatsby-highlight\\" data-language=\\"text\\"><pre class=\\"language-text\\"><code class=\\"language-text\\">touch Sources/Application/Middlewares/MyBasicAuth.swift</code></pre></div>\\n<p>Open your <code class=\\"language-text\\">MyBasicAuth.swift</code> file:</p>\\n<div class=\\"gatsby-highlight\\" data-language=\\"text\\"><pre class=\\"language-text\\"><code class=\\"language-text\\">open Sources/Application/Middlewares/MyBasicAuth.swift</code></pre></div>\\n<p>Inside this file, define your <code class=\\"language-text\\">MyBasicAuth</code> struct:</p>\\n<div class=\\"gatsby-highlight\\" data-language=\\"swift\\"><pre class=\\"language-swift\\"><code class=\\"language-swift\\"><span class=\\"token keyword\\">import</span> <span class=\\"token builtin\\">Credentials</span>\\n<span class=\\"token keyword\\">import</span> <span class=\\"token builtin\\">CredentialsHTTP</span>\\n<span class=\\"token keyword\\">import</span> <span class=\\"token builtin\\">LoggerAPI</span>\\n\\n<span class=\\"token keyword\\">public</span> <span class=\\"token keyword\\">struct</span> <span class=\\"token builtin\\">MyBasicAuth</span><span class=\\"token punctuation\\">:</span> <span class=\\"token builtin\\">TypeSafeHTTPBasic</span> <span class=\\"token punctuation\\">{</span>\\n\\n<span class=\\"token punctuation\\">}</span></code></pre></div>\\n<p>If you\'re using Xcode it should display the message: Type \'MyBasicAuth\' does not conform to protocol \'TypeSafeCredentials\'</p>\\n<p>Click \\"Fix\\" to autogenerate the stubs for <code class=\\"language-text\\">verifyPassword</code> and <code class=\\"language-text\\">id</code>:</p>\\n<div class=\\"gatsby-highlight\\" data-language=\\"swift\\"><pre class=\\"language-swift\\"><code class=\\"language-swift\\"><span class=\\"token keyword\\">public</span> <span class=\\"token keyword\\">static</span> <span class=\\"token keyword\\">func</span> <span class=\\"token function\\">verifyPassword</span><span class=\\"token punctuation\\">(</span>username<span class=\\"token punctuation\\">:</span> <span class=\\"token builtin\\">String</span><span class=\\"token punctuation\\">,</span> password<span class=\\"token punctuation\\">:</span> <span class=\\"token builtin\\">String</span><span class=\\"token punctuation\\">,</span> callback<span class=\\"token punctuation\\">:</span> @escaping <span class=\\"token punctuation\\">(</span><span class=\\"token builtin\\">MyBasicAuth</span><span class=\\"token operator\\">?</span><span class=\\"token punctuation\\">)</span> <span class=\\"token operator\\">-</span><span class=\\"token operator\\">></span> <span class=\\"token builtin\\">Void</span><span class=\\"token punctuation\\">)</span> <span class=\\"token punctuation\\">{</span>\\n\\n<span class=\\"token punctuation\\">}</span>\\n\\n<span class=\\"token keyword\\">public</span> <span class=\\"token keyword\\">var</span> id<span class=\\"token punctuation\\">:</span> <span class=\\"token builtin\\">String</span></code></pre></div>\\n<p>Inside MyBasicAuth, add an authentication dictionary:</p>\\n<div class=\\"gatsby-highlight\\" data-language=\\"swift\\"><pre class=\\"language-swift\\"><code class=\\"language-swift\\"><span class=\\"token keyword\\">public</span> <span class=\\"token keyword\\">static</span> <span class=\\"token keyword\\">let</span> authenticate <span class=\\"token operator\\">=</span> <span class=\\"token punctuation\\">[</span><span class=\\"token string\\">\\"username\\"</span> <span class=\\"token punctuation\\">:</span> <span class=\\"token string\\">\\"password\\"</span><span class=\\"token punctuation\\">]</span></code></pre></div>\\n<blockquote>\\n<p>In a real project, never store passwords in plain text!</p>\\n</blockquote>\\n<p>The function, verifyPassword, takes a username and password and, on success, returns a <code class=\\"language-text\\">MyBasicAuth</code> instance.</p>\\n<p>We want to check if the password matches the user\'s stored password. On successful match, we initialize MyBasicAuth with an id equal to username.</p>\\n<div class=\\"gatsby-highlight\\" data-language=\\"swift\\"><pre class=\\"language-swift\\"><code class=\\"language-swift\\"><span class=\\"token keyword\\">if</span> <span class=\\"token keyword\\">let</span> storedPassword <span class=\\"token operator\\">=</span> authenticate<span class=\\"token punctuation\\">[</span>username<span class=\\"token punctuation\\">]</span><span class=\\"token punctuation\\">,</span> storedPassword <span class=\\"token operator\\">==</span> password <span class=\\"token punctuation\\">{</span>\\n    <span class=\\"token keyword\\">return</span> <span class=\\"token function\\">callback</span><span class=\\"token punctuation\\">(</span><span class=\\"token function\\">MyBasicAuth</span><span class=\\"token punctuation\\">(</span>id<span class=\\"token punctuation\\">:</span> username<span class=\\"token punctuation\\">)</span><span class=\\"token punctuation\\">)</span>\\n<span class=\\"token punctuation\\">}</span>\\n<span class=\\"token function\\">callback</span><span class=\\"token punctuation\\">(</span><span class=\\"token constant\\">nil</span><span class=\\"token punctuation\\">)</span></code></pre></div>\\n<p>This function is async, so that we can perform async actions to verify the password, e.g. looking up the username and password in a database.</p>\\n<p>We must call the callback closure with either an instance of Self or nil before exiting verifyPassword.</p>\\n<p>If we do not, the server will not know to continue and we will recieve a 503 \\"Service Unavailable\\" error, when we call the route.</p>\\n<p>Our completed struct should now look as follows:</p>\\n<div class=\\"gatsby-highlight\\" data-language=\\"swift\\"><pre class=\\"language-swift\\"><code class=\\"language-swift\\"><span class=\\"token keyword\\">public</span> <span class=\\"token keyword\\">struct</span> <span class=\\"token builtin\\">MyBasicAuth</span><span class=\\"token punctuation\\">:</span> <span class=\\"token builtin\\">TypeSafeHTTPBasic</span> <span class=\\"token punctuation\\">{</span>\\n\\n    <span class=\\"token keyword\\">public</span> <span class=\\"token keyword\\">static</span> <span class=\\"token keyword\\">let</span> authenticate <span class=\\"token operator\\">=</span> <span class=\\"token punctuation\\">[</span><span class=\\"token string\\">\\"username\\"</span> <span class=\\"token punctuation\\">:</span> <span class=\\"token string\\">\\"password\\"</span><span class=\\"token punctuation\\">]</span>\\n\\n    <span class=\\"token keyword\\">public</span> <span class=\\"token keyword\\">static</span> <span class=\\"token keyword\\">func</span> <span class=\\"token function\\">verifyPassword</span><span class=\\"token punctuation\\">(</span>username<span class=\\"token punctuation\\">:</span> <span class=\\"token builtin\\">String</span><span class=\\"token punctuation\\">,</span> password<span class=\\"token punctuation\\">:</span> <span class=\\"token builtin\\">String</span><span class=\\"token punctuation\\">,</span> callback<span class=\\"token punctuation\\">:</span> @escaping <span class=\\"token punctuation\\">(</span><span class=\\"token builtin\\">MyBasicAuth</span><span class=\\"token operator\\">?</span><span class=\\"token punctuation\\">)</span> <span class=\\"token operator\\">-</span><span class=\\"token operator\\">></span> <span class=\\"token builtin\\">Void</span><span class=\\"token punctuation\\">)</span> <span class=\\"token punctuation\\">{</span>\\n        <span class=\\"token keyword\\">if</span> <span class=\\"token keyword\\">let</span> storedPassword <span class=\\"token operator\\">=</span> authenticate<span class=\\"token punctuation\\">[</span>username<span class=\\"token punctuation\\">]</span><span class=\\"token punctuation\\">,</span> storedPassword <span class=\\"token operator\\">==</span> password <span class=\\"token punctuation\\">{</span>\\n            <span class=\\"token keyword\\">return</span> <span class=\\"token function\\">callback</span><span class=\\"token punctuation\\">(</span><span class=\\"token function\\">MyBasicAuth</span><span class=\\"token punctuation\\">(</span>id<span class=\\"token punctuation\\">:</span> username<span class=\\"token punctuation\\">)</span><span class=\\"token punctuation\\">)</span>\\n        <span class=\\"token punctuation\\">}</span>\\n        <span class=\\"token function\\">callback</span><span class=\\"token punctuation\\">(</span><span class=\\"token constant\\">nil</span><span class=\\"token punctuation\\">)</span>\\n    <span class=\\"token punctuation\\">}</span>\\n\\n    <span class=\\"token keyword\\">public</span> <span class=\\"token keyword\\">var</span> id<span class=\\"token punctuation\\">:</span> <span class=\\"token builtin\\">String</span>\\n<span class=\\"token punctuation\\">}</span></code></pre></div>\\n<hr>\\n<h2 id=\\"step-2-create-your-authentication-routes\\"><a href=\\"#step-2-create-your-authentication-routes\\" aria-label=\\"step 2 create your authentication routes permalink\\" class=\\"anchor\\"><svg aria-hidden=\\"true\\" focusable=\\"false\\" height=\\"16\\" version=\\"1.1\\" viewBox=\\"0 0 16 16\\" width=\\"16\\"><path fill-rule=\\"evenodd\\" d=\\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\\"></path></svg></a>Step 2: Create your authentication routes</h2>\\n<p>Firstly, open your <code class=\\"language-text\\">Application.swift</code> file in your default text editor:</p>\\n<div class=\\"gatsby-highlight\\" data-language=\\"text\\"><pre class=\\"language-text\\"><code class=\\"language-text\\">open Sources/Application/Application.swift</code></pre></div>\\n<p>Inside the <code class=\\"language-text\\">postInit()</code> function add:</p>\\n<div class=\\"gatsby-highlight\\" data-language=\\"swift\\"><pre class=\\"language-swift\\"><code class=\\"language-swift\\"><span class=\\"token function\\">initializeTypeSafeAuthRoutes</span><span class=\\"token punctuation\\">(</span>app<span class=\\"token punctuation\\">:</span> <span class=\\"token keyword\\">self</span><span class=\\"token punctuation\\">)</span></code></pre></div>\\n<p>Next, create a new file, called <code class=\\"language-text\\">TypeSafeAuthRoutes.swift</code>, to contain the code for our routes:</p>\\n<div class=\\"gatsby-highlight\\" data-language=\\"text\\"><pre class=\\"language-text\\"><code class=\\"language-text\\">touch Sources/Application/Routes/TypeSafeAuthRoutes.swift</code></pre></div>\\n<p>Open your <code class=\\"language-text\\">TypeSafeAuthRoutes.swift</code> file:</p>\\n<div class=\\"gatsby-highlight\\" data-language=\\"text\\"><pre class=\\"language-text\\"><code class=\\"language-text\\">open Sources/Application/Routes/TypeSafeAuthRoutes.swift</code></pre></div>\\n<p>Inside this file, add the framework for our routes code:</p>\\n<div class=\\"gatsby-highlight\\" data-language=\\"swift\\"><pre class=\\"language-swift\\"><code class=\\"language-swift\\"><span class=\\"token keyword\\">import</span> <span class=\\"token builtin\\">KituraContracts</span>\\n<span class=\\"token keyword\\">import</span> <span class=\\"token builtin\\">Credentials</span>\\n<span class=\\"token keyword\\">import</span> <span class=\\"token builtin\\">CredentialsHTTP</span>\\n<span class=\\"token keyword\\">import</span> <span class=\\"token builtin\\">LoggerAPI</span>\\n\\n<span class=\\"token keyword\\">func</span> <span class=\\"token function\\">initializeTypeSafeAuthRoutes</span><span class=\\"token punctuation\\">(</span>app<span class=\\"token punctuation\\">:</span> <span class=\\"token builtin\\">App</span><span class=\\"token punctuation\\">)</span> <span class=\\"token punctuation\\">{</span>\\n    app<span class=\\"token punctuation\\">.</span>router<span class=\\"token punctuation\\">.</span><span class=\\"token keyword\\">get</span><span class=\\"token punctuation\\">(</span><span class=\\"token string\\">\\"/basic\\"</span><span class=\\"token punctuation\\">,</span> handler<span class=\\"token punctuation\\">:</span> app<span class=\\"token punctuation\\">.</span>protectedGetHandler<span class=\\"token punctuation\\">)</span>\\n<span class=\\"token punctuation\\">}</span>\\n\\n<span class=\\"token keyword\\">extension</span> <span class=\\"token builtin\\">App</span> <span class=\\"token punctuation\\">{</span>\\n    <span class=\\"token comment\\">// Define handlers here</span>\\n<span class=\\"token punctuation\\">}</span></code></pre></div>\\n<p>In this guide, we will have a single route <code class=\\"language-text\\">GET</code> route. This route will only return a book to a user who has authenticated using HTTP basic authentication.</p>\\n<hr>\\n<h2 id=\\"step-3-using-typesafehttpbasic-in-a-route\\"><a href=\\"#step-3-using-typesafehttpbasic-in-a-route\\" aria-label=\\"step 3 using typesafehttpbasic in a route permalink\\" class=\\"anchor\\"><svg aria-hidden=\\"true\\" focusable=\\"false\\" height=\\"16\\" version=\\"1.1\\" viewBox=\\"0 0 16 16\\" width=\\"16\\"><path fill-rule=\\"evenodd\\" d=\\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\\"></path></svg></a>Step 3: Using TypeSafeHTTPBasic in a route</h2>\\n<p>Underneath our other Codable routes we will add:</p>\\n<div class=\\"gatsby-highlight\\" data-language=\\"swift\\"><pre class=\\"language-swift\\"><code class=\\"language-swift\\"><span class=\\"token keyword\\">func</span> <span class=\\"token function\\">protectedGetHandler</span><span class=\\"token punctuation\\">(</span>user<span class=\\"token punctuation\\">:</span> <span class=\\"token builtin\\">MyBasicAuth</span><span class=\\"token punctuation\\">,</span> respondWith<span class=\\"token punctuation\\">:</span> <span class=\\"token punctuation\\">(</span><span class=\\"token builtin\\">Book</span><span class=\\"token operator\\">?</span><span class=\\"token punctuation\\">,</span> <span class=\\"token builtin\\">RequestError</span><span class=\\"token operator\\">?</span><span class=\\"token punctuation\\">)</span> <span class=\\"token operator\\">-</span><span class=\\"token operator\\">></span> <span class=\\"token builtin\\">Void</span><span class=\\"token punctuation\\">)</span> <span class=\\"token punctuation\\">{</span>\\n\\n<span class=\\"token punctuation\\">}</span></code></pre></div>\\n<blockquote>\\n<p>This route is returning the <a href=\\"/docs/routing/what-is-routing#codable-model\\">Book model from the routing guide</a>, however you could use any Codable type.</p>\\n</blockquote>\\n<p>We have registered <code class=\\"language-text\\">MyBasicAuth</code> on our handler by adding it to the signature.</p>\\n<p>When the handler is called the middleware and the request is authenticated.</p>\\n<p>Within <code class=\\"language-text\\">protectedGetHandler</code>, we can then interact with our authenticated user:</p>\\n<div class=\\"gatsby-highlight\\" data-language=\\"swift\\"><pre class=\\"language-swift\\"><code class=\\"language-swift\\"><span class=\\"token builtin\\">Log</span><span class=\\"token punctuation\\">.</span><span class=\\"token function\\">info</span><span class=\\"token punctuation\\">(</span><span class=\\"token string\\">\\"authenticated: <span class=\\"token interpolation\\"><span class=\\"token delimiter variable\\">\\\\(</span>user<span class=\\"token punctuation\\">.</span>id<span class=\\"token delimiter variable\\">)</span></span>\\"</span><span class=\\"token punctuation\\">)</span>\\n<span class=\\"token keyword\\">let</span> secretBook <span class=\\"token operator\\">=</span> <span class=\\"token function\\">Book</span><span class=\\"token punctuation\\">(</span>id<span class=\\"token punctuation\\">:</span> <span class=\\"token number\\">451</span><span class=\\"token punctuation\\">,</span> title<span class=\\"token punctuation\\">:</span> <span class=\\"token string\\">\\"1984\\"</span><span class=\\"token punctuation\\">,</span> price<span class=\\"token punctuation\\">:</span> <span class=\\"token number\\">9001</span><span class=\\"token punctuation\\">,</span> genre<span class=\\"token punctuation\\">:</span> <span class=\\"token string\\">\\"Science Fiction\\"</span><span class=\\"token punctuation\\">)</span>\\n<span class=\\"token function\\">respondWith</span><span class=\\"token punctuation\\">(</span>secretBook<span class=\\"token punctuation\\">,</span> <span class=\\"token constant\\">nil</span><span class=\\"token punctuation\\">)</span></code></pre></div>\\n<p>That\'s it! We\'ve implemented HTTP basic authentication of a Codable route.</p>\\n<p>Your completed <code class=\\"language-text\\">TypeSafeAuthRoutes.swift</code> should now look as follows:</p>\\n<div class=\\"gatsby-highlight\\" data-language=\\"swift\\"><pre class=\\"language-swift\\"><code class=\\"language-swift\\"><span class=\\"token keyword\\">import</span> <span class=\\"token builtin\\">KituraContracts</span>\\n<span class=\\"token keyword\\">import</span> <span class=\\"token builtin\\">Credentials</span>\\n<span class=\\"token keyword\\">import</span> <span class=\\"token builtin\\">CredentialsHTTP</span>\\n<span class=\\"token keyword\\">import</span> <span class=\\"token builtin\\">LoggerAPI</span>\\n\\n<span class=\\"token keyword\\">func</span> <span class=\\"token function\\">initializeTypeSafeAuthRoutes</span><span class=\\"token punctuation\\">(</span>app<span class=\\"token punctuation\\">:</span> <span class=\\"token builtin\\">App</span><span class=\\"token punctuation\\">)</span> <span class=\\"token punctuation\\">{</span>\\n    app<span class=\\"token punctuation\\">.</span>router<span class=\\"token punctuation\\">.</span><span class=\\"token keyword\\">get</span><span class=\\"token punctuation\\">(</span><span class=\\"token string\\">\\"/basic\\"</span><span class=\\"token punctuation\\">,</span> handler<span class=\\"token punctuation\\">:</span> app<span class=\\"token punctuation\\">.</span>protectedGetHandler<span class=\\"token punctuation\\">)</span>\\n<span class=\\"token punctuation\\">}</span>\\n\\n<span class=\\"token keyword\\">extension</span> <span class=\\"token builtin\\">App</span> <span class=\\"token punctuation\\">{</span>\\n    <span class=\\"token keyword\\">func</span> <span class=\\"token function\\">protectedGetHandler</span><span class=\\"token punctuation\\">(</span>user<span class=\\"token punctuation\\">:</span> <span class=\\"token builtin\\">MyBasicAuth</span><span class=\\"token punctuation\\">,</span> respondWith<span class=\\"token punctuation\\">:</span> <span class=\\"token punctuation\\">(</span><span class=\\"token builtin\\">Book</span><span class=\\"token operator\\">?</span><span class=\\"token punctuation\\">,</span> <span class=\\"token builtin\\">RequestError</span><span class=\\"token operator\\">?</span><span class=\\"token punctuation\\">)</span> <span class=\\"token operator\\">-</span><span class=\\"token operator\\">></span> <span class=\\"token builtin\\">Void</span><span class=\\"token punctuation\\">)</span> <span class=\\"token punctuation\\">{</span>\\n        <span class=\\"token builtin\\">Log</span><span class=\\"token punctuation\\">.</span><span class=\\"token function\\">info</span><span class=\\"token punctuation\\">(</span><span class=\\"token string\\">\\"authenticated <span class=\\"token interpolation\\"><span class=\\"token delimiter variable\\">\\\\(</span>user<span class=\\"token punctuation\\">.</span>id<span class=\\"token delimiter variable\\">)</span></span>\\"</span><span class=\\"token punctuation\\">)</span>\\n        <span class=\\"token keyword\\">let</span> secretBook <span class=\\"token operator\\">=</span> <span class=\\"token function\\">Book</span><span class=\\"token punctuation\\">(</span>id<span class=\\"token punctuation\\">:</span> <span class=\\"token number\\">451</span><span class=\\"token punctuation\\">,</span> title<span class=\\"token punctuation\\">:</span> <span class=\\"token string\\">\\"1984\\"</span><span class=\\"token punctuation\\">,</span> price<span class=\\"token punctuation\\">:</span> <span class=\\"token number\\">9001</span><span class=\\"token punctuation\\">,</span> genre<span class=\\"token punctuation\\">:</span> <span class=\\"token string\\">\\"Science Fiction\\"</span><span class=\\"token punctuation\\">)</span>\\n        <span class=\\"token function\\">respondWith</span><span class=\\"token punctuation\\">(</span>secretBook<span class=\\"token punctuation\\">,</span> <span class=\\"token constant\\">nil</span><span class=\\"token punctuation\\">)</span>\\n    <span class=\\"token punctuation\\">}</span>\\n<span class=\\"token punctuation\\">}</span></code></pre></div>\\n<hr>\\n<h2 id=\\"step-4-test-typesafehttpbasic-routes\\"><a href=\\"#step-4-test-typesafehttpbasic-routes\\" aria-label=\\"step 4 test typesafehttpbasic routes permalink\\" class=\\"anchor\\"><svg aria-hidden=\\"true\\" focusable=\\"false\\" height=\\"16\\" version=\\"1.1\\" viewBox=\\"0 0 16 16\\" width=\\"16\\"><path fill-rule=\\"evenodd\\" d=\\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\\"></path></svg></a>Step 4: Test TypeSafeHTTPBasic routes</h2>\\n<p>We need to first start our Kitura server.</p>\\n<p>Then navigate to: <a href=\\"http://localhost:808/basic\\" target=\\"blank\\">localhost:8080/basic</a></p>\\n<p>Log in with the credentials we defined:</p>\\n<div class=\\"gatsby-highlight\\" data-language=\\"text\\"><pre class=\\"language-text\\"><code class=\\"language-text\\">User Name: username</code></pre></div>\\n<div class=\\"gatsby-highlight\\" data-language=\\"text\\"><pre class=\\"language-text\\"><code class=\\"language-text\\">Password: password</code></pre></div>\\n<p>We then should be logged in and see \\"username\\" in the browser.</p>\\n<p>The browser will store your login credentials and automatically log you in if you return to the route.</p>\\n<p>Use a private window if you would like to test incorrect authentication.</p>\\n<hr>\\n<h2 id=\\"next-steps\\"><a href=\\"#next-steps\\" aria-label=\\"next steps permalink\\" class=\\"anchor\\"><svg aria-hidden=\\"true\\" focusable=\\"false\\" height=\\"16\\" version=\\"1.1\\" viewBox=\\"0 0 16 16\\" width=\\"16\\"><path fill-rule=\\"evenodd\\" d=\\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\\"></path></svg></a>Next steps</h2>\\n<p><a href=\\"../web/what-is-templating\\">Web Application</a>: Learn about web applications and what Kitura provides.</p>","frontmatter":{"path":"/docs/authentication/basic-authentication","title":"HTTP Basic Authentication with Codable routes"}}},{"node":{"html":"<h1 id=\\"signing-and-verifying-jwts-with-ecdsa\\"><a href=\\"#signing-and-verifying-jwts-with-ecdsa\\" aria-label=\\"signing and verifying jwts with ecdsa permalink\\" class=\\"anchor\\"><svg aria-hidden=\\"true\\" focusable=\\"false\\" height=\\"16\\" version=\\"1.1\\" viewBox=\\"0 0 16 16\\" width=\\"16\\"><path fill-rule=\\"evenodd\\" d=\\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\\"></path></svg></a>Signing and verifying JWTs with ECDSA</h1>\\n<p>You can process JWTs using Elliptic Curve Digital Signature Algorithm (ECDSA). This uses asymmetric keys with a private key for signing and a public key for verifying. The public key allows anyone to verify a JWT but only the provider can create them. ECDSA is recommended over RSA since it uses smaller keys, requires less processing power and produces smaller signatures.</p>\\n<hr>\\n<h2 id=\\"step-1-create-your-elliptic-curve-keys\\"><a href=\\"#step-1-create-your-elliptic-curve-keys\\" aria-label=\\"step 1 create your elliptic curve keys permalink\\" class=\\"anchor\\"><svg aria-hidden=\\"true\\" focusable=\\"false\\" height=\\"16\\" version=\\"1.1\\" viewBox=\\"0 0 16 16\\" width=\\"16\\"><path fill-rule=\\"evenodd\\" d=\\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\\"></path></svg></a>Step 1: Create your elliptic curve keys</h2>\\n<p>Elliptic curve keys can be generated through <a href=\\"https://developer.apple.com/account/ios/authkey\\">Apple</a>, <a href=\\"https://wiki.openssl.org/index.php/Command_Line_Elliptic_Curve_Operations#Generating_EC_Keys_and_Parameters\\">OpenSSL</a> or using <a href=\\"https://github.com/IBM-Swift/BlueECC#elliptic-curve-private-key\\">BlueECC</a>.</p>\\n<p>For simplicity you can use the following pre-generated keys.</p>\\n<p>Add the following EC PEM strings (Or strings you have generated) to your <code class=\\"language-text\\">App</code> extension:</p>\\n<div class=\\"gatsby-highlight\\" data-language=\\"swift\\"><pre class=\\"language-swift\\"><code class=\\"language-swift\\"><span class=\\"token keyword\\">static</span> <span class=\\"token keyword\\">let</span> privateKey <span class=\\"token operator\\">=</span> <span class=\\"token string\\">\\"\\"</span>\\"\\n<span class=\\"token operator\\">--</span><span class=\\"token operator\\">--</span><span class=\\"token operator\\">-</span><span class=\\"token constant\\">BEGIN</span> <span class=\\"token constant\\">EC</span> <span class=\\"token constant\\">PRIVATE</span> <span class=\\"token constant\\">KEY</span><span class=\\"token operator\\">--</span><span class=\\"token operator\\">--</span><span class=\\"token operator\\">-</span>\\n<span class=\\"token builtin\\">MHcCAQEEIJX</span><span class=\\"token operator\\">+</span>87WJ7Gh19sohyZnhxZeXYNOcuGv4Q<span class=\\"token operator\\">+</span>8MLge4UkaZoAoGCCqGSM49\\n<span class=\\"token builtin\\">AwEHoUQDQgAEikc5m6C2xtDWeeAeT18WElO37zvFOz8p4kAlhvgIHN23XIClNESg</span>\\n<span class=\\"token builtin\\">KVmLgSSq2asqiwdrU5YHbcHFkgdABM1SPA</span><span class=\\"token operator\\">==</span>\\n<span class=\\"token operator\\">--</span><span class=\\"token operator\\">--</span><span class=\\"token operator\\">-</span><span class=\\"token constant\\">END</span> <span class=\\"token constant\\">EC</span> <span class=\\"token constant\\">PRIVATE</span> <span class=\\"token constant\\">KEY</span><span class=\\"token operator\\">--</span><span class=\\"token operator\\">--</span><span class=\\"token operator\\">-</span>\\n<span class=\\"token string\\">\\"\\"</span>\\"\\n<span class=\\"token keyword\\">static</span> <span class=\\"token keyword\\">let</span> publicKey <span class=\\"token operator\\">=</span> <span class=\\"token string\\">\\"\\"</span>\\"\\n<span class=\\"token operator\\">--</span><span class=\\"token operator\\">--</span><span class=\\"token operator\\">-</span><span class=\\"token constant\\">BEGIN</span> <span class=\\"token constant\\">PUBLIC</span> <span class=\\"token constant\\">KEY</span><span class=\\"token operator\\">--</span><span class=\\"token operator\\">--</span><span class=\\"token operator\\">-</span>\\n<span class=\\"token builtin\\">MFkwEwYHKoZIzj0CAQYIKoZIzj0DAQcDQgAEikc5m6C2xtDWeeAeT18WElO37zvF</span>\\n<span class=\\"token builtin\\">Oz8p4kAlhvgIHN23XIClNESgKVmLgSSq2asqiwdrU5YHbcHFkgdABM1SPA</span><span class=\\"token operator\\">==</span>\\n<span class=\\"token operator\\">--</span><span class=\\"token operator\\">--</span><span class=\\"token operator\\">-</span><span class=\\"token constant\\">END</span> <span class=\\"token constant\\">PUBLIC</span> <span class=\\"token constant\\">KEY</span><span class=\\"token operator\\">--</span><span class=\\"token operator\\">--</span><span class=\\"token operator\\">-</span>\\n<span class=\\"token string\\">\\"\\"</span>\\"</code></pre></div>\\n<hr>\\n<h2 id=\\"step-2-create-your-jwtsigner\\"><a href=\\"#step-2-create-your-jwtsigner\\" aria-label=\\"step 2 create your jwtsigner permalink\\" class=\\"anchor\\"><svg aria-hidden=\\"true\\" focusable=\\"false\\" height=\\"16\\" version=\\"1.1\\" viewBox=\\"0 0 16 16\\" width=\\"16\\"><path fill-rule=\\"evenodd\\" d=\\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\\"></path></svg></a>Step 2: Create your JWTSigner</h2>\\n<p>The <code class=\\"language-text\\">JWTSigner</code> is used to sign a <code class=\\"language-text\\">JWT</code> instance and produce a signed JWT string.</p>\\n<p>Inside the <code class=\\"language-text\\">App</code> extension, create an ECDSA <code class=\\"language-text\\">JWTSigner</code> by providing the private key:</p>\\n<div class=\\"gatsby-highlight\\" data-language=\\"swift\\"><pre class=\\"language-swift\\"><code class=\\"language-swift\\">@<span class=\\"token function\\">available</span><span class=\\"token punctuation\\">(</span><span class=\\"token constant\\">OSX</span> <span class=\\"token number\\">10.13</span><span class=\\"token punctuation\\">,</span> <span class=\\"token operator\\">*</span><span class=\\"token punctuation\\">)</span>\\n<span class=\\"token keyword\\">static</span> <span class=\\"token keyword\\">let</span> jwtSigner <span class=\\"token operator\\">=</span> <span class=\\"token builtin\\">JWTSigner</span><span class=\\"token punctuation\\">.</span><span class=\\"token function\\">es256</span><span class=\\"token punctuation\\">(</span>privateKey<span class=\\"token punctuation\\">:</span> <span class=\\"token function\\">Data</span><span class=\\"token punctuation\\">(</span>privateKey<span class=\\"token punctuation\\">.</span>utf8<span class=\\"token punctuation\\">)</span><span class=\\"token punctuation\\">)</span></code></pre></div>\\n<blockquote>\\n<p>ECDSA algorithms such as <code class=\\"language-text\\">es256</code> use <a href=\\"https://github.com/IBM-Swift/BlueECC\\">BlueECC</a>, which is only available on macOS 10.13 or newer. When using them you will need to us <code class=\\"language-text\\">@available</code> to handle cases where the operating system version is not high enough.</p>\\n</blockquote>\\n<hr>\\n<h2 id=\\"step-3-create-your-jwtverifier\\"><a href=\\"#step-3-create-your-jwtverifier\\" aria-label=\\"step 3 create your jwtverifier permalink\\" class=\\"anchor\\"><svg aria-hidden=\\"true\\" focusable=\\"false\\" height=\\"16\\" version=\\"1.1\\" viewBox=\\"0 0 16 16\\" width=\\"16\\"><path fill-rule=\\"evenodd\\" d=\\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\\"></path></svg></a>Step 3: Create your JWTVerifier</h2>\\n<p>The <code class=\\"language-text\\">JWTVerifier</code> is used to verify a signed JWT string. This ensures the signature was generated using the corresponding private key and the JWT has not been changed.</p>\\n<p>Inside the <code class=\\"language-text\\">App</code> extension, we create an ECDSA <code class=\\"language-text\\">JWTVerifier</code> by providing the public key:</p>\\n<div class=\\"gatsby-highlight\\" data-language=\\"swift\\"><pre class=\\"language-swift\\"><code class=\\"language-swift\\">@<span class=\\"token function\\">available</span><span class=\\"token punctuation\\">(</span><span class=\\"token constant\\">OSX</span> <span class=\\"token number\\">10.13</span><span class=\\"token punctuation\\">,</span> <span class=\\"token operator\\">*</span><span class=\\"token punctuation\\">)</span>\\n<span class=\\"token keyword\\">static</span> <span class=\\"token keyword\\">let</span> jwtVerifier <span class=\\"token operator\\">=</span> <span class=\\"token builtin\\">JWTVerifier</span><span class=\\"token punctuation\\">.</span><span class=\\"token function\\">es256</span><span class=\\"token punctuation\\">(</span>publicKey<span class=\\"token punctuation\\">:</span> <span class=\\"token function\\">Data</span><span class=\\"token punctuation\\">(</span>publicKey<span class=\\"token punctuation\\">.</span>utf8<span class=\\"token punctuation\\">)</span><span class=\\"token punctuation\\">)</span></code></pre></div>\\n<hr>\\n<p>Now you can return to the <a href=\\"./jwt#step-2-set-up-your-signing-and-verifying-algorithm\\">JSON Web Token Authentication</a> guide.</p>","frontmatter":{"path":"/docs/authentication/jwt-ecdsa","title":"Signing and verifying JWTs with ECDSA"}}},{"node":{"html":"<h1 id=\\"what-is-a-client\\"><a href=\\"#what-is-a-client\\" aria-label=\\"what is a client permalink\\" class=\\"anchor\\"><svg aria-hidden=\\"true\\" focusable=\\"false\\" height=\\"16\\" version=\\"1.1\\" viewBox=\\"0 0 16 16\\" width=\\"16\\"><path fill-rule=\\"evenodd\\" d=\\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\\"></path></svg></a>What is a client?</h1>\\n<p>A client is a computer hardware device or software that is capable of obtaining information and applications from a server, granted that there is a suitable framework in place.  In the context of Kitura, this could be a simple command line interface, an iOS application or even another micro service that interacts with a server.  Usually the client initiates with a request and the server responds appropriately, whether that is a simple <code class=\\"language-text\\">GET</code> request for receiving information, or a <code class=\\"language-text\\">POST</code> request for transferring data from the client to the server.</p>\\n<hr>\\n<h2 id=\\"kiturakit\\"><a href=\\"#kiturakit\\" aria-label=\\"kiturakit permalink\\" class=\\"anchor\\"><svg aria-hidden=\\"true\\" focusable=\\"false\\" height=\\"16\\" version=\\"1.1\\" viewBox=\\"0 0 16 16\\" width=\\"16\\"><path fill-rule=\\"evenodd\\" d=\\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\\"></path></svg></a>KituraKit</h2>\\n<p><a href=\\"https://github.com/IBM-Swift/KituraKit\\">KituraKit</a> is a client side framework for sending HTTP requests to a Kitura server. By using the Swift Codable protocol, you can send and receive models directly from client to server.  KituraKit can be used for iOS applications and can be installed through CocoaPods.</p>\\n<h2 id=\\"swiftyrequest\\"><a href=\\"#swiftyrequest\\" aria-label=\\"swiftyrequest permalink\\" class=\\"anchor\\"><svg aria-hidden=\\"true\\" focusable=\\"false\\" height=\\"16\\" version=\\"1.1\\" viewBox=\\"0 0 16 16\\" width=\\"16\\"><path fill-rule=\\"evenodd\\" d=\\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\\"></path></svg></a>SwiftyRequest</h2>\\n<p><a href=\\"https://github.com/IBM-Swift/SwiftyRequest\\">SwiftyRequest</a> is an HTTP client built for Swift.</p>\\n<hr>\\n<h2 id=\\"next-steps\\"><a href=\\"#next-steps\\" aria-label=\\"next steps permalink\\" class=\\"anchor\\"><svg aria-hidden=\\"true\\" focusable=\\"false\\" height=\\"16\\" version=\\"1.1\\" viewBox=\\"0 0 16 16\\" width=\\"16\\"><path fill-rule=\\"evenodd\\" d=\\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\\"></path></svg></a>Next Steps:</h2>\\n<p>Build a simple <a href=\\"./iOSClient\\">iOS Client</a> for finding the price of fruit using KituraKit.</p>","frontmatter":{"path":"/docs/client/client","title":"What is a client?"}}},{"node":{"html":"<h1 id=\\"enabling-swiftnio\\"><a href=\\"#enabling-swiftnio\\" aria-label=\\"enabling swiftnio permalink\\" class=\\"anchor\\"><svg aria-hidden=\\"true\\" focusable=\\"false\\" height=\\"16\\" version=\\"1.1\\" viewBox=\\"0 0 16 16\\" width=\\"16\\"><path fill-rule=\\"evenodd\\" d=\\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\\"></path></svg></a>Enabling SwiftNIO</h1>\\n<p><a href=\\"https://github.com/apple/swift-nio\\">SwiftNIO</a>  is a cross-platform, asynchronous, event-driven networking framework for building network servers and clients in Swift. Since Kitura 2.5 you have the option of running your Kitura application using SwiftNIO instead of the <a href=\\"https://github.com/IBM-Swift/Kitura-net\\">Kitura-net</a> and <a href=\\"https://github.com/IBM-Swift/BlueSocket\\">BlueSocket</a> libraries which Kitura has traditionally been based upon. This support is enabled through the <a href=\\"https://github.com/IBM-Swift/Kitura-NIO\\">Kitura-NIO</a> package.</p>\\n<p>Kitura-NIO has been designed to be API-compatible with the current Kitura-net API, though the underlying implementation uses SwiftNIO.</p>\\n<p>The major reason behind the decision to keep the API compatible with Kitura-net was API stability. We wanted Kitura users to be able to use Kitura-NIO, without needing to make any code changes to their Kitura applications.</p>\\n<p>Kitura-NIO fully supports HTTP and HTTPS, both servers and clients. It also has IPv6 support. A SwiftNIO based implementation of Kitura-WebSocket (<a href=\\"https://github.com/IBM-Swift/Kitura-WebSocket-NIO\\">Kitura-WebSocket-NIO</a>) was released in April 2019, as part of <a href=\\"https://developer.ibm.com/swift/2019/04/17/announcing-kitura-2-7-and-more/\\">Kitura 2.7</a>.</p>\\n<p>It is our intent to make Kitura-NIO the default networking stack in a future release of Kitura.</p>\\n<hr>\\n<h2 id=\\"using-kitura-nio\\"><a href=\\"#using-kitura-nio\\" aria-label=\\"using kitura nio permalink\\" class=\\"anchor\\"><svg aria-hidden=\\"true\\" focusable=\\"false\\" height=\\"16\\" version=\\"1.1\\" viewBox=\\"0 0 16 16\\" width=\\"16\\"><path fill-rule=\\"evenodd\\" d=\\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\\"></path></svg></a>Using Kitura-NIO</h2>\\n<p>With Kitura 2.5 and future releases, to run on top of Kitura-NIO (instead of the current default Kitura-net) all you need to do is set an environment variable called <code class=\\"language-text\\">KITURA_NIO</code> before building your Kitura application:</p>\\n<div class=\\"gatsby-highlight\\" data-language=\\"text\\"><pre class=\\"language-text\\"><code class=\\"language-text\\">export KITURA_NIO=1 &amp;&amp; swift build</code></pre></div>\\n<p>Note, there is no need to set anything at runtime, choosing your underlying networking can only be done when you build your application.</p>\\n<p>If you have already built your Kitura application using Kitura-net and want to switch to using <code class=\\"language-text\\">KITURA_NIO</code>, you need to update the package before building:</p>\\n<div class=\\"gatsby-highlight\\" data-language=\\"text\\"><pre class=\\"language-text\\"><code class=\\"language-text\\">export KITURA_NIO=1 &amp;&amp; swift package update &amp;&amp; swift build</code></pre></div>\\n<p>Using the environment variable we make sure that only one out of Kitura-NIO and Kitura-Net is linked into your application\'s binary.</p>\\n<p>Please note that though Kitura-NIO has its own GitHub repository, the package name is KituraNet. This is because Kitura-NIO and Kitura-net are expected to provide identical APIs, therefore it makes sense if they share the package name too.</p>\\n<hr>\\n<h2 id=\\"using-kitura-websocket-nio\\"><a href=\\"#using-kitura-websocket-nio\\" aria-label=\\"using kitura websocket nio permalink\\" class=\\"anchor\\"><svg aria-hidden=\\"true\\" focusable=\\"false\\" height=\\"16\\" version=\\"1.1\\" viewBox=\\"0 0 16 16\\" width=\\"16\\"><path fill-rule=\\"evenodd\\" d=\\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\\"></path></svg></a>Using Kitura WebSocket NIO</h2>\\n<p><a href=\\"https://github.com/IBM-Swift/Kitura-WebSocket-NIO\\">Kitura WebSocket NIO</a> and <a href=\\"https://github.com/IBM-Swift/Kitura-WebSocket\\">Kitura WebSocket</a> have separate GitHub repositories, but an identical API. The underlying code, however is different in how it functions, so it is often helpful to include this snippet of code in your <code class=\\"language-text\\">Package.swift</code> file so that the correct package is used:</p>\\n<div class=\\"gatsby-highlight\\" data-language=\\"swift\\"><pre class=\\"language-swift\\"><code class=\\"language-swift\\"><span class=\\"token comment\\">// Use alternate implementation of Kitura-WebSocket while building in NIO mode</span>\\n<span class=\\"token keyword\\">if</span> <span class=\\"token builtin\\">ProcessInfo</span><span class=\\"token punctuation\\">.</span>processInfo<span class=\\"token punctuation\\">.</span>environment<span class=\\"token punctuation\\">[</span><span class=\\"token string\\">\\"KITURA_NIO\\"</span><span class=\\"token punctuation\\">]</span> <span class=\\"token operator\\">!=</span> <span class=\\"token constant\\">nil</span> <span class=\\"token punctuation\\">{</span>\\n    dependencies<span class=\\"token punctuation\\">.</span><span class=\\"token function\\">append</span><span class=\\"token punctuation\\">(</span><span class=\\"token punctuation\\">.</span><span class=\\"token function\\">package</span><span class=\\"token punctuation\\">(</span>url<span class=\\"token punctuation\\">:</span>  <span class=\\"token string\\">\\"https://github.com/IBM-Swift/Kitura-WebSocket-NIO.git\\"</span><span class=\\"token punctuation\\">,</span> from<span class=\\"token punctuation\\">:</span> <span class=\\"token string\\">\\"2.0.0\\"</span><span class=\\"token punctuation\\">)</span><span class=\\"token punctuation\\">)</span>\\n<span class=\\"token punctuation\\">}</span> <span class=\\"token keyword\\">else</span> <span class=\\"token punctuation\\">{</span>\\n    dependencies<span class=\\"token punctuation\\">.</span><span class=\\"token function\\">append</span><span class=\\"token punctuation\\">(</span><span class=\\"token punctuation\\">.</span><span class=\\"token function\\">package</span><span class=\\"token punctuation\\">(</span>url<span class=\\"token punctuation\\">:</span> <span class=\\"token string\\">\\"https://github.com/IBM-Swift/Kitura-WebSocket.git\\"</span><span class=\\"token punctuation\\">,</span> from<span class=\\"token punctuation\\">:</span> <span class=\\"token string\\">\\"2.0.0\\"</span><span class=\\"token punctuation\\">)</span><span class=\\"token punctuation\\">)</span>\\n<span class=\\"token punctuation\\">}</span></code></pre></div>","frontmatter":{"path":"/docs/configuring/swiftnio","title":"Enabling SwiftNIO"}}},{"node":{"html":"<h1 id=\\"what-are-databases\\"><a href=\\"#what-are-databases\\" aria-label=\\"what are databases permalink\\" class=\\"anchor\\"><svg aria-hidden=\\"true\\" focusable=\\"false\\" height=\\"16\\" version=\\"1.1\\" viewBox=\\"0 0 16 16\\" width=\\"16\\"><path fill-rule=\\"evenodd\\" d=\\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\\"></path></svg></a>What are Databases?</h1>\\n<p>A database is a computerized system that is used to host a collection of information which is organized in a way that allows it to be easily accessed, managed and updated.</p>\\n<p>Databases exist everywhere in the real world. For example, your local supermarket will have a database that stores information regarding all its products. When the cashier scans an item at the checkout a request is made to their database using the unique barcode for that item. The price and name for that item are retrieved from the database, this information is then printed to your receipt.</p>\\n<p>There are two main types of databases, SQL (or relational) and NoSQL (or non-relational). Kitura has support for both types. In this guide, we will describe SQL databases first and how Kitura provides support for them, then we will define what is meant by the term NoSQL database and list which NoSQL databases Kitura supports.</p>\\n<hr>\\n<h2 id=\\"sql-databases\\"><a href=\\"#sql-databases\\" aria-label=\\"sql databases permalink\\" class=\\"anchor\\"><svg aria-hidden=\\"true\\" focusable=\\"false\\" height=\\"16\\" version=\\"1.1\\" viewBox=\\"0 0 16 16\\" width=\\"16\\"><path fill-rule=\\"evenodd\\" d=\\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\\"></path></svg></a>SQL Databases</h2>\\n<p>SQL databases are table based databases, that is you create tables within your database to store information in. These tables have columns defined to organize the data and rows inserted to add values to the columns.</p>\\n<h3 id=\\"swift-kuery\\"><a href=\\"#swift-kuery\\" aria-label=\\"swift kuery permalink\\" class=\\"anchor\\"><svg aria-hidden=\\"true\\" focusable=\\"false\\" height=\\"16\\" version=\\"1.1\\" viewBox=\\"0 0 16 16\\" width=\\"16\\"><path fill-rule=\\"evenodd\\" d=\\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\\"></path></svg></a>Swift-Kuery</h3>\\n<p><a href=\\"https://github.com/IBM-Swift/Swift-Kuery\\">Swift-Kuery</a> is a pluggable SQL database abstraction layer; this is how Kitura provides support for users wishing to use SQL databases, whether directly or via the ORM (see the section below). The intent of the Kuery library is to unify the APIs to the various relational databases, providing a Swifty yet SQL-like API for users. This allows easy switching between different databases.</p>\\n<p>Kitura has support for the following SQL databases:</p>\\n<ul>\\n<li><a href=\\"https://www.postgresql.org\\">PostgreSQL</a> using the <a href=\\"https://github.com/IBM-Swift/Swift-Kuery-PostgreSQL\\">Swift-Kuery-PostgreSQL</a> plugin.</li>\\n<li><a href=\\"https://www.mysql.com\\">MySQL</a> using the <a href=\\"https://github.com/IBM-Swift/SwiftKueryMySQL\\">SwiftKueryMySQL</a> plugin.</li>\\n<li><a href=\\"https://www.sqlite.org\\">SQLite</a> using the <a href=\\"https://github.com/IBM-Swift/Swift-Kuery-SQLite\\">Swift-Kuery-SQLite</a> plugin.</li>\\n</ul>\\n<h3 id=\\"swift-kuery-orm\\"><a href=\\"#swift-kuery-orm\\" aria-label=\\"swift kuery orm permalink\\" class=\\"anchor\\"><svg aria-hidden=\\"true\\" focusable=\\"false\\" height=\\"16\\" version=\\"1.1\\" viewBox=\\"0 0 16 16\\" width=\\"16\\"><path fill-rule=\\"evenodd\\" d=\\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\\"></path></svg></a>Swift-Kuery-ORM</h3>\\n<p><a href=\\"https://github.com/IBM-Swift/Swift-Kuery-ORM\\">Swift-Kuery-ORM</a> is an Object Relational Mapping library (ORM) built for Swift. The ORM provides APIs which simplify the persistence of model objects, by allowing you to interact with the database directly from your Swift types (structs and classes).</p>\\n<p>The ORM doesn’t require you to directly specify how the data should be represented in the database. You define your Swift type as a class or a struct, extend it to conform to the <code class=\\"language-text\\">Model</code> protocol (which requires no additional code) and the ORM automatically generates a table schema for you. You can then save, fetch, update and delete directly by calling functions on your Swift type.</p>\\n<p>The ORM is built on top of <a href=\\"https://github.com/IBM-Swift/Swift-Kuery\\">Swift-Kuery</a>, this means that it can be used with any database that is supported by Kuery. If the functionality of the ORM is insufficient, you can use Kuery directly for more complex SQL queries.</p>\\n<hr>\\n<h2 id=\\"nosql-databases\\"><a href=\\"#nosql-databases\\" aria-label=\\"nosql databases permalink\\" class=\\"anchor\\"><svg aria-hidden=\\"true\\" focusable=\\"false\\" height=\\"16\\" version=\\"1.1\\" viewBox=\\"0 0 16 16\\" width=\\"16\\"><path fill-rule=\\"evenodd\\" d=\\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\\"></path></svg></a>NoSQL Databases</h2>\\n<p>NoSQL databases are document based, key-value pairs, graph databases or wide-column stores which do not have standard schema definitions which they need to adhere to unlike SQL databases.</p>\\n<p>Kitura has support for the following NoSQL databases:</p>\\n<ul>\\n<li><a href=\\"https://couchdb.apache.org\\">CouchDB</a> and <a href=\\"https://www.ibm.com/uk-en/cloud/cloudant\\">IBM Cloudant</a> use the same API so the <a href=\\"https://github.com/IBM-Swift/Kitura-CouchDB\\">Kitura-CouchDB</a> plugin works with either database.</li>\\n<li><a href=\\"https://www.mongodb.com\\">MongoDB</a> using the third party <a href=\\"https://github.com/OpenKitten/MongoKitten\\">MongoKitten</a> repository.</li>\\n</ul>\\n<hr>\\n<h2 id=\\"next-steps\\"><a href=\\"#next-steps\\" aria-label=\\"next steps permalink\\" class=\\"anchor\\"><svg aria-hidden=\\"true\\" focusable=\\"false\\" height=\\"16\\" version=\\"1.1\\" viewBox=\\"0 0 16 16\\" width=\\"16\\"><path fill-rule=\\"evenodd\\" d=\\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\\"></path></svg></a>Next steps</h2>\\n<p><a href=\\"./orm\\">Add an SQL Database</a>: Add an SQL database, using the Kitura ORM, to your Kitura server.</p>\\n<p><a href=\\"./kuery\\">Add an SQL Database</a>: Add an SQL database, using Swift-Kuery, to your Kitura server.</p>\\n<p><a href=\\"./couchdb\\">Add a NoSQL Database</a>: Add a CouchDB database to your Kitura server.</p>","frontmatter":{"path":"/docs/databases/what-are-databases","title":"What are Databases?"}}},{"node":{"html":"<h1 id=\\"installing-and-configuring-a-mysql-database\\"><a href=\\"#installing-and-configuring-a-mysql-database\\" aria-label=\\"installing and configuring a mysql database permalink\\" class=\\"anchor\\"><svg aria-hidden=\\"true\\" focusable=\\"false\\" height=\\"16\\" version=\\"1.1\\" viewBox=\\"0 0 16 16\\" width=\\"16\\"><path fill-rule=\\"evenodd\\" d=\\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\\"></path></svg></a>Installing and configuring a MySQL database</h1>\\n<hr>\\n<h2 id=\\"step-1-install-mysql\\"><a href=\\"#step-1-install-mysql\\" aria-label=\\"step 1 install mysql permalink\\" class=\\"anchor\\"><svg aria-hidden=\\"true\\" focusable=\\"false\\" height=\\"16\\" version=\\"1.1\\" viewBox=\\"0 0 16 16\\" width=\\"16\\"><path fill-rule=\\"evenodd\\" d=\\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\\"></path></svg></a>Step 1: Install MySQL</h2>\\n<p>To use Swift-Kuery-MySQL you need to first install MySQL:</p>\\n<h3 id=\\"macos\\"><a href=\\"#macos\\" aria-label=\\"macos permalink\\" class=\\"anchor\\"><svg aria-hidden=\\"true\\" focusable=\\"false\\" height=\\"16\\" version=\\"1.1\\" viewBox=\\"0 0 16 16\\" width=\\"16\\"><path fill-rule=\\"evenodd\\" d=\\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\\"></path></svg></a>macOS</h3>\\n<p>On macOS we can use Homebrew to install MySQL:</p>\\n<div class=\\"gatsby-highlight\\" data-language=\\"text\\"><pre class=\\"language-text\\"><code class=\\"language-text\\">brew install mysql</code></pre></div>\\n<p>Then we can start MySQL:</p>\\n<div class=\\"gatsby-highlight\\" data-language=\\"text\\"><pre class=\\"language-text\\"><code class=\\"language-text\\">mysql.server start</code></pre></div>\\n<h3 id=\\"linux\\"><a href=\\"#linux\\" aria-label=\\"linux permalink\\" class=\\"anchor\\"><svg aria-hidden=\\"true\\" focusable=\\"false\\" height=\\"16\\" version=\\"1.1\\" viewBox=\\"0 0 16 16\\" width=\\"16\\"><path fill-rule=\\"evenodd\\" d=\\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\\"></path></svg></a>Linux</h3>\\n<p>On Linux we can use <code class=\\"language-text\\">apt-get</code> to install MySQL:</p>\\n<div class=\\"gatsby-highlight\\" data-language=\\"text\\"><pre class=\\"language-text\\"><code class=\\"language-text\\">sudo apt-get install mysql-server libmysqlclient-dev pkg-config</code></pre></div>\\n<p>Then we can start the MySQL service:</p>\\n<div class=\\"gatsby-highlight\\" data-language=\\"text\\"><pre class=\\"language-text\\"><code class=\\"language-text\\">sudo service mysql start</code></pre></div>\\n<p>We can view the default user/password for MySQL with the following command:</p>\\n<div class=\\"gatsby-highlight\\" data-language=\\"text\\"><pre class=\\"language-text\\"><code class=\\"language-text\\">sudo cat /etc/mysql/debian.cnf</code></pre></div>\\n<hr>\\n<h2 id=\\"step-2-create-a-mysql-database\\"><a href=\\"#step-2-create-a-mysql-database\\" aria-label=\\"step 2 create a mysql database permalink\\" class=\\"anchor\\"><svg aria-hidden=\\"true\\" focusable=\\"false\\" height=\\"16\\" version=\\"1.1\\" viewBox=\\"0 0 16 16\\" width=\\"16\\"><path fill-rule=\\"evenodd\\" d=\\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\\"></path></svg></a>Step 2: Create a MySQL database</h2>\\n<p>Now that we have MySQL installed we can open the MySQL command-line interface:</p>\\n<div class=\\"gatsby-highlight\\" data-language=\\"text\\"><pre class=\\"language-text\\"><code class=\\"language-text\\">mysql -u root</code></pre></div>\\n<p>Using the MySQL command-line interface, we create a user:</p>\\n<blockquote>\\n<p>You can replace <code class=\\"language-text\\">kitura</code> and <code class=\\"language-text\\">password</code> with your own username and password.</p>\\n</blockquote>\\n<div class=\\"gatsby-highlight\\" data-language=\\"text\\"><pre class=\\"language-text\\"><code class=\\"language-text\\">GRANT ALL PRIVILEGES ON *.* TO &#39;kitura&#39;@&#39;localhost&#39; IDENTIFIED BY &#39;password&#39;;</code></pre></div>\\n<p>Then we can create a database:</p>\\n<div class=\\"gatsby-highlight\\" data-language=\\"text\\"><pre class=\\"language-text\\"><code class=\\"language-text\\">CREATE DATABASE bookstoredb;</code></pre></div>\\n<p>Then we want to use this database:</p>\\n<div class=\\"gatsby-highlight\\" data-language=\\"text\\"><pre class=\\"language-text\\"><code class=\\"language-text\\">USE bookstoredb;</code></pre></div>\\n<p>Finally we can create a table in our database:</p>\\n<div class=\\"gatsby-highlight\\" data-language=\\"text\\"><pre class=\\"language-text\\"><code class=\\"language-text\\">CREATE TABLE BookTable (\\n      id VARCHAR(100) not null,\\n      title VARCHAR(100) not null,\\n      price DOUBLE not null,\\n      genre VARCHAR(100) not null,\\n      constraint pk_example primary key (id)\\n);</code></pre></div>\\n<p>Enter <code class=\\"language-text\\">\\\\q</code> in terminal to exit mysql.</p>\\n<p>Now we\'re ready to connect to our database from our Kitura server.</p>\\n<hr>\\n<h2 id=\\"step-3-create-a-connection-to-a-mysql-database\\"><a href=\\"#step-3-create-a-connection-to-a-mysql-database\\" aria-label=\\"step 3 create a connection to a mysql database permalink\\" class=\\"anchor\\"><svg aria-hidden=\\"true\\" focusable=\\"false\\" height=\\"16\\" version=\\"1.1\\" viewBox=\\"0 0 16 16\\" width=\\"16\\"><path fill-rule=\\"evenodd\\" d=\\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\\"></path></svg></a>Step 3: Create a connection to a MySQL database</h2>\\n<p>Add <a href=\\"https://github.com/IBM-Swift/Swift-Kuery#update-your-packageswift-file\\">Swift-Kuery</a> and <a href=\\"https://github.com/IBM-Swift/SwiftKueryMySQL#add-dependencies\\">SwiftKueryMySQL</a> to the dependencies in the <code class=\\"language-text\\">Package.swift</code> file.</p>\\n<p>Inside the file which defines the routes, <code class=\\"language-text\\">KueryRoutes.swift</code>, import the SwiftKuery and SwiftKueryMySQL packages:</p>\\n<div class=\\"gatsby-highlight\\" data-language=\\"swift\\"><pre class=\\"language-swift\\"><code class=\\"language-swift\\"><span class=\\"token keyword\\">import</span> <span class=\\"token builtin\\">SwiftKuery</span>\\n<span class=\\"token keyword\\">import</span> <span class=\\"token builtin\\">SwiftKueryMySQL</span></code></pre></div>\\n<p>Inside the <code class=\\"language-text\\">App</code> extension, create a connection pool of connections:</p>\\n<div class=\\"gatsby-highlight\\" data-language=\\"swift\\"><pre class=\\"language-swift\\"><code class=\\"language-swift\\">    <span class=\\"token keyword\\">static</span> <span class=\\"token keyword\\">let</span> poolOptions <span class=\\"token operator\\">=</span> <span class=\\"token function\\">ConnectionPoolOptions</span><span class=\\"token punctuation\\">(</span>initialCapacity<span class=\\"token punctuation\\">:</span> <span class=\\"token number\\">1</span><span class=\\"token punctuation\\">,</span> maxCapacity<span class=\\"token punctuation\\">:</span> <span class=\\"token number\\">5</span><span class=\\"token punctuation\\">)</span>\\n    <span class=\\"token keyword\\">static</span> <span class=\\"token keyword\\">let</span> pool <span class=\\"token operator\\">=</span> <span class=\\"token builtin\\">MySQLConnection</span><span class=\\"token punctuation\\">.</span><span class=\\"token function\\">createPool</span><span class=\\"token punctuation\\">(</span>user<span class=\\"token punctuation\\">:</span> <span class=\\"token string\\">\\"kitura\\"</span><span class=\\"token punctuation\\">,</span> password<span class=\\"token punctuation\\">:</span> <span class=\\"token string\\">\\"password\\"</span><span class=\\"token punctuation\\">,</span> database<span class=\\"token punctuation\\">:</span> <span class=\\"token string\\">\\"bookstoredb\\"</span><span class=\\"token punctuation\\">,</span> poolOptions<span class=\\"token punctuation\\">:</span> poolOptions<span class=\\"token punctuation\\">)</span>\\n    <span class=\\"token comment\\">// Create table instance here</span></code></pre></div>\\n<p>This creates a pool of connections for us to use to make requests to our database.</p>\\n<p>Now you can return to the <a href=\\"/docs/databases/kuery/#step-2-install-a-database-plugin\\">Swift-Kuery</a> guide.</p>","frontmatter":{"path":"/docs/databases/kuery-mysql","title":"Installing MySQL"}}},{"node":{"html":"<h1 id=\\"installing-and-configuring-a-postgresql-database\\"><a href=\\"#installing-and-configuring-a-postgresql-database\\" aria-label=\\"installing and configuring a postgresql database permalink\\" class=\\"anchor\\"><svg aria-hidden=\\"true\\" focusable=\\"false\\" height=\\"16\\" version=\\"1.1\\" viewBox=\\"0 0 16 16\\" width=\\"16\\"><path fill-rule=\\"evenodd\\" d=\\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\\"></path></svg></a>Installing and configuring a PostgreSQL database</h1>\\n<hr>\\n<h2 id=\\"step-1-install-the-postgresql-client\\"><a href=\\"#step-1-install-the-postgresql-client\\" aria-label=\\"step 1 install the postgresql client permalink\\" class=\\"anchor\\"><svg aria-hidden=\\"true\\" focusable=\\"false\\" height=\\"16\\" version=\\"1.1\\" viewBox=\\"0 0 16 16\\" width=\\"16\\"><path fill-rule=\\"evenodd\\" d=\\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\\"></path></svg></a>Step 1: Install the PostgreSQL client</h2>\\n<p>To use Swift-Kuery-PostgreSQL you need to have the appropriate PostgreSQL C-language client installed.</p>\\n<h3 id=\\"macos\\"><a href=\\"#macos\\" aria-label=\\"macos permalink\\" class=\\"anchor\\"><svg aria-hidden=\\"true\\" focusable=\\"false\\" height=\\"16\\" version=\\"1.1\\" viewBox=\\"0 0 16 16\\" width=\\"16\\"><path fill-rule=\\"evenodd\\" d=\\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\\"></path></svg></a>macOS</h3>\\n<p>On macOS we can use Homebrew to install Postgres:</p>\\n<div class=\\"gatsby-highlight\\" data-language=\\"text\\"><pre class=\\"language-text\\"><code class=\\"language-text\\">brew install postgresql</code></pre></div>\\n<h3 id=\\"linux\\"><a href=\\"#linux\\" aria-label=\\"linux permalink\\" class=\\"anchor\\"><svg aria-hidden=\\"true\\" focusable=\\"false\\" height=\\"16\\" version=\\"1.1\\" viewBox=\\"0 0 16 16\\" width=\\"16\\"><path fill-rule=\\"evenodd\\" d=\\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\\"></path></svg></a>Linux</h3>\\n<p>On Linux we can use <code class=\\"language-text\\">apt</code> to install PostgreSQL:</p>\\n<div class=\\"gatsby-highlight\\" data-language=\\"text\\"><pre class=\\"language-text\\"><code class=\\"language-text\\">sudo apt install postgresql postgresql-contrib</code></pre></div>\\n<p>Linux requires that you <a href=\\"http://postgresguide.com/setup/users.html\\">create a PostgreSQL user</a>.</p>\\n<hr>\\n<h2 id=\\"step-2-create-a-postgresql-database\\"><a href=\\"#step-2-create-a-postgresql-database\\" aria-label=\\"step 2 create a postgresql database permalink\\" class=\\"anchor\\"><svg aria-hidden=\\"true\\" focusable=\\"false\\" height=\\"16\\" version=\\"1.1\\" viewBox=\\"0 0 16 16\\" width=\\"16\\"><path fill-rule=\\"evenodd\\" d=\\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\\"></path></svg></a>Step 2: Create a PostgreSQL database</h2>\\n<p>Now that we have PostgreSQL installed we can create a database:</p>\\n<div class=\\"gatsby-highlight\\" data-language=\\"text\\"><pre class=\\"language-text\\"><code class=\\"language-text\\">createdb bookstoredb</code></pre></div>\\n<p>Then we can open the PostgreSQL command-line interface:</p>\\n<div class=\\"gatsby-highlight\\" data-language=\\"text\\"><pre class=\\"language-text\\"><code class=\\"language-text\\">psql bookstoredb</code></pre></div>\\n<p>Finally we can create a table in our database:</p>\\n<div class=\\"gatsby-highlight\\" data-language=\\"text\\"><pre class=\\"language-text\\"><code class=\\"language-text\\">CREATE TABLE &quot;BookTable&quot; (\\n      id varchar(100) PRIMARY KEY,\\n      title text NOT NULL,\\n      price float8 NOT NULL,\\n      genre text NOT NULL\\n);</code></pre></div>\\n<p>Enter <code class=\\"language-text\\">\\\\q</code> in terminal to exit psql.</p>\\n<p>Now we\'re ready to connect to our database from our Kitura server.</p>\\n<hr>\\n<h2 id=\\"step-3-create-a-connection-to-a-postgresql-database\\"><a href=\\"#step-3-create-a-connection-to-a-postgresql-database\\" aria-label=\\"step 3 create a connection to a postgresql database permalink\\" class=\\"anchor\\"><svg aria-hidden=\\"true\\" focusable=\\"false\\" height=\\"16\\" version=\\"1.1\\" viewBox=\\"0 0 16 16\\" width=\\"16\\"><path fill-rule=\\"evenodd\\" d=\\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\\"></path></svg></a>Step 3: Create a connection to a PostgreSQL database</h2>\\n<p>Add <a href=\\"https://github.com/IBM-Swift/Swift-Kuery#update-your-packageswift-file\\">Swift-Kuery</a> and <a href=\\"https://github.com/IBM-Swift/Swift-Kuery-PostgreSQL#add-dependencies\\">SwiftKueryPostgreSQL</a> to the dependencies in the <code class=\\"language-text\\">Package.swift</code> file.</p>\\n<p>Inside the file which defines the routes, <code class=\\"language-text\\">KueryRoutes.swift</code>, import SwiftKuery and SwiftKueryPostgreSQL:</p>\\n<div class=\\"gatsby-highlight\\" data-language=\\"swift\\"><pre class=\\"language-swift\\"><code class=\\"language-swift\\"><span class=\\"token keyword\\">import</span> <span class=\\"token builtin\\">SwiftKuery</span>\\n<span class=\\"token keyword\\">import</span> <span class=\\"token builtin\\">SwiftKueryPostgreSQL</span></code></pre></div>\\n<p>Inside the <code class=\\"language-text\\">App</code> extension, create a connection pool of connections:</p>\\n<div class=\\"gatsby-highlight\\" data-language=\\"swift\\"><pre class=\\"language-swift\\"><code class=\\"language-swift\\"><span class=\\"token keyword\\">static</span> <span class=\\"token keyword\\">let</span> poolOptions <span class=\\"token operator\\">=</span> <span class=\\"token function\\">ConnectionPoolOptions</span><span class=\\"token punctuation\\">(</span>initialCapacity<span class=\\"token punctuation\\">:</span> <span class=\\"token number\\">1</span><span class=\\"token punctuation\\">,</span> maxCapacity<span class=\\"token punctuation\\">:</span> <span class=\\"token number\\">5</span><span class=\\"token punctuation\\">)</span>\\n<span class=\\"token keyword\\">static</span> <span class=\\"token keyword\\">let</span> pool <span class=\\"token operator\\">=</span> <span class=\\"token builtin\\">PostgreSQLConnection</span><span class=\\"token punctuation\\">.</span><span class=\\"token function\\">createPool</span><span class=\\"token punctuation\\">(</span>host<span class=\\"token punctuation\\">:</span> <span class=\\"token string\\">\\"localhost\\"</span><span class=\\"token punctuation\\">,</span> port<span class=\\"token punctuation\\">:</span> <span class=\\"token number\\">5432</span><span class=\\"token punctuation\\">,</span> options<span class=\\"token punctuation\\">:</span> <span class=\\"token punctuation\\">[</span><span class=\\"token punctuation\\">.</span><span class=\\"token function\\">databaseName</span><span class=\\"token punctuation\\">(</span><span class=\\"token string\\">\\"bookstoredb\\"</span><span class=\\"token punctuation\\">)</span><span class=\\"token punctuation\\">]</span><span class=\\"token punctuation\\">,</span> poolOptions<span class=\\"token punctuation\\">:</span> poolOptions<span class=\\"token punctuation\\">)</span>\\n<span class=\\"token comment\\">// Create table instance here</span></code></pre></div>\\n<p>This creates a pool of connections for us to use to make requests to our database.</p>\\n<blockquote>\\n<p>If you are on Linux, you must provide your username and password in the options for <code class=\\"language-text\\">PostgreSQLConnection.createPool()</code>.</p>\\n</blockquote>\\n<p>Now you can return to the <a href=\\"/docs/databases/kuery#step-2-install-a-database-plugin\\">Swift-Kuery</a> guide.</p>","frontmatter":{"path":"/docs/databases/kuery-postgresql","title":"Installing PostgreSQL"}}},{"node":{"html":"<h1 id=\\"installing-and-configuring-a-sqlite-database\\"><a href=\\"#installing-and-configuring-a-sqlite-database\\" aria-label=\\"installing and configuring a sqlite database permalink\\" class=\\"anchor\\"><svg aria-hidden=\\"true\\" focusable=\\"false\\" height=\\"16\\" version=\\"1.1\\" viewBox=\\"0 0 16 16\\" width=\\"16\\"><path fill-rule=\\"evenodd\\" d=\\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\\"></path></svg></a>Installing and configuring a SQLite database</h1>\\n<hr>\\n<h2 id=\\"step-1-install-sqlite\\"><a href=\\"#step-1-install-sqlite\\" aria-label=\\"step 1 install sqlite permalink\\" class=\\"anchor\\"><svg aria-hidden=\\"true\\" focusable=\\"false\\" height=\\"16\\" version=\\"1.1\\" viewBox=\\"0 0 16 16\\" width=\\"16\\"><path fill-rule=\\"evenodd\\" d=\\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\\"></path></svg></a>Step 1: Install SQLite</h2>\\n<p>To use Swift-Kuery-SQLite you need to first install SQLite:</p>\\n<h3 id=\\"macos\\"><a href=\\"#macos\\" aria-label=\\"macos permalink\\" class=\\"anchor\\"><svg aria-hidden=\\"true\\" focusable=\\"false\\" height=\\"16\\" version=\\"1.1\\" viewBox=\\"0 0 16 16\\" width=\\"16\\"><path fill-rule=\\"evenodd\\" d=\\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\\"></path></svg></a>macOS</h3>\\n<p>On macOS we can use Homebrew to install SQLite:</p>\\n<div class=\\"gatsby-highlight\\" data-language=\\"text\\"><pre class=\\"language-text\\"><code class=\\"language-text\\">brew install sqlite</code></pre></div>\\n<h3 id=\\"linux\\"><a href=\\"#linux\\" aria-label=\\"linux permalink\\" class=\\"anchor\\"><svg aria-hidden=\\"true\\" focusable=\\"false\\" height=\\"16\\" version=\\"1.1\\" viewBox=\\"0 0 16 16\\" width=\\"16\\"><path fill-rule=\\"evenodd\\" d=\\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\\"></path></svg></a>Linux</h3>\\n<p>On Linux we can use <code class=\\"language-text\\">apt-get</code> to install SQLite:</p>\\n<div class=\\"gatsby-highlight\\" data-language=\\"text\\"><pre class=\\"language-text\\"><code class=\\"language-text\\">sudo apt-get install sqlite3 libsqlite3-dev</code></pre></div>\\n<hr>\\n<h2 id=\\"step-2-create-an-sqlite-database\\"><a href=\\"#step-2-create-an-sqlite-database\\" aria-label=\\"step 2 create an sqlite database permalink\\" class=\\"anchor\\"><svg aria-hidden=\\"true\\" focusable=\\"false\\" height=\\"16\\" version=\\"1.1\\" viewBox=\\"0 0 16 16\\" width=\\"16\\"><path fill-rule=\\"evenodd\\" d=\\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\\"></path></svg></a>Step 2: Create an SQLite database</h2>\\n<p>Now that we have SQLite installed we can create a database file.</p>\\n<p>In terminal return to your home directory:</p>\\n<div class=\\"gatsby-highlight\\" data-language=\\"text\\"><pre class=\\"language-text\\"><code class=\\"language-text\\">cd ~</code></pre></div>\\n<p>Use the SQL command line to create your database:</p>\\n<div class=\\"gatsby-highlight\\" data-language=\\"text\\"><pre class=\\"language-text\\"><code class=\\"language-text\\">sqlite3 bookstoredb.sqlite</code></pre></div>\\n<p>Remaining in the command line, create an SQL table:</p>\\n<div class=\\"gatsby-highlight\\" data-language=\\"text\\"><pre class=\\"language-text\\"><code class=\\"language-text\\">CREATE TABLE BookTable (\\n      id varchar(100) primary key,\\n      title text,\\n      price real,\\n      genre text\\n);</code></pre></div>\\n<p>press <code class=\\"language-text\\">Control-d</code> to exit SQLite.</p>\\n<p>Now we\'re ready to connect to our database from our Kitura server.</p>\\n<hr>\\n<h2 id=\\"step-3-create-a-connection-to-an-sqlite-database\\"><a href=\\"#step-3-create-a-connection-to-an-sqlite-database\\" aria-label=\\"step 3 create a connection to an sqlite database permalink\\" class=\\"anchor\\"><svg aria-hidden=\\"true\\" focusable=\\"false\\" height=\\"16\\" version=\\"1.1\\" viewBox=\\"0 0 16 16\\" width=\\"16\\"><path fill-rule=\\"evenodd\\" d=\\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\\"></path></svg></a>Step 3: Create a connection to an SQLite database</h2>\\n<p>Add <a href=\\"https://github.com/IBM-Swift/Swift-Kuery#update-your-packageswift-file\\">Swift-Kuery</a> and <a href=\\"https://github.com/IBM-Swift/Swift-Kuery-SQLite/#add-dependencies\\">SwiftKuerySQLite</a> to the dependencies in the <code class=\\"language-text\\">Package.swift</code> file.</p>\\n<p>Inside the file which defines the routes, <code class=\\"language-text\\">KueryRoutes.swift</code>, import the SwiftKuery and SwiftKuerySQLite packages:</p>\\n<div class=\\"gatsby-highlight\\" data-language=\\"swift\\"><pre class=\\"language-swift\\"><code class=\\"language-swift\\"><span class=\\"token keyword\\">import</span> <span class=\\"token builtin\\">SwiftKuery</span>\\n<span class=\\"token keyword\\">import</span> <span class=\\"token builtin\\">SwiftKuerySQLite</span></code></pre></div>\\n<p>Inside the <code class=\\"language-text\\">App</code> extension, create a connection pool by passing in the path to your database file:</p>\\n<div class=\\"gatsby-highlight\\" data-language=\\"swift\\"><pre class=\\"language-swift\\"><code class=\\"language-swift\\"><span class=\\"token keyword\\">static</span> <span class=\\"token keyword\\">let</span> path <span class=\\"token operator\\">=</span> <span class=\\"token function\\">NSString</span><span class=\\"token punctuation\\">(</span>string<span class=\\"token punctuation\\">:</span> <span class=\\"token string\\">\\"~/bookstoredb.sqlite\\"</span><span class=\\"token punctuation\\">)</span><span class=\\"token punctuation\\">.</span>expandingTildeInPath\\n<span class=\\"token keyword\\">static</span> <span class=\\"token keyword\\">let</span> poolOptions <span class=\\"token operator\\">=</span> <span class=\\"token function\\">ConnectionPoolOptions</span><span class=\\"token punctuation\\">(</span>initialCapacity<span class=\\"token punctuation\\">:</span> <span class=\\"token number\\">1</span><span class=\\"token punctuation\\">,</span> maxCapacity<span class=\\"token punctuation\\">:</span> <span class=\\"token number\\">5</span><span class=\\"token punctuation\\">)</span>\\n<span class=\\"token keyword\\">static</span> <span class=\\"token keyword\\">let</span> pool <span class=\\"token operator\\">=</span> <span class=\\"token builtin\\">SQLiteConnection</span><span class=\\"token punctuation\\">.</span><span class=\\"token function\\">createPool</span><span class=\\"token punctuation\\">(</span>filename<span class=\\"token punctuation\\">:</span> <span class=\\"token function\\">String</span><span class=\\"token punctuation\\">(</span>path<span class=\\"token punctuation\\">)</span><span class=\\"token punctuation\\">,</span> poolOptions<span class=\\"token punctuation\\">:</span> poolOptions<span class=\\"token punctuation\\">)</span>\\n<span class=\\"token comment\\">// Create table instance here</span></code></pre></div>\\n<p>This creates a pool of connections for us to use to make requests to our database.</p>\\n<p>Now you can return to the <a href=\\"/docs/databases/kuery/#step-2-install-a-database-plugin\\">Swift-Kuery</a> guide.</p>","frontmatter":{"path":"/docs/databases/kuery-sqlite","title":"Installing SQLite"}}},{"node":{"html":"<div class=\\"gatsby-highlight\\" data-language=\\"swift\\"><pre class=\\"language-swift\\"><code class=\\"language-swift\\"><span class=\\"token keyword\\">import</span> <span class=\\"token builtin\\">LoggerAPI</span>\\n<span class=\\"token keyword\\">import</span> <span class=\\"token builtin\\">Foundation</span>\\n\\n<span class=\\"token keyword\\">func</span> <span class=\\"token function\\">initializeKueryRoutes</span><span class=\\"token punctuation\\">(</span>app<span class=\\"token punctuation\\">:</span> <span class=\\"token builtin\\">App</span><span class=\\"token punctuation\\">)</span> <span class=\\"token punctuation\\">{</span>\\n\\n    app<span class=\\"token punctuation\\">.</span>router<span class=\\"token punctuation\\">.</span><span class=\\"token function\\">post</span><span class=\\"token punctuation\\">(</span><span class=\\"token string\\">\\"/kuery\\"</span><span class=\\"token punctuation\\">)</span> <span class=\\"token punctuation\\">{</span> request<span class=\\"token punctuation\\">,</span> response<span class=\\"token punctuation\\">,</span> next <span class=\\"token keyword\\">in</span>\\n        <span class=\\"token keyword\\">guard</span> <span class=\\"token keyword\\">let</span> book <span class=\\"token operator\\">=</span> <span class=\\"token keyword\\">try</span><span class=\\"token operator\\">?</span> request<span class=\\"token punctuation\\">.</span><span class=\\"token function\\">read</span><span class=\\"token punctuation\\">(</span><span class=\\"token keyword\\">as</span><span class=\\"token punctuation\\">:</span> <span class=\\"token builtin\\">Book</span><span class=\\"token punctuation\\">.</span><span class=\\"token keyword\\">self</span><span class=\\"token punctuation\\">)</span> <span class=\\"token keyword\\">else</span> <span class=\\"token punctuation\\">{</span>\\n            <span class=\\"token keyword\\">let</span> <span class=\\"token number\\">_</span> <span class=\\"token operator\\">=</span> response<span class=\\"token punctuation\\">.</span><span class=\\"token function\\">send</span><span class=\\"token punctuation\\">(</span>status<span class=\\"token punctuation\\">:</span> <span class=\\"token punctuation\\">.</span>badRequest<span class=\\"token punctuation\\">)</span>\\n            <span class=\\"token keyword\\">return</span> <span class=\\"token function\\">next</span><span class=\\"token punctuation\\">(</span><span class=\\"token punctuation\\">)</span>\\n        <span class=\\"token punctuation\\">}</span>\\n        <span class=\\"token comment\\">// Handle POST here</span>\\n    <span class=\\"token punctuation\\">}</span>\\n\\n    app<span class=\\"token punctuation\\">.</span>router<span class=\\"token punctuation\\">.</span><span class=\\"token keyword\\">get</span><span class=\\"token punctuation\\">(</span><span class=\\"token string\\">\\"/kuery\\"</span><span class=\\"token punctuation\\">)</span> <span class=\\"token punctuation\\">{</span> request<span class=\\"token punctuation\\">,</span> response<span class=\\"token punctuation\\">,</span> next <span class=\\"token keyword\\">in</span>\\n        <span class=\\"token comment\\">// Handle GET here</span>\\n    <span class=\\"token punctuation\\">}</span>\\n<span class=\\"token punctuation\\">}</span>\\n<span class=\\"token keyword\\">extension</span> <span class=\\"token builtin\\">App</span> <span class=\\"token punctuation\\">{</span>\\n    <span class=\\"token comment\\">// Create connection pool and initialize BookTable here</span>\\n<span class=\\"token punctuation\\">}</span></code></pre></div>","frontmatter":{"path":"/docs/databases/kuery1","title":"Raw snippet 1"}}},{"node":{"html":"<div class=\\"gatsby-highlight\\" data-language=\\"swift\\"><pre class=\\"language-swift\\"><code class=\\"language-swift\\"><span class=\\"token builtin\\">App</span><span class=\\"token punctuation\\">.</span>pool<span class=\\"token punctuation\\">.</span><span class=\\"token function\\">getConnection</span><span class=\\"token punctuation\\">(</span><span class=\\"token punctuation\\">)</span> <span class=\\"token punctuation\\">{</span> connection<span class=\\"token punctuation\\">,</span> error <span class=\\"token keyword\\">in</span>\\n        <span class=\\"token keyword\\">guard</span> <span class=\\"token keyword\\">let</span> connection <span class=\\"token operator\\">=</span> connection <span class=\\"token keyword\\">else</span> <span class=\\"token punctuation\\">{</span>\\n            <span class=\\"token builtin\\">Log</span><span class=\\"token punctuation\\">.</span><span class=\\"token function\\">error</span><span class=\\"token punctuation\\">(</span><span class=\\"token string\\">\\"Error connecting: <span class=\\"token interpolation\\"><span class=\\"token delimiter variable\\">\\\\(</span>error<span class=\\"token operator\\">?</span><span class=\\"token punctuation\\">.</span>localizedDescription <span class=\\"token operator\\">?</span><span class=\\"token operator\\">?</span> <span class=\\"token string\\">\\"Unknown Error\\"</span><span class=\\"token delimiter variable\\">)</span></span>\\"</span><span class=\\"token punctuation\\">)</span>\\n            <span class=\\"token keyword\\">let</span> <span class=\\"token number\\">_</span> <span class=\\"token operator\\">=</span> response<span class=\\"token punctuation\\">.</span><span class=\\"token function\\">send</span><span class=\\"token punctuation\\">(</span>status<span class=\\"token punctuation\\">:</span> <span class=\\"token punctuation\\">.</span>internalServerError<span class=\\"token punctuation\\">)</span>\\n            <span class=\\"token keyword\\">return</span> <span class=\\"token function\\">next</span><span class=\\"token punctuation\\">(</span><span class=\\"token punctuation\\">)</span>\\n        <span class=\\"token punctuation\\">}</span>\\n        <span class=\\"token comment\\">// Write query and execute it here</span>\\n<span class=\\"token punctuation\\">}</span></code></pre></div>","frontmatter":{"path":"/docs/databases/kuery2","title":"Raw snippet 2"}}},{"node":{"html":"<div class=\\"gatsby-highlight\\" data-language=\\"swift\\"><pre class=\\"language-swift\\"><code class=\\"language-swift\\">connection<span class=\\"token punctuation\\">.</span><span class=\\"token function\\">execute</span><span class=\\"token punctuation\\">(</span>query<span class=\\"token punctuation\\">:</span> insertQuery<span class=\\"token punctuation\\">)</span> <span class=\\"token punctuation\\">{</span> insertResult <span class=\\"token keyword\\">in</span>\\n    <span class=\\"token keyword\\">guard</span> insertResult<span class=\\"token punctuation\\">.</span>success <span class=\\"token keyword\\">else</span> <span class=\\"token punctuation\\">{</span>\\n        <span class=\\"token builtin\\">Log</span><span class=\\"token punctuation\\">.</span><span class=\\"token function\\">error</span><span class=\\"token punctuation\\">(</span><span class=\\"token string\\">\\"Error executing query: <span class=\\"token interpolation\\"><span class=\\"token delimiter variable\\">\\\\(</span>insertResult<span class=\\"token punctuation\\">.</span>asError<span class=\\"token operator\\">?</span><span class=\\"token punctuation\\">.</span>localizedDescription <span class=\\"token operator\\">?</span><span class=\\"token operator\\">?</span> <span class=\\"token string\\">\\"Unknown Error\\"</span><span class=\\"token delimiter variable\\">)</span></span>\\"</span><span class=\\"token punctuation\\">)</span>\\n        <span class=\\"token keyword\\">let</span> <span class=\\"token number\\">_</span> <span class=\\"token operator\\">=</span> response<span class=\\"token punctuation\\">.</span><span class=\\"token function\\">send</span><span class=\\"token punctuation\\">(</span>status<span class=\\"token punctuation\\">:</span> <span class=\\"token punctuation\\">.</span>internalServerError<span class=\\"token punctuation\\">)</span>\\n        <span class=\\"token keyword\\">return</span> <span class=\\"token function\\">next</span><span class=\\"token punctuation\\">(</span><span class=\\"token punctuation\\">)</span>\\n    <span class=\\"token punctuation\\">}</span>\\n    response<span class=\\"token punctuation\\">.</span><span class=\\"token function\\">send</span><span class=\\"token punctuation\\">(</span>book<span class=\\"token punctuation\\">)</span>\\n    <span class=\\"token keyword\\">return</span> <span class=\\"token function\\">next</span><span class=\\"token punctuation\\">(</span><span class=\\"token punctuation\\">)</span>\\n<span class=\\"token punctuation\\">}</span></code></pre></div>","frontmatter":{"path":"/docs/databases/kuery3","title":"Raw snippet 3"}}},{"node":{"html":"<div class=\\"gatsby-highlight\\" data-language=\\"swift\\"><pre class=\\"language-swift\\"><code class=\\"language-swift\\">app<span class=\\"token punctuation\\">.</span>router<span class=\\"token punctuation\\">.</span><span class=\\"token function\\">post</span><span class=\\"token punctuation\\">(</span><span class=\\"token string\\">\\"/kuery\\"</span><span class=\\"token punctuation\\">)</span> <span class=\\"token punctuation\\">{</span> request<span class=\\"token punctuation\\">,</span> response<span class=\\"token punctuation\\">,</span> next <span class=\\"token keyword\\">in</span>\\n    <span class=\\"token keyword\\">guard</span> <span class=\\"token keyword\\">let</span> book <span class=\\"token operator\\">=</span> <span class=\\"token keyword\\">try</span><span class=\\"token operator\\">?</span> request<span class=\\"token punctuation\\">.</span><span class=\\"token function\\">read</span><span class=\\"token punctuation\\">(</span><span class=\\"token keyword\\">as</span><span class=\\"token punctuation\\">:</span> <span class=\\"token builtin\\">Book</span><span class=\\"token punctuation\\">.</span><span class=\\"token keyword\\">self</span><span class=\\"token punctuation\\">)</span> <span class=\\"token keyword\\">else</span> <span class=\\"token punctuation\\">{</span>\\n        <span class=\\"token keyword\\">let</span> <span class=\\"token number\\">_</span> <span class=\\"token operator\\">=</span> response<span class=\\"token punctuation\\">.</span><span class=\\"token function\\">send</span><span class=\\"token punctuation\\">(</span>status<span class=\\"token punctuation\\">:</span> <span class=\\"token punctuation\\">.</span>badRequest<span class=\\"token punctuation\\">)</span>\\n        <span class=\\"token keyword\\">return</span> <span class=\\"token function\\">next</span><span class=\\"token punctuation\\">(</span><span class=\\"token punctuation\\">)</span>\\n    <span class=\\"token punctuation\\">}</span>\\n    <span class=\\"token keyword\\">let</span> rows <span class=\\"token operator\\">=</span> <span class=\\"token punctuation\\">[</span><span class=\\"token punctuation\\">[</span>book<span class=\\"token punctuation\\">.</span>id<span class=\\"token punctuation\\">,</span> book<span class=\\"token punctuation\\">.</span>title<span class=\\"token punctuation\\">,</span> book<span class=\\"token punctuation\\">.</span>price<span class=\\"token punctuation\\">,</span> book<span class=\\"token punctuation\\">.</span>genre<span class=\\"token punctuation\\">]</span><span class=\\"token punctuation\\">]</span>\\n    <span class=\\"token builtin\\">App</span><span class=\\"token punctuation\\">.</span>pool<span class=\\"token punctuation\\">.</span><span class=\\"token function\\">getConnection</span><span class=\\"token punctuation\\">(</span><span class=\\"token punctuation\\">)</span> <span class=\\"token punctuation\\">{</span> connection<span class=\\"token punctuation\\">,</span> error <span class=\\"token keyword\\">in</span>\\n        <span class=\\"token keyword\\">guard</span> <span class=\\"token keyword\\">let</span> connection <span class=\\"token operator\\">=</span> connection <span class=\\"token keyword\\">else</span> <span class=\\"token punctuation\\">{</span>\\n            <span class=\\"token builtin\\">Log</span><span class=\\"token punctuation\\">.</span><span class=\\"token function\\">error</span><span class=\\"token punctuation\\">(</span><span class=\\"token string\\">\\"Error connecting: <span class=\\"token interpolation\\"><span class=\\"token delimiter variable\\">\\\\(</span>error<span class=\\"token operator\\">?</span><span class=\\"token punctuation\\">.</span>localizedDescription <span class=\\"token operator\\">?</span><span class=\\"token operator\\">?</span> <span class=\\"token string\\">\\"Unknown Error\\"</span><span class=\\"token delimiter variable\\">)</span></span>\\"</span><span class=\\"token punctuation\\">)</span>\\n            <span class=\\"token keyword\\">let</span> <span class=\\"token number\\">_</span> <span class=\\"token operator\\">=</span> response<span class=\\"token punctuation\\">.</span><span class=\\"token function\\">send</span><span class=\\"token punctuation\\">(</span>status<span class=\\"token punctuation\\">:</span> <span class=\\"token punctuation\\">.</span>internalServerError<span class=\\"token punctuation\\">)</span>\\n            <span class=\\"token keyword\\">return</span> <span class=\\"token function\\">next</span><span class=\\"token punctuation\\">(</span><span class=\\"token punctuation\\">)</span>\\n        <span class=\\"token punctuation\\">}</span>\\n        <span class=\\"token keyword\\">let</span> insertQuery <span class=\\"token operator\\">=</span> <span class=\\"token function\\">Insert</span><span class=\\"token punctuation\\">(</span>into<span class=\\"token punctuation\\">:</span> <span class=\\"token builtin\\">App</span><span class=\\"token punctuation\\">.</span>bookTable<span class=\\"token punctuation\\">,</span> rows<span class=\\"token punctuation\\">:</span> rows<span class=\\"token punctuation\\">)</span>\\n        connection<span class=\\"token punctuation\\">.</span><span class=\\"token function\\">execute</span><span class=\\"token punctuation\\">(</span>query<span class=\\"token punctuation\\">:</span> insertQuery<span class=\\"token punctuation\\">)</span> <span class=\\"token punctuation\\">{</span> insertResult <span class=\\"token keyword\\">in</span>\\n            <span class=\\"token keyword\\">guard</span> insertResult<span class=\\"token punctuation\\">.</span>success <span class=\\"token keyword\\">else</span> <span class=\\"token punctuation\\">{</span>\\n                <span class=\\"token builtin\\">Log</span><span class=\\"token punctuation\\">.</span><span class=\\"token function\\">error</span><span class=\\"token punctuation\\">(</span><span class=\\"token string\\">\\"Error executing query: <span class=\\"token interpolation\\"><span class=\\"token delimiter variable\\">\\\\(</span>insertResult<span class=\\"token punctuation\\">.</span>asError<span class=\\"token operator\\">?</span><span class=\\"token punctuation\\">.</span>localizedDescription <span class=\\"token operator\\">?</span><span class=\\"token operator\\">?</span> <span class=\\"token string\\">\\"Unknown Error\\"</span><span class=\\"token delimiter variable\\">)</span></span>\\"</span><span class=\\"token punctuation\\">)</span>\\n                <span class=\\"token keyword\\">let</span> <span class=\\"token number\\">_</span> <span class=\\"token operator\\">=</span> response<span class=\\"token punctuation\\">.</span><span class=\\"token function\\">send</span><span class=\\"token punctuation\\">(</span>status<span class=\\"token punctuation\\">:</span> <span class=\\"token punctuation\\">.</span>internalServerError<span class=\\"token punctuation\\">)</span>\\n                <span class=\\"token keyword\\">return</span> <span class=\\"token function\\">next</span><span class=\\"token punctuation\\">(</span><span class=\\"token punctuation\\">)</span>\\n            <span class=\\"token punctuation\\">}</span>\\n            response<span class=\\"token punctuation\\">.</span><span class=\\"token function\\">send</span><span class=\\"token punctuation\\">(</span>book<span class=\\"token punctuation\\">)</span>\\n            <span class=\\"token keyword\\">return</span> <span class=\\"token function\\">next</span><span class=\\"token punctuation\\">(</span><span class=\\"token punctuation\\">)</span>\\n        <span class=\\"token punctuation\\">}</span>\\n    <span class=\\"token punctuation\\">}</span>\\n<span class=\\"token punctuation\\">}</span></code></pre></div>","frontmatter":{"path":"/docs/databases/kuery4","title":"Raw snippet 4"}}},{"node":{"html":"<div class=\\"gatsby-highlight\\" data-language=\\"swift\\"><pre class=\\"language-swift\\"><code class=\\"language-swift\\"><span class=\\"token builtin\\">App</span><span class=\\"token punctuation\\">.</span>pool<span class=\\"token punctuation\\">.</span><span class=\\"token function\\">getConnection</span><span class=\\"token punctuation\\">(</span><span class=\\"token punctuation\\">)</span> <span class=\\"token punctuation\\">{</span> connection<span class=\\"token punctuation\\">,</span> error <span class=\\"token keyword\\">in</span>\\n      <span class=\\"token keyword\\">guard</span> <span class=\\"token keyword\\">let</span> connection <span class=\\"token operator\\">=</span> connection <span class=\\"token keyword\\">else</span> <span class=\\"token punctuation\\">{</span>\\n          <span class=\\"token builtin\\">Log</span><span class=\\"token punctuation\\">.</span><span class=\\"token function\\">error</span><span class=\\"token punctuation\\">(</span><span class=\\"token string\\">\\"Error connecting: <span class=\\"token interpolation\\"><span class=\\"token delimiter variable\\">\\\\(</span>error<span class=\\"token operator\\">?</span><span class=\\"token punctuation\\">.</span>localizedDescription <span class=\\"token operator\\">?</span><span class=\\"token operator\\">?</span> <span class=\\"token string\\">\\"Unknown Error\\"</span><span class=\\"token delimiter variable\\">)</span></span>\\"</span><span class=\\"token punctuation\\">)</span>\\n          <span class=\\"token keyword\\">let</span> <span class=\\"token number\\">_</span> <span class=\\"token operator\\">=</span> response<span class=\\"token punctuation\\">.</span><span class=\\"token function\\">send</span><span class=\\"token punctuation\\">(</span>status<span class=\\"token punctuation\\">:</span> <span class=\\"token punctuation\\">.</span>internalServerError<span class=\\"token punctuation\\">)</span>\\n          <span class=\\"token keyword\\">return</span> <span class=\\"token function\\">next</span><span class=\\"token punctuation\\">(</span><span class=\\"token punctuation\\">)</span>\\n      <span class=\\"token punctuation\\">}</span>\\n      <span class=\\"token comment\\">// Write query and execute it here</span>\\n  <span class=\\"token punctuation\\">}</span></code></pre></div>","frontmatter":{"path":"/docs/databases/kuery5","title":"Raw snippet 5"}}},{"node":{"html":"<div class=\\"gatsby-highlight\\" data-language=\\"swift\\"><pre class=\\"language-swift\\"><code class=\\"language-swift\\">connection<span class=\\"token punctuation\\">.</span><span class=\\"token function\\">execute</span><span class=\\"token punctuation\\">(</span>query<span class=\\"token punctuation\\">:</span> selectQuery<span class=\\"token punctuation\\">)</span> <span class=\\"token punctuation\\">{</span> selectResult <span class=\\"token keyword\\">in</span>\\n    <span class=\\"token keyword\\">guard</span> <span class=\\"token keyword\\">let</span> resultSet <span class=\\"token operator\\">=</span> selectResult<span class=\\"token punctuation\\">.</span>asResultSet <span class=\\"token keyword\\">else</span> <span class=\\"token punctuation\\">{</span>\\n        <span class=\\"token builtin\\">Log</span><span class=\\"token punctuation\\">.</span><span class=\\"token function\\">error</span><span class=\\"token punctuation\\">(</span><span class=\\"token string\\">\\"Error connecting: <span class=\\"token interpolation\\"><span class=\\"token delimiter variable\\">\\\\(</span>selectResult<span class=\\"token punctuation\\">.</span>asError<span class=\\"token operator\\">?</span><span class=\\"token punctuation\\">.</span>localizedDescription <span class=\\"token operator\\">?</span><span class=\\"token operator\\">?</span> <span class=\\"token string\\">\\"Unknown Error\\"</span><span class=\\"token delimiter variable\\">)</span></span>\\"</span><span class=\\"token punctuation\\">)</span>\\n        <span class=\\"token keyword\\">let</span> <span class=\\"token number\\">_</span> <span class=\\"token operator\\">=</span> response<span class=\\"token punctuation\\">.</span><span class=\\"token function\\">send</span><span class=\\"token punctuation\\">(</span>status<span class=\\"token punctuation\\">:</span> <span class=\\"token punctuation\\">.</span>internalServerError<span class=\\"token punctuation\\">)</span>\\n        <span class=\\"token keyword\\">return</span> <span class=\\"token function\\">next</span><span class=\\"token punctuation\\">(</span><span class=\\"token punctuation\\">)</span>\\n    <span class=\\"token punctuation\\">}</span>\\n    <span class=\\"token comment\\">// Iterate through result set here</span>\\n<span class=\\"token punctuation\\">}</span></code></pre></div>","frontmatter":{"path":"/docs/databases/kuery6","title":"Raw snippet 6"}}},{"node":{"html":"<div class=\\"gatsby-highlight\\" data-language=\\"swift\\"><pre class=\\"language-swift\\"><code class=\\"language-swift\\"><span class=\\"token keyword\\">guard</span> <span class=\\"token keyword\\">let</span> row <span class=\\"token operator\\">=</span> row <span class=\\"token keyword\\">else</span> <span class=\\"token punctuation\\">{</span>\\n      <span class=\\"token keyword\\">if</span> <span class=\\"token keyword\\">let</span> error <span class=\\"token operator\\">=</span> error <span class=\\"token punctuation\\">{</span>\\n          <span class=\\"token builtin\\">Log</span><span class=\\"token punctuation\\">.</span><span class=\\"token function\\">error</span><span class=\\"token punctuation\\">(</span><span class=\\"token string\\">\\"Error getting row: <span class=\\"token interpolation\\"><span class=\\"token delimiter variable\\">\\\\(</span>error<span class=\\"token delimiter variable\\">)</span></span>\\"</span><span class=\\"token punctuation\\">)</span>\\n          <span class=\\"token keyword\\">let</span> <span class=\\"token number\\">_</span> <span class=\\"token operator\\">=</span> response<span class=\\"token punctuation\\">.</span><span class=\\"token function\\">send</span><span class=\\"token punctuation\\">(</span>status<span class=\\"token punctuation\\">:</span> <span class=\\"token punctuation\\">.</span>internalServerError<span class=\\"token punctuation\\">)</span>\\n          <span class=\\"token keyword\\">return</span> <span class=\\"token function\\">next</span><span class=\\"token punctuation\\">(</span><span class=\\"token punctuation\\">)</span>\\n      <span class=\\"token punctuation\\">}</span> <span class=\\"token keyword\\">else</span> <span class=\\"token punctuation\\">{</span>\\n          <span class=\\"token comment\\">// All rows have been processed</span>\\n          response<span class=\\"token punctuation\\">.</span><span class=\\"token function\\">send</span><span class=\\"token punctuation\\">(</span>books<span class=\\"token punctuation\\">)</span>\\n          <span class=\\"token keyword\\">return</span> <span class=\\"token function\\">next</span><span class=\\"token punctuation\\">(</span><span class=\\"token punctuation\\">)</span>\\n      <span class=\\"token punctuation\\">}</span>\\n  <span class=\\"token punctuation\\">}</span>\\n  <span class=\\"token comment\\">// Convert row to book here</span></code></pre></div>","frontmatter":{"path":"/docs/databases/kuery7","title":"Raw snippet 7"}}},{"node":{"html":"<div class=\\"gatsby-highlight\\" data-language=\\"swift\\"><pre class=\\"language-swift\\"><code class=\\"language-swift\\"><span class=\\"token keyword\\">import</span> <span class=\\"token builtin\\">LoggerAPI</span>\\n  <span class=\\"token keyword\\">import</span> <span class=\\"token builtin\\">Foundation</span>\\n  <span class=\\"token keyword\\">import</span> <span class=\\"token builtin\\">SwiftKuery</span>\\n  <span class=\\"token keyword\\">import</span> <span class=\\"token builtin\\">SwiftKueryPostgreSQL</span> <span class=\\"token comment\\">// This will be different if you did not use PostgreSQL</span>\\n\\n  <span class=\\"token keyword\\">func</span> <span class=\\"token function\\">initializeKueryRoutes</span><span class=\\"token punctuation\\">(</span>app<span class=\\"token punctuation\\">:</span> <span class=\\"token builtin\\">App</span><span class=\\"token punctuation\\">)</span> <span class=\\"token punctuation\\">{</span>\\n\\n      app<span class=\\"token punctuation\\">.</span>router<span class=\\"token punctuation\\">.</span><span class=\\"token function\\">post</span><span class=\\"token punctuation\\">(</span><span class=\\"token string\\">\\"/kuery\\"</span><span class=\\"token punctuation\\">)</span> <span class=\\"token punctuation\\">{</span> request<span class=\\"token punctuation\\">,</span> response<span class=\\"token punctuation\\">,</span> next <span class=\\"token keyword\\">in</span>\\n          <span class=\\"token keyword\\">guard</span> <span class=\\"token keyword\\">let</span> book <span class=\\"token operator\\">=</span> <span class=\\"token keyword\\">try</span><span class=\\"token operator\\">?</span> request<span class=\\"token punctuation\\">.</span><span class=\\"token function\\">read</span><span class=\\"token punctuation\\">(</span><span class=\\"token keyword\\">as</span><span class=\\"token punctuation\\">:</span> <span class=\\"token builtin\\">Book</span><span class=\\"token punctuation\\">.</span><span class=\\"token keyword\\">self</span><span class=\\"token punctuation\\">)</span> <span class=\\"token keyword\\">else</span> <span class=\\"token punctuation\\">{</span>\\n              <span class=\\"token keyword\\">let</span> <span class=\\"token number\\">_</span> <span class=\\"token operator\\">=</span> response<span class=\\"token punctuation\\">.</span><span class=\\"token function\\">send</span><span class=\\"token punctuation\\">(</span>status<span class=\\"token punctuation\\">:</span> <span class=\\"token punctuation\\">.</span>badRequest<span class=\\"token punctuation\\">)</span>\\n              <span class=\\"token keyword\\">return</span> <span class=\\"token function\\">next</span><span class=\\"token punctuation\\">(</span><span class=\\"token punctuation\\">)</span>\\n          <span class=\\"token punctuation\\">}</span>\\n          <span class=\\"token keyword\\">let</span> rows <span class=\\"token operator\\">=</span> <span class=\\"token punctuation\\">[</span><span class=\\"token punctuation\\">[</span>book<span class=\\"token punctuation\\">.</span>id<span class=\\"token punctuation\\">,</span> book<span class=\\"token punctuation\\">.</span>title<span class=\\"token punctuation\\">,</span> book<span class=\\"token punctuation\\">.</span>price<span class=\\"token punctuation\\">,</span> book<span class=\\"token punctuation\\">.</span>genre<span class=\\"token punctuation\\">]</span><span class=\\"token punctuation\\">]</span>\\n          <span class=\\"token builtin\\">App</span><span class=\\"token punctuation\\">.</span>pool<span class=\\"token punctuation\\">.</span><span class=\\"token function\\">getConnection</span><span class=\\"token punctuation\\">(</span><span class=\\"token punctuation\\">)</span> <span class=\\"token punctuation\\">{</span> connection<span class=\\"token punctuation\\">,</span> error <span class=\\"token keyword\\">in</span>\\n              <span class=\\"token keyword\\">guard</span> <span class=\\"token keyword\\">let</span> connection <span class=\\"token operator\\">=</span> connection <span class=\\"token keyword\\">else</span> <span class=\\"token punctuation\\">{</span>\\n                  <span class=\\"token builtin\\">Log</span><span class=\\"token punctuation\\">.</span><span class=\\"token function\\">error</span><span class=\\"token punctuation\\">(</span><span class=\\"token string\\">\\"Error connecting: <span class=\\"token interpolation\\"><span class=\\"token delimiter variable\\">\\\\(</span>error<span class=\\"token operator\\">?</span><span class=\\"token punctuation\\">.</span>localizedDescription <span class=\\"token operator\\">?</span><span class=\\"token operator\\">?</span> <span class=\\"token string\\">\\"Unknown Error\\"</span><span class=\\"token delimiter variable\\">)</span></span>\\"</span><span class=\\"token punctuation\\">)</span>\\n                  <span class=\\"token keyword\\">let</span> <span class=\\"token number\\">_</span> <span class=\\"token operator\\">=</span> response<span class=\\"token punctuation\\">.</span><span class=\\"token function\\">send</span><span class=\\"token punctuation\\">(</span>status<span class=\\"token punctuation\\">:</span> <span class=\\"token punctuation\\">.</span>internalServerError<span class=\\"token punctuation\\">)</span>\\n                  <span class=\\"token keyword\\">return</span> <span class=\\"token function\\">next</span><span class=\\"token punctuation\\">(</span><span class=\\"token punctuation\\">)</span>\\n              <span class=\\"token punctuation\\">}</span>\\n              <span class=\\"token keyword\\">let</span> insertQuery <span class=\\"token operator\\">=</span> <span class=\\"token function\\">Insert</span><span class=\\"token punctuation\\">(</span>into<span class=\\"token punctuation\\">:</span> <span class=\\"token builtin\\">App</span><span class=\\"token punctuation\\">.</span>bookTable<span class=\\"token punctuation\\">,</span> rows<span class=\\"token punctuation\\">:</span> rows<span class=\\"token punctuation\\">)</span>\\n              connection<span class=\\"token punctuation\\">.</span><span class=\\"token function\\">execute</span><span class=\\"token punctuation\\">(</span>query<span class=\\"token punctuation\\">:</span> insertQuery<span class=\\"token punctuation\\">)</span> <span class=\\"token punctuation\\">{</span> insertResult <span class=\\"token keyword\\">in</span>\\n                  <span class=\\"token keyword\\">guard</span> insertResult<span class=\\"token punctuation\\">.</span>success <span class=\\"token keyword\\">else</span> <span class=\\"token punctuation\\">{</span>\\n                      <span class=\\"token builtin\\">Log</span><span class=\\"token punctuation\\">.</span><span class=\\"token function\\">error</span><span class=\\"token punctuation\\">(</span><span class=\\"token string\\">\\"Error executing query: <span class=\\"token interpolation\\"><span class=\\"token delimiter variable\\">\\\\(</span>insertResult<span class=\\"token punctuation\\">.</span>asError<span class=\\"token operator\\">?</span><span class=\\"token punctuation\\">.</span>localizedDescription <span class=\\"token operator\\">?</span><span class=\\"token operator\\">?</span> <span class=\\"token string\\">\\"Unknown Error\\"</span><span class=\\"token delimiter variable\\">)</span></span>\\"</span><span class=\\"token punctuation\\">)</span>\\n                      <span class=\\"token keyword\\">let</span> <span class=\\"token number\\">_</span> <span class=\\"token operator\\">=</span> response<span class=\\"token punctuation\\">.</span><span class=\\"token function\\">send</span><span class=\\"token punctuation\\">(</span>status<span class=\\"token punctuation\\">:</span> <span class=\\"token punctuation\\">.</span>internalServerError<span class=\\"token punctuation\\">)</span>\\n                      <span class=\\"token keyword\\">return</span> <span class=\\"token function\\">next</span><span class=\\"token punctuation\\">(</span><span class=\\"token punctuation\\">)</span>\\n                  <span class=\\"token punctuation\\">}</span>\\n                  response<span class=\\"token punctuation\\">.</span><span class=\\"token function\\">send</span><span class=\\"token punctuation\\">(</span>book<span class=\\"token punctuation\\">)</span>\\n                  <span class=\\"token function\\">next</span><span class=\\"token punctuation\\">(</span><span class=\\"token punctuation\\">)</span>\\n              <span class=\\"token punctuation\\">}</span>\\n          <span class=\\"token punctuation\\">}</span>\\n      <span class=\\"token punctuation\\">}</span>\\n\\n      app<span class=\\"token punctuation\\">.</span>router<span class=\\"token punctuation\\">.</span><span class=\\"token keyword\\">get</span><span class=\\"token punctuation\\">(</span><span class=\\"token string\\">\\"/kuery\\"</span><span class=\\"token punctuation\\">)</span> <span class=\\"token punctuation\\">{</span> request<span class=\\"token punctuation\\">,</span> response<span class=\\"token punctuation\\">,</span> next <span class=\\"token keyword\\">in</span>\\n          <span class=\\"token builtin\\">App</span><span class=\\"token punctuation\\">.</span>pool<span class=\\"token punctuation\\">.</span><span class=\\"token function\\">getConnection</span><span class=\\"token punctuation\\">(</span><span class=\\"token punctuation\\">)</span> <span class=\\"token punctuation\\">{</span> connection<span class=\\"token punctuation\\">,</span> error <span class=\\"token keyword\\">in</span>\\n              <span class=\\"token keyword\\">guard</span> <span class=\\"token keyword\\">let</span> connection <span class=\\"token operator\\">=</span> connection <span class=\\"token keyword\\">else</span> <span class=\\"token punctuation\\">{</span>\\n                  <span class=\\"token builtin\\">Log</span><span class=\\"token punctuation\\">.</span><span class=\\"token function\\">error</span><span class=\\"token punctuation\\">(</span><span class=\\"token string\\">\\"Error connecting: <span class=\\"token interpolation\\"><span class=\\"token delimiter variable\\">\\\\(</span>error<span class=\\"token operator\\">?</span><span class=\\"token punctuation\\">.</span>localizedDescription <span class=\\"token operator\\">?</span><span class=\\"token operator\\">?</span> <span class=\\"token string\\">\\"Unknown Error\\"</span><span class=\\"token delimiter variable\\">)</span></span>\\"</span><span class=\\"token punctuation\\">)</span>\\n                  <span class=\\"token keyword\\">let</span> <span class=\\"token number\\">_</span> <span class=\\"token operator\\">=</span> response<span class=\\"token punctuation\\">.</span><span class=\\"token function\\">send</span><span class=\\"token punctuation\\">(</span>status<span class=\\"token punctuation\\">:</span> <span class=\\"token punctuation\\">.</span>internalServerError<span class=\\"token punctuation\\">)</span>\\n                  <span class=\\"token keyword\\">return</span> <span class=\\"token function\\">next</span><span class=\\"token punctuation\\">(</span><span class=\\"token punctuation\\">)</span>\\n              <span class=\\"token punctuation\\">}</span>\\n              <span class=\\"token keyword\\">let</span> selectQuery <span class=\\"token operator\\">=</span> <span class=\\"token function\\">Select</span><span class=\\"token punctuation\\">(</span>from<span class=\\"token punctuation\\">:</span> <span class=\\"token builtin\\">App</span><span class=\\"token punctuation\\">.</span>bookTable<span class=\\"token punctuation\\">)</span>\\n              connection<span class=\\"token punctuation\\">.</span><span class=\\"token function\\">execute</span><span class=\\"token punctuation\\">(</span>query<span class=\\"token punctuation\\">:</span> selectQuery<span class=\\"token punctuation\\">)</span> <span class=\\"token punctuation\\">{</span> selectResult <span class=\\"token keyword\\">in</span>\\n                  <span class=\\"token keyword\\">guard</span> <span class=\\"token keyword\\">let</span> resultSet <span class=\\"token operator\\">=</span> selectResult<span class=\\"token punctuation\\">.</span>asResultSet <span class=\\"token keyword\\">else</span> <span class=\\"token punctuation\\">{</span>\\n                      <span class=\\"token builtin\\">Log</span><span class=\\"token punctuation\\">.</span><span class=\\"token function\\">error</span><span class=\\"token punctuation\\">(</span><span class=\\"token string\\">\\"Error connecting: <span class=\\"token interpolation\\"><span class=\\"token delimiter variable\\">\\\\(</span>selectResult<span class=\\"token punctuation\\">.</span>asError<span class=\\"token operator\\">?</span><span class=\\"token punctuation\\">.</span>localizedDescription <span class=\\"token operator\\">?</span><span class=\\"token operator\\">?</span> <span class=\\"token string\\">\\"Unknown Error\\"</span><span class=\\"token delimiter variable\\">)</span></span>\\"</span><span class=\\"token punctuation\\">)</span>\\n                      <span class=\\"token keyword\\">let</span> <span class=\\"token number\\">_</span> <span class=\\"token operator\\">=</span> response<span class=\\"token punctuation\\">.</span><span class=\\"token function\\">send</span><span class=\\"token punctuation\\">(</span>status<span class=\\"token punctuation\\">:</span> <span class=\\"token punctuation\\">.</span>internalServerError<span class=\\"token punctuation\\">)</span>\\n                      <span class=\\"token keyword\\">return</span> <span class=\\"token function\\">next</span><span class=\\"token punctuation\\">(</span><span class=\\"token punctuation\\">)</span>\\n                  <span class=\\"token punctuation\\">}</span>\\n                  <span class=\\"token keyword\\">var</span> books <span class=\\"token operator\\">=</span> <span class=\\"token punctuation\\">[</span><span class=\\"token builtin\\">Book</span><span class=\\"token punctuation\\">]</span><span class=\\"token punctuation\\">(</span><span class=\\"token punctuation\\">)</span>\\n                  resultSet<span class=\\"token punctuation\\">.</span><span class=\\"token function\\">forEach</span><span class=\\"token punctuation\\">(</span><span class=\\"token punctuation\\">)</span> <span class=\\"token punctuation\\">{</span> row<span class=\\"token punctuation\\">,</span> error <span class=\\"token keyword\\">in</span>\\n                      <span class=\\"token keyword\\">guard</span> <span class=\\"token keyword\\">let</span> row <span class=\\"token operator\\">=</span> row <span class=\\"token keyword\\">else</span> <span class=\\"token punctuation\\">{</span>\\n                          <span class=\\"token keyword\\">if</span> <span class=\\"token keyword\\">let</span> error <span class=\\"token operator\\">=</span> error <span class=\\"token punctuation\\">{</span>\\n                              <span class=\\"token builtin\\">Log</span><span class=\\"token punctuation\\">.</span><span class=\\"token function\\">error</span><span class=\\"token punctuation\\">(</span><span class=\\"token string\\">\\"Error getting row: <span class=\\"token interpolation\\"><span class=\\"token delimiter variable\\">\\\\(</span>error<span class=\\"token delimiter variable\\">)</span></span>\\"</span><span class=\\"token punctuation\\">)</span>\\n                              <span class=\\"token keyword\\">let</span> <span class=\\"token number\\">_</span> <span class=\\"token operator\\">=</span> response<span class=\\"token punctuation\\">.</span><span class=\\"token function\\">send</span><span class=\\"token punctuation\\">(</span>status<span class=\\"token punctuation\\">:</span> <span class=\\"token punctuation\\">.</span>internalServerError<span class=\\"token punctuation\\">)</span>\\n                              <span class=\\"token keyword\\">return</span> <span class=\\"token function\\">next</span><span class=\\"token punctuation\\">(</span><span class=\\"token punctuation\\">)</span>\\n                          <span class=\\"token punctuation\\">}</span> <span class=\\"token keyword\\">else</span> <span class=\\"token punctuation\\">{</span>\\n                              <span class=\\"token comment\\">// All rows have been processed</span>\\n                              response<span class=\\"token punctuation\\">.</span><span class=\\"token function\\">send</span><span class=\\"token punctuation\\">(</span>books<span class=\\"token punctuation\\">)</span>\\n                              <span class=\\"token keyword\\">return</span> <span class=\\"token function\\">next</span><span class=\\"token punctuation\\">(</span><span class=\\"token punctuation\\">)</span>\\n                          <span class=\\"token punctuation\\">}</span>\\n                      <span class=\\"token punctuation\\">}</span>\\n                      <span class=\\"token keyword\\">guard</span> <span class=\\"token keyword\\">let</span> idString <span class=\\"token operator\\">=</span> row<span class=\\"token punctuation\\">[</span><span class=\\"token number\\">0</span><span class=\\"token punctuation\\">]</span> <span class=\\"token keyword\\">as</span><span class=\\"token operator\\">?</span> <span class=\\"token builtin\\">String</span><span class=\\"token punctuation\\">,</span>\\n                          <span class=\\"token keyword\\">let</span> id <span class=\\"token operator\\">=</span> <span class=\\"token function\\">Int</span><span class=\\"token punctuation\\">(</span>idString<span class=\\"token punctuation\\">)</span><span class=\\"token punctuation\\">,</span>\\n                          <span class=\\"token keyword\\">let</span> title <span class=\\"token operator\\">=</span> row<span class=\\"token punctuation\\">[</span><span class=\\"token number\\">1</span><span class=\\"token punctuation\\">]</span> <span class=\\"token keyword\\">as</span><span class=\\"token operator\\">?</span> <span class=\\"token builtin\\">String</span><span class=\\"token punctuation\\">,</span>\\n                          <span class=\\"token keyword\\">let</span> price <span class=\\"token operator\\">=</span> row<span class=\\"token punctuation\\">[</span><span class=\\"token number\\">2</span><span class=\\"token punctuation\\">]</span> <span class=\\"token keyword\\">as</span><span class=\\"token operator\\">?</span> <span class=\\"token builtin\\">Double</span><span class=\\"token punctuation\\">,</span>\\n                          <span class=\\"token keyword\\">let</span> genre <span class=\\"token operator\\">=</span> row<span class=\\"token punctuation\\">[</span><span class=\\"token number\\">3</span><span class=\\"token punctuation\\">]</span> <span class=\\"token keyword\\">as</span><span class=\\"token operator\\">?</span> <span class=\\"token builtin\\">String</span>\\n                          <span class=\\"token keyword\\">else</span> <span class=\\"token punctuation\\">{</span>\\n                              <span class=\\"token builtin\\">Log</span><span class=\\"token punctuation\\">.</span><span class=\\"token function\\">error</span><span class=\\"token punctuation\\">(</span><span class=\\"token string\\">\\"Unable to decode book\\"</span><span class=\\"token punctuation\\">)</span>\\n                              <span class=\\"token keyword\\">let</span> <span class=\\"token number\\">_</span> <span class=\\"token operator\\">=</span> response<span class=\\"token punctuation\\">.</span><span class=\\"token function\\">send</span><span class=\\"token punctuation\\">(</span>status<span class=\\"token punctuation\\">:</span> <span class=\\"token punctuation\\">.</span>internalServerError<span class=\\"token punctuation\\">)</span>\\n                              <span class=\\"token keyword\\">return</span> <span class=\\"token function\\">next</span><span class=\\"token punctuation\\">(</span><span class=\\"token punctuation\\">)</span>\\n                      <span class=\\"token punctuation\\">}</span>\\n                      books<span class=\\"token punctuation\\">.</span><span class=\\"token function\\">append</span><span class=\\"token punctuation\\">(</span><span class=\\"token function\\">Book</span><span class=\\"token punctuation\\">(</span>id<span class=\\"token punctuation\\">:</span> id<span class=\\"token punctuation\\">,</span> title<span class=\\"token punctuation\\">:</span> title<span class=\\"token punctuation\\">,</span> price<span class=\\"token punctuation\\">:</span> price<span class=\\"token punctuation\\">,</span> genre<span class=\\"token punctuation\\">:</span> genre<span class=\\"token punctuation\\">)</span><span class=\\"token punctuation\\">)</span>\\n                  <span class=\\"token punctuation\\">}</span>\\n              <span class=\\"token punctuation\\">}</span>\\n          <span class=\\"token punctuation\\">}</span>\\n      <span class=\\"token punctuation\\">}</span>\\n  <span class=\\"token punctuation\\">}</span>\\n  <span class=\\"token keyword\\">extension</span> <span class=\\"token builtin\\">App</span> <span class=\\"token punctuation\\">{</span>\\n      <span class=\\"token keyword\\">static</span> <span class=\\"token keyword\\">let</span> poolOptions <span class=\\"token operator\\">=</span> <span class=\\"token function\\">ConnectionPoolOptions</span><span class=\\"token punctuation\\">(</span>initialCapacity<span class=\\"token punctuation\\">:</span> <span class=\\"token number\\">1</span><span class=\\"token punctuation\\">,</span> maxCapacity<span class=\\"token punctuation\\">:</span> <span class=\\"token number\\">5</span><span class=\\"token punctuation\\">)</span>\\n      <span class=\\"token comment\\">// The createPool() will be different if you used a plugin other than PostgreSQL</span>\\n      <span class=\\"token keyword\\">static</span> <span class=\\"token keyword\\">let</span> pool <span class=\\"token operator\\">=</span> <span class=\\"token builtin\\">PostgreSQLConnection</span><span class=\\"token punctuation\\">.</span><span class=\\"token function\\">createPool</span><span class=\\"token punctuation\\">(</span>host<span class=\\"token punctuation\\">:</span> <span class=\\"token string\\">\\"localhost\\"</span><span class=\\"token punctuation\\">,</span> port<span class=\\"token punctuation\\">:</span> <span class=\\"token number\\">5432</span><span class=\\"token punctuation\\">,</span> options<span class=\\"token punctuation\\">:</span> <span class=\\"token punctuation\\">[</span><span class=\\"token punctuation\\">.</span><span class=\\"token function\\">databaseName</span><span class=\\"token punctuation\\">(</span><span class=\\"token string\\">\\"bookstoredb\\"</span><span class=\\"token punctuation\\">)</span><span class=\\"token punctuation\\">]</span><span class=\\"token punctuation\\">,</span> poolOptions<span class=\\"token punctuation\\">:</span> poolOptions<span class=\\"token punctuation\\">)</span>\\n      <span class=\\"token keyword\\">static</span> <span class=\\"token keyword\\">let</span> bookTable <span class=\\"token operator\\">=</span> <span class=\\"token function\\">BookTable</span><span class=\\"token punctuation\\">(</span><span class=\\"token punctuation\\">)</span>\\n  <span class=\\"token punctuation\\">}</span></code></pre></div>","frontmatter":{"path":"/docs/databases/kuery8","title":"Raw snippet 8"}}},{"node":{"html":"<h1 id=\\"deploying-with-cloud-foundry\\"><a href=\\"#deploying-with-cloud-foundry\\" aria-label=\\"deploying with cloud foundry permalink\\" class=\\"anchor\\"><svg aria-hidden=\\"true\\" focusable=\\"false\\" height=\\"16\\" version=\\"1.1\\" viewBox=\\"0 0 16 16\\" width=\\"16\\"><path fill-rule=\\"evenodd\\" d=\\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\\"></path></svg></a>Deploying with Cloud Foundry</h1>\\n<p>This guide will show you how to deploy your Kitura application to a <a href=\\"https://www.cloudfoundry.org\\">Cloud Foundry</a> based cloud environment. The guide assumes you already have an environment to deploy to. If not, you can sign up to <a href=\\"https://www.ibm.com/cloud/free/\\">IBM Cloud</a> for free and use it to host your Cloud Foundry apps.</p>\\n<hr>\\n<h2 id=\\"step-1-create-a-manifestyml-file\\"><a href=\\"#step-1-create-a-manifestyml-file\\" aria-label=\\"step 1 create a manifestyml file permalink\\" class=\\"anchor\\"><svg aria-hidden=\\"true\\" focusable=\\"false\\" height=\\"16\\" version=\\"1.1\\" viewBox=\\"0 0 16 16\\" width=\\"16\\"><path fill-rule=\\"evenodd\\" d=\\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\\"></path></svg></a>Step 1: Create a manifest.yml file</h2>\\n<p>If you used the Kitura CLI, or macOS app, to create your Kitura project, your generated Kitura project will already contain a <code class=\\"language-text\\">manifest.yml</code> file which you can use to deploy your application.</p>\\n<p>If you created your Kitura application from scratch, create a <code class=\\"language-text\\">manifest.yml</code> file in the root directory of your application. Once you have created the file, add the following to your file, replacing <code class=\\"language-text\\">MYAPP</code> with the name of your application.</p>\\n<div class=\\"gatsby-highlight\\" data-language=\\"text\\"><pre class=\\"language-text\\"><code class=\\"language-text\\">---\\napplications:\\n- name: MYAPP</code></pre></div>\\n<p>If you\'re deploying to the default Swift buildpack on IBM Cloud, you also need to supply the command required to run your application, for example:</p>\\n<div class=\\"gatsby-highlight\\" data-language=\\"text\\"><pre class=\\"language-text\\"><code class=\\"language-text\\">  command: &quot;&#39;MYAPP&#39;&quot;</code></pre></div>\\n<p>Although you can deploy applications without a manifest, manifests provide consistency and reproducibility across deployments. You can also specify <a href=\\"https://docs.cloudfoundry.org/devguide/deploy-apps/manifest-attributes.html\\">additional application attributes</a> within your manifest.</p>\\n<p>We are going to use the Cloud Foundry command line interface, so first we need to <a href=\\"https://github.com/cloudfoundry/cli#downloads\\">install the Cloud Foundry CLI</a>.</p>\\n<p>If you are using IBM Cloud, it is recommended that you deploy to Cloud Foundry using the IBM Cloud CLI tools.</p>\\n<p>Download the required CLI tools using the Kitura CLI:</p>\\n<div class=\\"gatsby-highlight\\" data-language=\\"text\\"><pre class=\\"language-text\\"><code class=\\"language-text\\">kitura idt</code></pre></div>\\n<blockquote>\\n<p>If you don\'t have the Kitura CLI installed, you can also install the required CLI tools with the following command:</p>\\n<div class=\\"gatsby-highlight\\" data-language=\\"text\\"><pre class=\\"language-text\\"><code class=\\"language-text\\">curl -sL https://ibm.biz/idt-installer | bash</code></pre></div>\\n</blockquote>\\n<hr>\\n<h2 id=\\"step-2-set-url-target\\"><a href=\\"#step-2-set-url-target\\" aria-label=\\"step 2 set url target permalink\\" class=\\"anchor\\"><svg aria-hidden=\\"true\\" focusable=\\"false\\" height=\\"16\\" version=\\"1.1\\" viewBox=\\"0 0 16 16\\" width=\\"16\\"><path fill-rule=\\"evenodd\\" d=\\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\\"></path></svg></a>Step 2: Set URL target</h2>\\n<p>To push your application, you first need to consult your cloud operator to find the URL you need to target. If you are on IBM Cloud, you can look in the <a href=\\"https://cloud.ibm.com/docs/cf-cli-plugin?topic=cf-cli-plugin-cf-cli-plugin\\">IBM Cloud Foundry CLI documentation for the cf api command</a> to locate the Cloud Foundry API endpoint for your region.</p>\\n<p>You can set it in the command line like this:</p>\\n<div class=\\"gatsby-highlight\\" data-language=\\"text\\"><pre class=\\"language-text\\"><code class=\\"language-text\\">cf login -a &lt;API endpoint&gt;</code></pre></div>\\n<p>For example, if your IBM Cloud account is in the <code class=\\"language-text\\">eu-gb</code> region this would be:</p>\\n<div class=\\"gatsby-highlight\\" data-language=\\"text\\"><pre class=\\"language-text\\"><code class=\\"language-text\\">cf login -a api.eu-gb.cf.cloud.ibm.com</code></pre></div>\\n<p>You’ll also need to provide your username and password when prompted.</p>\\n<blockquote>\\n<p>If you are deploying to the IBM Cloud, it is recommended that you use the IBM Cloud CLI. To do this all you need to do is add the <code class=\\"language-text\\">ibmcloud</code> prefix to the <code class=\\"language-text\\">cf</code> commands throughout this guide, for example:</p>\\n<div class=\\"gatsby-highlight\\" data-language=\\"text\\"><pre class=\\"language-text\\"><code class=\\"language-text\\">ibmcloud cf login -a &lt;API endpoint&gt;</code></pre></div>\\n</blockquote>\\n<hr>\\n<h2 id=\\"step-3-set-target-organisation\\"><a href=\\"#step-3-set-target-organisation\\" aria-label=\\"step 3 set target organisation permalink\\" class=\\"anchor\\"><svg aria-hidden=\\"true\\" focusable=\\"false\\" height=\\"16\\" version=\\"1.1\\" viewBox=\\"0 0 16 16\\" width=\\"16\\"><path fill-rule=\\"evenodd\\" d=\\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\\"></path></svg></a>Step 3: Set target organisation</h2>\\n<p>If you are on IBM Cloud, you can find your organisation and space by logging into IBM Cloud and going into <code class=\\"language-text\\">Manage &gt; Account &gt; Cloud Foundry orgs</code>. If you are on the Lite/free tier an organisation will have already been created in your account, the organisation name is the <code class=\\"language-text\\">name</code> listed on this page, in my case it\'s my email address.</p>\\n<p>To find the associated spaces within the organisation, click ... (next to your organisation) and select <code class=\\"language-text\\">Spaces</code>. If there are no spaces listed, click <code class=\\"language-text\\">Add a space</code> to create one, specifying your choice of name (e.g. dev) and region. Make sure that you locate your space in the same region as your API endpoint!</p>\\n<p>Set target:</p>\\n<div class=\\"gatsby-highlight\\" data-language=\\"text\\"><pre class=\\"language-text\\"><code class=\\"language-text\\">cf target -o &lt;organisation&gt; -s &lt;space&gt;</code></pre></div>\\n<hr>\\n<h2 id=\\"step-4-push-your-app\\"><a href=\\"#step-4-push-your-app\\" aria-label=\\"step 4 push your app permalink\\" class=\\"anchor\\"><svg aria-hidden=\\"true\\" focusable=\\"false\\" height=\\"16\\" version=\\"1.1\\" viewBox=\\"0 0 16 16\\" width=\\"16\\"><path fill-rule=\\"evenodd\\" d=\\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\\"></path></svg></a>Step 4: Push your app</h2>\\n<p>Now, you’re ready to push your app. Simply run the following command from the same location as your <code class=\\"language-text\\">manifest.yml</code>:</p>\\n<div class=\\"gatsby-highlight\\" data-language=\\"text\\"><pre class=\\"language-text\\"><code class=\\"language-text\\">cf push</code></pre></div>\\n<p>Your Kitura application should now be successfully deployed into your Cloud Foundry environment! If you have a <code class=\\"language-text\\">manifest.yml</code> file which was generated for you, it will have been assigned a random route as the file contains:</p>\\n<div class=\\"gatsby-highlight\\" data-language=\\"text\\"><pre class=\\"language-text\\"><code class=\\"language-text\\">random-route: true</code></pre></div>\\n<p>If you visit this URL you should see your running application.</p>","frontmatter":{"path":"/docs/deploying/cloud-foundry","title":"Deploying with Cloud Foundry"}}},{"node":{"html":"<h1 id=\\"deploy-to-the-docker-platform\\"><a href=\\"#deploy-to-the-docker-platform\\" aria-label=\\"deploy to the docker platform permalink\\" class=\\"anchor\\"><svg aria-hidden=\\"true\\" focusable=\\"false\\" height=\\"16\\" version=\\"1.1\\" viewBox=\\"0 0 16 16\\" width=\\"16\\"><path fill-rule=\\"evenodd\\" d=\\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\\"></path></svg></a>Deploy to the Docker platform</h1>\\n<p>Docker provides tooling and a platform to manage the lifecycle of lightweight virtualization packages, known as containers. In this guide, we will cover the steps necessary to Dockerize a Kitura application. This includes how to build the Docker image and how to create the container instance from that image.</p>\\n<p>A full description of the Docker platform can be found on the Docker <a href=\\"https://docs.docker.com/get-started/\\">website</a>, including installation instructions. This guide is based on the two Dockerfiles generated by the Kitura CLI\'s <a href=\\"../getting-started/create-server-cli\\">kitura init</a> command.</p>\\n<hr>\\n<h2 id=\\"step-1-build-compile-image\\"><a href=\\"#step-1-build-compile-image\\" aria-label=\\"step 1 build compile image permalink\\" class=\\"anchor\\"><svg aria-hidden=\\"true\\" focusable=\\"false\\" height=\\"16\\" version=\\"1.1\\" viewBox=\\"0 0 16 16\\" width=\\"16\\"><path fill-rule=\\"evenodd\\" d=\\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\\"></path></svg></a>Step 1: Build compile image</h2>\\n<p>As the Swift compiler is large and not required for running compiled Kitura applications, the Docker images for application compilation and runtime are separated into a build image and a run image. The <code class=\\"language-text\\">kitura init</code> command supports this two step build process by generating two Dockerfiles for your Kitura project:</p>\\n<ul>\\n<li><code class=\\"language-text\\">Dockerfile-tools</code>: building this Dockerfile produces a Docker image containing everything needed to compile your Kitura application. Running the image will compile your Kitura application.</li>\\n<li><code class=\\"language-text\\">Dockerfile</code>: building this Dockerfile produces a Docker image containing your compiled application. Running the image will run your application.</li>\\n</ul>\\n<p>We first need to build the compile image:</p>\\n<div class=\\"gatsby-highlight\\" data-language=\\"text\\"><pre class=\\"language-text\\"><code class=\\"language-text\\">docker build -t myapp-build -f Dockerfile-tools .</code></pre></div>\\n<p>The above command builds a Docker image called <code class=\\"language-text\\">&quot;myapp-build&quot;</code> using the generated <code class=\\"language-text\\">Dockerfile-tools</code> file. We will use this image to compile our Kitura application.</p>\\n<hr>\\n<h2 id=\\"step-2-compile-application-code\\"><a href=\\"#step-2-compile-application-code\\" aria-label=\\"step 2 compile application code permalink\\" class=\\"anchor\\"><svg aria-hidden=\\"true\\" focusable=\\"false\\" height=\\"16\\" version=\\"1.1\\" viewBox=\\"0 0 16 16\\" width=\\"16\\"><path fill-rule=\\"evenodd\\" d=\\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\\"></path></svg></a>Step 2: Compile application code</h2>\\n<p>Using the image we\'ve just built, we can compile the application code with the following command:</p>\\n<div class=\\"gatsby-highlight\\" data-language=\\"text\\"><pre class=\\"language-text\\"><code class=\\"language-text\\">docker run -v $PWD:/swift-project -w /swift-project myapp-build /swift-utils/tools-utils.sh build release</code></pre></div>\\n<p>The Docker run command takes the <code class=\\"language-text\\">&#39;-v&#39;</code> option which maps the current working directory on the host to the <code class=\\"language-text\\">&#39;/swift-project&#39;</code> directory on the Docker container. The <code class=\\"language-text\\">-w</code> option sets working directory inside the container. We then tell Docker to create a container using the <code class=\\"language-text\\">myapp-build</code> tag name from the image we created earlier. Finally we invoke the utility script that is located in the container at <code class=\\"language-text\\">/swift-utils/tools-utils.sh</code> to build in release mode. The <code class=\\"language-text\\">tools-utils.sh</code> file can be viewed <a href=\\"https://github.com/IBM-Swift/swift-ubuntu-docker/blob/master/utils/tools-utils.sh\\">here</a>.</p>\\n<hr>\\n<h2 id=\\"step-3-build-the-run-image\\"><a href=\\"#step-3-build-the-run-image\\" aria-label=\\"step 3 build the run image permalink\\" class=\\"anchor\\"><svg aria-hidden=\\"true\\" focusable=\\"false\\" height=\\"16\\" version=\\"1.1\\" viewBox=\\"0 0 16 16\\" width=\\"16\\"><path fill-rule=\\"evenodd\\" d=\\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\\"></path></svg></a>Step 3: Build the run image</h2>\\n<p>Now that we have compiled our Kitura application we can now build the Docker runtime image, with the following command.</p>\\n<div class=\\"gatsby-highlight\\" data-language=\\"text\\"><pre class=\\"language-text\\"><code class=\\"language-text\\">docker build -t myapp-run .</code></pre></div>\\n<p>This command builds a Docker image which is tagged <code class=\\"language-text\\">&quot;myapp-run&quot;</code> using the generated <code class=\\"language-text\\">Dockerfile</code> file. The newly built Docker image contains your compiled Kitura application and the necessary Swift runtime libraries.</p>\\n<hr>\\n<h2 id=\\"step-4-check-the-image-is-available\\"><a href=\\"#step-4-check-the-image-is-available\\" aria-label=\\"step 4 check the image is available permalink\\" class=\\"anchor\\"><svg aria-hidden=\\"true\\" focusable=\\"false\\" height=\\"16\\" version=\\"1.1\\" viewBox=\\"0 0 16 16\\" width=\\"16\\"><path fill-rule=\\"evenodd\\" d=\\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\\"></path></svg></a>Step 4: Check the image is available</h2>\\n<p>Docker provides a command to list your local images:</p>\\n<div class=\\"gatsby-highlight\\" data-language=\\"text\\"><pre class=\\"language-text\\"><code class=\\"language-text\\">docker image ls</code></pre></div>\\n<p>This command lists the Docker images available in your local repository, which will include your recently built image tagged <code class=\\"language-text\\">&quot;myapp-run&quot;</code>.</p>\\n<hr>\\n<h2 id=\\"step-5-start-the-docker-container\\"><a href=\\"#step-5-start-the-docker-container\\" aria-label=\\"step 5 start the docker container permalink\\" class=\\"anchor\\"><svg aria-hidden=\\"true\\" focusable=\\"false\\" height=\\"16\\" version=\\"1.1\\" viewBox=\\"0 0 16 16\\" width=\\"16\\"><path fill-rule=\\"evenodd\\" d=\\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\\"></path></svg></a>Step 5: Start the Docker container</h2>\\n<p>Now that we have an image that contains our Kitura application, we just need to run an instance of the image:</p>\\n<div class=\\"gatsby-highlight\\" data-language=\\"text\\"><pre class=\\"language-text\\"><code class=\\"language-text\\">docker run -p 8080:8080 -it myapp-run</code></pre></div>\\n<p>The above Docker run command uses the <code class=\\"language-text\\">-p</code> flag to publish port 8080 to the host interfaces. It then runs a container from the <code class=\\"language-text\\">myapp-run</code> image in interactive mode. You can see your container is running with the following command:</p>\\n<div class=\\"gatsby-highlight\\" data-language=\\"text\\"><pre class=\\"language-text\\"><code class=\\"language-text\\">docker container ps -a</code></pre></div>\\n<p>Since we exposed our ports, we should then be able to navigate to: <a href=\\"http://localhost:8080\\" target=\\"blank\\">localhost:8080</a> to view our server.</p>","frontmatter":{"path":"/docs/deploying/docker","title":"Deploy to the Docker platform"}}},{"node":{"html":"<h1 id=\\"deploying-with-kubernetes\\"><a href=\\"#deploying-with-kubernetes\\" aria-label=\\"deploying with kubernetes permalink\\" class=\\"anchor\\"><svg aria-hidden=\\"true\\" focusable=\\"false\\" height=\\"16\\" version=\\"1.1\\" viewBox=\\"0 0 16 16\\" width=\\"16\\"><path fill-rule=\\"evenodd\\" d=\\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\\"></path></svg></a>Deploying with Kubernetes</h1>\\n<p>Kubernetes is a platform which allows you to automate the deployment, scaling and management of your containerized applications.</p>\\n<p>You can deploy your Kitura application to any Kubernetes cluster. In this guide we will use the Kubernetes Service on IBM Cloud.</p>\\n<hr>\\n<h2 id=\\"step-1-create-cluster-on-ibm-cloud\\"><a href=\\"#step-1-create-cluster-on-ibm-cloud\\" aria-label=\\"step 1 create cluster on ibm cloud permalink\\" class=\\"anchor\\"><svg aria-hidden=\\"true\\" focusable=\\"false\\" height=\\"16\\" version=\\"1.1\\" viewBox=\\"0 0 16 16\\" width=\\"16\\"><path fill-rule=\\"evenodd\\" d=\\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\\"></path></svg></a>Step 1: Create Cluster on IBM Cloud</h2>\\n<p>Before we can create a Kubernetes Cluster on IBM Cloud we need to <a href=\\"https://cloud.ibm.com/registration\\">create an IBM Cloud account</a>.</p>\\n<p>Once we have an IBM Cloud account, we can create a Kubernetes cluster by visiting the <a href=\\"https://cloud.ibm.com/catalog?category=containers\\">IBM Cloud Catalog</a>. The link will take you to the Containers page, select <code class=\\"language-text\\">Kubernetes Service</code> and click <code class=\\"language-text\\">Create</code>.</p>\\n<p>When you create the new cluster, ensure the <code class=\\"language-text\\">Free</code> plan option is selected, and the cluster name, for the purposes of this example, is <code class=\\"language-text\\">myapp-cluster</code>.</p>\\n<blockquote>\\n<p>Set Geography and Metro to whatever is local to you and click the <code class=\\"language-text\\">Create cluster</code> button.</p>\\n</blockquote>\\n<p>Creating a cluster takes several minutes, so grab a tea or coffee in the meantime!</p>\\n<hr>\\n<h2 id=\\"step-2-gain-access-to-your-cluster\\"><a href=\\"#step-2-gain-access-to-your-cluster\\" aria-label=\\"step 2 gain access to your cluster permalink\\" class=\\"anchor\\"><svg aria-hidden=\\"true\\" focusable=\\"false\\" height=\\"16\\" version=\\"1.1\\" viewBox=\\"0 0 16 16\\" width=\\"16\\"><path fill-rule=\\"evenodd\\" d=\\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\\"></path></svg></a>Step 2: Gain access to your Cluster</h2>\\n<p>Now that we have created our Kubernetes cluster we need to gain access to it, to do this we need to install the IBM Cloud CLI tools.</p>\\n<p>Download the required CLI tools using the Kitura CLI:</p>\\n<div class=\\"gatsby-highlight\\" data-language=\\"text\\"><pre class=\\"language-text\\"><code class=\\"language-text\\">kitura idt</code></pre></div>\\n<blockquote>\\n<p>If you don\'t have the Kitura CLI installed, we can also install the required CLI tools with the following command:</p>\\n<div class=\\"gatsby-highlight\\" data-language=\\"text\\"><pre class=\\"language-text\\"><code class=\\"language-text\\">curl -sL https://ibm.biz/idt-installer | bash</code></pre></div>\\n</blockquote>\\n<p>In order to log into IBM Cloud via the command line we will need to know some information about our cluster. To find these values, <a href=\\"https://cloud.ibm.com/kubernetes/clusters\\">view your cluster in the IBM Cloud</a>, select ... and choose the menu option <code class=\\"language-text\\">Connect via CLI</code>.</p>\\n<p>Follow the instructions to log into IBM Cloud, download the kubeconfig files for your cluster, set up the KUBECONFIG environment variable, and verify <code class=\\"language-text\\">kubectl</code> can communicate with your cluster.</p>\\n<p>We should now be able to use <code class=\\"language-text\\">kubectl</code> to manage our cluster.</p>\\n<blockquote>\\n<p>Note: The latest stable version of <code class=\\"language-text\\">kubectl</code> is installed with the base IBM Cloud CLI. However, to work with our cluster, you need the Kubernetes CLI major.minor version that matches the Kubernetes cluster major.minor version that you are using.\\nCheck that the version of your client <code class=\\"language-text\\">kubectl</code> CLI matches the version of the cluster API server by running:</p>\\n<div class=\\"gatsby-highlight\\" data-language=\\"text\\"><pre class=\\"language-text\\"><code class=\\"language-text\\">kubectl version --short</code></pre></div>\\n<p>If the client <code class=\\"language-text\\">kubectl</code> version needs updating follow these <a href=\\"https://cloud.ibm.com/docs/containers?topic=containers-cs_cli_install\\">install instructions</a>. If you install a new version of the kubectl client you need to rerun the configuration steps above (downloading the kubeconfig files and setting up your KUBECONFIG environment variables).</p>\\n</blockquote>\\n<hr>\\n<h2 id=\\"step-3-push-your-docker-image\\"><a href=\\"#step-3-push-your-docker-image\\" aria-label=\\"step 3 push your docker image permalink\\" class=\\"anchor\\"><svg aria-hidden=\\"true\\" focusable=\\"false\\" height=\\"16\\" version=\\"1.1\\" viewBox=\\"0 0 16 16\\" width=\\"16\\"><path fill-rule=\\"evenodd\\" d=\\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\\"></path></svg></a>Step 3: Push your Docker image</h2>\\n<p>If you followed our <a href=\\"./docker\\">Docker guide</a>, you will have created a runtime Docker image which contains your compiled Kitura application, and the necessary Swift runtime libraries. If you haven\'t already, tag it appropriately for the registry you are using and push it. If you are yet to choose a registry and have no specific requirements, we suggest you try <a href=\\"https://hub.docker.com\\">Docker Hub</a>.</p>\\n<hr>\\n<h2 id=\\"step-4-update-helm-chart\\"><a href=\\"#step-4-update-helm-chart\\" aria-label=\\"step 4 update helm chart permalink\\" class=\\"anchor\\"><svg aria-hidden=\\"true\\" focusable=\\"false\\" height=\\"16\\" version=\\"1.1\\" viewBox=\\"0 0 16 16\\" width=\\"16\\"><path fill-rule=\\"evenodd\\" d=\\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\\"></path></svg></a>Step 4: Update Helm Chart</h2>\\n<p>Helm is a package manager for Kubernetes applications. Helm charts are packages that contain enough information to install Kubernetes resources into a Kubernetes cluster. Charts contain a <code class=\\"language-text\\">Chart.yaml</code> file along with templates, default values (defined in <code class=\\"language-text\\">values.yaml</code>) and dependencies.</p>\\n<blockquote>\\n<p>If you created your application using the Kitura CLI or the macOS app then you should already have a Helm chart provided.\\nIf not then you can follow the <a href=\\"https://helm.sh/docs/using_helm/#quickstart-guide\\">Helm docs</a> to create your own chart.</p>\\n</blockquote>\\n<p>The Helm chart provided with the Kitura CLI and macOS is configured out of the box for the application.</p>\\n<p>All we need to do is edit the <code class=\\"language-text\\">repository</code> and <code class=\\"language-text\\">tag</code> variables in the <code class=\\"language-text\\">values.yaml</code> file in our <code class=\\"language-text\\">/chart/&lt;your-appname&gt;</code> directory, to point at the location and tag for our Docker image:</p>\\n<div class=\\"gatsby-highlight\\" data-language=\\"text\\"><pre class=\\"language-text\\"><code class=\\"language-text\\">image:\\n    repository: registry-1.docker.io/&lt;your-namespace&gt;/myapp-run\\n    tag: v1.0.0</code></pre></div>\\n<hr>\\n<h2 id=\\"step-5-deploy-application\\"><a href=\\"#step-5-deploy-application\\" aria-label=\\"step 5 deploy application permalink\\" class=\\"anchor\\"><svg aria-hidden=\\"true\\" focusable=\\"false\\" height=\\"16\\" version=\\"1.1\\" viewBox=\\"0 0 16 16\\" width=\\"16\\"><path fill-rule=\\"evenodd\\" d=\\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\\"></path></svg></a>Step 5: Deploy Application</h2>\\n<p>Helm is comprised of two parts: Helm (the client) and Tiller (the server). To begin working with Helm run:</p>\\n<div class=\\"gatsby-highlight\\" data-language=\\"text\\"><pre class=\\"language-text\\"><code class=\\"language-text\\">helm init</code></pre></div>\\n<p>This will install Tiller into our running Kubernetes cluster and set up any necessary local configuration.</p>\\n<p>Tiller runs inside your Kubernetes cluster, and manages releases of your charts. Tiller needs access to the Kubernetes API to be able to do this. Most cloud providers, including IBM Cloud, enable a feature called Role-Based Access Control (RBAC) - these policies are used for the management of your cluster, they allow you to specify which types of actions are permitted depending on the user and their role. By default, in an RBAC-enabled Kubernetes cluster, Tiller will not be permitted to carry out these operations, so we need to create a service account for Tiller with the right roles and permissions to access resources.</p>\\n<p>Bitnami has a great guide outlining how to do this, follow <a href=\\"https://docs.bitnami.com/kubernetes/how-to/configure-rbac-in-your-kubernetes-cluster/\\">Use Case 2: Enable Helm In Your Cluster</a> to configure RBAC in your Kubernetes cluster.</p>\\n<p>To deploy our application using Helm install, run the following from the <code class=\\"language-text\\">/chart/&lt;your-appname&gt;</code> directory, using <code class=\\"language-text\\">--name</code> to specify the name:</p>\\n<div class=\\"gatsby-highlight\\" data-language=\\"text\\"><pre class=\\"language-text\\"><code class=\\"language-text\\">helm install --name bookstore-app .</code></pre></div>\\n<p>You may have to wait a few minutes for it to be available, but your application should now be deployed to your Kubernetes cluster.</p>\\n<hr>\\n<h2 id=\\"step-6-view-deployed-application\\"><a href=\\"#step-6-view-deployed-application\\" aria-label=\\"step 6 view deployed application permalink\\" class=\\"anchor\\"><svg aria-hidden=\\"true\\" focusable=\\"false\\" height=\\"16\\" version=\\"1.1\\" viewBox=\\"0 0 16 16\\" width=\\"16\\"><path fill-rule=\\"evenodd\\" d=\\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\\"></path></svg></a>Step 6: View Deployed Application</h2>\\n<p>To view our application running on IBM Cloud, we need to find the public IP of the worker node it has been deployed to, and the port that our application has been deployed to (also known as the NodePort).</p>\\n<h3 id=\\"get-the-public-ip\\"><a href=\\"#get-the-public-ip\\" aria-label=\\"get the public ip permalink\\" class=\\"anchor\\"><svg aria-hidden=\\"true\\" focusable=\\"false\\" height=\\"16\\" version=\\"1.1\\" viewBox=\\"0 0 16 16\\" width=\\"16\\"><path fill-rule=\\"evenodd\\" d=\\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\\"></path></svg></a>Get the Public IP:</h3>\\n<p>We can use the following command to find the Public IP for our application:</p>\\n<div class=\\"gatsby-highlight\\" data-language=\\"text\\"><pre class=\\"language-text\\"><code class=\\"language-text\\">ibmcloud cs workers myapp-cluster</code></pre></div>\\n<h3 id=\\"get-the-nodeport\\"><a href=\\"#get-the-nodeport\\" aria-label=\\"get the nodeport permalink\\" class=\\"anchor\\"><svg aria-hidden=\\"true\\" focusable=\\"false\\" height=\\"16\\" version=\\"1.1\\" viewBox=\\"0 0 16 16\\" width=\\"16\\"><path fill-rule=\\"evenodd\\" d=\\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\\"></path></svg></a>Get the NodePort:</h3>\\n<p>First, we get a list of all the running services:</p>\\n<div class=\\"gatsby-highlight\\" data-language=\\"text\\"><pre class=\\"language-text\\"><code class=\\"language-text\\">kubectl get services</code></pre></div>\\n<p>We can find our service name in the list of running services and use this to get the NodePort of our service:</p>\\n<div class=\\"gatsby-highlight\\" data-language=\\"text\\"><pre class=\\"language-text\\"><code class=\\"language-text\\">kubectl describe service bookstore-app-service</code></pre></div>\\n<p>Then in a browser we can navigate to:</p>\\n<div class=\\"gatsby-highlight\\" data-language=\\"text\\"><pre class=\\"language-text\\"><code class=\\"language-text\\">http://&lt;Public-IP&gt;:&lt;NodePort&gt;</code></pre></div>\\n<p>Congratulations! We should now see our application running on IBM Cloud!</p>","frontmatter":{"path":"/docs/deploying/kubernetes","title":"Deploying with Kubernetes"}}},{"node":{"html":"<h1 id=\\"monitor-the-status-of-your-server\\"><a href=\\"#monitor-the-status-of-your-server\\" aria-label=\\"monitor the status of your server permalink\\" class=\\"anchor\\"><svg aria-hidden=\\"true\\" focusable=\\"false\\" height=\\"16\\" version=\\"1.1\\" viewBox=\\"0 0 16 16\\" width=\\"16\\"><path fill-rule=\\"evenodd\\" d=\\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\\"></path></svg></a>Monitor the status of your Server</h1>\\n<blockquote>\\n<p>Depending on how you created your Kitura server you may already have metrics enabled.</p>\\n</blockquote>\\n<h2 id=\\"what-is-application-metrics-for-swift\\"><a href=\\"#what-is-application-metrics-for-swift\\" aria-label=\\"what is application metrics for swift permalink\\" class=\\"anchor\\"><svg aria-hidden=\\"true\\" focusable=\\"false\\" height=\\"16\\" version=\\"1.1\\" viewBox=\\"0 0 16 16\\" width=\\"16\\"><path fill-rule=\\"evenodd\\" d=\\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\\"></path></svg></a>What is Application Metrics for Swift?</h2>\\n<p><a href=\\"https://github.com/RuntimeTools/SwiftMetrics\\">Application Metrics for Swift</a> instruments the Swift runtime for performance monitoring. The monitoring data is provided back to the user either programatically via an API, or visually with the included embedded dashboard.</p>\\n<p>This guide will show you how to set up the embedded dashboard to view monitoring data. It then describes how to provide a <a href=\\"https://prometheus.io\\">Prometheus</a> endpoint and how to collect metrics from your Swift application using the REST API.</p>\\n<p>Application Metrics for Swift provides the following built-in data collection sources:</p>\\n<table>\\n<thead>\\n<tr>\\n<th>Source</th>\\n<th>Description</th>\\n</tr>\\n</thead>\\n<tbody>\\n<tr>\\n<td>Environment</td>\\n<td>Machine and runtime environment information</td>\\n</tr>\\n<tr>\\n<td>CPU</td>\\n<td>Process and system CPU</td>\\n</tr>\\n<tr>\\n<td>Memory</td>\\n<td>Process and system memory usage</td>\\n</tr>\\n<tr>\\n<td>HTTP</td>\\n<td>HTTP metric information</td>\\n</tr>\\n</tbody>\\n</table>\\n<hr>\\n<h2 id=\\"step-1-add-application-metrics-for-swift-to-your-project\\"><a href=\\"#step-1-add-application-metrics-for-swift-to-your-project\\" aria-label=\\"step 1 add application metrics for swift to your project permalink\\" class=\\"anchor\\"><svg aria-hidden=\\"true\\" focusable=\\"false\\" height=\\"16\\" version=\\"1.1\\" viewBox=\\"0 0 16 16\\" width=\\"16\\"><path fill-rule=\\"evenodd\\" d=\\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\\"></path></svg></a>Step 1: Add Application Metrics for Swift to your project</h2>\\n<p>To use Application Metrics for Swift from your server, we need to <a href=\\"https://github.com/RuntimeTools/SwiftMetrics#installation\\">add SwiftMetrics to our dependencies</a>.</p>\\n<blockquote>\\n<p>If you don\'t have a server, follow our <a href=\\"../getting-started/create-server-cli\\">Create a server</a> guide.</p>\\n</blockquote>\\n<p>Import the base Application Metrics for Swift library into your project:</p>\\n<div class=\\"gatsby-highlight\\" data-language=\\"swift\\"><pre class=\\"language-swift\\"><code class=\\"language-swift\\"><span class=\\"token keyword\\">import</span> <span class=\\"token builtin\\">SwiftMetrics</span></code></pre></div>\\n<p>Import the Application Metrics for Swift dashboard:</p>\\n<div class=\\"gatsby-highlight\\" data-language=\\"swift\\"><pre class=\\"language-swift\\"><code class=\\"language-swift\\"><span class=\\"token keyword\\">import</span> <span class=\\"token builtin\\">SwiftMetricsDash</span></code></pre></div>\\n<hr>\\n<h2 id=\\"step-2-initialize-application-metrics-for-swift\\"><a href=\\"#step-2-initialize-application-metrics-for-swift\\" aria-label=\\"step 2 initialize application metrics for swift permalink\\" class=\\"anchor\\"><svg aria-hidden=\\"true\\" focusable=\\"false\\" height=\\"16\\" version=\\"1.1\\" viewBox=\\"0 0 16 16\\" width=\\"16\\"><path fill-rule=\\"evenodd\\" d=\\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\\"></path></svg></a>Step 2: Initialize Application Metrics for Swift</h2>\\n<p>Create an instance of <code class=\\"language-text\\">SwiftMetrics</code>:</p>\\n<div class=\\"gatsby-highlight\\" data-language=\\"swift\\"><pre class=\\"language-swift\\"><code class=\\"language-swift\\"><span class=\\"token keyword\\">let</span> sm <span class=\\"token operator\\">=</span> <span class=\\"token keyword\\">try</span> <span class=\\"token function\\">SwiftMetrics</span><span class=\\"token punctuation\\">(</span><span class=\\"token punctuation\\">)</span></code></pre></div>\\n<p>Use this <code class=\\"language-text\\">SwiftMetrics</code> instance to initialize the dashboard:</p>\\n<div class=\\"gatsby-highlight\\" data-language=\\"swift\\"><pre class=\\"language-swift\\"><code class=\\"language-swift\\"><span class=\\"token keyword\\">let</span> smd <span class=\\"token operator\\">=</span> <span class=\\"token keyword\\">try</span> <span class=\\"token function\\">SwiftMetricsDash</span><span class=\\"token punctuation\\">(</span>swiftMetricsInstance <span class=\\"token punctuation\\">:</span> sm<span class=\\"token punctuation\\">)</span></code></pre></div>\\n<p>When you initialize a <code class=\\"language-text\\">SwiftMetricsDash</code> with just a <code class=\\"language-text\\">SwiftMetrics</code> instance, a Kitura server will be started that will serve the dashboard at <a href=\\"http://localhost:8080/swiftmetrics-dash\\" target=\\"blank\\">localhost:8080/swiftmetrics-dash</a>. If we only want to use a single interface, such as the dashboard, then this is fine. However if we add a second, for example a Prometheus endpoint, they will try to create servers on the same port and will conflict with each other.</p>\\n<p>Next we will show you how to create and pass a <code class=\\"language-text\\">Router</code> object to the initializer, so that multiple types of monitoring can coexist.</p>\\n<hr>\\n<h2 id=\\"step-3-using-application-metrics-for-swift-with-a-router\\"><a href=\\"#step-3-using-application-metrics-for-swift-with-a-router\\" aria-label=\\"step 3 using application metrics for swift with a router permalink\\" class=\\"anchor\\"><svg aria-hidden=\\"true\\" focusable=\\"false\\" height=\\"16\\" version=\\"1.1\\" viewBox=\\"0 0 16 16\\" width=\\"16\\"><path fill-rule=\\"evenodd\\" d=\\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\\"></path></svg></a>Step 3: Using Application Metrics for Swift with a router</h2>\\n<p>You can pass an existing <code class=\\"language-text\\">Router</code> instance to the <code class=\\"language-text\\">SwiftMetricsDash</code> initializer and it will use this router to serve the dashboard. If you don\'t have a <code class=\\"language-text\\">Router</code>, you can create one as follows:</p>\\n<div class=\\"gatsby-highlight\\" data-language=\\"swift\\"><pre class=\\"language-swift\\"><code class=\\"language-swift\\"><span class=\\"token keyword\\">var</span> router <span class=\\"token operator\\">=</span> <span class=\\"token function\\">Router</span><span class=\\"token punctuation\\">(</span><span class=\\"token punctuation\\">)</span></code></pre></div>\\n<p><code class=\\"language-text\\">SwiftMetricsDash</code> will then add its dashboard\'s endpoint to the provided router:</p>\\n<div class=\\"gatsby-highlight\\" data-language=\\"swift\\"><pre class=\\"language-swift\\"><code class=\\"language-swift\\"><span class=\\"token keyword\\">let</span> smd <span class=\\"token operator\\">=</span> <span class=\\"token keyword\\">try</span> <span class=\\"token function\\">SwiftMetricsDash</span><span class=\\"token punctuation\\">(</span>swiftMetricsInstance<span class=\\"token punctuation\\">:</span> sm<span class=\\"token punctuation\\">,</span> endpoint<span class=\\"token punctuation\\">:</span> router<span class=\\"token punctuation\\">)</span></code></pre></div>\\n<p>You can add multiple monitoring interfaces to the same router and they will all be served together.</p>\\n<p>You can now view our dashboard by starting the router on a Kitura server:</p>\\n<div class=\\"gatsby-highlight\\" data-language=\\"swift\\"><pre class=\\"language-swift\\"><code class=\\"language-swift\\"><span class=\\"token builtin\\">Kitura</span><span class=\\"token punctuation\\">.</span><span class=\\"token function\\">addHTTPServer</span><span class=\\"token punctuation\\">(</span>onPort<span class=\\"token punctuation\\">:</span> <span class=\\"token number\\">8080</span><span class=\\"token punctuation\\">,</span> with<span class=\\"token punctuation\\">:</span> router<span class=\\"token punctuation\\">)</span>\\n<span class=\\"token builtin\\">Kitura</span><span class=\\"token punctuation\\">.</span><span class=\\"token function\\">run</span><span class=\\"token punctuation\\">(</span><span class=\\"token punctuation\\">)</span></code></pre></div>\\n<p>Once the server is running, go to <a href=\\"http://localhost:8080/swiftmetrics-dash\\" target=\\"blank\\">localhost:8080/swiftmetrics-dash</a>.</p>\\n<hr>\\n<h2 id=\\"step-4-add-prometheus-support\\"><a href=\\"#step-4-add-prometheus-support\\" aria-label=\\"step 4 add prometheus support permalink\\" class=\\"anchor\\"><svg aria-hidden=\\"true\\" focusable=\\"false\\" height=\\"16\\" version=\\"1.1\\" viewBox=\\"0 0 16 16\\" width=\\"16\\"><path fill-rule=\\"evenodd\\" d=\\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\\"></path></svg></a>Step 4: Add Prometheus support</h2>\\n<p>To use Application Metrics for Swift to provide a <a href=\\"https://prometheus.io\\">Prometheus</a> endpoint, you must include the <code class=\\"language-text\\">SwiftMetricsPrometheus</code> module in your application:</p>\\n<div class=\\"gatsby-highlight\\" data-language=\\"swift\\"><pre class=\\"language-swift\\"><code class=\\"language-swift\\"><span class=\\"token keyword\\">import</span> <span class=\\"token builtin\\">SwiftMetrics</span>\\n<span class=\\"token keyword\\">import</span> <span class=\\"token builtin\\">SwiftMetricsPrometheus</span></code></pre></div>\\n<p>As above, we need to create an instance of <code class=\\"language-text\\">SwiftMetrics</code>:</p>\\n<div class=\\"gatsby-highlight\\" data-language=\\"swift\\"><pre class=\\"language-swift\\"><code class=\\"language-swift\\"><span class=\\"token keyword\\">let</span> sm <span class=\\"token operator\\">=</span> <span class=\\"token keyword\\">try</span> <span class=\\"token function\\">SwiftMetrics</span><span class=\\"token punctuation\\">(</span><span class=\\"token punctuation\\">)</span></code></pre></div>\\n<p>Use this <code class=\\"language-text\\">SwiftMetrics</code> instance and your <code class=\\"language-text\\">Router</code> object to initialize Prometheus:</p>\\n<div class=\\"gatsby-highlight\\" data-language=\\"swift\\"><pre class=\\"language-swift\\"><code class=\\"language-swift\\"><span class=\\"token keyword\\">let</span> smp <span class=\\"token operator\\">=</span> <span class=\\"token keyword\\">try</span> <span class=\\"token function\\">SwiftMetricsPrometheus</span><span class=\\"token punctuation\\">(</span>swiftMetricsInstance<span class=\\"token punctuation\\">:</span> sm<span class=\\"token punctuation\\">,</span> endpoint<span class=\\"token punctuation\\">:</span> router<span class=\\"token punctuation\\">)</span></code></pre></div>\\n<p>By default, <code class=\\"language-text\\">SwiftMetricsPrometheus</code> will provide the Prometheus endpoint under <a href=\\"http://localhost:8080/metrics\\" target=\\"blank\\">localhost:8080/metrics</a>.</p>\\n<hr>\\n<h2 id=\\"step-5-add-rest-api-support\\"><a href=\\"#step-5-add-rest-api-support\\" aria-label=\\"step 5 add rest api support permalink\\" class=\\"anchor\\"><svg aria-hidden=\\"true\\" focusable=\\"false\\" height=\\"16\\" version=\\"1.1\\" viewBox=\\"0 0 16 16\\" width=\\"16\\"><path fill-rule=\\"evenodd\\" d=\\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\\"></path></svg></a>Step 5: Add REST API support</h2>\\n<p>The <a href=\\"https://github.com/RuntimeTools/SwiftMetrics/blob/master/REST-API.md\\">Application Metrics for Swift REST API</a> enables the collection of metrics from the running Swift application. The API context root will be the server\'s default endpoint plus <code class=\\"language-text\\">&quot;/swiftmetrics&quot;</code> e.g. <a href=\\"http://localhost:8080/swiftmetrics\\" target=\\"blank\\">localhost:8080/swiftmetrics</a>.</p>\\n<p>To enable the REST API in your program, you must include the <code class=\\"language-text\\">SwiftMetricsREST</code> module in your application:</p>\\n<div class=\\"gatsby-highlight\\" data-language=\\"swift\\"><pre class=\\"language-swift\\"><code class=\\"language-swift\\"><span class=\\"token keyword\\">import</span> <span class=\\"token builtin\\">SwiftMetrics</span>\\n<span class=\\"token keyword\\">import</span> <span class=\\"token builtin\\">SwiftMetricsREST</span></code></pre></div>\\n<p>As above, we need to create an instance of <code class=\\"language-text\\">SwiftMetrics</code>:</p>\\n<div class=\\"gatsby-highlight\\" data-language=\\"swift\\"><pre class=\\"language-swift\\"><code class=\\"language-swift\\"><span class=\\"token keyword\\">let</span> sm <span class=\\"token operator\\">=</span> <span class=\\"token keyword\\">try</span> <span class=\\"token function\\">SwiftMetrics</span><span class=\\"token punctuation\\">(</span><span class=\\"token punctuation\\">)</span></code></pre></div>\\n<p>Use this <code class=\\"language-text\\">SwiftMetrics</code> instance and your <code class=\\"language-text\\">Router</code> object to initialize your REST API:</p>\\n<div class=\\"gatsby-highlight\\" data-language=\\"swift\\"><pre class=\\"language-swift\\"><code class=\\"language-swift\\"><span class=\\"token keyword\\">let</span> smr <span class=\\"token operator\\">=</span> <span class=\\"token keyword\\">try</span> <span class=\\"token function\\">SwiftMetricsREST</span><span class=\\"token punctuation\\">(</span>swiftMetricsInstance<span class=\\"token punctuation\\">:</span> sm<span class=\\"token punctuation\\">,</span> endpoint<span class=\\"token punctuation\\">:</span> router<span class=\\"token punctuation\\">)</span></code></pre></div>\\n<p>Metrics are accumulated in a <code class=\\"language-text\\">collection</code>. The start time of the metrics accumulation is from either, creation of the collection <code class=\\"language-text\\">POST &lt;context_root&gt;/api/v1/collections</code>, or, from the time of a clear request <code class=\\"language-text\\">PUT &lt;context_root&gt;/api/v1/collection/{id}</code>.</p>\\n<p>First you need to create a new metrics collection. Metrics are recorded from the point of the creation of the collection. To create a collection you can use curl as follows:</p>\\n<div class=\\"gatsby-highlight\\" data-language=\\"text\\"><pre class=\\"language-text\\"><code class=\\"language-text\\">curl -X POST http://localhost:8080/swiftmetrics/api/v1/collections</code></pre></div>\\n<p>This will return the URI for your collection:</p>\\n<div class=\\"gatsby-highlight\\" data-language=\\"text\\"><pre class=\\"language-text\\"><code class=\\"language-text\\">&quot;uri&quot; : &quot;collections\\\\/0&quot;</code></pre></div>\\n<p>Metrics can now be retrieved from the collection at whatever intervals you choose using <code class=\\"language-text\\">GET</code> as follows:</p>\\n<div class=\\"gatsby-highlight\\" data-language=\\"text\\"><pre class=\\"language-text\\"><code class=\\"language-text\\">curl -X GET http://localhost:8080/swiftmetrics/api/v1/collections/0</code></pre></div>\\n<p>Metrics are returned in JSON format for processing. You can use <code class=\\"language-text\\">PUT</code> to clear the metrics if required.</p>\\n<p>Metrics can be deleted using <code class=\\"language-text\\">DELETE</code> as follows:</p>\\n<div class=\\"gatsby-highlight\\" data-language=\\"text\\"><pre class=\\"language-text\\"><code class=\\"language-text\\">curl -X DELETE http://localhost:8080/swiftmetrics/api/v1/collections/0</code></pre></div>\\n<p>For more information about how to use the REST API and the available collection operations see the <a href=\\"https://github.com/RuntimeTools/SwiftMetrics/blob/master/REST-API.md\\">documentation</a>.</p>","frontmatter":{"path":"/docs/deploying/monitoring","title":"Monitor the status of your Server"}}},{"node":{"html":"<h1 id=\\"enabling-ssltls\\"><a href=\\"#enabling-ssltls\\" aria-label=\\"enabling ssltls permalink\\" class=\\"anchor\\"><svg aria-hidden=\\"true\\" focusable=\\"false\\" height=\\"16\\" version=\\"1.1\\" viewBox=\\"0 0 16 16\\" width=\\"16\\"><path fill-rule=\\"evenodd\\" d=\\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\\"></path></svg></a>Enabling SSL/TLS</h1>\\n<p>Transport Layer Security (TLS) is a protocol for encrypting data that is sent over the internet. It provides three important features:</p>\\n<ul>\\n<li>Data Privacy: The data that is exchanged between a server and client is not visible to anyone else.</li>\\n<li>Data Integrity: The data that is exchanged between a server and client cannot be modified by anyone else.</li>\\n<li>Server Authenticity: The server can prove its identity to the client and so prove the origin of sent data.</li>\\n</ul>\\n<p>TLS evolved out of Netscape’s Secure Sockets Layer (SSL) protocol in order to fix most of its security flaws. The industry still uses the terms somewhat interchangeably for historical reasons. Any web site that you visit starting with https:// rather than http:// is using TLS/SSL for communication between your browser and their server.</p>\\n<blockquote>\\n<p>This guide will demonstrate how to enable the TLS protocol directly on your Kitura server. Another way to enable TLS is via an SSL/TLS proxy. In this case an intermediary application between your server and clients performs the encryption and decryption. Some cloud providers offer this service by default, which may be a more appropriate solution.</p>\\n</blockquote>\\n<hr>\\n<h2 id=\\"step-1-create-our-certificate-and-key-pair\\"><a href=\\"#step-1-create-our-certificate-and-key-pair\\" aria-label=\\"step 1 create our certificate and key pair permalink\\" class=\\"anchor\\"><svg aria-hidden=\\"true\\" focusable=\\"false\\" height=\\"16\\" version=\\"1.1\\" viewBox=\\"0 0 16 16\\" width=\\"16\\"><path fill-rule=\\"evenodd\\" d=\\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\\"></path></svg></a>Step 1: Create our certificate and key pair</h2>\\n<blockquote>\\n<p>In this guide, we will use OpenSSL to generate our self-signed certificate.\\nOpenSSL is included by default on Linux. On MacOS we can install it using Homebrew:</p>\\n<div class=\\"gatsby-highlight\\" data-language=\\"text\\"><pre class=\\"language-text\\"><code class=\\"language-text\\">brew install openssl</code></pre></div>\\n</blockquote>\\n<p>To enable TLS, a server needs a certificate and a corresponding secret key. Certificates are files that bind together information about the identity of the owner of a site and the public half of an asymmetric key pair (usually RSA). Certificates are usually digitally signed by a certificate authority (CA) who verifies that the identity information in the certificate is correct. This creates a chain of certificates between the site owner certificate and a CA certificate and transitive trust. Assuming that we trust the CA, we can trust the validity of the server certificate.</p>\\n<blockquote>\\n<p>If you want to create a CA-signed certificate chain, <a href=\\"https://letsencrypt.org\\">Let’s Encrypt</a> is a Certificate Authority (CA), provided by the non-profit Internet Security Research Group (ISRG) that makes it easy to generate and install free TLS/SSL certificates.</p>\\n</blockquote>\\n<p>In this guide, we will use OpenSSL to generate a self-signed certificate.</p>\\n<p>Create a Credentials folder in the root of your project:</p>\\n<div class=\\"gatsby-highlight\\" data-language=\\"text\\"><pre class=\\"language-text\\"><code class=\\"language-text\\">mkdir Credentials &amp;&amp; cd Credentials</code></pre></div>\\n<p>Inside this folder we create a 2048 bit RSA private key using OpenSSL:</p>\\n<div class=\\"gatsby-highlight\\" data-language=\\"text\\"><pre class=\\"language-text\\"><code class=\\"language-text\\">openssl genrsa -out key.pem 2048</code></pre></div>\\n<p>We use this private key to create a certificate:</p>\\n<div class=\\"gatsby-highlight\\" data-language=\\"text\\"><pre class=\\"language-text\\"><code class=\\"language-text\\">openssl req -new -sha256 -key key.pem -out csr.csr</code></pre></div>\\n<p>At this stage you provide additional information that will be stored in the certificate.</p>\\n<p>These choices are optional, except for Common Name, which must be the server\'s hostname. In our case, this is \\"localhost\\".</p>\\n<p>Next we use OpenSSL to convert the certificate to PEM format:</p>\\n<div class=\\"gatsby-highlight\\" data-language=\\"text\\"><pre class=\\"language-text\\"><code class=\\"language-text\\">openssl req -x509 -sha256 -days 365 -key key.pem -in csr.csr -out cert.pem</code></pre></div>\\n<p>Finally we encrypt the key and certificate together using a password. For simplicity we will use \\"password\\".</p>\\n<div class=\\"gatsby-highlight\\" data-language=\\"text\\"><pre class=\\"language-text\\"><code class=\\"language-text\\">openssl pkcs12 -export -out cert.pfx -inkey key.pem -in cert.pem</code></pre></div>\\n<hr>\\n<h2 id=\\"step-2-setting-up-your-ssl-configuration\\"><a href=\\"#step-2-setting-up-your-ssl-configuration\\" aria-label=\\"step 2 setting up your ssl configuration permalink\\" class=\\"anchor\\"><svg aria-hidden=\\"true\\" focusable=\\"false\\" height=\\"16\\" version=\\"1.1\\" viewBox=\\"0 0 16 16\\" width=\\"16\\"><path fill-rule=\\"evenodd\\" d=\\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\\"></path></svg></a>Step 2: Setting up your SSL configuration</h2>\\n<p>Now we have created our certificate, we are going to set up our SSL configuration so that it can direct Kitura to the required files.</p>\\n<p>Open your <code class=\\"language-text\\">Application.swift</code> file:</p>\\n<div class=\\"gatsby-highlight\\" data-language=\\"text\\"><pre class=\\"language-text\\"><code class=\\"language-text\\">open Sources/Application/Application.swift</code></pre></div>\\n<p>We are going to use <a href=\\"https://github.com/IBM-Swift/FileKit\\">FileKit</a> to access our certificate file, so we need to <a href=\\"https://github.com/IBM-Swift/FileKit#add-dependencies\\">add FileKit to our dependencies</a>.</p>\\n<p>We also need to add <code class=\\"language-text\\">FileKit</code> to our import statements:</p>\\n<div class=\\"gatsby-highlight\\" data-language=\\"swift\\"><pre class=\\"language-swift\\"><code class=\\"language-swift\\"><span class=\\"token keyword\\">import</span> <span class=\\"token builtin\\">FileKit</span></code></pre></div>\\n<p>Now we initialize an <code class=\\"language-text\\">SSLConfig</code> struct. On macOS we use Apple Secure Transport under the covers, which requires the path to our <code class=\\"language-text\\">cert.pfx</code> file and the password we used to encrypt the file. On Linux we use OpenSSL under the covers, which requires the paths to the certificate and private key PEM files.</p>\\n<p>We use <code class=\\"language-text\\">#if</code> to check which operating system we\'re running on and provide the appropriate files to our configuration.</p>\\n<p>Inside the <code class=\\"language-text\\">App</code> class, add the following code:</p>\\n<div class=\\"gatsby-highlight\\" data-language=\\"swift\\"><pre class=\\"language-swift\\"><code class=\\"language-swift\\">#<span class=\\"token keyword\\">if</span> <span class=\\"token function\\">os</span><span class=\\"token punctuation\\">(</span><span class=\\"token builtin\\">Linux</span><span class=\\"token punctuation\\">)</span>\\n<span class=\\"token keyword\\">let</span> sslConfig <span class=\\"token operator\\">=</span>  <span class=\\"token function\\">SSLConfig</span><span class=\\"token punctuation\\">(</span>withCACertificateDirectory<span class=\\"token punctuation\\">:</span> <span class=\\"token constant\\">nil</span><span class=\\"token punctuation\\">,</span>\\n                             usingCertificateFile<span class=\\"token punctuation\\">:</span> <span class=\\"token builtin\\">FileKit</span><span class=\\"token punctuation\\">.</span>projectFolder <span class=\\"token operator\\">+</span> <span class=\\"token string\\">\\"/Credentials/cert.pem\\"</span><span class=\\"token punctuation\\">,</span>\\n                             withKeyFile<span class=\\"token punctuation\\">:</span> <span class=\\"token builtin\\">FileKit</span><span class=\\"token punctuation\\">.</span>projectFolder <span class=\\"token operator\\">+</span> <span class=\\"token string\\">\\"/Credentials/key.pem\\"</span><span class=\\"token punctuation\\">,</span>\\n                             usingSelfSignedCerts<span class=\\"token punctuation\\">:</span> <span class=\\"token boolean\\">true</span><span class=\\"token punctuation\\">)</span>\\n#<span class=\\"token keyword\\">else</span> <span class=\\"token comment\\">// on macOS</span>\\n\\n<span class=\\"token keyword\\">let</span> sslConfig <span class=\\"token operator\\">=</span>  <span class=\\"token function\\">SSLConfig</span><span class=\\"token punctuation\\">(</span>withChainFilePath<span class=\\"token punctuation\\">:</span> <span class=\\"token builtin\\">FileKit</span><span class=\\"token punctuation\\">.</span>projectFolder <span class=\\"token operator\\">+</span> <span class=\\"token string\\">\\"/Credentials/cert.pfx\\"</span><span class=\\"token punctuation\\">,</span>\\n                             withPassword<span class=\\"token punctuation\\">:</span> <span class=\\"token string\\">\\"password\\"</span><span class=\\"token punctuation\\">,</span>\\n                             usingSelfSignedCerts<span class=\\"token punctuation\\">:</span> <span class=\\"token boolean\\">true</span><span class=\\"token punctuation\\">)</span>\\n\\n#endif</code></pre></div>\\n<hr>\\n<h2 id=\\"step-3-configure-our-kitura-server-to-use-ssl\\"><a href=\\"#step-3-configure-our-kitura-server-to-use-ssl\\" aria-label=\\"step 3 configure our kitura server to use ssl permalink\\" class=\\"anchor\\"><svg aria-hidden=\\"true\\" focusable=\\"false\\" height=\\"16\\" version=\\"1.1\\" viewBox=\\"0 0 16 16\\" width=\\"16\\"><path fill-rule=\\"evenodd\\" d=\\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\\"></path></svg></a>Step 3: Configure our Kitura server to use SSL</h2>\\n<p>Now we have our SSL configuration, we need to pass it to Kitura. We do this as part of the <code class=\\"language-text\\">addHTTPServer</code> function, using the <code class=\\"language-text\\">withSSL</code> parameter.</p>\\n<p>Inside the run function, replace:</p>\\n<div class=\\"gatsby-highlight\\" data-language=\\"swift\\"><pre class=\\"language-swift\\"><code class=\\"language-swift\\"><span class=\\"token builtin\\">Kitura</span><span class=\\"token punctuation\\">.</span><span class=\\"token function\\">addHTTPServer</span><span class=\\"token punctuation\\">(</span>onPort<span class=\\"token punctuation\\">:</span> <span class=\\"token number\\">8080</span><span class=\\"token punctuation\\">,</span> with<span class=\\"token punctuation\\">:</span> router<span class=\\"token punctuation\\">)</span></code></pre></div>\\n<p>With the following code:</p>\\n<div class=\\"gatsby-highlight\\" data-language=\\"swift\\"><pre class=\\"language-swift\\"><code class=\\"language-swift\\"><span class=\\"token builtin\\">Kitura</span><span class=\\"token punctuation\\">.</span><span class=\\"token function\\">addHTTPServer</span><span class=\\"token punctuation\\">(</span>onPort<span class=\\"token punctuation\\">:</span> <span class=\\"token number\\">8080</span><span class=\\"token punctuation\\">,</span> with<span class=\\"token punctuation\\">:</span> router<span class=\\"token punctuation\\">,</span> withSSL<span class=\\"token punctuation\\">:</span> sslConfig<span class=\\"token punctuation\\">)</span></code></pre></div>\\n<p>To test this, start your server and open your browser at the Kitura landing page:</p>\\n<p><a href=\\"https://localhost:8080\\" target=\\"blank\\">localhost:8080</a></p>\\n<blockquote>\\n<p>At this point your browser might stop you with a warning that the SSL certificate it is validating is self-signed. Since you are accessing your own server this isn’t a problem at all. In the advanced settings, you can tell your web-browser to accept the self-signed SSL certificate and continue. In general though, your browser should only trust server certificates which are issued by a valid CA.</p>\\n</blockquote>\\n<p>Notice the https in your URL. You are running Kitura using SSL/TLS! This means that the data your application transmits is secure and the server your users are connecting to is authenticated.</p>","frontmatter":{"path":"/docs/deploying/enabling-ssl","title":"Enabling SSL/TLS"}}},{"node":{"html":"<h1 id=\\"create-a-server-with-the-kitura-cli\\"><a href=\\"#create-a-server-with-the-kitura-cli\\" aria-label=\\"create a server with the kitura cli permalink\\" class=\\"anchor\\"><svg aria-hidden=\\"true\\" focusable=\\"false\\" height=\\"16\\" version=\\"1.1\\" viewBox=\\"0 0 16 16\\" width=\\"16\\"><path fill-rule=\\"evenodd\\" d=\\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\\"></path></svg></a>Create a server with the Kitura CLI</h1>\\n<p>The Kitura command-line interface (CLI) allows you to quickly generate a Kitura project.</p>\\n<hr>\\n<h2 id=\\"step-1-installing-the-cli\\"><a href=\\"#step-1-installing-the-cli\\" aria-label=\\"step 1 installing the cli permalink\\" class=\\"anchor\\"><svg aria-hidden=\\"true\\" focusable=\\"false\\" height=\\"16\\" version=\\"1.1\\" viewBox=\\"0 0 16 16\\" width=\\"16\\"><path fill-rule=\\"evenodd\\" d=\\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\\"></path></svg></a>Step 1: Installing the CLI</h2>\\n<h3 id=\\"install-via-brew-macos\\"><a href=\\"#install-via-brew-macos\\" aria-label=\\"install via brew macos permalink\\" class=\\"anchor\\"><svg aria-hidden=\\"true\\" focusable=\\"false\\" height=\\"16\\" version=\\"1.1\\" viewBox=\\"0 0 16 16\\" width=\\"16\\"><path fill-rule=\\"evenodd\\" d=\\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\\"></path></svg></a>Install via brew (macOS)</h3>\\n<blockquote>\\n<p>For this installation you will need to have Homebrew installed.  If you do not have Homebrew installed you can follow the <a href=\\"https://docs.brew.sh/Installation\\">Homebrew installation steps</a></p>\\n</blockquote>\\n<p>Install Kitura’s Homebrew tap to allow ‘brew’ to access Kitura’s package repository:</p>\\n<div class=\\"gatsby-highlight\\" data-language=\\"text\\"><pre class=\\"language-text\\"><code class=\\"language-text\\">brew tap ibm-swift/kitura</code></pre></div>\\n<p>Install Kitura’s command-line interface:</p>\\n<div class=\\"gatsby-highlight\\" data-language=\\"text\\"><pre class=\\"language-text\\"><code class=\\"language-text\\">brew install kitura</code></pre></div>\\n<p>Verify that Kitura CLI is installed by running:</p>\\n<div class=\\"gatsby-highlight\\" data-language=\\"text\\"><pre class=\\"language-text\\"><code class=\\"language-text\\">kitura --version</code></pre></div>\\n<p>If the installation was successful we would see information about the version.</p>\\n<h3 id=\\"install-via-curl-macos-or-linux\\"><a href=\\"#install-via-curl-macos-or-linux\\" aria-label=\\"install via curl macos or linux permalink\\" class=\\"anchor\\"><svg aria-hidden=\\"true\\" focusable=\\"false\\" height=\\"16\\" version=\\"1.1\\" viewBox=\\"0 0 16 16\\" width=\\"16\\"><path fill-rule=\\"evenodd\\" d=\\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\\"></path></svg></a>Install via curl (macOS or Linux)</h3>\\n<p>You can install (either on Mac or Linux) with:</p>\\n<div class=\\"gatsby-highlight\\" data-language=\\"text\\"><pre class=\\"language-text\\"><code class=\\"language-text\\">curl -fsSL https://github.com/IBM-Swift/kitura-cli/releases/latest/download/install.sh | sudo bash</code></pre></div>\\n<p>Verify that Kitura CLI is installed by running:</p>\\n<div class=\\"gatsby-highlight\\" data-language=\\"text\\"><pre class=\\"language-text\\"><code class=\\"language-text\\">kitura --version</code></pre></div>\\n<p>If the installation was successful we would see information about the version.</p>\\n<hr>\\n<h2 id=\\"step-2-create-a-directory\\"><a href=\\"#step-2-create-a-directory\\" aria-label=\\"step 2 create a directory permalink\\" class=\\"anchor\\"><svg aria-hidden=\\"true\\" focusable=\\"false\\" height=\\"16\\" version=\\"1.1\\" viewBox=\\"0 0 16 16\\" width=\\"16\\"><path fill-rule=\\"evenodd\\" d=\\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\\"></path></svg></a>Step 2: Create a directory</h2>\\n<p>Kitura CLI needs to be run in an empty directory so you will need to create a new directory for your server:</p>\\n<div class=\\"gatsby-highlight\\" data-language=\\"text\\"><pre class=\\"language-text\\"><code class=\\"language-text\\">mkdir MyKituraApp &amp;&amp; cd MyKituraApp</code></pre></div>\\n<hr>\\n<h2 id=\\"step-3-create-a-kitura-server\\"><a href=\\"#step-3-create-a-kitura-server\\" aria-label=\\"step 3 create a kitura server permalink\\" class=\\"anchor\\"><svg aria-hidden=\\"true\\" focusable=\\"false\\" height=\\"16\\" version=\\"1.1\\" viewBox=\\"0 0 16 16\\" width=\\"16\\"><path fill-rule=\\"evenodd\\" d=\\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\\"></path></svg></a>Step 3: Create a Kitura server</h2>\\n<p>Create a Kitura application using the Kitura CLI:</p>\\n<div class=\\"gatsby-highlight\\" data-language=\\"text\\"><pre class=\\"language-text\\"><code class=\\"language-text\\">kitura init</code></pre></div>\\n<p><code class=\\"language-text\\">kitura init</code> will create a cloud-ready Kitura application in your current directory.</p>\\n<p>The name of your project will be the same as the directory name.</p>\\n<blockquote>\\n<p>The generated project contains a Swift 5.0 <code class=\\"language-text\\">Package.swift</code> file.</p>\\n</blockquote>\\n<hr>\\n<h2 id=\\"step-4-start-the-kitura-server\\"><a href=\\"#step-4-start-the-kitura-server\\" aria-label=\\"step 4 start the kitura server permalink\\" class=\\"anchor\\"><svg aria-hidden=\\"true\\" focusable=\\"false\\" height=\\"16\\" version=\\"1.1\\" viewBox=\\"0 0 16 16\\" width=\\"16\\"><path fill-rule=\\"evenodd\\" d=\\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\\"></path></svg></a>Step 4: Start the Kitura server</h2>\\n<p>By default <code class=\\"language-text\\">kitura init</code> builds our server code so we just need to run the server:</p>\\n<div class=\\"gatsby-highlight\\" data-language=\\"text\\"><pre class=\\"language-text\\"><code class=\\"language-text\\">swift run</code></pre></div>\\n<p>Once the terminal output contains:</p>\\n<div class=\\"gatsby-highlight\\" data-language=\\"text\\"><pre class=\\"language-text\\"><code class=\\"language-text\\">[INFO] [HTTPServer.swift:195 listen(on:)] Listening on port 8080</code></pre></div>\\n<p>We can navigate to: <a href=\\"http://localhost:8080\\" target=\\"blank\\">localhost:8080</a> to view our server.</p>\\n<hr>\\n<h2 id=\\"next-steps\\"><a href=\\"#next-steps\\" aria-label=\\"next steps permalink\\" class=\\"anchor\\"><svg aria-hidden=\\"true\\" focusable=\\"false\\" height=\\"16\\" version=\\"1.1\\" viewBox=\\"0 0 16 16\\" width=\\"16\\"><path fill-rule=\\"evenodd\\" d=\\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\\"></path></svg></a>Next steps</h2>\\n<p><a href=\\"../routing/what-is-routing\\">Routing:</a> Learn about routing and the two types Kitura supports.</p>","frontmatter":{"path":"/docs/getting-started/create-server-cli","title":"Create a Kitura server using Kitura CLI"}}},{"node":{"html":"<h1 id=\\"create-a-simple-hello-world-application\\"><a href=\\"#create-a-simple-hello-world-application\\" aria-label=\\"create a simple hello world application permalink\\" class=\\"anchor\\"><svg aria-hidden=\\"true\\" focusable=\\"false\\" height=\\"16\\" version=\\"1.1\\" viewBox=\\"0 0 16 16\\" width=\\"16\\"><path fill-rule=\\"evenodd\\" d=\\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\\"></path></svg></a>Create a simple Hello World application</h1>\\n<p>This quick tutorial will take you through creating a simple Hello World example with Kitura.</p>\\n<hr>\\n<h2 id=\\"step-1-create-project\\"><a href=\\"#step-1-create-project\\" aria-label=\\"step 1 create project permalink\\" class=\\"anchor\\"><svg aria-hidden=\\"true\\" focusable=\\"false\\" height=\\"16\\" version=\\"1.1\\" viewBox=\\"0 0 16 16\\" width=\\"16\\"><path fill-rule=\\"evenodd\\" d=\\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\\"></path></svg></a>Step 1: Create project</h2>\\n<p>First create a directory for our project, which will also serve as the project\'s name:</p>\\n<div class=\\"gatsby-highlight\\" data-language=\\"text\\"><pre class=\\"language-text\\"><code class=\\"language-text\\">mkdir HelloKitura &amp;&amp; cd HelloKitura</code></pre></div>\\n<p>Initialize the directory as a Swift project:</p>\\n<div class=\\"gatsby-highlight\\" data-language=\\"text\\"><pre class=\\"language-text\\"><code class=\\"language-text\\">swift package init --type executable</code></pre></div>\\n<p>Swift Package Manager (SPM) creates a Swift project stub. All we need to do is add our project dependencies, like Kitura, to the project.</p>\\n<hr>\\n<h2 id=\\"step-2-add-kitura-to-our-dependencies\\"><a href=\\"#step-2-add-kitura-to-our-dependencies\\" aria-label=\\"step 2 add kitura to our dependencies permalink\\" class=\\"anchor\\"><svg aria-hidden=\\"true\\" focusable=\\"false\\" height=\\"16\\" version=\\"1.1\\" viewBox=\\"0 0 16 16\\" width=\\"16\\"><path fill-rule=\\"evenodd\\" d=\\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\\"></path></svg></a>Step 2: Add Kitura to our dependencies</h2>\\n<p>To add Kitura to our dependencies we need to edit the <code class=\\"language-text\\">Package.swift</code> file.</p>\\n<p>Open <code class=\\"language-text\\">Package.swift</code> in your default text editor:</p>\\n<div class=\\"gatsby-highlight\\" data-language=\\"text\\"><pre class=\\"language-text\\"><code class=\\"language-text\\">open Package.swift</code></pre></div>\\n<p>Add Kitura to our dependencies so the <code class=\\"language-text\\">Package.swift</code> file looks like this:</p>\\n<div class=\\"gatsby-highlight\\" data-language=\\"swift\\"><pre class=\\"language-swift\\"><code class=\\"language-swift\\"><span class=\\"token comment\\">// swift-tools-version:5.0</span>\\n<span class=\\"token keyword\\">import</span> <span class=\\"token builtin\\">PackageDescription</span>\\n\\n<span class=\\"token keyword\\">let</span> package <span class=\\"token operator\\">=</span> <span class=\\"token function\\">Package</span><span class=\\"token punctuation\\">(</span>\\n    name<span class=\\"token punctuation\\">:</span> <span class=\\"token string\\">\\"HelloKitura\\"</span><span class=\\"token punctuation\\">,</span>\\n    dependencies<span class=\\"token punctuation\\">:</span> <span class=\\"token punctuation\\">[</span>\\n        <span class=\\"token punctuation\\">.</span><span class=\\"token function\\">package</span><span class=\\"token punctuation\\">(</span>url<span class=\\"token punctuation\\">:</span> <span class=\\"token string\\">\\"https://github.com/IBM-Swift/Kitura\\"</span><span class=\\"token punctuation\\">,</span> from<span class=\\"token punctuation\\">:</span> <span class=\\"token string\\">\\"2.8.0\\"</span><span class=\\"token punctuation\\">)</span>\\n    <span class=\\"token punctuation\\">]</span><span class=\\"token punctuation\\">,</span>\\n    targets<span class=\\"token punctuation\\">:</span> <span class=\\"token punctuation\\">[</span>\\n        <span class=\\"token punctuation\\">.</span><span class=\\"token function\\">target</span><span class=\\"token punctuation\\">(</span>\\n            name<span class=\\"token punctuation\\">:</span> <span class=\\"token string\\">\\"HelloKitura\\"</span><span class=\\"token punctuation\\">,</span>\\n            dependencies<span class=\\"token punctuation\\">:</span> <span class=\\"token punctuation\\">[</span><span class=\\"token string\\">\\"Kitura\\"</span><span class=\\"token punctuation\\">]</span><span class=\\"token punctuation\\">)</span><span class=\\"token punctuation\\">,</span>\\n        <span class=\\"token punctuation\\">.</span><span class=\\"token function\\">testTarget</span><span class=\\"token punctuation\\">(</span>\\n            name<span class=\\"token punctuation\\">:</span> <span class=\\"token string\\">\\"HelloKituraTests\\"</span><span class=\\"token punctuation\\">,</span>\\n            dependencies<span class=\\"token punctuation\\">:</span> <span class=\\"token punctuation\\">[</span><span class=\\"token string\\">\\"HelloKitura\\"</span><span class=\\"token punctuation\\">]</span><span class=\\"token punctuation\\">)</span><span class=\\"token punctuation\\">,</span>\\n    <span class=\\"token punctuation\\">]</span>\\n<span class=\\"token punctuation\\">)</span></code></pre></div>\\n<p>Now we can build the project to pull down our new dependency:</p>\\n<div class=\\"gatsby-highlight\\" data-language=\\"text\\"><pre class=\\"language-text\\"><code class=\\"language-text\\">swift build</code></pre></div>\\n<hr>\\n<h2 id=\\"step-3-add-the-server-code\\"><a href=\\"#step-3-add-the-server-code\\" aria-label=\\"step 3 add the server code permalink\\" class=\\"anchor\\"><svg aria-hidden=\\"true\\" focusable=\\"false\\" height=\\"16\\" version=\\"1.1\\" viewBox=\\"0 0 16 16\\" width=\\"16\\"><path fill-rule=\\"evenodd\\" d=\\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\\"></path></svg></a>Step 3: Add the server code</h2>\\n<p>Open <code class=\\"language-text\\">main.swift</code> in our text editor:</p>\\n<div class=\\"gatsby-highlight\\" data-language=\\"text\\"><pre class=\\"language-text\\"><code class=\\"language-text\\">open Sources/HelloKitura/main.swift</code></pre></div>\\n<p>Replace the contents of the file with the following code:</p>\\n<div class=\\"gatsby-highlight\\" data-language=\\"swift\\"><pre class=\\"language-swift\\"><code class=\\"language-swift\\"><span class=\\"token keyword\\">import</span> <span class=\\"token builtin\\">Kitura</span>\\n\\n<span class=\\"token keyword\\">let</span> router <span class=\\"token operator\\">=</span> <span class=\\"token function\\">Router</span><span class=\\"token punctuation\\">(</span><span class=\\"token punctuation\\">)</span>\\n\\nrouter<span class=\\"token punctuation\\">.</span><span class=\\"token keyword\\">get</span><span class=\\"token punctuation\\">(</span><span class=\\"token string\\">\\"/\\"</span><span class=\\"token punctuation\\">)</span> <span class=\\"token punctuation\\">{</span> request<span class=\\"token punctuation\\">,</span> response<span class=\\"token punctuation\\">,</span> next <span class=\\"token keyword\\">in</span>\\n    response<span class=\\"token punctuation\\">.</span><span class=\\"token function\\">send</span><span class=\\"token punctuation\\">(</span><span class=\\"token string\\">\\"Hello world!\\"</span><span class=\\"token punctuation\\">)</span>\\n    <span class=\\"token function\\">next</span><span class=\\"token punctuation\\">(</span><span class=\\"token punctuation\\">)</span>\\n<span class=\\"token punctuation\\">}</span>\\n\\n<span class=\\"token builtin\\">Kitura</span><span class=\\"token punctuation\\">.</span><span class=\\"token function\\">addHTTPServer</span><span class=\\"token punctuation\\">(</span>onPort<span class=\\"token punctuation\\">:</span> <span class=\\"token number\\">8080</span><span class=\\"token punctuation\\">,</span> with<span class=\\"token punctuation\\">:</span> router<span class=\\"token punctuation\\">)</span>\\n<span class=\\"token builtin\\">Kitura</span><span class=\\"token punctuation\\">.</span><span class=\\"token function\\">run</span><span class=\\"token punctuation\\">(</span><span class=\\"token punctuation\\">)</span></code></pre></div>\\n<p>The code above is the simplest Kitura application we can create. This application starts a server and listens on port 8080 for connections. The application responds with “Hello World!” when requests are made to the root URL (/).</p>\\n<hr>\\n<h2 id=\\"step-4-start-the-server\\"><a href=\\"#step-4-start-the-server\\" aria-label=\\"step 4 start the server permalink\\" class=\\"anchor\\"><svg aria-hidden=\\"true\\" focusable=\\"false\\" height=\\"16\\" version=\\"1.1\\" viewBox=\\"0 0 16 16\\" width=\\"16\\"><path fill-rule=\\"evenodd\\" d=\\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\\"></path></svg></a>Step 4: Start the server</h2>\\n<p>Run the project:</p>\\n<div class=\\"gatsby-highlight\\" data-language=\\"text\\"><pre class=\\"language-text\\"><code class=\\"language-text\\">swift run</code></pre></div>\\n<p>Open your web browser at <a href=\\"http://localhost:8080\\" target=\\"blank\\">localhost:8080</a>.</p>\\n<p>You should see the following in your browser:</p>\\n<div class=\\"gatsby-highlight\\" data-language=\\"text\\"><pre class=\\"language-text\\"><code class=\\"language-text\\">&quot;Hello, World!&quot;</code></pre></div>\\n<p>Congratulations! You have just created your first server-side Swift application using Kitura.</p>\\n<hr>\\n<h2 id=\\"next-steps\\"><a href=\\"#next-steps\\" aria-label=\\"next steps permalink\\" class=\\"anchor\\"><svg aria-hidden=\\"true\\" focusable=\\"false\\" height=\\"16\\" version=\\"1.1\\" viewBox=\\"0 0 16 16\\" width=\\"16\\"><path fill-rule=\\"evenodd\\" d=\\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\\"></path></svg></a>Next steps</h2>\\n<p>In this simple Kitura application all of our Swift code is contained in a single <code class=\\"language-text\\">main.swift</code> file.</p>\\n<p>In practice it\'s preferable to structure your project code in more than one file. To generate scaffolding for a more complex application checkout our <a href=\\"./create-server-cli\\">Create a Server</a> Guide and then explore our other guides!</p>","frontmatter":{"path":"/docs/getting-started/hello-world","title":"Create a simple Hello World application"}}},{"node":{"html":"<h1 id=\\"create-a-server-with-swift-package-manager\\"><a href=\\"#create-a-server-with-swift-package-manager\\" aria-label=\\"create a server with swift package manager permalink\\" class=\\"anchor\\"><svg aria-hidden=\\"true\\" focusable=\\"false\\" height=\\"16\\" version=\\"1.1\\" viewBox=\\"0 0 16 16\\" width=\\"16\\"><path fill-rule=\\"evenodd\\" d=\\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\\"></path></svg></a>Create a server with Swift Package Manager</h1>\\n<p>The Swift Package Manager (SPM) is installed as part of Swift by default. In this guide we will use SPM to create a Kitura project from scratch.</p>\\n<hr>\\n<h2 id=\\"step-1-create-project\\"><a href=\\"#step-1-create-project\\" aria-label=\\"step 1 create project permalink\\" class=\\"anchor\\"><svg aria-hidden=\\"true\\" focusable=\\"false\\" height=\\"16\\" version=\\"1.1\\" viewBox=\\"0 0 16 16\\" width=\\"16\\"><path fill-rule=\\"evenodd\\" d=\\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\\"></path></svg></a>Step 1: Create project</h2>\\n<p>To work with Swift Package Manager (SPM) we need to use the command line.</p>\\n<blockquote>\\n<p>If you\'re new to this simply open the Terminal (on macOS or Linux) to get started.</p>\\n</blockquote>\\n<p>Create a directory for our project:</p>\\n<div class=\\"gatsby-highlight\\" data-language=\\"text\\"><pre class=\\"language-text\\"><code class=\\"language-text\\">mkdir MyKituraApp &amp;&amp; cd MyKituraApp</code></pre></div>\\n<blockquote>\\n<p>The name of the directory will also be the name of the generated project.</p>\\n</blockquote>\\n<p>Initialize the directory as a Swift project:</p>\\n<div class=\\"gatsby-highlight\\" data-language=\\"text\\"><pre class=\\"language-text\\"><code class=\\"language-text\\">swift package init --type executable</code></pre></div>\\n<p>SPM creates a Swift project stub. All we need to do is add our project dependencies, like Kitura, to the project.</p>\\n<hr>\\n<h2 id=\\"step-2-create-the-application-directory\\"><a href=\\"#step-2-create-the-application-directory\\" aria-label=\\"step 2 create the application directory permalink\\" class=\\"anchor\\"><svg aria-hidden=\\"true\\" focusable=\\"false\\" height=\\"16\\" version=\\"1.1\\" viewBox=\\"0 0 16 16\\" width=\\"16\\"><path fill-rule=\\"evenodd\\" d=\\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\\"></path></svg></a>Step 2: Create the Application directory</h2>\\n<p>Within our <code class=\\"language-text\\">Sources</code> directory we will first create an <code class=\\"language-text\\">Application</code> directory:</p>\\n<div class=\\"gatsby-highlight\\" data-language=\\"text\\"><pre class=\\"language-text\\"><code class=\\"language-text\\">mkdir Sources/Application</code></pre></div>\\n<p>This is the directory where we will store all of our application code. Note, code in the project\'s <code class=\\"language-text\\">main.swift</code> file isn\'t easy to test because you can\'t import an executable target as a module, so to encourage the creation of easily testable code we have minimal code in our <code class=\\"language-text\\">main.swift</code> file and recommend putting application code into a separate <code class=\\"language-text\\">Application</code> directory.</p>\\n<p>Next we will create our <code class=\\"language-text\\">Application.swift</code> file:</p>\\n<div class=\\"gatsby-highlight\\" data-language=\\"text\\"><pre class=\\"language-text\\"><code class=\\"language-text\\">touch Sources/Application/Application.swift</code></pre></div>\\n<p>Next we need to create our <code class=\\"language-text\\">Routes</code> directory:</p>\\n<div class=\\"gatsby-highlight\\" data-language=\\"text\\"><pre class=\\"language-text\\"><code class=\\"language-text\\">mkdir Sources/Application/Routes</code></pre></div>\\n<p>This is where we will store all of our route handlers.</p>\\n<p>Next we will rename the directory within <code class=\\"language-text\\">Tests</code> to <code class=\\"language-text\\">ApplicationTests</code>:</p>\\n<div class=\\"gatsby-highlight\\" data-language=\\"text\\"><pre class=\\"language-text\\"><code class=\\"language-text\\">mv Tests/MyKituraAppTests/ Tests/ApplicationTests</code></pre></div>\\n<hr>\\n<h2 id=\\"step-3-add-kitura-to-our-dependencies\\"><a href=\\"#step-3-add-kitura-to-our-dependencies\\" aria-label=\\"step 3 add kitura to our dependencies permalink\\" class=\\"anchor\\"><svg aria-hidden=\\"true\\" focusable=\\"false\\" height=\\"16\\" version=\\"1.1\\" viewBox=\\"0 0 16 16\\" width=\\"16\\"><path fill-rule=\\"evenodd\\" d=\\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\\"></path></svg></a>Step 3: Add Kitura to our dependencies</h2>\\n<p>To add Kitura to our dependencies we need to edit the <code class=\\"language-text\\">Package.swift</code> file.</p>\\n<p>Open <code class=\\"language-text\\">Package.swift</code> in your default text editor:</p>\\n<div class=\\"gatsby-highlight\\" data-language=\\"text\\"><pre class=\\"language-text\\"><code class=\\"language-text\\">open Package.swift</code></pre></div>\\n<p>Add Kitura to our dependencies so the <code class=\\"language-text\\">Package.swift</code> file looks like this:</p>\\n<div class=\\"gatsby-highlight\\" data-language=\\"swift\\"><pre class=\\"language-swift\\"><code class=\\"language-swift\\"><span class=\\"token comment\\">// swift-tools-version:x.x</span>\\n<span class=\\"token keyword\\">import</span> <span class=\\"token builtin\\">PackageDescription</span>\\n\\n<span class=\\"token keyword\\">let</span> package <span class=\\"token operator\\">=</span> <span class=\\"token function\\">Package</span><span class=\\"token punctuation\\">(</span>\\n    name<span class=\\"token punctuation\\">:</span> <span class=\\"token string\\">\\"MyKituraApp\\"</span><span class=\\"token punctuation\\">,</span>\\n    dependencies<span class=\\"token punctuation\\">:</span> <span class=\\"token punctuation\\">[</span>\\n        <span class=\\"token punctuation\\">.</span><span class=\\"token function\\">package</span><span class=\\"token punctuation\\">(</span>url<span class=\\"token punctuation\\">:</span> <span class=\\"token string\\">\\"https://github.com/IBM-Swift/Kitura\\"</span><span class=\\"token punctuation\\">,</span> from<span class=\\"token punctuation\\">:</span> <span class=\\"token string\\">\\"y.y.y\\"</span><span class=\\"token punctuation\\">)</span>\\n    <span class=\\"token punctuation\\">]</span><span class=\\"token punctuation\\">,</span>\\n    targets<span class=\\"token punctuation\\">:</span> <span class=\\"token punctuation\\">[</span>\\n        <span class=\\"token punctuation\\">.</span><span class=\\"token function\\">target</span><span class=\\"token punctuation\\">(</span>name<span class=\\"token punctuation\\">:</span> <span class=\\"token string\\">\\"MyKituraApp\\"</span><span class=\\"token punctuation\\">,</span> dependencies<span class=\\"token punctuation\\">:</span> <span class=\\"token punctuation\\">[</span> <span class=\\"token punctuation\\">.</span><span class=\\"token function\\">target</span><span class=\\"token punctuation\\">(</span>name<span class=\\"token punctuation\\">:</span> <span class=\\"token string\\">\\"Application\\"</span><span class=\\"token punctuation\\">)</span><span class=\\"token punctuation\\">,</span> <span class=\\"token string\\">\\"Kitura\\"</span><span class=\\"token punctuation\\">]</span><span class=\\"token punctuation\\">)</span><span class=\\"token punctuation\\">,</span>\\n        <span class=\\"token punctuation\\">.</span><span class=\\"token function\\">target</span><span class=\\"token punctuation\\">(</span>name<span class=\\"token punctuation\\">:</span> <span class=\\"token string\\">\\"Application\\"</span><span class=\\"token punctuation\\">,</span> dependencies<span class=\\"token punctuation\\">:</span> <span class=\\"token punctuation\\">[</span> <span class=\\"token string\\">\\"Kitura\\"</span> <span class=\\"token punctuation\\">]</span><span class=\\"token punctuation\\">)</span><span class=\\"token punctuation\\">,</span>\\n\\n        <span class=\\"token punctuation\\">.</span><span class=\\"token function\\">testTarget</span><span class=\\"token punctuation\\">(</span>name<span class=\\"token punctuation\\">:</span> <span class=\\"token string\\">\\"ApplicationTests\\"</span> <span class=\\"token punctuation\\">,</span> dependencies<span class=\\"token punctuation\\">:</span> <span class=\\"token punctuation\\">[</span><span class=\\"token punctuation\\">.</span><span class=\\"token function\\">target</span><span class=\\"token punctuation\\">(</span>name<span class=\\"token punctuation\\">:</span> <span class=\\"token string\\">\\"Application\\"</span><span class=\\"token punctuation\\">)</span><span class=\\"token punctuation\\">,</span> <span class=\\"token string\\">\\"Kitura\\"</span> <span class=\\"token punctuation\\">]</span><span class=\\"token punctuation\\">)</span>\\n    <span class=\\"token punctuation\\">]</span>\\n<span class=\\"token punctuation\\">)</span></code></pre></div>\\n<p>Substitute \\"y.y.y\\" with the latest Kitura <a href=\\"https://github.com/IBM-Swift/Kitura/releases\\">release</a> and \\"x.x\\" with the minimum version of Swift required to build the package (e.g. 4.0, 4.2, 5.0).</p>\\n<hr>\\n<h2 id=\\"step-4-add-code-to-the-applicationswift-file\\"><a href=\\"#step-4-add-code-to-the-applicationswift-file\\" aria-label=\\"step 4 add code to the applicationswift file permalink\\" class=\\"anchor\\"><svg aria-hidden=\\"true\\" focusable=\\"false\\" height=\\"16\\" version=\\"1.1\\" viewBox=\\"0 0 16 16\\" width=\\"16\\"><path fill-rule=\\"evenodd\\" d=\\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\\"></path></svg></a>Step 4: Add code to the Application.swift file</h2>\\n<p>Earlier, we created the <code class=\\"language-text\\">Application.swift</code> file but we didn\'t add any code to it.</p>\\n<p>Open the <code class=\\"language-text\\">Application.swift</code> file in our default text editor:</p>\\n<div class=\\"gatsby-highlight\\" data-language=\\"text\\"><pre class=\\"language-text\\"><code class=\\"language-text\\">open Sources/Application/Application.swift</code></pre></div>\\n<p>The <code class=\\"language-text\\">Application.swift</code> file will be responsible for starting our Kitura server.</p>\\n<p>Add the following code to the <code class=\\"language-text\\">Application.swift</code> file:</p>\\n<div class=\\"gatsby-highlight\\" data-language=\\"swift\\"><pre class=\\"language-swift\\"><code class=\\"language-swift\\"><span class=\\"token keyword\\">import</span> <span class=\\"token builtin\\">Kitura</span>\\n\\n<span class=\\"token keyword\\">public</span> <span class=\\"token keyword\\">class</span> <span class=\\"token class-name\\">App</span> <span class=\\"token punctuation\\">{</span>\\n\\n    <span class=\\"token keyword\\">let</span> router <span class=\\"token operator\\">=</span> <span class=\\"token function\\">Router</span><span class=\\"token punctuation\\">(</span><span class=\\"token punctuation\\">)</span>\\n\\n    <span class=\\"token keyword\\">public</span> <span class=\\"token keyword\\">init</span><span class=\\"token punctuation\\">(</span><span class=\\"token punctuation\\">)</span> <span class=\\"token keyword\\">throws</span> <span class=\\"token punctuation\\">{</span>\\n\\n    <span class=\\"token punctuation\\">}</span>\\n\\n    <span class=\\"token keyword\\">func</span> <span class=\\"token function\\">postInit</span><span class=\\"token punctuation\\">(</span><span class=\\"token punctuation\\">)</span> <span class=\\"token keyword\\">throws</span> <span class=\\"token punctuation\\">{</span>\\n\\n    <span class=\\"token punctuation\\">}</span>\\n\\n    <span class=\\"token keyword\\">public</span> <span class=\\"token keyword\\">func</span> <span class=\\"token function\\">run</span><span class=\\"token punctuation\\">(</span><span class=\\"token punctuation\\">)</span> <span class=\\"token keyword\\">throws</span> <span class=\\"token punctuation\\">{</span>\\n        <span class=\\"token keyword\\">try</span> <span class=\\"token function\\">postInit</span><span class=\\"token punctuation\\">(</span><span class=\\"token punctuation\\">)</span>\\n        <span class=\\"token builtin\\">Kitura</span><span class=\\"token punctuation\\">.</span><span class=\\"token function\\">addHTTPServer</span><span class=\\"token punctuation\\">(</span>onPort<span class=\\"token punctuation\\">:</span> <span class=\\"token number\\">8080</span><span class=\\"token punctuation\\">,</span> with<span class=\\"token punctuation\\">:</span> router<span class=\\"token punctuation\\">)</span>\\n        <span class=\\"token builtin\\">Kitura</span><span class=\\"token punctuation\\">.</span><span class=\\"token function\\">run</span><span class=\\"token punctuation\\">(</span><span class=\\"token punctuation\\">)</span>\\n    <span class=\\"token punctuation\\">}</span>\\n<span class=\\"token punctuation\\">}</span></code></pre></div>\\n<p>This code creates an instance of Router, which will route incoming requests to the correct endpoints. Within the <code class=\\"language-text\\">run()</code> method we register our <code class=\\"language-text\\">router</code> instance to run on port 8080. The call to <code class=\\"language-text\\">Kitura.run()</code> does not return immediately - it will block until the server is stopped.</p>\\n<p>The <code class=\\"language-text\\">postInit()</code> function is where we configure and set up the router, prior to starting the server.</p>\\n<hr>\\n<h2 id=\\"step-5-add-code-to-the-mainswift-file\\"><a href=\\"#step-5-add-code-to-the-mainswift-file\\" aria-label=\\"step 5 add code to the mainswift file permalink\\" class=\\"anchor\\"><svg aria-hidden=\\"true\\" focusable=\\"false\\" height=\\"16\\" version=\\"1.1\\" viewBox=\\"0 0 16 16\\" width=\\"16\\"><path fill-rule=\\"evenodd\\" d=\\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\\"></path></svg></a>Step 5: Add code to the main.swift file</h2>\\n<p>Now that we have created our <code class=\\"language-text\\">App</code> class in our <code class=\\"language-text\\">Application.swift</code> file we can use it within our <code class=\\"language-text\\">main.swift</code> file.</p>\\n<p>Open the <code class=\\"language-text\\">main.swift</code> file in your editor:</p>\\n<div class=\\"gatsby-highlight\\" data-language=\\"text\\"><pre class=\\"language-text\\"><code class=\\"language-text\\">open Sources/MyKituraApp/main.swift</code></pre></div>\\n<p>Replace the existing code with the following:</p>\\n<div class=\\"gatsby-highlight\\" data-language=\\"swift\\"><pre class=\\"language-swift\\"><code class=\\"language-swift\\"><span class=\\"token keyword\\">import</span> <span class=\\"token builtin\\">Application</span>\\n\\n<span class=\\"token keyword\\">do</span> <span class=\\"token punctuation\\">{</span>\\n    <span class=\\"token keyword\\">let</span> app <span class=\\"token operator\\">=</span> <span class=\\"token keyword\\">try</span> <span class=\\"token function\\">App</span><span class=\\"token punctuation\\">(</span><span class=\\"token punctuation\\">)</span>\\n    <span class=\\"token keyword\\">try</span> app<span class=\\"token punctuation\\">.</span><span class=\\"token function\\">run</span><span class=\\"token punctuation\\">(</span><span class=\\"token punctuation\\">)</span>\\n<span class=\\"token punctuation\\">}</span> <span class=\\"token keyword\\">catch</span> <span class=\\"token keyword\\">let</span> error <span class=\\"token punctuation\\">{</span>\\n    <span class=\\"token function\\">print</span><span class=\\"token punctuation\\">(</span>error<span class=\\"token punctuation\\">.</span>localizedDescription<span class=\\"token punctuation\\">)</span>\\n<span class=\\"token punctuation\\">}</span></code></pre></div>\\n<p>This code will create an <code class=\\"language-text\\">App</code> instance and run it.</p>\\n<hr>\\n<h2 id=\\"step-6-start-the-server\\"><a href=\\"#step-6-start-the-server\\" aria-label=\\"step 6 start the server permalink\\" class=\\"anchor\\"><svg aria-hidden=\\"true\\" focusable=\\"false\\" height=\\"16\\" version=\\"1.1\\" viewBox=\\"0 0 16 16\\" width=\\"16\\"><path fill-rule=\\"evenodd\\" d=\\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\\"></path></svg></a>Step 6: Start the server</h2>\\n<p>To start our project we need to run our Swift executable:</p>\\n<div class=\\"gatsby-highlight\\" data-language=\\"text\\"><pre class=\\"language-text\\"><code class=\\"language-text\\">swift run</code></pre></div>\\n<blockquote>\\n<p>To run the project in Xcode ensure your build target is set to <code class=\\"language-text\\">My Mac</code> then simply run the project.  You may be prompted to allow the app to accept incoming connections.</p>\\n</blockquote>\\n<p>Navigate to <a href=\\"http://localhost:8080\\" target=\\"blank\\">localhost:8080</a>.</p>\\n<p>You should be able to see the Kitura landing page.</p>\\n<h2 id=\\"project-structure\\"><a href=\\"#project-structure\\" aria-label=\\"project structure permalink\\" class=\\"anchor\\"><svg aria-hidden=\\"true\\" focusable=\\"false\\" height=\\"16\\" version=\\"1.1\\" viewBox=\\"0 0 16 16\\" width=\\"16\\"><path fill-rule=\\"evenodd\\" d=\\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\\"></path></svg></a>Project Structure</h2>\\n<p>We have just created a Kitura project with the following structure:</p>\\n<div class=\\"gatsby-highlight\\" data-language=\\"text\\"><pre class=\\"language-text\\"><code class=\\"language-text\\">MyKituraApp\\n├── Package.swift\\n├── Sources/\\n│    ├── MyKituraApp/\\n│    │    └── main.swift\\n│    ├── Application/\\n│    │    └── Application.swift\\n│    └── Routes/\\n└── Tests/\\n     └── ApplicationTests/</code></pre></div>\\n<ul>\\n<li>Package.swift – defines packages that your app depends on and their versions</li>\\n<li>main.swift - the file that is run to initialize your app and start your server</li>\\n<li>Application.swift - the application that glues everything together</li>\\n<li>Routes/ - folder containing the routing logic for how to handle HTTP requests</li>\\n<li>ApplicationTests/ – folder containing the Swift tests for your project</li>\\n</ul>\\n<p>This matches the structure generated by the Kitura command-line interface and will be used throughout the guides.</p>\\n<hr>\\n<h2 id=\\"next-steps\\"><a href=\\"#next-steps\\" aria-label=\\"next steps permalink\\" class=\\"anchor\\"><svg aria-hidden=\\"true\\" focusable=\\"false\\" height=\\"16\\" version=\\"1.1\\" viewBox=\\"0 0 16 16\\" width=\\"16\\"><path fill-rule=\\"evenodd\\" d=\\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\\"></path></svg></a>Next steps</h2>\\n<p><a href=\\"../logging/what-is-logging\\">Logging:</a> Learn how to add logging to your Kitura server.</p>\\n<p><a href=\\"../routing/what-is-routing\\">Routing:</a> Learn about routing and the two types Kitura supports.</p>","frontmatter":{"path":"/docs/getting-started/create-server-spm","title":"Create a Kitura server using SPM"}}},{"node":{"html":"<h1 id=\\"installation\\"><a href=\\"#installation\\" aria-label=\\"installation permalink\\" class=\\"anchor\\"><svg aria-hidden=\\"true\\" focusable=\\"false\\" height=\\"16\\" version=\\"1.1\\" viewBox=\\"0 0 16 16\\" width=\\"16\\"><path fill-rule=\\"evenodd\\" d=\\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\\"></path></svg></a>Installation</h1>\\n<p>To use Kitura, you first need to install Swift. You can install Swift on macOS and/or Linux.</p>\\n<p>Kitura works on both macOS and Linux, so choose whichever platform you prefer.</p>\\n<hr>\\n<h2 id=\\"install-swift-on-macos\\"><a href=\\"#install-swift-on-macos\\" aria-label=\\"install swift on macos permalink\\" class=\\"anchor\\"><svg aria-hidden=\\"true\\" focusable=\\"false\\" height=\\"16\\" version=\\"1.1\\" viewBox=\\"0 0 16 16\\" width=\\"16\\"><path fill-rule=\\"evenodd\\" d=\\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\\"></path></svg></a>Install Swift on macOS</h2>\\n<p>Download and install the latest version of <a href=\\"https://developer.apple.com/xcode/\\">Xcode</a> from the App Store.</p>\\n<p>To verify your Swift installation, open a Terminal, enter the ‘swift’ command and pass the ‘--version’ flag:</p>\\n<div class=\\"gatsby-highlight\\" data-language=\\"text\\"><pre class=\\"language-text\\"><code class=\\"language-text\\">swift --version</code></pre></div>\\n<p>You should see something similar like this:</p>\\n<div class=\\"gatsby-highlight\\" data-language=\\"text\\"><pre class=\\"language-text\\"><code class=\\"language-text\\">Apple Swift version x.x.x (LLVM ..., Clang ..., Swift ...)</code></pre></div>\\n<blockquote>\\n<p>If you see an error message, such as ‘swift: command not found’, you will need to install the Xcode Command Line Tools. Within the Terminal type:</p>\\n<div class=\\"gatsby-highlight\\" data-language=\\"text\\"><pre class=\\"language-text\\"><code class=\\"language-text\\">xcode-select --install</code></pre></div>\\n<p>Alternatively you can install Command Line Tools within Xcode:</p>\\n<ol>\\n<li>Open Xcode Preferences using the shortcut: ⌘ + ,</li>\\n<li>Click on the Locations tab.</li>\\n<li>From the Command Line Tools drop down menu ensure the latest version of Xcode is selected.</li>\\n</ol>\\n</blockquote>\\n<hr>\\n<h2 id=\\"install-swift-for-linux\\"><a href=\\"#install-swift-for-linux\\" aria-label=\\"install swift for linux permalink\\" class=\\"anchor\\"><svg aria-hidden=\\"true\\" focusable=\\"false\\" height=\\"16\\" version=\\"1.1\\" viewBox=\\"0 0 16 16\\" width=\\"16\\"><path fill-rule=\\"evenodd\\" d=\\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\\"></path></svg></a>Install Swift for Linux</h2>\\n<p>Kitura is tested on Ubuntu 14.04 LTS (trusty), 16.04 LTS (xenial) and 18.04 LTS (bionic).</p>\\n<p>First ensure your source list is up to date by running the following:</p>\\n<div class=\\"gatsby-highlight\\" data-language=\\"text\\"><pre class=\\"language-text\\"><code class=\\"language-text\\">sudo apt-get update</code></pre></div>\\n<p>Next install the required Linux system packages:</p>\\n<div class=\\"gatsby-highlight\\" data-language=\\"text\\"><pre class=\\"language-text\\"><code class=\\"language-text\\">sudo apt-get install clang libicu-dev libcurl4-openssl-dev libssl-dev libpython2.7</code></pre></div>\\n<p>Download Swift for the platform you\'re using.</p>\\n<p>You can then extract files to system root.</p>\\n<blockquote>\\n<p>If you choose a directory other than the system root, you will need to run the following:</p>\\n<div class=\\"gatsby-highlight\\" data-language=\\"text\\"><pre class=\\"language-text\\"><code class=\\"language-text\\">export PATH=/&lt;path to Swift&gt;/usr/bin:&quot;${PATH}&quot;</code></pre></div>\\n</blockquote>\\n<p>Where <code class=\\"language-text\\">&lt;path to Swift&gt;</code> is the path to your Swift binary.</p>\\n<p>You can verify Swift has been installed successfully by running:</p>\\n<div class=\\"gatsby-highlight\\" data-language=\\"text\\"><pre class=\\"language-text\\"><code class=\\"language-text\\">swift --version</code></pre></div>\\n<p>You should see something similar like this:</p>\\n<div class=\\"gatsby-highlight\\" data-language=\\"text\\"><pre class=\\"language-text\\"><code class=\\"language-text\\">Swift version x.x.x</code></pre></div>\\n<hr>\\n<h2 id=\\"next-steps\\"><a href=\\"#next-steps\\" aria-label=\\"next steps permalink\\" class=\\"anchor\\"><svg aria-hidden=\\"true\\" focusable=\\"false\\" height=\\"16\\" version=\\"1.1\\" viewBox=\\"0 0 16 16\\" width=\\"16\\"><path fill-rule=\\"evenodd\\" d=\\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\\"></path></svg></a>Next steps</h2>\\n<p><a href=\\"./hello-world\\">Hello World</a>: Create a simple \\"Hello World\\" Kitura server.</p>\\n<p><a href=\\"./create-server-cli\\">Create a Server</a>: Create a Kitura server with scaffolding for a full application.</p>","frontmatter":{"path":"/docs/getting-started/installation","title":"Installation"}}},{"node":{"html":"<h1 id=\\"what-is-logging\\"><a href=\\"#what-is-logging\\" aria-label=\\"what is logging permalink\\" class=\\"anchor\\"><svg aria-hidden=\\"true\\" focusable=\\"false\\" height=\\"16\\" version=\\"1.1\\" viewBox=\\"0 0 16 16\\" width=\\"16\\"><path fill-rule=\\"evenodd\\" d=\\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\\"></path></svg></a>What is Logging?</h1>\\n<p>Logging, in terms of a web server, is the ability for the server to output some information about the status of the server and/or interactions with said server. This information can be something simple like letting a user know the server has started successfully, to outputting errors with the server or even the user code.</p>\\n<h2 id=\\"next-steps\\"><a href=\\"#next-steps\\" aria-label=\\"next steps permalink\\" class=\\"anchor\\"><svg aria-hidden=\\"true\\" focusable=\\"false\\" height=\\"16\\" version=\\"1.1\\" viewBox=\\"0 0 16 16\\" width=\\"16\\"><path fill-rule=\\"evenodd\\" d=\\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\\"></path></svg></a>Next steps</h2>\\n<p><a href=\\"./helium-logger\\">Add logging</a>: Get useful feedback from your server about startup and errors.</p>","frontmatter":{"path":"/docs/logging/what-is-logging","title":"What is Logging?"}}},{"node":{"html":"<h1 id=\\"heliumlogger\\"><a href=\\"#heliumlogger\\" aria-label=\\"heliumlogger permalink\\" class=\\"anchor\\"><svg aria-hidden=\\"true\\" focusable=\\"false\\" height=\\"16\\" version=\\"1.1\\" viewBox=\\"0 0 16 16\\" width=\\"16\\"><path fill-rule=\\"evenodd\\" d=\\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\\"></path></svg></a>HeliumLogger</h1>\\n<p><a href=\\"https://github.com/IBM-Swift/HeliumLogger\\">Helium Logger</a> is a lightweight Swift logging framework which supports logging to standard output.</p>\\n<p>In this guide we are going to show you how to add Helium Logger to a Kitura server, log messages using the logger and set the level of logging that should be displayed.</p>\\n<blockquote>\\n<p>If you don\'t have a Kitura server, follow our <a href=\\"../getting-started/create-server-cli\\">Create a server</a> guide.</p>\\n</blockquote>\\n<hr>\\n<h2 id=\\"step-1-add-heliumlogger-to-the-project\\"><a href=\\"#step-1-add-heliumlogger-to-the-project\\" aria-label=\\"step 1 add heliumlogger to the project permalink\\" class=\\"anchor\\"><svg aria-hidden=\\"true\\" focusable=\\"false\\" height=\\"16\\" version=\\"1.1\\" viewBox=\\"0 0 16 16\\" width=\\"16\\"><path fill-rule=\\"evenodd\\" d=\\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\\"></path></svg></a>Step 1: Add HeliumLogger to the project</h2>\\n<p>If you created your server using the CLI or the macOS app, your project will have HeliumLogger by default. In this case, we can skip to step 3.</p>\\n<p>Otherwise, we need to <a href=\\"https://github.com/IBM-Swift/HeliumLogger#add-dependencies\\">add HeliumLogger to our dependencies</a>.</p>\\n<p>We then need to import <code class=\\"language-text\\">LoggerAPI</code> and <code class=\\"language-text\\">HeliumLogger</code> inside our project.</p>\\n<p>Open your <code class=\\"language-text\\">main.swift</code> file:</p>\\n<div class=\\"gatsby-highlight\\" data-language=\\"text\\"><pre class=\\"language-text\\"><code class=\\"language-text\\">open Sources/MyKituraApp/main.swift</code></pre></div>\\n<p>At the top of the file, add <code class=\\"language-text\\">LoggerAPI</code> and <code class=\\"language-text\\">HeliumLogger</code> to our import statements:</p>\\n<div class=\\"gatsby-highlight\\" data-language=\\"swift\\"><pre class=\\"language-swift\\"><code class=\\"language-swift\\"><span class=\\"token keyword\\">import</span> <span class=\\"token builtin\\">LoggerAPI</span>\\n<span class=\\"token keyword\\">import</span> <span class=\\"token builtin\\">HeliumLogger</span></code></pre></div>\\n<blockquote>\\n<p>LoggerAPI is a logger protocol that provides a common logging interface for different kinds of loggers. HeliumLogger has LoggerAPI included as a dependency, so we do not need to add this to our <code class=\\"language-text\\">Package.swift</code> file.</p>\\n</blockquote>\\n<hr>\\n<h2 id=\\"step-2-add-logging-code-to-the-server\\"><a href=\\"#step-2-add-logging-code-to-the-server\\" aria-label=\\"step 2 add logging code to the server permalink\\" class=\\"anchor\\"><svg aria-hidden=\\"true\\" focusable=\\"false\\" height=\\"16\\" version=\\"1.1\\" viewBox=\\"0 0 16 16\\" width=\\"16\\"><path fill-rule=\\"evenodd\\" d=\\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\\"></path></svg></a>Step 2: Add logging code to the server</h2>\\n<p>To use the default settings for HeliumLogger we just need to call the <code class=\\"language-text\\">use()</code> method in HeliumLogger.</p>\\n<p>Inside your <code class=\\"language-text\\">main.swift</code> add:</p>\\n<div class=\\"gatsby-highlight\\" data-language=\\"swift\\"><pre class=\\"language-swift\\"><code class=\\"language-swift\\"><span class=\\"token builtin\\">HeliumLogger</span><span class=\\"token punctuation\\">.</span><span class=\\"token function\\">use</span><span class=\\"token punctuation\\">(</span><span class=\\"token punctuation\\">)</span></code></pre></div>\\n<p>We are going to use our new logger to log errors thrown by our server.</p>\\n<p>Inside the catch block, log the thrown error:</p>\\n<div class=\\"gatsby-highlight\\" data-language=\\"swift\\"><pre class=\\"language-swift\\"><code class=\\"language-swift\\"><span class=\\"token builtin\\">Log</span><span class=\\"token punctuation\\">.</span><span class=\\"token function\\">error</span><span class=\\"token punctuation\\">(</span>error<span class=\\"token punctuation\\">.</span>localizedDescription<span class=\\"token punctuation\\">)</span></code></pre></div>\\n<p>Your <code class=\\"language-text\\">main.swift</code> should look like this:</p>\\n<div class=\\"gatsby-highlight\\" data-language=\\"swift\\"><pre class=\\"language-swift\\"><code class=\\"language-swift\\"><span class=\\"token keyword\\">import</span> <span class=\\"token builtin\\">Foundation</span>\\n<span class=\\"token keyword\\">import</span> <span class=\\"token builtin\\">Kitura</span>\\n<span class=\\"token keyword\\">import</span> <span class=\\"token builtin\\">LoggerAPI</span>\\n<span class=\\"token keyword\\">import</span> <span class=\\"token builtin\\">HeliumLogger</span>\\n<span class=\\"token keyword\\">import</span> <span class=\\"token builtin\\">Application</span>\\n\\n<span class=\\"token builtin\\">HeliumLogger</span><span class=\\"token punctuation\\">.</span><span class=\\"token function\\">use</span><span class=\\"token punctuation\\">(</span><span class=\\"token punctuation\\">)</span>\\n<span class=\\"token keyword\\">do</span> <span class=\\"token punctuation\\">{</span>\\n    <span class=\\"token keyword\\">let</span> app <span class=\\"token operator\\">=</span> <span class=\\"token keyword\\">try</span> <span class=\\"token function\\">App</span><span class=\\"token punctuation\\">(</span><span class=\\"token punctuation\\">)</span>\\n    <span class=\\"token keyword\\">try</span> app<span class=\\"token punctuation\\">.</span><span class=\\"token function\\">run</span><span class=\\"token punctuation\\">(</span><span class=\\"token punctuation\\">)</span>\\n<span class=\\"token punctuation\\">}</span> <span class=\\"token keyword\\">catch</span> <span class=\\"token keyword\\">let</span> error <span class=\\"token punctuation\\">{</span>\\n    <span class=\\"token builtin\\">Log</span><span class=\\"token punctuation\\">.</span><span class=\\"token function\\">error</span><span class=\\"token punctuation\\">(</span>error<span class=\\"token punctuation\\">.</span>localizedDescription<span class=\\"token punctuation\\">)</span>\\n<span class=\\"token punctuation\\">}</span></code></pre></div>\\n<p>Now if you start your server you should see some logging output. This should look something like:</p>\\n<div class=\\"gatsby-highlight\\" data-language=\\"text\\"><pre class=\\"language-text\\"><code class=\\"language-text\\">[xxx] [VERBOSE] [Kitura.swift:118 run()] Starting Kitura framework...\\n[xxx] [VERBOSE] [Kitura.swift:135 start()] Starting an HTTP Server on port 8080...\\n[xxx] [INFO] [HTTPServer.swift:195 listen(on:)] Listening on port 8080\\n[xxx] [VERBOSE] [HTTPServer.swift:196 listen(on:)] Options for port 8080: maxPendingConnections: 100, allowPortReuse: false</code></pre></div>\\n<hr>\\n<h2 id=\\"step-3-set-logging-level\\"><a href=\\"#step-3-set-logging-level\\" aria-label=\\"step 3 set logging level permalink\\" class=\\"anchor\\"><svg aria-hidden=\\"true\\" focusable=\\"false\\" height=\\"16\\" version=\\"1.1\\" viewBox=\\"0 0 16 16\\" width=\\"16\\"><path fill-rule=\\"evenodd\\" d=\\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\\"></path></svg></a>Step 3: Set logging level</h2>\\n<p>HeliumLogger can be customized to change the level of logging.</p>\\n<p>This means you can decide how much information you\'d like to be logged, based on importance.</p>\\n<p>If you\'d like to customize the level of logging you can simply pass the level to the <code class=\\"language-text\\">use()</code> method.</p>\\n<p>Inside your <code class=\\"language-text\\">main.swift</code> file, set the logging level:</p>\\n<div class=\\"gatsby-highlight\\" data-language=\\"swift\\"><pre class=\\"language-swift\\"><code class=\\"language-swift\\"><span class=\\"token builtin\\">HeliumLogger</span><span class=\\"token punctuation\\">.</span><span class=\\"token function\\">use</span><span class=\\"token punctuation\\">(</span><span class=\\"token punctuation\\">.</span>debug<span class=\\"token punctuation\\">)</span></code></pre></div>\\n<p>There are several logging levels:</p>\\n<ol>\\n<li>entry</li>\\n<li>exit</li>\\n<li>debug</li>\\n<li>verbose (default)</li>\\n<li>info</li>\\n<li>warning</li>\\n<li>error</li>\\n</ol>\\n<p>Verbose is set by default. Setting a particular logging level also includes all levels below that.</p>\\n<p>For example, if you set a logging level of <code class=\\"language-text\\">verbose</code>:</p>\\n<div class=\\"gatsby-highlight\\" data-language=\\"swift\\"><pre class=\\"language-swift\\"><code class=\\"language-swift\\"><span class=\\"token builtin\\">HeliumLogger</span><span class=\\"token punctuation\\">.</span><span class=\\"token function\\">use</span><span class=\\"token punctuation\\">(</span><span class=\\"token punctuation\\">.</span>verbose<span class=\\"token punctuation\\">)</span></code></pre></div>\\n<p>You will get logging for; <code class=\\"language-text\\">verbose</code>, <code class=\\"language-text\\">info</code>, <code class=\\"language-text\\">warning</code> and <code class=\\"language-text\\">error</code>.</p>\\n<p>Similarly if you set a logging level of <code class=\\"language-text\\">warning</code>:</p>\\n<div class=\\"gatsby-highlight\\" data-language=\\"swift\\"><pre class=\\"language-swift\\"><code class=\\"language-swift\\"><span class=\\"token builtin\\">HeliumLogger</span><span class=\\"token punctuation\\">.</span><span class=\\"token function\\">use</span><span class=\\"token punctuation\\">(</span><span class=\\"token punctuation\\">.</span>warning<span class=\\"token punctuation\\">)</span></code></pre></div>\\n<p>You will get logging for <code class=\\"language-text\\">warning</code> and <code class=\\"language-text\\">error</code>.</p>\\n<hr>\\n<h2 id=\\"step-4-add-logging-to-your-application\\"><a href=\\"#step-4-add-logging-to-your-application\\" aria-label=\\"step 4 add logging to your application permalink\\" class=\\"anchor\\"><svg aria-hidden=\\"true\\" focusable=\\"false\\" height=\\"16\\" version=\\"1.1\\" viewBox=\\"0 0 16 16\\" width=\\"16\\"><path fill-rule=\\"evenodd\\" d=\\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\\"></path></svg></a>Step 4: Add logging to your application</h2>\\n<p>Once you have your Logger configured, you can use it within your application.</p>\\n<p>Open your <code class=\\"language-text\\">Application.swift</code> file:</p>\\n<div class=\\"gatsby-highlight\\" data-language=\\"text\\"><pre class=\\"language-text\\"><code class=\\"language-text\\">open Sources/Application/Application.swift</code></pre></div>\\n<p>Ensure LoggerAPI is imported:</p>\\n<div class=\\"gatsby-highlight\\" data-language=\\"swift\\"><pre class=\\"language-swift\\"><code class=\\"language-swift\\"><span class=\\"token keyword\\">import</span> <span class=\\"token builtin\\">LoggerAPI</span></code></pre></div>\\n<p>Add a log message to the App\'s <code class=\\"language-text\\">init()</code> function:</p>\\n<div class=\\"gatsby-highlight\\" data-language=\\"swift\\"><pre class=\\"language-swift\\"><code class=\\"language-swift\\"><span class=\\"token builtin\\">Log</span><span class=\\"token punctuation\\">.</span><span class=\\"token function\\">info</span><span class=\\"token punctuation\\">(</span><span class=\\"token string\\">\\"Hello World\\"</span><span class=\\"token punctuation\\">)</span></code></pre></div>\\n<p>Restart your server and look through the logs. You should see your message:</p>\\n<div class=\\"gatsby-highlight\\" data-language=\\"text\\"><pre class=\\"language-text\\"><code class=\\"language-text\\">[2019-03-13T16:23:08.078Z] [INFO] [Application.swift:22 init()] Hello World</code></pre></div>\\n<p>Your log message is printed along with the time it occurred, the log level and the location in your code.</p>\\n<h2 id=\\"next-steps\\"><a href=\\"#next-steps\\" aria-label=\\"next steps permalink\\" class=\\"anchor\\"><svg aria-hidden=\\"true\\" focusable=\\"false\\" height=\\"16\\" version=\\"1.1\\" viewBox=\\"0 0 16 16\\" width=\\"16\\"><path fill-rule=\\"evenodd\\" d=\\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\\"></path></svg></a>Next steps</h2>\\n<p><a href=\\"../routing/what-is-routing\\">Routing</a>: Learn about routing and the two types Kitura supports.</p>","frontmatter":{"path":"/docs/logging/helium-logger","title":"HeliumLogger"}}},{"node":{"html":"<h1 id=\\"kitura-openapi\\"><a href=\\"#kitura-openapi\\" aria-label=\\"kitura openapi permalink\\" class=\\"anchor\\"><svg aria-hidden=\\"true\\" focusable=\\"false\\" height=\\"16\\" version=\\"1.1\\" viewBox=\\"0 0 16 16\\" width=\\"16\\"><path fill-rule=\\"evenodd\\" d=\\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\\"></path></svg></a>Kitura OpenAPI</h1>\\n<p><a href=\\"https://github.com/IBM-Swift/Kitura-OpenAPI\\">Kitura-OpenAPI</a> is a library which makes it easy to add <a href=\\"https://www.openapis.org\\">OpenAPI</a>, also known as Swagger, support to your Codable routing-based Kitura application.</p>\\n<p>In this guide we show you how to host both an automatically generated OpenAPI definition of your application on the endpoint <code class=\\"language-text\\">&quot;/openapi&quot;</code>, and the Swagger UI tool on the endpoint <code class=\\"language-text\\">&quot;/openapi/ui&quot;</code>. We also demonstrate how simple this makes testing your routes!</p>\\n<hr>\\n<h2 id=\\"prerequisites\\"><a href=\\"#prerequisites\\" aria-label=\\"prerequisites permalink\\" class=\\"anchor\\"><svg aria-hidden=\\"true\\" focusable=\\"false\\" height=\\"16\\" version=\\"1.1\\" viewBox=\\"0 0 16 16\\" width=\\"16\\"><path fill-rule=\\"evenodd\\" d=\\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\\"></path></svg></a>Prerequisites</h2>\\n<ul>\\n<li><a href=\\"./codable-routing\\">Codable Routes:</a> Follow the Codable Routing guide to create endpoints to test with OpenAPI.</li>\\n</ul>\\n<hr>\\n<h2 id=\\"step-1-add-kitura-openapi-to-your-project\\"><a href=\\"#step-1-add-kitura-openapi-to-your-project\\" aria-label=\\"step 1 add kitura openapi to your project permalink\\" class=\\"anchor\\"><svg aria-hidden=\\"true\\" focusable=\\"false\\" height=\\"16\\" version=\\"1.1\\" viewBox=\\"0 0 16 16\\" width=\\"16\\"><path fill-rule=\\"evenodd\\" d=\\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\\"></path></svg></a>Step 1: Add Kitura OpenAPI to your project</h2>\\n<p>First we need to <a href=\\"https://github.com/IBM-Swift/Kitura-OpenAPI#getting-started\\">add OpenAPI to our dependencies</a>.</p>\\n<p>Next, we need to import KituraOpenAPI into our project.</p>\\n<p>Open your <code class=\\"language-text\\">Application.swift</code> file:</p>\\n<div class=\\"gatsby-highlight\\" data-language=\\"text\\"><pre class=\\"language-text\\"><code class=\\"language-text\\">open Sources/Application/Application.swift</code></pre></div>\\n<p>Add the import statement for the KituraOpenAPI package:</p>\\n<div class=\\"gatsby-highlight\\" data-language=\\"swift\\"><pre class=\\"language-swift\\"><code class=\\"language-swift\\"><span class=\\"token keyword\\">import</span> <span class=\\"token builtin\\">KituraOpenAPI</span></code></pre></div>\\n<p>Next we need to add the KituraOpenAPI endpoints to our router.</p>\\n<p>Inside the <code class=\\"language-text\\">postInit()</code> function add:</p>\\n<div class=\\"gatsby-highlight\\" data-language=\\"swift\\"><pre class=\\"language-swift\\"><code class=\\"language-swift\\"><span class=\\"token builtin\\">KituraOpenAPI</span><span class=\\"token punctuation\\">.</span><span class=\\"token function\\">addEndpoints</span><span class=\\"token punctuation\\">(</span>to<span class=\\"token punctuation\\">:</span> router<span class=\\"token punctuation\\">)</span></code></pre></div>\\n<p>That\'s all we need to do to enable KituraOpenAPI on our server.</p>\\n<blockquote>\\n<p>By default, KituraOpenAPI is served on the <code class=\\"language-text\\">&quot;/openapi&quot;</code> and <code class=\\"language-text\\">&quot;/openapi/ui&quot;</code> paths.</p>\\n</blockquote>\\n<hr>\\n<h2 id=\\"step-2-view-the-openapi-ui\\"><a href=\\"#step-2-view-the-openapi-ui\\" aria-label=\\"step 2 view the openapi ui permalink\\" class=\\"anchor\\"><svg aria-hidden=\\"true\\" focusable=\\"false\\" height=\\"16\\" version=\\"1.1\\" viewBox=\\"0 0 16 16\\" width=\\"16\\"><path fill-rule=\\"evenodd\\" d=\\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\\"></path></svg></a>Step 2: View the OpenAPI UI</h2>\\n<p>We need to start our Kitura server first.</p>\\n<p>Once the server has started, navigate to: <a href=\\"http://localhost:8080/openapi/ui\\" target=\\"blank\\">localhost:8080/openapi/ui</a></p>\\n<p>You should see a screen similar to the following:</p>\\n<p><span\\n      class=\\"gatsby-resp-image-wrapper\\"\\n      style=\\"position: relative; display: block; margin-left: auto; margin-right: auto;  max-width: 1200px;\\"\\n    >\\n      <a\\n    class=\\"gatsby-resp-image-link\\"\\n    href=\\"/static/ca8b36e891e4d6807068962752b79ee5/f456e/OpenAPI-UI-Overview.png\\"\\n    style=\\"display: block\\"\\n    target=\\"_blank\\"\\n    rel=\\"noopener\\"\\n  >\\n    <span\\n    class=\\"gatsby-resp-image-background-image\\"\\n    style=\\"padding-bottom: 53.3145275035261%; position: relative; bottom: 0; left: 0; background-image: url(\'data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAALCAYAAAB/Ca1DAAAACXBIWXMAABYlAAAWJQFJUiTwAAAA8UlEQVQoz63RO07EMBAG4LkWHVTcgZrrcA16CkBIywlWCCREQUFQJFgSe4kfix/j7ObHZinoYBOKT7/l8UgjDx3dKxzcdNibdzi+bXD29IaLhcXlwvzq/NXgWnzg5O4Zh6cz7F89gKr6BVVVo87pfEBMPVxk+D8qbwNz7ktIGQkh0XUKxlpwjEi5mNIu0jZ5i4xdgfPlerP5Lk5DWuuvAzBgGKYjKRX6fo2Y/4I5jVb6C5o9tmjeDcQqorUBYqTWBGgXQHNZQRqFZbBY+mlMcCCXtxvzdr33CKMFeJcz5AmbtkVZjBpJ/8gyFJUNM/O/+QTxwEqIobYAAgAAAABJRU5ErkJggg==\'); background-size: cover; display: block;\\"\\n  ></span>\\n  <img\\n        class=\\"gatsby-resp-image-image\\"\\n        alt=\\"Kitura OpenAPI routes list\\"\\n        title=\\"Kitura OpenAPI routes list\\"\\n        src=\\"/static/ca8b36e891e4d6807068962752b79ee5/6ff5e/OpenAPI-UI-Overview.png\\"\\n        srcset=\\"/static/ca8b36e891e4d6807068962752b79ee5/135ae/OpenAPI-UI-Overview.png 300w,\\n/static/ca8b36e891e4d6807068962752b79ee5/34e8a/OpenAPI-UI-Overview.png 600w,\\n/static/ca8b36e891e4d6807068962752b79ee5/6ff5e/OpenAPI-UI-Overview.png 1200w,\\n/static/ca8b36e891e4d6807068962752b79ee5/79a4a/OpenAPI-UI-Overview.png 1800w,\\n/static/ca8b36e891e4d6807068962752b79ee5/2fb56/OpenAPI-UI-Overview.png 2400w,\\n/static/ca8b36e891e4d6807068962752b79ee5/f456e/OpenAPI-UI-Overview.png 2836w\\"\\n        sizes=\\"(max-width: 1200px) 100vw, 1200px\\"\\n        loading=\\"lazy\\"\\n      />\\n  </a>\\n    </span></p>\\n<p>Kitura OpenAPI provides a UI in which we can view our Codable routes and models.</p>\\n<p>We can view any of our routes simply by clicking on them.</p>\\n<p>Let\'s start by clicking on the <code class=\\"language-text\\">GET</code> button:</p>\\n<p><span\\n      class=\\"gatsby-resp-image-wrapper\\"\\n      style=\\"position: relative; display: block; margin-left: auto; margin-right: auto;  max-width: 1200px;\\"\\n    >\\n      <a\\n    class=\\"gatsby-resp-image-link\\"\\n    href=\\"/static/2a17195831bb68791ad67c538f5dfea6/6bc76/OpenAPI-UI-GET.png\\"\\n    style=\\"display: block\\"\\n    target=\\"_blank\\"\\n    rel=\\"noopener\\"\\n  >\\n    <span\\n    class=\\"gatsby-resp-image-background-image\\"\\n    style=\\"padding-bottom: 39.05797101449275%; position: relative; bottom: 0; left: 0; background-image: url(\'data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAAICAYAAAD5nd/tAAAACXBIWXMAABYlAAAWJQFJUiTwAAABU0lEQVQoz5WQ20sCURDG9z+LJCEkrYcgiJASiiQhCPqDKqk0KgwvZWUEUvTQo/ZSD9FWXvZyzq5709qvWVcLlYgefsyZOWe++eYI+aqJB1EDazlg1geY+X849UmaDbHBIChMh8RNqHShGB2oPZQ/6L6jHg9uu5BbbdRVA0KDWZB1pzetM4BqtKHSQ2UIryaToya3SKSF53cZr+SupugQ3iROdi1oZJuTSBfLj7rjwvoE7GFcgGb5m9BXeWINZtAgB8KLZKCukV3uU2MOZNPFfeUJyXQW6UwRW3uZEbb3idQJdojkQbZ73j3M08ok1tQ733i5QoKVRxFH2UvkLso4u7rF6TClQQqlGxSv7yD0RfrUmA2D1kodFzAZmkV4Zh6B4DTGJyJ+DEZG8OpjgSmEwnM/DvuCdRKkFLnzMmIr61hNbCIaSyC6tEbxNxJYWIxjOb6BL41uIyl1u1rqAAAAAElFTkSuQmCC\'); background-size: cover; display: block;\\"\\n  ></span>\\n  <img\\n        class=\\"gatsby-resp-image-image\\"\\n        alt=\\"Kitura OpenAPI example GET route\\"\\n        title=\\"Kitura OpenAPI example GET route\\"\\n        src=\\"/static/2a17195831bb68791ad67c538f5dfea6/6ff5e/OpenAPI-UI-GET.png\\"\\n        srcset=\\"/static/2a17195831bb68791ad67c538f5dfea6/135ae/OpenAPI-UI-GET.png 300w,\\n/static/2a17195831bb68791ad67c538f5dfea6/34e8a/OpenAPI-UI-GET.png 600w,\\n/static/2a17195831bb68791ad67c538f5dfea6/6ff5e/OpenAPI-UI-GET.png 1200w,\\n/static/2a17195831bb68791ad67c538f5dfea6/79a4a/OpenAPI-UI-GET.png 1800w,\\n/static/2a17195831bb68791ad67c538f5dfea6/2fb56/OpenAPI-UI-GET.png 2400w,\\n/static/2a17195831bb68791ad67c538f5dfea6/6bc76/OpenAPI-UI-GET.png 2760w\\"\\n        sizes=\\"(max-width: 1200px) 100vw, 1200px\\"\\n        loading=\\"lazy\\"\\n      />\\n  </a>\\n    </span></p>\\n<p>We can see here the parameters section is empty, as we\'d expect because GET routes typically only retrieve data.</p>\\n<p>However we can see an example of the response we should be getting from the GET route on <code class=\\"language-text\\">&quot;/books&quot;</code>.</p>\\n<blockquote>\\n<p>As this is a GetAll route it\'s an array of JSON objects that match our Book model.</p>\\n</blockquote>\\n<p>Next we can view the POST route by clicking the <code class=\\"language-text\\">POST</code> button:</p>\\n<p><span\\n      class=\\"gatsby-resp-image-wrapper\\"\\n      style=\\"position: relative; display: block; margin-left: auto; margin-right: auto;  max-width: 1200px;\\"\\n    >\\n      <a\\n    class=\\"gatsby-resp-image-link\\"\\n    href=\\"/static/53ac549aa8946e58efece7977517d056/01a39/OpenAPI-UI-POST.png\\"\\n    style=\\"display: block\\"\\n    target=\\"_blank\\"\\n    rel=\\"noopener\\"\\n  >\\n    <span\\n    class=\\"gatsby-resp-image-background-image\\"\\n    style=\\"padding-bottom: 55.37010159651668%; position: relative; bottom: 0; left: 0; background-image: url(\'data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAALCAYAAAB/Ca1DAAAACXBIWXMAABYlAAAWJQFJUiTwAAAB40lEQVQoz43SS08TURQH8Pt1jAtiEMRUTQrakLgxfgIWmBBjwso1CwMLUHFtYiRCVKANGNS0hrokPBelLdpiwdIMdKbt3JnOsw/698wMlRaBuPjlzJ0z9+TMPZct5jaRFLPgpgZe0cHtU7Kl/TdBlnDIC2CyokChYrJ9miyRoqGiXLegHdvQ6rYXL0J5d4+pgv0SczhUJBwZnMhe1GVspXawmoghtpfC9v4uSV+C8ntppITfYKKpoClPxSRLhVAu4vHwU/QFHuCO/z56fPdw0xe4kO92Pzqu3cLg0DCYU6SVU9jpcO7TEl6/ncbMXBDvZucxHQyR4ElsPntmQiFMfZzF5+9RMKmlw7ZudSpOtAadESowUPtLd2MdJml9p9K3rKBycEODUbOhVy1PxXLXFdpgHVdhN2qwGlXPyVqx6BboZRyVCtgXchB5CUWqxbKlvNuN26nhKdA5Hsgi1uI0lN2f2PqRwOYOaYkbyTjZxnqiKYZ4Jg3mDCBvtp+jZKvISAIWwmEsRZex+C2ChUj4HBGXkw9+/YLo6kr7lJuTLlY1JLMZjE5M4tn4S4w+n7zU2ItXGBkbx5v3H/6dsjNhXjewRr8Q6H+Iu3R1rnf3orPLj85uvxfP6Orpw5WrNzDw6An+ALpY5MQAjMQmAAAAAElFTkSuQmCC\'); background-size: cover; display: block;\\"\\n  ></span>\\n  <img\\n        class=\\"gatsby-resp-image-image\\"\\n        alt=\\"Kitura OpenAPI example GET route\\"\\n        title=\\"Kitura OpenAPI example GET route\\"\\n        src=\\"/static/53ac549aa8946e58efece7977517d056/6ff5e/OpenAPI-UI-POST.png\\"\\n        srcset=\\"/static/53ac549aa8946e58efece7977517d056/135ae/OpenAPI-UI-POST.png 300w,\\n/static/53ac549aa8946e58efece7977517d056/34e8a/OpenAPI-UI-POST.png 600w,\\n/static/53ac549aa8946e58efece7977517d056/6ff5e/OpenAPI-UI-POST.png 1200w,\\n/static/53ac549aa8946e58efece7977517d056/79a4a/OpenAPI-UI-POST.png 1800w,\\n/static/53ac549aa8946e58efece7977517d056/2fb56/OpenAPI-UI-POST.png 2400w,\\n/static/53ac549aa8946e58efece7977517d056/01a39/OpenAPI-UI-POST.png 2756w\\"\\n        sizes=\\"(max-width: 1200px) 100vw, 1200px\\"\\n        loading=\\"lazy\\"\\n      />\\n  </a>\\n    </span></p>\\n<p>We can see from this screen what input the <code class=\\"language-text\\">POST</code> on <code class=\\"language-text\\">&quot;/books&quot;</code> is expecting, and OpenAPI even provides an example.</p>\\n<p>Information regarding the parameter type is also provided, application/json in our case.</p>\\n<p>As well as being able to view the expected input we can also view the expected response.</p>\\n<blockquote>\\n<p>POST routes typically respond with the data that was posted, so in this case the expected request input is the same as the response.</p>\\n</blockquote>\\n<p>Kitura OpenAPI also allows us to test our Codable routes in a very simple way.</p>\\n<p>In the next sections we will look at how we can test our Codable routes.</p>\\n<hr>\\n<h2 id=\\"step-3-test-a-post-route\\"><a href=\\"#step-3-test-a-post-route\\" aria-label=\\"step 3 test a post route permalink\\" class=\\"anchor\\"><svg aria-hidden=\\"true\\" focusable=\\"false\\" height=\\"16\\" version=\\"1.1\\" viewBox=\\"0 0 16 16\\" width=\\"16\\"><path fill-rule=\\"evenodd\\" d=\\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\\"></path></svg></a>Step 3: Test a POST route</h2>\\n<p>We can test the POST route by clicking the <code class=\\"language-text\\">POST</code> button, then clicking the <code class=\\"language-text\\">Try it out</code> button in the top right:</p>\\n<p><span\\n      class=\\"gatsby-resp-image-wrapper\\"\\n      style=\\"position: relative; display: block; margin-left: auto; margin-right: auto;  max-width: 1200px;\\"\\n    >\\n      <a\\n    class=\\"gatsby-resp-image-link\\"\\n    href=\\"/static/129df15a6d7013448ddaeaeca761ce84/f3314/OpenAPI-UI-POST-Try.png\\"\\n    style=\\"display: block\\"\\n    target=\\"_blank\\"\\n    rel=\\"noopener\\"\\n  >\\n    <span\\n    class=\\"gatsby-resp-image-background-image\\"\\n    style=\\"padding-bottom: 51.704133430021756%; position: relative; bottom: 0; left: 0; background-image: url(\'data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAAKCAYAAAC0VX7mAAAACXBIWXMAABYlAAAWJQFJUiTwAAABF0lEQVQoz42SwVKDMBRF+f+v0FE3rlz5C1pHl93ZYWqHQmhIoEBIQvCah7TSDgMuztx5yX0385IET7t3rNkWUpWQuvrDVJf1HKaGzDmkTBGIIkc+hImmhNBlr0mRgavjuZ6Fer1fFBzBJ9thn6eIa+kRve4rgZDHiI4cTOVI/Noi5PME1DCGNtOmQCoFuJRojIbtWhg3j/XUVg+BwymnQNKyUaiUgrYGbefQOverE1CY86paH5iMwsaB2ll0391i2GWgmR6ZtGnN2bwEjUzefuT+MaoRpzraImaRP4CupPgn/lEy47+NzSGvCKMQm68NspIjU/5LTHiuoazgeX3A7SvDw1uK+ylWKR4/Dj13q2kP9d68MFDWD+ra9teJJ/h0AAAAAElFTkSuQmCC\'); background-size: cover; display: block;\\"\\n  ></span>\\n  <img\\n        class=\\"gatsby-resp-image-image\\"\\n        alt=\\"Kitura OpenAPI example GET route\\"\\n        title=\\"Kitura OpenAPI example GET route\\"\\n        src=\\"/static/129df15a6d7013448ddaeaeca761ce84/6ff5e/OpenAPI-UI-POST-Try.png\\"\\n        srcset=\\"/static/129df15a6d7013448ddaeaeca761ce84/135ae/OpenAPI-UI-POST-Try.png 300w,\\n/static/129df15a6d7013448ddaeaeca761ce84/34e8a/OpenAPI-UI-POST-Try.png 600w,\\n/static/129df15a6d7013448ddaeaeca761ce84/6ff5e/OpenAPI-UI-POST-Try.png 1200w,\\n/static/129df15a6d7013448ddaeaeca761ce84/79a4a/OpenAPI-UI-POST-Try.png 1800w,\\n/static/129df15a6d7013448ddaeaeca761ce84/2fb56/OpenAPI-UI-POST-Try.png 2400w,\\n/static/129df15a6d7013448ddaeaeca761ce84/f3314/OpenAPI-UI-POST-Try.png 2758w\\"\\n        sizes=\\"(max-width: 1200px) 100vw, 1200px\\"\\n        loading=\\"lazy\\"\\n      />\\n  </a>\\n    </span></p>\\n<p>Kitura OpenAPI provides an editable value for us to POST some custom data.</p>\\n<p>Let\'s populate the field with some meaningful data:</p>\\n<p><img src=\\"../../../images/OpenAPI-UI-POST-Try-Data.png\\" alt=\\"Kitura OpenAPI example GET route\\"></p>\\n<p>Now that we have some data that we want to post, we can click execute.</p>\\n<p>Once that\'s complete we should see the following:</p>\\n<p><span\\n      class=\\"gatsby-resp-image-wrapper\\"\\n      style=\\"position: relative; display: block; margin-left: auto; margin-right: auto;  max-width: 1200px;\\"\\n    >\\n      <a\\n    class=\\"gatsby-resp-image-link\\"\\n    href=\\"/static/f3e54ed931bf2ecfe922cdcb97d93c07/d2592/OpenAPI-UI-POST-Execute.png\\"\\n    style=\\"display: block\\"\\n    target=\\"_blank\\"\\n    rel=\\"noopener\\"\\n  >\\n    <span\\n    class=\\"gatsby-resp-image-background-image\\"\\n    style=\\"padding-bottom: 59.893522626441886%; position: relative; bottom: 0; left: 0; background-image: url(\'data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAAMCAYAAABiDJ37AAAACXBIWXMAABYlAAAWJQFJUiTwAAACEklEQVQoz4WR3U/SYRTHnz+vLba6aQUEBAYJ6HKpJBBvCmg2NyvKm8bauijb2kSWLrXEjF40p5sXbul0ZsEP4QckbxbQt/P86CetBV189n3O6855DssUvqFUPcYP1PEdNaJ+8m76aic2p0oUqSZfKULIidg52EdSTEPIZsBCD8K4MRiE3esnHYbDG4Dd44eT+0gdvgCcvqCkA+4hXHcNSspjPJ/nufwjUjw4Ng7mGhqGRt8Jg6kbug4rtAYLNAZzQ/Xm5puU2xcpV/JzNTRsjkpngrXHBvZsZhaPpyKILsxjMhrFk0gET0k53J6cnm4i+/6O8TrSqbk5sN3DBL4eZZAoiBBKOXzOHWI3nZDsRCGLZJGT+63/htc18kWwBDWTA/mfFbxYXoLe2I3Orl7SLmkVpdYEVRuUWiOtbUafwwuWKufB4Q1ztTJiqx9gc/rgCdxEv9OLXrubEj1tuTbggts/ionwIzB5ZGnCehkLb+Ow2b1w0WV7+pzSodS6K1Bfag0/ynl1ByxX+8F2hC9IFhpNU5U89kUBm3vbWN/ewuu1VcQ31khX/s/HFbzf3ADjB+HNZPj62WqJjpPC7FIM82+WSRcxE2vP88VXePku3vxDGYEumj4+wtbBHsZCE7h15x5GObdDraH4yPhd3A8/BPtzOvkvxWoR65+26P8sUGmMUJxV4vSZCy1REKcU56C7bMUvvSfNjKpWWNQAAAAASUVORK5CYII=\'); background-size: cover; display: block;\\"\\n  ></span>\\n  <img\\n        class=\\"gatsby-resp-image-image\\"\\n        alt=\\"Kitura OpenAPI example GET route\\"\\n        title=\\"Kitura OpenAPI example GET route\\"\\n        src=\\"/static/f3e54ed931bf2ecfe922cdcb97d93c07/6ff5e/OpenAPI-UI-POST-Execute.png\\"\\n        srcset=\\"/static/f3e54ed931bf2ecfe922cdcb97d93c07/135ae/OpenAPI-UI-POST-Execute.png 300w,\\n/static/f3e54ed931bf2ecfe922cdcb97d93c07/34e8a/OpenAPI-UI-POST-Execute.png 600w,\\n/static/f3e54ed931bf2ecfe922cdcb97d93c07/6ff5e/OpenAPI-UI-POST-Execute.png 1200w,\\n/static/f3e54ed931bf2ecfe922cdcb97d93c07/79a4a/OpenAPI-UI-POST-Execute.png 1800w,\\n/static/f3e54ed931bf2ecfe922cdcb97d93c07/d2592/OpenAPI-UI-POST-Execute.png 2254w\\"\\n        sizes=\\"(max-width: 1200px) 100vw, 1200px\\"\\n        loading=\\"lazy\\"\\n      />\\n  </a>\\n    </span></p>\\n<p>At the top of this responses section Kitura OpenAPI provides us with the Curl command to excute via the command line.</p>\\n<blockquote>\\n<p>If you followed the Codable routing guide you will notice this looks very similar to how we tested our POST route.</p>\\n</blockquote>\\n<p>Next we can see the request URL, that is, the URL on which this request was made as defined in our application code.</p>\\n<p>We can also view the response body, the information the server responds to the request with, as well as all of the response headers.</p>\\n<p>Finally we can see the HTTP response code from the server, 201 in our case, which in HTTP terms means \'Created\'.</p>\\n<p>Now that we\'ve posted some data, we can test retrieving the data.</p>\\n<hr>\\n<h2 id=\\"step-4-test-a-get-route\\"><a href=\\"#step-4-test-a-get-route\\" aria-label=\\"step 4 test a get route permalink\\" class=\\"anchor\\"><svg aria-hidden=\\"true\\" focusable=\\"false\\" height=\\"16\\" version=\\"1.1\\" viewBox=\\"0 0 16 16\\" width=\\"16\\"><path fill-rule=\\"evenodd\\" d=\\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\\"></path></svg></a>Step 4: Test a GET route</h2>\\n<p>To test our GET route we need to click on the <code class=\\"language-text\\">GET</code> button and then click <code class=\\"language-text\\">Try it out</code> in the top right corner.</p>\\n<p>We should see the following:</p>\\n<p><span\\n      class=\\"gatsby-resp-image-wrapper\\"\\n      style=\\"position: relative; display: block; margin-left: auto; margin-right: auto;  max-width: 1200px;\\"\\n    >\\n      <a\\n    class=\\"gatsby-resp-image-link\\"\\n    href=\\"/static/653522e9b114c3b2452513a74e560c33/9199c/OpenAPI-UI-GET-Try.png\\"\\n    style=\\"display: block\\"\\n    target=\\"_blank\\"\\n    rel=\\"noopener\\"\\n  >\\n    <span\\n    class=\\"gatsby-resp-image-background-image\\"\\n    style=\\"padding-bottom: 40.87694483734088%; position: relative; bottom: 0; left: 0; background-image: url(\'data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAAICAYAAAD5nd/tAAAACXBIWXMAAAsSAAALEgHS3X78AAABTklEQVQoz53QTUsCURQG4Pl/FUUQpVSL0GoV9H/MsrCgRdSmgkaZSUf7IKNFRBuDFul8f9y8Mzrq25kpNJEQWjzc987ce+acEcRXH/UmA+MdML/7P0EPzGmBGS4E3WJoWD5UN0TT6aDp/nCGVPfb4P3gWRjTvC5Ug0PVGITTBxsZ2cBBxcb+b4qNnGJht2zi6MbCYZVyyUSuHImygaysY0fWkJFUZGmfpzOCajKYXgCXd+G0wgHP74GHAE0EmmgMCxDf0WyO94YF3eGUPyF8mC2YLITBOjHda8Px+3h6eYMo30Ku1OJVvL4bUSDF0j0KJcq0RmckpUb/0IuKDGluG/RRPD7XcXYh4bJYxbmo/KE8kq+oqGDE3Q2pTgDeB/byJ0iubGAtvYWl5fQE61hMppDa3B7vMCpIEyOTO8b8wioSdGF6LomZCaZmE0hQA1/BERya2w1dpgAAAABJRU5ErkJggg==\'); background-size: cover; display: block;\\"\\n  ></span>\\n  <img\\n        class=\\"gatsby-resp-image-image\\"\\n        alt=\\"Kitura OpenAPI example GET route\\"\\n        title=\\"Kitura OpenAPI example GET route\\"\\n        src=\\"/static/653522e9b114c3b2452513a74e560c33/6ff5e/OpenAPI-UI-GET-Try.png\\"\\n        srcset=\\"/static/653522e9b114c3b2452513a74e560c33/135ae/OpenAPI-UI-GET-Try.png 300w,\\n/static/653522e9b114c3b2452513a74e560c33/34e8a/OpenAPI-UI-GET-Try.png 600w,\\n/static/653522e9b114c3b2452513a74e560c33/6ff5e/OpenAPI-UI-GET-Try.png 1200w,\\n/static/653522e9b114c3b2452513a74e560c33/9199c/OpenAPI-UI-GET-Try.png 1414w\\"\\n        sizes=\\"(max-width: 1200px) 100vw, 1200px\\"\\n        loading=\\"lazy\\"\\n      />\\n  </a>\\n    </span></p>\\n<p>As this is a <code class=\\"language-text\\">GET</code> route we don\'t need to provide any data therefore we can just click execute:</p>\\n<p><span\\n      class=\\"gatsby-resp-image-wrapper\\"\\n      style=\\"position: relative; display: block; margin-left: auto; margin-right: auto;  max-width: 1200px;\\"\\n    >\\n      <a\\n    class=\\"gatsby-resp-image-link\\"\\n    href=\\"/static/80c5725f339993950b36c6084f543cd8/d134d/OpenAPI-UI-GET-Execute.png\\"\\n    style=\\"display: block\\"\\n    target=\\"_blank\\"\\n    rel=\\"noopener\\"\\n  >\\n    <span\\n    class=\\"gatsby-resp-image-background-image\\"\\n    style=\\"padding-bottom: 63.579697239536955%; position: relative; bottom: 0; left: 0; background-image: url(\'data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAANCAYAAACpUE5eAAAACXBIWXMAABYlAAAWJQFJUiTwAAACF0lEQVQ4y43S709SURgH8PtftWr1olo/3vSiF5WAgCUCCelVQQFN3Mgfm23N5ZZtvrDNtCVYGuTP4SgqSVyWOFtmo/yR6G6EmILpt/McZLSmwnY/95x77jnPnnOeI2wkdpEEkNhhdvfs9Wn8f9vM1h8gupGEtL6J+W/LCC9GEJFiWI3GIZitDlhuNcBmb0JVTT1nrW1EZfVtiKZaiOb92FFWWYfyqjrQehNDY6OvghDyFEVQXzdCea0Y+QX/UN+AXKU7mDJFptTy9qpcg/5BH4Qupxt9A2N43DuARz1udDk96HZ5Mm0W3dwLvnZqNgxhSfqNH9EtbmEtjvBKjPdXfiUQiSVztrq+zQn0osXswfj7WeiNZpRW1MBQaoHOYIa2uCILE1egKcGwLwCBoqcD+iemoVDrodGJ/EzpXC7LCnFFzsj2wcbpf16+lhXQjhHfu0yGbJcITs/BxirsaLwLC6t2STnLVLRmZRRtuFlWDa9/EkL6rKRN4OPn77jX1oH77Z1obXuIOy0PUN/cioYcOJpa8GZyJhOQWso2zi7t1+WfeBn4gMDUJ7wOzuTEPxHC/JKU2nK6ShR0jUUMzS3gybMhPPV44Xo+Cpf7cL2Ms38EoS+LqaKkS04B2SeGxsZRyAqjZ1VW8UtvgIpRHoDmKFR6DHrfZjIkdP9oy5TZqTMXcfbCJRw/eR7HTpw7FM05cvQ0evqG8RfOE/zPce2IEQAAAABJRU5ErkJggg==\'); background-size: cover; display: block;\\"\\n  ></span>\\n  <img\\n        class=\\"gatsby-resp-image-image\\"\\n        alt=\\"Kitura OpenAPI example GET route\\"\\n        title=\\"Kitura OpenAPI example GET route\\"\\n        src=\\"/static/80c5725f339993950b36c6084f543cd8/6ff5e/OpenAPI-UI-GET-Execute.png\\"\\n        srcset=\\"/static/80c5725f339993950b36c6084f543cd8/135ae/OpenAPI-UI-GET-Execute.png 300w,\\n/static/80c5725f339993950b36c6084f543cd8/34e8a/OpenAPI-UI-GET-Execute.png 600w,\\n/static/80c5725f339993950b36c6084f543cd8/6ff5e/OpenAPI-UI-GET-Execute.png 1200w,\\n/static/80c5725f339993950b36c6084f543cd8/79a4a/OpenAPI-UI-GET-Execute.png 1800w,\\n/static/80c5725f339993950b36c6084f543cd8/d134d/OpenAPI-UI-GET-Execute.png 2246w\\"\\n        sizes=\\"(max-width: 1200px) 100vw, 1200px\\"\\n        loading=\\"lazy\\"\\n      />\\n  </a>\\n    </span></p>\\n<p>This should look somewhat familiar as it\'s similiar to the result of our POST test.</p>\\n<p>We\'re provided with the Curl command which we could execute in a terminal.</p>\\n<p>The response body is slightly different, it is an array of JSON objects which is what we\'d expect from the <code class=\\"language-text\\">GetAll</code> route.</p>\\n<p>The status code is also different, we have a value of 200 which means <code class=\\"language-text\\">Success</code>.</p>\\n<hr>\\n<h2 id=\\"next-steps\\"><a href=\\"#next-steps\\" aria-label=\\"next steps permalink\\" class=\\"anchor\\"><svg aria-hidden=\\"true\\" focusable=\\"false\\" height=\\"16\\" version=\\"1.1\\" viewBox=\\"0 0 16 16\\" width=\\"16\\"><path fill-rule=\\"evenodd\\" d=\\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\\"></path></svg></a>Next steps</h2>\\n<p><a href=\\"../databases/what-are-databases\\">Databases:</a> Learn about databases and the database providers Kitura supports.</p>","frontmatter":{"path":"/docs/routing/kitura-openapi","title":"Add OpenAPI to your app"}}},{"node":{"html":"<h1 id=\\"codable-routing-session\\"><a href=\\"#codable-routing-session\\" aria-label=\\"codable routing session permalink\\" class=\\"anchor\\"><svg aria-hidden=\\"true\\" focusable=\\"false\\" height=\\"16\\" version=\\"1.1\\" viewBox=\\"0 0 16 16\\" width=\\"16\\"><path fill-rule=\\"evenodd\\" d=\\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\\"></path></svg></a>Codable Routing Session</h1>\\n<p>HTTP is a stateless connection protocol, that is the server can\'t distinguish one request from another. Sessions and cookies provide HTTP with state, they allow the server to know who is making a specific request and respond accordingly.</p>\\n<p>This guide uses <a href=\\"https://github.com/IBM-Swift/Kitura-Session\\">Kitura-Session</a> with Codable routing leveraging type-safe sessions. If you want to use sessions with raw routing, check out the <a href=\\"./raw-session\\">Kitura Session with raw routing guide</a>.</p>\\n<hr>\\n<h2 id=\\"step-1-create-your-session-routes\\"><a href=\\"#step-1-create-your-session-routes\\" aria-label=\\"step 1 create your session routes permalink\\" class=\\"anchor\\"><svg aria-hidden=\\"true\\" focusable=\\"false\\" height=\\"16\\" version=\\"1.1\\" viewBox=\\"0 0 16 16\\" width=\\"16\\"><path fill-rule=\\"evenodd\\" d=\\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\\"></path></svg></a>Step 1: Create your session routes</h2>\\n<p>In this guide we are going to create two Kitura routes:</p>\\n<ul>\\n<li>A GET route, where we retrieve the books from our session.</li>\\n<li>A POST route, where we store a book in our session.</li>\\n</ul>\\n<p>We are using <a href=\\"/docs/routing/what-is-routing#codable-model\\">the Book model from the routing guide</a> in our routes, however you could use any codable object.</p>\\n<p>To use Kitura-Session from a server, we need to <a href=\\"https://github.com/IBM-Swift/Kitura-Session#add-dependencies\\">add Kitura-Session to our dependencies</a>.</p>\\n<blockquote>\\n<p>If you don\'t have a server, follow our <a href=\\"../getting-started/create-server-cli\\">Create a server</a> guide.</p>\\n</blockquote>\\n<p>Once that is complete, open your <code class=\\"language-text\\">Application.swift</code> file in your default text editor (or Xcode if you prefer):</p>\\n<p>Open your <code class=\\"language-text\\">Application.swift</code> file:</p>\\n<div class=\\"gatsby-highlight\\" data-language=\\"text\\"><pre class=\\"language-text\\"><code class=\\"language-text\\">open Sources/Application/Application.swift</code></pre></div>\\n<p>Inside the <code class=\\"language-text\\">postInit()</code> function add:</p>\\n<div class=\\"gatsby-highlight\\" data-language=\\"swift\\"><pre class=\\"language-swift\\"><code class=\\"language-swift\\"><span class=\\"token function\\">initializeTypeSafeSessionRoutes</span><span class=\\"token punctuation\\">(</span>app<span class=\\"token punctuation\\">:</span> <span class=\\"token keyword\\">self</span><span class=\\"token punctuation\\">)</span></code></pre></div>\\n<p>Create a new file, called <code class=\\"language-text\\">TypeSafeSessionRoutes.swift</code>:</p>\\n<div class=\\"gatsby-highlight\\" data-language=\\"text\\"><pre class=\\"language-text\\"><code class=\\"language-text\\">touch Sources/Application/Routes/TypeSafeSessionRoutes.swift</code></pre></div>\\n<p>Open your <code class=\\"language-text\\">TypeSafeSessionRoutes.swift</code> file:</p>\\n<div class=\\"gatsby-highlight\\" data-language=\\"text\\"><pre class=\\"language-text\\"><code class=\\"language-text\\">open Sources/Application/Routes/TypeSafeSessionRoutes.swift</code></pre></div>\\n<p>Inside this file, add the framework for our routes code:</p>\\n<div class=\\"gatsby-highlight\\" data-language=\\"swift\\"><pre class=\\"language-swift\\"><code class=\\"language-swift\\"><span class=\\"token keyword\\">import</span> <span class=\\"token builtin\\">KituraContracts</span>\\n<span class=\\"token keyword\\">import</span> <span class=\\"token builtin\\">KituraSession</span>\\n\\n<span class=\\"token keyword\\">func</span> <span class=\\"token function\\">initializeTypeSafeSessionRoutes</span><span class=\\"token punctuation\\">(</span>app<span class=\\"token punctuation\\">:</span> <span class=\\"token builtin\\">App</span><span class=\\"token punctuation\\">)</span> <span class=\\"token punctuation\\">{</span>\\n    app<span class=\\"token punctuation\\">.</span>router<span class=\\"token punctuation\\">.</span><span class=\\"token function\\">post</span><span class=\\"token punctuation\\">(</span><span class=\\"token string\\">\\"/cart\\"</span><span class=\\"token punctuation\\">,</span> handler<span class=\\"token punctuation\\">:</span> app<span class=\\"token punctuation\\">.</span>postSessionHandler<span class=\\"token punctuation\\">)</span>\\n    app<span class=\\"token punctuation\\">.</span>router<span class=\\"token punctuation\\">.</span><span class=\\"token keyword\\">get</span><span class=\\"token punctuation\\">(</span><span class=\\"token string\\">\\"/cart\\"</span><span class=\\"token punctuation\\">,</span> handler<span class=\\"token punctuation\\">:</span> app<span class=\\"token punctuation\\">.</span>getSessionHandler<span class=\\"token punctuation\\">)</span>\\n<span class=\\"token punctuation\\">}</span>\\n<span class=\\"token keyword\\">extension</span> <span class=\\"token builtin\\">App</span> <span class=\\"token punctuation\\">{</span>\\n    <span class=\\"token comment\\">// Define handlers here</span>\\n<span class=\\"token punctuation\\">}</span></code></pre></div>\\n<p>We will add our <code class=\\"language-text\\">postSessionHandler</code> and <code class=\\"language-text\\">getSessionHandler</code> later in this guide.</p>\\n<hr>\\n<h2 id=\\"step-2-define-your-session\\"><a href=\\"#step-2-define-your-session\\" aria-label=\\"step 2 define your session permalink\\" class=\\"anchor\\"><svg aria-hidden=\\"true\\" focusable=\\"false\\" height=\\"16\\" version=\\"1.1\\" viewBox=\\"0 0 16 16\\" width=\\"16\\"><path fill-rule=\\"evenodd\\" d=\\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\\"></path></svg></a>Step 2: Define your Session</h2>\\n<p>To use sessions with Codable routes, we need to model the structure of what we will store in the session. We do this by defining a Swift type that conforms to the <code class=\\"language-text\\">TypeSafeSession</code> protocol.</p>\\n<p>If you don\'t already have one, create a <code class=\\"language-text\\">Middlewares</code> folder:</p>\\n<div class=\\"gatsby-highlight\\" data-language=\\"text\\"><pre class=\\"language-text\\"><code class=\\"language-text\\">mkdir Sources/Application/Middlewares</code></pre></div>\\n<p>Create a new file, called <code class=\\"language-text\\">CheckoutSession.swift</code>:</p>\\n<div class=\\"gatsby-highlight\\" data-language=\\"text\\"><pre class=\\"language-text\\"><code class=\\"language-text\\">touch Sources/Application/Middlewares/CheckoutSession.swift</code></pre></div>\\n<p>Open your <code class=\\"language-text\\">CheckoutSession.swift</code> file:</p>\\n<div class=\\"gatsby-highlight\\" data-language=\\"text\\"><pre class=\\"language-text\\"><code class=\\"language-text\\">open Sources/Application/Middlewares/CheckoutSession.swift</code></pre></div>\\n<p>We can use either a class or a struct for <code class=\\"language-text\\">TypeSafeMiddleware</code> here but we will use a Class.</p>\\n<p>Inside this file, define your <code class=\\"language-text\\">CheckoutSession</code> class:</p>\\n<div class=\\"gatsby-highlight\\" data-language=\\"swift\\"><pre class=\\"language-swift\\"><code class=\\"language-swift\\"><span class=\\"token keyword\\">import</span> <span class=\\"token builtin\\">KituraSession</span>\\n\\n<span class=\\"token keyword\\">final</span> <span class=\\"token keyword\\">class</span> <span class=\\"token class-name\\">CheckoutSession</span><span class=\\"token punctuation\\">:</span> <span class=\\"token builtin\\">TypeSafeSession</span> <span class=\\"token punctuation\\">{</span>\\n\\n    <span class=\\"token keyword\\">let</span> sessionId<span class=\\"token punctuation\\">:</span> <span class=\\"token builtin\\">String</span>                       <span class=\\"token comment\\">// Requirement: every session must have an ID</span>\\n    <span class=\\"token keyword\\">var</span> books<span class=\\"token punctuation\\">:</span> <span class=\\"token punctuation\\">[</span><span class=\\"token builtin\\">Book</span><span class=\\"token punctuation\\">]</span>                           <span class=\\"token comment\\">// User-defined type, where Book conforms to Codable</span>\\n\\n    <span class=\\"token keyword\\">init</span><span class=\\"token punctuation\\">(</span>sessionId<span class=\\"token punctuation\\">:</span> <span class=\\"token builtin\\">String</span><span class=\\"token punctuation\\">)</span> <span class=\\"token punctuation\\">{</span>                   <span class=\\"token comment\\">// Requirement: must be able to create a new (empty)</span>\\n        <span class=\\"token keyword\\">self</span><span class=\\"token punctuation\\">.</span>sessionId <span class=\\"token operator\\">=</span> sessionId              <span class=\\"token comment\\">// session containing just an ID. Assign a default or</span>\\n        books <span class=\\"token operator\\">=</span> <span class=\\"token punctuation\\">[</span><span class=\\"token punctuation\\">]</span>                              <span class=\\"token comment\\">// empty value for any non-optional properties.</span>\\n    <span class=\\"token punctuation\\">}</span>\\n<span class=\\"token punctuation\\">}</span>\\n<span class=\\"token comment\\">// Defines the configuration of the user\'s type: how the cookie is constructed and how</span>\\n<span class=\\"token comment\\">// the session is persisted.</span>\\n<span class=\\"token keyword\\">extension</span> <span class=\\"token builtin\\">CheckoutSession</span> <span class=\\"token punctuation\\">{</span>\\n    <span class=\\"token keyword\\">static</span> <span class=\\"token keyword\\">let</span> sessionCookie<span class=\\"token punctuation\\">:</span> <span class=\\"token builtin\\">SessionCookie</span> <span class=\\"token operator\\">=</span> <span class=\\"token function\\">SessionCookie</span><span class=\\"token punctuation\\">(</span>name<span class=\\"token punctuation\\">:</span> <span class=\\"token string\\">\\"MySession\\"</span><span class=\\"token punctuation\\">,</span> secret<span class=\\"token punctuation\\">:</span> <span class=\\"token string\\">\\"Top Secret\\"</span><span class=\\"token punctuation\\">)</span>\\n    <span class=\\"token keyword\\">static</span> <span class=\\"token keyword\\">var</span> store<span class=\\"token punctuation\\">:</span> <span class=\\"token builtin\\">Store</span><span class=\\"token operator\\">?</span>\\n<span class=\\"token punctuation\\">}</span></code></pre></div>\\n<blockquote>\\n<p>When using a class you need to declare it as final.</p>\\n</blockquote>\\n<p>The minimum requirements for a type-safe session are:</p>\\n<ul>\\n<li>sessionID: An identifier that is unique to the session</li>\\n<li>Initilizer: Used to create a new session from a sessionId</li>\\n<li>sessionCookie: Defines the name of the cookie and the secret data used to encrypt it</li>\\n<li>An optional store: Defines how sessions should be persisted</li>\\n</ul>\\n<p>With our class, we have created a session that will store an array of books, via a cookie called \\"MySession\\" and using \\"Top Secret\\" as the password to encrypt that cookie. Since we didn\'t specify a store a default in memory store is used.</p>\\n<blockquote>\\n<p>For an example of a persistent store for sessions see <a href=\\"https://github.com/IBM-Swift/Kitura-Session-Redis\\">Kitura-Session-Redis</a></p>\\n</blockquote>\\n<hr>\\n<h2 id=\\"step-3-add-session-post-route\\"><a href=\\"#step-3-add-session-post-route\\" aria-label=\\"step 3 add session post route permalink\\" class=\\"anchor\\"><svg aria-hidden=\\"true\\" focusable=\\"false\\" height=\\"16\\" version=\\"1.1\\" viewBox=\\"0 0 16 16\\" width=\\"16\\"><path fill-rule=\\"evenodd\\" d=\\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\\"></path></svg></a>Step 3: Add session POST route</h2>\\n<p>Inside the app extension in <code class=\\"language-text\\">TypeSafeSessionRoutes.swift</code>, we add our <code class=\\"language-text\\">postSessionHandler</code>:</p>\\n<div class=\\"gatsby-highlight\\" data-language=\\"swift\\"><pre class=\\"language-swift\\"><code class=\\"language-swift\\"><span class=\\"token keyword\\">func</span> <span class=\\"token function\\">postSessionHandler</span><span class=\\"token punctuation\\">(</span>session<span class=\\"token punctuation\\">:</span> <span class=\\"token builtin\\">CheckoutSession</span><span class=\\"token punctuation\\">,</span> book<span class=\\"token punctuation\\">:</span> <span class=\\"token builtin\\">Book</span><span class=\\"token punctuation\\">,</span> completion<span class=\\"token punctuation\\">:</span> <span class=\\"token punctuation\\">(</span><span class=\\"token builtin\\">Book</span><span class=\\"token operator\\">?</span><span class=\\"token punctuation\\">,</span> <span class=\\"token builtin\\">RequestError</span><span class=\\"token operator\\">?</span><span class=\\"token punctuation\\">)</span> <span class=\\"token operator\\">-</span><span class=\\"token operator\\">></span> <span class=\\"token builtin\\">Void</span><span class=\\"token punctuation\\">)</span> <span class=\\"token punctuation\\">{</span>\\n\\n<span class=\\"token punctuation\\">}</span></code></pre></div>\\n<p>We have registered our TypeSafeSession on our handler by adding it to the signature.</p>\\n<p>When the handler is called the middleware is run and our session is created.</p>\\n<p>Within <code class=\\"language-text\\">postSessionHandler</code>, we can then interact with our session:</p>\\n<div class=\\"gatsby-highlight\\" data-language=\\"swift\\"><pre class=\\"language-swift\\"><code class=\\"language-swift\\">session<span class=\\"token punctuation\\">.</span>books<span class=\\"token punctuation\\">.</span><span class=\\"token function\\">append</span><span class=\\"token punctuation\\">(</span>book<span class=\\"token punctuation\\">)</span>\\nsession<span class=\\"token punctuation\\">.</span><span class=\\"token function\\">save</span><span class=\\"token punctuation\\">(</span><span class=\\"token punctuation\\">)</span>\\n<span class=\\"token function\\">completion</span><span class=\\"token punctuation\\">(</span>book<span class=\\"token punctuation\\">,</span> <span class=\\"token constant\\">nil</span><span class=\\"token punctuation\\">)</span></code></pre></div>\\n<p>What we\'re doing here is storing the posted Book into the session.</p>\\n<p>We use the <code class=\\"language-text\\">append</code> method as we know <code class=\\"language-text\\">books</code> is an Array as we defined it as an Array in the CheckoutSession class.</p>\\n<p>Then we need to save the session.</p>\\n<p>Now we can add a route for retrieving the data.</p>\\n<hr>\\n<h2 id=\\"step-4-add-session-get-route\\"><a href=\\"#step-4-add-session-get-route\\" aria-label=\\"step 4 add session get route permalink\\" class=\\"anchor\\"><svg aria-hidden=\\"true\\" focusable=\\"false\\" height=\\"16\\" version=\\"1.1\\" viewBox=\\"0 0 16 16\\" width=\\"16\\"><path fill-rule=\\"evenodd\\" d=\\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\\"></path></svg></a>Step 4: Add session GET route</h2>\\n<p>Below our <code class=\\"language-text\\">postSessionHandler</code> handler add:</p>\\n<div class=\\"gatsby-highlight\\" data-language=\\"swift\\"><pre class=\\"language-swift\\"><code class=\\"language-swift\\"><span class=\\"token keyword\\">func</span> <span class=\\"token function\\">getSessionHandler</span><span class=\\"token punctuation\\">(</span>session<span class=\\"token punctuation\\">:</span> <span class=\\"token builtin\\">CheckoutSession</span><span class=\\"token punctuation\\">,</span> completion<span class=\\"token punctuation\\">:</span> <span class=\\"token punctuation\\">(</span><span class=\\"token punctuation\\">[</span><span class=\\"token builtin\\">Book</span><span class=\\"token punctuation\\">]</span><span class=\\"token operator\\">?</span><span class=\\"token punctuation\\">,</span> <span class=\\"token builtin\\">RequestError</span><span class=\\"token operator\\">?</span><span class=\\"token punctuation\\">)</span> <span class=\\"token operator\\">-</span><span class=\\"token operator\\">></span> <span class=\\"token builtin\\">Void</span><span class=\\"token punctuation\\">)</span> <span class=\\"token operator\\">-</span><span class=\\"token operator\\">></span> <span class=\\"token builtin\\">Void</span> <span class=\\"token punctuation\\">{</span>\\n    <span class=\\"token function\\">completion</span><span class=\\"token punctuation\\">(</span>session<span class=\\"token punctuation\\">.</span>books<span class=\\"token punctuation\\">,</span> <span class=\\"token constant\\">nil</span><span class=\\"token punctuation\\">)</span>\\n<span class=\\"token punctuation\\">}</span></code></pre></div>\\n<p>Add that\'s it! We\'ve now enabled a Kitura Session on our server.</p>\\n<p>Your completed TypeSafeSessionRoutes.swift should now look as follows:</p>\\n<div class=\\"gatsby-highlight\\" data-language=\\"swift\\"><pre class=\\"language-swift\\"><code class=\\"language-swift\\"><span class=\\"token keyword\\">import</span> <span class=\\"token builtin\\">KituraContracts</span>\\n<span class=\\"token keyword\\">import</span> <span class=\\"token builtin\\">KituraSession</span>\\n\\n<span class=\\"token keyword\\">func</span> <span class=\\"token function\\">initializeTypeSafeSessionRoutes</span><span class=\\"token punctuation\\">(</span>app<span class=\\"token punctuation\\">:</span> <span class=\\"token builtin\\">App</span><span class=\\"token punctuation\\">)</span> <span class=\\"token punctuation\\">{</span>\\n    app<span class=\\"token punctuation\\">.</span>router<span class=\\"token punctuation\\">.</span><span class=\\"token function\\">post</span><span class=\\"token punctuation\\">(</span><span class=\\"token string\\">\\"/cart\\"</span><span class=\\"token punctuation\\">,</span> handler<span class=\\"token punctuation\\">:</span> app<span class=\\"token punctuation\\">.</span>postSessionHandler<span class=\\"token punctuation\\">)</span>\\n    app<span class=\\"token punctuation\\">.</span>router<span class=\\"token punctuation\\">.</span><span class=\\"token keyword\\">get</span><span class=\\"token punctuation\\">(</span><span class=\\"token string\\">\\"/cart\\"</span><span class=\\"token punctuation\\">,</span> handler<span class=\\"token punctuation\\">:</span> app<span class=\\"token punctuation\\">.</span>getSessionHandler<span class=\\"token punctuation\\">)</span>\\n<span class=\\"token punctuation\\">}</span>\\n<span class=\\"token keyword\\">extension</span> <span class=\\"token builtin\\">App</span> <span class=\\"token punctuation\\">{</span>\\n    <span class=\\"token keyword\\">func</span> <span class=\\"token function\\">postSessionHandler</span><span class=\\"token punctuation\\">(</span>session<span class=\\"token punctuation\\">:</span> <span class=\\"token builtin\\">CheckoutSession</span><span class=\\"token punctuation\\">,</span> book<span class=\\"token punctuation\\">:</span> <span class=\\"token builtin\\">Book</span><span class=\\"token punctuation\\">,</span> completion<span class=\\"token punctuation\\">:</span> <span class=\\"token punctuation\\">(</span><span class=\\"token builtin\\">Book</span><span class=\\"token operator\\">?</span><span class=\\"token punctuation\\">,</span> <span class=\\"token builtin\\">RequestError</span><span class=\\"token operator\\">?</span><span class=\\"token punctuation\\">)</span> <span class=\\"token operator\\">-</span><span class=\\"token operator\\">></span> <span class=\\"token builtin\\">Void</span><span class=\\"token punctuation\\">)</span> <span class=\\"token punctuation\\">{</span>\\n        session<span class=\\"token punctuation\\">.</span>books<span class=\\"token punctuation\\">.</span><span class=\\"token function\\">append</span><span class=\\"token punctuation\\">(</span>book<span class=\\"token punctuation\\">)</span>\\n        session<span class=\\"token punctuation\\">.</span><span class=\\"token function\\">save</span><span class=\\"token punctuation\\">(</span><span class=\\"token punctuation\\">)</span>\\n        <span class=\\"token function\\">completion</span><span class=\\"token punctuation\\">(</span>book<span class=\\"token punctuation\\">,</span> <span class=\\"token constant\\">nil</span><span class=\\"token punctuation\\">)</span>\\n    <span class=\\"token punctuation\\">}</span>\\n    <span class=\\"token keyword\\">func</span> <span class=\\"token function\\">getSessionHandler</span><span class=\\"token punctuation\\">(</span>session<span class=\\"token punctuation\\">:</span> <span class=\\"token builtin\\">CheckoutSession</span><span class=\\"token punctuation\\">,</span> completion<span class=\\"token punctuation\\">:</span> <span class=\\"token punctuation\\">(</span><span class=\\"token punctuation\\">[</span><span class=\\"token builtin\\">Book</span><span class=\\"token punctuation\\">]</span><span class=\\"token operator\\">?</span><span class=\\"token punctuation\\">,</span> <span class=\\"token builtin\\">RequestError</span><span class=\\"token operator\\">?</span><span class=\\"token punctuation\\">)</span> <span class=\\"token operator\\">-</span><span class=\\"token operator\\">></span> <span class=\\"token builtin\\">Void</span><span class=\\"token punctuation\\">)</span> <span class=\\"token operator\\">-</span><span class=\\"token operator\\">></span> <span class=\\"token builtin\\">Void</span> <span class=\\"token punctuation\\">{</span>\\n        <span class=\\"token function\\">completion</span><span class=\\"token punctuation\\">(</span>session<span class=\\"token punctuation\\">.</span>books<span class=\\"token punctuation\\">,</span> <span class=\\"token constant\\">nil</span><span class=\\"token punctuation\\">)</span>\\n    <span class=\\"token punctuation\\">}</span>\\n<span class=\\"token punctuation\\">}</span></code></pre></div>\\n<hr>\\n<h2 id=\\"step-5-test-our-session\\"><a href=\\"#step-5-test-our-session\\" aria-label=\\"step 5 test our session permalink\\" class=\\"anchor\\"><svg aria-hidden=\\"true\\" focusable=\\"false\\" height=\\"16\\" version=\\"1.1\\" viewBox=\\"0 0 16 16\\" width=\\"16\\"><path fill-rule=\\"evenodd\\" d=\\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\\"></path></svg></a>Step 5: Test our Session</h2>\\n<p>An easy way to test our our session is using <a href=\\"https://github.com/IBM-Swift/Kitura-OpenAPI\\">Kitura OpenAPI</a>. You can follow our <a href=\\"../routing/kitura-openapi\\">Kitura OpenAPI Guide</a> to learn how to set up OpenAPI and use the interface for testing.</p>\\n<p>Alternatively, we can test our routes by sending a request using curl, with cookies enabled.</p>\\n<p>Open Terminal and enter the following:</p>\\n<div class=\\"gatsby-highlight\\" data-language=\\"text\\"><pre class=\\"language-text\\"><code class=\\"language-text\\">curl -X POST \\\\\\nhttp://localhost:8080/cart \\\\\\n-b cookies.txt -c cookies.txt \\\\\\n-H &#39;content-type: application/json&#39; \\\\\\n-d &#39;{\\n    &quot;id&quot;: 1,\\n    &quot;title&quot;: &quot;War and Peace&quot;,\\n    &quot;price&quot;: 10.99,\\n    &quot;genre&quot;: &quot;Historical drama&quot;\\n}&#39;</code></pre></div>\\n<p>If our request was successful, our book will be returned to us:</p>\\n<div class=\\"gatsby-highlight\\" data-language=\\"text\\"><pre class=\\"language-text\\"><code class=\\"language-text\\">{&quot;id&quot;:1,&quot;title&quot;:&quot;War and Peace&quot;,&quot;price&quot;:10.99,&quot;genre&quot;:&quot;Historical drama&quot;}</code></pre></div>\\n<p>We will also have a cookie that curl has stored in the <code class=\\"language-text\\">cookies.txt</code> file.</p>\\n<p>To retrieve our book, we make another curl request to our server:</p>\\n<div class=\\"gatsby-highlight\\" data-language=\\"text\\"><pre class=\\"language-text\\"><code class=\\"language-text\\">curl -X GET \\\\\\nhttp://localhost:8080/cart \\\\\\n-b cookies.txt -c cookies.txt</code></pre></div>\\n<p>If the request is successful, it will return the book we just sent to the server.</p>\\n<div class=\\"gatsby-highlight\\" data-language=\\"text\\"><pre class=\\"language-text\\"><code class=\\"language-text\\">[{&quot;id&quot;:1,&quot;title&quot;:&quot;War and Peace&quot;,&quot;price&quot;:10.99,&quot;genre&quot;:&quot;Historical drama&quot;}]</code></pre></div>\\n<p>The cookie we sent with our request has identifed our session, so that our saved book can be returned.</p>\\n<p>Each user making requests to these routes will create their own basket of books.</p>\\n<p>We can demonstrate this by deleting our cookie:</p>\\n<div class=\\"gatsby-highlight\\" data-language=\\"text\\"><pre class=\\"language-text\\"><code class=\\"language-text\\">rm cookies.txt</code></pre></div>\\n<p>Followed by making a new GET request:</p>\\n<div class=\\"gatsby-highlight\\" data-language=\\"text\\"><pre class=\\"language-text\\"><code class=\\"language-text\\">curl -X GET \\\\\\nhttp://localhost:8080/cart \\\\\\n-b cookies.txt -c cookies.txt</code></pre></div>\\n<p>This represents a user without a session so we are returned an empty array:</p>\\n<div class=\\"gatsby-highlight\\" data-language=\\"text\\"><pre class=\\"language-text\\"><code class=\\"language-text\\">[]</code></pre></div>\\n<h2 id=\\"next-steps\\"><a href=\\"#next-steps\\" aria-label=\\"next steps permalink\\" class=\\"anchor\\"><svg aria-hidden=\\"true\\" focusable=\\"false\\" height=\\"16\\" version=\\"1.1\\" viewBox=\\"0 0 16 16\\" width=\\"16\\"><path fill-rule=\\"evenodd\\" d=\\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\\"></path></svg></a>Next steps</h2>\\n<p><a href=\\"../authentication/what-is-authentication\\">Authentication</a>: Learn about authentication and what Kitura provides.</p>","frontmatter":{"path":"/docs/sessions/codable-session","title":"Codable Routing Session"}}},{"node":{"html":"<h1 id=\\"what-are-sessions\\"><a href=\\"#what-are-sessions\\" aria-label=\\"what are sessions permalink\\" class=\\"anchor\\"><svg aria-hidden=\\"true\\" focusable=\\"false\\" height=\\"16\\" version=\\"1.1\\" viewBox=\\"0 0 16 16\\" width=\\"16\\"><path fill-rule=\\"evenodd\\" d=\\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\\"></path></svg></a>What are Sessions?</h1>\\n<p>A session is server-side storage of information that will be persisted through a user\'s interaction with the application. When you first visit the server, you are provided with a cookie with a unique session id. The user presents this cookie with future requests so that the server can identify that the requests have come from the same user. Information associated with that session id can then be used to respond to the request. For example, you could persist the user\'s name, whether they are logged in, and their shopping basket inside a session. Kitura implements sessions using the <a href=\\"https://github.com/IBM-Swift/Kitura-Session\\">Kitura-Session</a> library.</p>\\n<p>A session, unlike a database, is intended to be temporary. If it is not updated or if the session is ended, such as a user logging out, then it is cleared.</p>\\n<p>Sessions are not the same as authentication, although they are often used together. Authentication is used to verify a user\'s credentials to identify who they are. A session is used to check that the current request is from the same user as a previous request. You can learn more about authentication in our <a href=\\"../authentication/what-is-authentication\\">What is Authentication?</a> guide.</p>\\n<h2 id=\\"next-steps\\"><a href=\\"#next-steps\\" aria-label=\\"next steps permalink\\" class=\\"anchor\\"><svg aria-hidden=\\"true\\" focusable=\\"false\\" height=\\"16\\" version=\\"1.1\\" viewBox=\\"0 0 16 16\\" width=\\"16\\"><path fill-rule=\\"evenodd\\" d=\\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\\"></path></svg></a>Next steps</h2>\\n<p><a href=\\"./codable-session\\">Session with Codable routes</a>: Learn how to persist the user\'s information between multiple requests on codable routes.</p>\\n<p><a href=\\"./raw-session\\">Session with Raw routes</a>: Learn how to persist the user\'s information between multiple requests on raw routes.</p>","frontmatter":{"path":"/docs/sessions/what-are-sessions","title":"What are Sessions?"}}},{"node":{"html":"<h1 id=\\"kitura-markdown\\"><a href=\\"#kitura-markdown\\" aria-label=\\"kitura markdown permalink\\" class=\\"anchor\\"><svg aria-hidden=\\"true\\" focusable=\\"false\\" height=\\"16\\" version=\\"1.1\\" viewBox=\\"0 0 16 16\\" width=\\"16\\"><path fill-rule=\\"evenodd\\" d=\\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\\"></path></svg></a>Kitura Markdown</h1>\\n<p>In this guide, we will show you how to serve a web page generated from <a href=\\"http://stencil.fuller.li/en/latest/\\">Markdown templates</a> (.md files) using <a href=\\"https://github.com/IBM-Swift/Kitura-Markdown\\">Kitura-Markdown</a>.</p>\\n<hr>\\n<h2 id=\\"step-1-add-kituramarkdown-to-project\\"><a href=\\"#step-1-add-kituramarkdown-to-project\\" aria-label=\\"step 1 add kituramarkdown to project permalink\\" class=\\"anchor\\"><svg aria-hidden=\\"true\\" focusable=\\"false\\" height=\\"16\\" version=\\"1.1\\" viewBox=\\"0 0 16 16\\" width=\\"16\\"><path fill-rule=\\"evenodd\\" d=\\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\\"></path></svg></a>Step 1: Add KituraMarkdown to Project</h2>\\n<p>To use Markdown from a server, we first need to <a href=\\"https://github.com/IBM-Swift/Kitura-Markdown#add-dependencies\\">add Kitura-Markdown to our dependencies</a>.</p>\\n<blockquote>\\n<p>If you don\'t have a server, follow our <a href=\\"../getting-started/create-server-cli\\">Create a server</a> guide.</p>\\n</blockquote>\\n<p>Next, we need to import the KituraMarkdown package.</p>\\n<p>Open your <code class=\\"language-text\\">Application.swift</code> file:</p>\\n<div class=\\"gatsby-highlight\\" data-language=\\"text\\"><pre class=\\"language-text\\"><code class=\\"language-text\\">open Sources/Application/Application.swift</code></pre></div>\\n<p>Then at the top of the file add the import statement for KituraMarkdown:</p>\\n<div class=\\"gatsby-highlight\\" data-language=\\"swift\\"><pre class=\\"language-swift\\"><code class=\\"language-swift\\"><span class=\\"token keyword\\">import</span> <span class=\\"token builtin\\">KituraMarkdown</span></code></pre></div>\\n<p>Now we can register the KituraMarkdown Template Engine to our router instance.</p>\\n<p>Inside the <code class=\\"language-text\\">postInit()</code> function add:</p>\\n<div class=\\"gatsby-highlight\\" data-language=\\"swift\\"><pre class=\\"language-swift\\"><code class=\\"language-swift\\">router<span class=\\"token punctuation\\">.</span><span class=\\"token function\\">add</span><span class=\\"token punctuation\\">(</span>templateEngine<span class=\\"token punctuation\\">:</span> <span class=\\"token function\\">KituraMarkdown</span><span class=\\"token punctuation\\">(</span><span class=\\"token punctuation\\">)</span><span class=\\"token punctuation\\">)</span></code></pre></div>\\n<blockquote>\\n<p>Kitura supports multiple template engines being registered to a single instance of a router. By default each templating engine will handle files in the <code class=\\"language-text\\">./Views</code> directory that match the file extension it supports.</p>\\n</blockquote>\\n<hr>\\n<h2 id=\\"step-2-configure-kituramarkdown\\"><a href=\\"#step-2-configure-kituramarkdown\\" aria-label=\\"step 2 configure kituramarkdown permalink\\" class=\\"anchor\\"><svg aria-hidden=\\"true\\" focusable=\\"false\\" height=\\"16\\" version=\\"1.1\\" viewBox=\\"0 0 16 16\\" width=\\"16\\"><path fill-rule=\\"evenodd\\" d=\\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\\"></path></svg></a>Step 2: Configure KituraMarkdown</h2>\\n<p>We may wish to provide a custom configuration for these properties, for example, to configure the contents of the <code class=\\"language-text\\">&lt;head&gt;</code> tag.</p>\\n<p>To provide this configuration we can provide a HTML wrapper template for our rendered Markdown using MarkdownOptions.</p>\\n<p>Inside the <code class=\\"language-text\\">postInit()</code> function add:</p>\\n<div class=\\"gatsby-highlight\\" data-language=\\"swift\\"><pre class=\\"language-swift\\"><code class=\\"language-swift\\"><span class=\\"token keyword\\">let</span> markdownOptions <span class=\\"token operator\\">=</span> <span class=\\"token function\\">MarkdownOptions</span><span class=\\"token punctuation\\">(</span>pageTemplate<span class=\\"token punctuation\\">:</span> <span class=\\"token string\\">\\"default\\"</span><span class=\\"token punctuation\\">)</span></code></pre></div>\\n<blockquote>\\n<p>We have selected the default template which provides the following HTML wrapper:</p>\\n<div class=\\"gatsby-highlight\\" data-language=\\"html\\"><pre class=\\"language-html\\"><code class=\\"language-html\\"><span class=\\"token doctype\\">&lt;!DOCTYPE html></span>\\n   &lt;html lang=\\\\\\"en\\\\\\">\\n     <span class=\\"token tag\\"><span class=\\"token tag\\"><span class=\\"token punctuation\\">&lt;</span>head</span><span class=\\"token punctuation\\">></span></span>\\n       &lt;meta charset=\\\\\\"UTF-8\\\\\\">\\n     <span class=\\"token tag\\"><span class=\\"token tag\\"><span class=\\"token punctuation\\">&lt;/</span>head</span><span class=\\"token punctuation\\">></span></span>\\n     <span class=\\"token tag\\"><span class=\\"token tag\\"><span class=\\"token punctuation\\">&lt;</span>body</span><span class=\\"token punctuation\\">></span></span>\\n       <span class=\\"token tag\\"><span class=\\"token tag\\"><span class=\\"token punctuation\\">&lt;</span>div</span><span class=\\"token punctuation\\">></span></span>\\n         <span class=\\"token tag\\"><span class=\\"token tag\\"><span class=\\"token punctuation\\">&lt;</span>snippetInsertLocation</span><span class=\\"token punctuation\\">></span></span><span class=\\"token tag\\"><span class=\\"token tag\\"><span class=\\"token punctuation\\">&lt;/</span>snippetInsertLocation</span><span class=\\"token punctuation\\">></span></span>\\n       <span class=\\"token tag\\"><span class=\\"token tag\\"><span class=\\"token punctuation\\">&lt;/</span>div</span><span class=\\"token punctuation\\">></span></span>\\n     <span class=\\"token tag\\"><span class=\\"token tag\\"><span class=\\"token punctuation\\">&lt;/</span>body</span><span class=\\"token punctuation\\">></span></span>\\n   <span class=\\"token tag\\"><span class=\\"token tag\\"><span class=\\"token punctuation\\">&lt;/</span>html</span><span class=\\"token punctuation\\">></span></span></code></pre></div>\\n<p>Alternatively you can provide your own template using MarkdownOptions:</p>\\n<div class=\\"gatsby-highlight\\" data-language=\\"html\\"><pre class=\\"language-html\\"><code class=\\"language-html\\">let markdownOptions = MarkdownOptions(pageTemplate: \\"\\"\\"\\n <span class=\\"token doctype\\">&lt;!DOCTYPE html></span>\\n &lt;html lang=\\\\\\"en\\\\\\">\\n     <span class=\\"token tag\\"><span class=\\"token tag\\"><span class=\\"token punctuation\\">&lt;</span>head</span><span class=\\"token punctuation\\">></span></span>\\n         &lt;meta charset=\\\\\\"UTF-8\\\\\\">\\n     <span class=\\"token tag\\"><span class=\\"token tag\\"><span class=\\"token punctuation\\">&lt;/</span>head</span><span class=\\"token punctuation\\">></span></span>\\n     <span class=\\"token tag\\"><span class=\\"token tag\\"><span class=\\"token punctuation\\">&lt;</span>body</span><span class=\\"token punctuation\\">></span></span>\\n         <span class=\\"token tag\\"><span class=\\"token tag\\"><span class=\\"token punctuation\\">&lt;</span>div</span><span class=\\"token punctuation\\">></span></span>\\n             <span class=\\"token tag\\"><span class=\\"token tag\\"><span class=\\"token punctuation\\">&lt;</span>h1</span><span class=\\"token punctuation\\">></span></span>My Page Title<span class=\\"token tag\\"><span class=\\"token tag\\"><span class=\\"token punctuation\\">&lt;/</span>h1</span><span class=\\"token punctuation\\">></span></span>\\n         <span class=\\"token tag\\"><span class=\\"token tag\\"><span class=\\"token punctuation\\">&lt;/</span>div</span><span class=\\"token punctuation\\">></span></span>\\n         <span class=\\"token tag\\"><span class=\\"token tag\\"><span class=\\"token punctuation\\">&lt;</span>div</span><span class=\\"token punctuation\\">></span></span>\\n             <span class=\\"token tag\\"><span class=\\"token tag\\"><span class=\\"token punctuation\\">&lt;</span>snippetInsertLocation</span><span class=\\"token punctuation\\">></span></span><span class=\\"token tag\\"><span class=\\"token tag\\"><span class=\\"token punctuation\\">&lt;/</span>snippetInsertLocation</span><span class=\\"token punctuation\\">></span></span>\\n         <span class=\\"token tag\\"><span class=\\"token tag\\"><span class=\\"token punctuation\\">&lt;/</span>div</span><span class=\\"token punctuation\\">></span></span>\\n     <span class=\\"token tag\\"><span class=\\"token tag\\"><span class=\\"token punctuation\\">&lt;/</span>body</span><span class=\\"token punctuation\\">></span></span>\\n <span class=\\"token tag\\"><span class=\\"token tag\\"><span class=\\"token punctuation\\">&lt;/</span>html</span><span class=\\"token punctuation\\">></span></span>\\n \\"\\"\\")</code></pre></div>\\n</blockquote>\\n<p>During the rendering of the Markdown file, our rendered Markdown content replaces the <code class=\\"language-text\\">&lt;snippetInsertLocation&gt;&lt;/snippetInsertLocation&gt;</code> tag.</p>\\n<hr>\\n<h2 id=\\"step-3-create-the-template-file\\"><a href=\\"#step-3-create-the-template-file\\" aria-label=\\"step 3 create the template file permalink\\" class=\\"anchor\\"><svg aria-hidden=\\"true\\" focusable=\\"false\\" height=\\"16\\" version=\\"1.1\\" viewBox=\\"0 0 16 16\\" width=\\"16\\"><path fill-rule=\\"evenodd\\" d=\\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\\"></path></svg></a>Step 3: Create the template file</h2>\\n<p>By default, Kitura looks for template files in a <code class=\\"language-text\\">./Views</code> directory found at the root of the project.</p>\\n<blockquote>\\n<p>Typically the root of your project is where the <code class=\\"language-text\\">.xcodeproj</code> directory is.</p>\\n</blockquote>\\n<p>Once we are in the root of our project we can create the directory:</p>\\n<div class=\\"gatsby-highlight\\" data-language=\\"text\\"><pre class=\\"language-text\\"><code class=\\"language-text\\">mkdir Views</code></pre></div>\\n<p>Then we need to create our template file within the Views directory:</p>\\n<div class=\\"gatsby-highlight\\" data-language=\\"text\\"><pre class=\\"language-text\\"><code class=\\"language-text\\">cd Views &amp;&amp; touch book.md</code></pre></div>\\n<p>Now we have everything we need to start creating our templates.</p>\\n<blockquote>\\n<p>If you are using Xcode and used the command line to create your Views directory you will need to regenerate your Xcode project:</p>\\n<div class=\\"gatsby-highlight\\" data-language=\\"text\\"><pre class=\\"language-text\\"><code class=\\"language-text\\">swift package generate-xcodeproj</code></pre></div>\\n<p>This is to enable Xcode to detect the new directory.</p>\\n</blockquote>\\n<p>Now we can add some Markdown to render:</p>\\n<p>So in the <code class=\\"language-text\\">book.md</code> file add:</p>\\n<div class=\\"gatsby-highlight\\" data-language=\\"text\\"><pre class=\\"language-text\\"><code class=\\"language-text\\"># Books Header\\n\\nDescription with **bold** text\\n\\n* Book1\\n* Book2</code></pre></div>\\n<hr>\\n<h2 id=\\"step-4-render-the-markdown\\"><a href=\\"#step-4-render-the-markdown\\" aria-label=\\"step 4 render the markdown permalink\\" class=\\"anchor\\"><svg aria-hidden=\\"true\\" focusable=\\"false\\" height=\\"16\\" version=\\"1.1\\" viewBox=\\"0 0 16 16\\" width=\\"16\\"><path fill-rule=\\"evenodd\\" d=\\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\\"></path></svg></a>Step 4: Render the Markdown</h2>\\n<p>We\'ve added the KituraMarkdown template engine to our router, so now we can use it in a route.</p>\\n<p>Just below our other registered routes we can create a new route for KituraMarkdown:</p>\\n<div class=\\"gatsby-highlight\\" data-language=\\"swift\\"><pre class=\\"language-swift\\"><code class=\\"language-swift\\">router<span class=\\"token punctuation\\">.</span><span class=\\"token keyword\\">get</span><span class=\\"token punctuation\\">(</span><span class=\\"token string\\">\\"/book\\"</span><span class=\\"token punctuation\\">)</span> <span class=\\"token punctuation\\">{</span> request<span class=\\"token punctuation\\">,</span> response<span class=\\"token punctuation\\">,</span> next <span class=\\"token keyword\\">in</span>\\n    <span class=\\"token keyword\\">try</span> response<span class=\\"token punctuation\\">.</span><span class=\\"token function\\">render</span><span class=\\"token punctuation\\">(</span><span class=\\"token string\\">\\"book.md\\"</span><span class=\\"token punctuation\\">,</span> context<span class=\\"token punctuation\\">:</span> <span class=\\"token punctuation\\">[</span><span class=\\"token punctuation\\">:</span><span class=\\"token punctuation\\">]</span><span class=\\"token punctuation\\">,</span> options<span class=\\"token punctuation\\">:</span> markdownOptions<span class=\\"token punctuation\\">)</span><span class=\\"token punctuation\\">)</span>\\n<span class=\\"token punctuation\\">}</span></code></pre></div>\\n<blockquote>\\n<p>You will notice a <code class=\\"language-text\\">context</code> parameter is required, however as Markdown files provide all the context this value is ignored, so we simply pass in an empty context.</p>\\n</blockquote>\\n<p>The <code class=\\"language-text\\">response.render()</code> method attempts to populate the template file with the provided data.</p>\\n<p>So in our case KituraMarkdown will take the <code class=\\"language-text\\">book.md</code> file and render the Markdown in it to be viewed in a browser.</p>\\n<p>Now to test our templating we first need to start the Kitura server.</p>\\n<p>Then in a brower we can open:</p>\\n<p><a href=\\"http://localhost:8080/book\\" target=\\"blank\\">localhost:8080/book</a></p>\\n<p>In the browser we should see:</p>\\n<h1 id=\\"books-header\\"><a href=\\"#books-header\\" aria-label=\\"books header permalink\\" class=\\"anchor\\"><svg aria-hidden=\\"true\\" focusable=\\"false\\" height=\\"16\\" version=\\"1.1\\" viewBox=\\"0 0 16 16\\" width=\\"16\\"><path fill-rule=\\"evenodd\\" d=\\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\\"></path></svg></a>Books Header</h1>\\n<p>Description with <strong>bold</strong> text</p>\\n<ul>\\n<li>Book1</li>\\n<li>Book2</li>\\n</ul>\\n<p>That\'s it! We\'ve successfully rendered some Markdown into a browser using KituraMarkdown.</p>","frontmatter":{"path":"/docs/web/markdown","title":"Kitura Markdown"}}},{"node":{"html":"<h1 id=\\"serving-static-files-in-kitura\\"><a href=\\"#serving-static-files-in-kitura\\" aria-label=\\"serving static files in kitura permalink\\" class=\\"anchor\\"><svg aria-hidden=\\"true\\" focusable=\\"false\\" height=\\"16\\" version=\\"1.1\\" viewBox=\\"0 0 16 16\\" width=\\"16\\"><path fill-rule=\\"evenodd\\" d=\\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\\"></path></svg></a>Serving static files in Kitura</h1>\\n<p>In a web application, we will require resources such as images, HTML files, CSS files, and JavaScript files. These are static files, as they can be delivered to the user without needing to be modified, or generated and can be provided to the user with Kitura\'s built-in <code class=\\"language-text\\">StaticFileServer</code> middleware. This guide will show you how to configure and register a static file server on your Kitura server.</p>\\n<blockquote>\\n<p>If you don\'t have a Kitura server, follow our <a href=\\"../getting-started/create-server-cli\\">Create a server</a> guide.</p>\\n</blockquote>\\n<hr>\\n<h2 id=\\"step-1-create-a-directory-for-our-files\\"><a href=\\"#step-1-create-a-directory-for-our-files\\" aria-label=\\"step 1 create a directory for our files permalink\\" class=\\"anchor\\"><svg aria-hidden=\\"true\\" focusable=\\"false\\" height=\\"16\\" version=\\"1.1\\" viewBox=\\"0 0 16 16\\" width=\\"16\\"><path fill-rule=\\"evenodd\\" d=\\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\\"></path></svg></a>Step 1: Create a directory for our files</h2>\\n<p>The first thing we are going to need is a static file to serve. By default the static file server looks in the \\"public\\" directory, so let\'s create that now.</p>\\n<p>From the root directory of your project, where <code class=\\"language-text\\">Package.swift</code> is located, create the public directory:</p>\\n<div class=\\"gatsby-highlight\\" data-language=\\"text\\"><pre class=\\"language-text\\"><code class=\\"language-text\\">mkdir public</code></pre></div>\\n<p>Change into the directory:</p>\\n<div class=\\"gatsby-highlight\\" data-language=\\"text\\"><pre class=\\"language-text\\"><code class=\\"language-text\\">cd public</code></pre></div>\\n<p>Create a new file called <code class=\\"language-text\\">hello.html</code>:</p>\\n<div class=\\"gatsby-highlight\\" data-language=\\"text\\"><pre class=\\"language-text\\"><code class=\\"language-text\\">touch hello.html</code></pre></div>\\n<p>Open this file in your preferred text editor (we will use Xcode):</p>\\n<div class=\\"gatsby-highlight\\" data-language=\\"text\\"><pre class=\\"language-text\\"><code class=\\"language-text\\">open hello.html -a Xcode.app</code></pre></div>\\n<p>Inside this file, add the following text:</p>\\n<div class=\\"gatsby-highlight\\" data-language=\\"html\\"><pre class=\\"language-html\\"><code class=\\"language-html\\"><span class=\\"token doctype\\">&lt;!DOCTYPE html></span>\\n<span class=\\"token tag\\"><span class=\\"token tag\\"><span class=\\"token punctuation\\">&lt;</span>html</span><span class=\\"token punctuation\\">></span></span>\\n    <span class=\\"token tag\\"><span class=\\"token tag\\"><span class=\\"token punctuation\\">&lt;</span>body</span><span class=\\"token punctuation\\">></span></span>\\n        <span class=\\"token tag\\"><span class=\\"token tag\\"><span class=\\"token punctuation\\">&lt;</span>h1</span><span class=\\"token punctuation\\">></span></span>Hello World!<span class=\\"token tag\\"><span class=\\"token tag\\"><span class=\\"token punctuation\\">&lt;/</span>h1</span><span class=\\"token punctuation\\">></span></span>\\n    <span class=\\"token tag\\"><span class=\\"token tag\\"><span class=\\"token punctuation\\">&lt;/</span>body</span><span class=\\"token punctuation\\">></span></span>\\n<span class=\\"token tag\\"><span class=\\"token tag\\"><span class=\\"token punctuation\\">&lt;/</span>html</span><span class=\\"token punctuation\\">></span></span></code></pre></div>\\n<p>In this example, we will serve an HTML file, however, this could be any file type.</p>\\n<blockquote>\\n<p>If you are using Xcode and used the command line to create your public directory you will need to regenerate your Xcode project:</p>\\n<div class=\\"gatsby-highlight\\" data-language=\\"text\\"><pre class=\\"language-text\\"><code class=\\"language-text\\">swift package generate-xcodeproj</code></pre></div>\\n<p>This is to enable Xcode to detect the new directory.</p>\\n</blockquote>\\n<hr>\\n<h2 id=\\"step-2-register-a-static-file-server-on-our-router\\"><a href=\\"#step-2-register-a-static-file-server-on-our-router\\" aria-label=\\"step 2 register a static file server on our router permalink\\" class=\\"anchor\\"><svg aria-hidden=\\"true\\" focusable=\\"false\\" height=\\"16\\" version=\\"1.1\\" viewBox=\\"0 0 16 16\\" width=\\"16\\"><path fill-rule=\\"evenodd\\" d=\\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\\"></path></svg></a>Step 2: Register a static file server on our router</h2>\\n<p>The <code class=\\"language-text\\">StaticFileServer</code> middleware is built into Kitura. To use it we just need register it on our router.</p>\\n<p>Open your <code class=\\"language-text\\">Application.swift</code> file in your default text editor (or Xcode if you prefer):</p>\\n<div class=\\"gatsby-highlight\\" data-language=\\"text\\"><pre class=\\"language-text\\"><code class=\\"language-text\\">open Sources/Application/Application.swift</code></pre></div>\\n<p>Inside the <code class=\\"language-text\\">postInit()</code> function add:</p>\\n<div class=\\"gatsby-highlight\\" data-language=\\"swift\\"><pre class=\\"language-swift\\"><code class=\\"language-swift\\">router<span class=\\"token punctuation\\">.</span><span class=\\"token function\\">all</span><span class=\\"token punctuation\\">(</span><span class=\\"token string\\">\\"/public\\"</span><span class=\\"token punctuation\\">,</span> middleware<span class=\\"token punctuation\\">:</span> <span class=\\"token function\\">StaticFileServer</span><span class=\\"token punctuation\\">(</span><span class=\\"token punctuation\\">)</span><span class=\\"token punctuation\\">)</span></code></pre></div>\\n<p>That\'s it! Now, we will serve any files from the project\'s <code class=\\"language-text\\">public</code> directory (since this is the default path) from the <code class=\\"language-text\\">/public</code> route on our server.</p>\\n<p>We are using public for both the route and directory, however these could be set to anything.</p>\\n<p>For example, if you wanted to serve files from the <code class=\\"language-text\\">assets</code> folder from the \'/internal\' route, you could use the following code:</p>\\n<div class=\\"gatsby-highlight\\" data-language=\\"swift\\"><pre class=\\"language-swift\\"><code class=\\"language-swift\\">router<span class=\\"token punctuation\\">.</span><span class=\\"token function\\">all</span><span class=\\"token punctuation\\">(</span><span class=\\"token string\\">\\"/internal\\"</span><span class=\\"token punctuation\\">,</span> middleware<span class=\\"token punctuation\\">:</span> <span class=\\"token function\\">StaticFileServer</span><span class=\\"token punctuation\\">(</span>path<span class=\\"token punctuation\\">:</span> <span class=\\"token string\\">\\"./assets\\"</span><span class=\\"token punctuation\\">)</span><span class=\\"token punctuation\\">)</span></code></pre></div>\\n<hr>\\n<h2 id=\\"step-3-test-serving-a-static-file\\"><a href=\\"#step-3-test-serving-a-static-file\\" aria-label=\\"step 3 test serving a static file permalink\\" class=\\"anchor\\"><svg aria-hidden=\\"true\\" focusable=\\"false\\" height=\\"16\\" version=\\"1.1\\" viewBox=\\"0 0 16 16\\" width=\\"16\\"><path fill-rule=\\"evenodd\\" d=\\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\\"></path></svg></a>Step 3: Test serving a static file</h2>\\n<p>To test our static file server, we can view the HTML file we created earlier.</p>\\n<p>We do this by running our server, then opening our browser at:</p>\\n<p><a href=\\"http://localhost:8080/public/hello.html\\" target=\\"blank\\">localhost:8080/public/hello.html</a></p>\\n<p>We should see our HTML document with the \\"Hello World!\\" message.</p>\\n<p>The <code class=\\"language-text\\">StaticFileServer</code> also loads files from subdirectories of the project\'s <code class=\\"language-text\\">public</code> directory, so all we need to do is place a file into a subdirectory e.g. <code class=\\"language-text\\">./public/images/picture.png</code> and it will be served at <a href=\\"http://localhost:8080/public/picture.png\\" target=\\"blank\\">localhost:8080/public/picture.png</a>.</p>\\n<hr>\\n<h2 id=\\"next-steps\\"><a href=\\"#next-steps\\" aria-label=\\"next steps permalink\\" class=\\"anchor\\"><svg aria-hidden=\\"true\\" focusable=\\"false\\" height=\\"16\\" version=\\"1.1\\" viewBox=\\"0 0 16 16\\" width=\\"16\\"><path fill-rule=\\"evenodd\\" d=\\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\\"></path></svg></a>Next steps</h2>\\n<p><a href=\\"./stencil\\">Stencil</a>: Learn how to add Stencil templating to your Kitura application.</p>\\n<p><a href=\\"./markdown\\">Markdown</a>: Learn how to add Markdown templating to your Kitura application.</p>","frontmatter":{"path":"/docs/web/static-file-server","title":"Serving static files in Kitura"}}},{"node":{"html":"<h1 id=\\"kitura-stencil\\"><a href=\\"#kitura-stencil\\" aria-label=\\"kitura stencil permalink\\" class=\\"anchor\\"><svg aria-hidden=\\"true\\" focusable=\\"false\\" height=\\"16\\" version=\\"1.1\\" viewBox=\\"0 0 16 16\\" width=\\"16\\"><path fill-rule=\\"evenodd\\" d=\\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\\"></path></svg></a>Kitura Stencil</h1>\\n<p>To implement <a href=\\"https://github.com/stencilproject/Stencil\\">Stencil</a> templating with a Kitura server, we use <a href=\\"https://github.com/IBM-Swift/Kitura-StencilTemplateEngine\\">Kitura-StencilTemplateEngine</a>. This package makes it easy to to create an HTML page with integrated Swift variables.</p>\\n<hr>\\n<h2 id=\\"step-1-create-your-stencil-routes\\"><a href=\\"#step-1-create-your-stencil-routes\\" aria-label=\\"step 1 create your stencil routes permalink\\" class=\\"anchor\\"><svg aria-hidden=\\"true\\" focusable=\\"false\\" height=\\"16\\" version=\\"1.1\\" viewBox=\\"0 0 16 16\\" width=\\"16\\"><path fill-rule=\\"evenodd\\" d=\\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\\"></path></svg></a>Step 1: Create your Stencil routes</h2>\\n<p>To use Stencil from a server, we first need to <a href=\\"https://github.com/IBM-Swift/Kitura-StencilTemplateEngine#add-dependencies\\">add Kitura-StencilTemplateEngine to our dependencies</a>.</p>\\n<blockquote>\\n<p>If you don\'t have a server, follow our <a href=\\"../getting-started/create-server-cli\\">Create a server</a> guide.</p>\\n</blockquote>\\n<p>Next, we need to import the Stencil package:</p>\\n<div class=\\"gatsby-highlight\\" data-language=\\"swift\\"><pre class=\\"language-swift\\"><code class=\\"language-swift\\"><span class=\\"token keyword\\">import</span> <span class=\\"token builtin\\">Stencil</span></code></pre></div>\\n<p>Next, we need a file for our Stencil routes.</p>\\n<p>Open your <code class=\\"language-text\\">Application.swift</code> file:</p>\\n<div class=\\"gatsby-highlight\\" data-language=\\"text\\"><pre class=\\"language-text\\"><code class=\\"language-text\\">open Sources/Application/Application.swift</code></pre></div>\\n<p>Inside the <code class=\\"language-text\\">postInit()</code> function add:</p>\\n<div class=\\"gatsby-highlight\\" data-language=\\"swift\\"><pre class=\\"language-swift\\"><code class=\\"language-swift\\"><span class=\\"token function\\">initializeStencilRoutes</span><span class=\\"token punctuation\\">(</span>app<span class=\\"token punctuation\\">:</span> <span class=\\"token keyword\\">self</span><span class=\\"token punctuation\\">)</span></code></pre></div>\\n<p>Create a new file, called <code class=\\"language-text\\">StencilRoutes.swift</code>:</p>\\n<div class=\\"gatsby-highlight\\" data-language=\\"text\\"><pre class=\\"language-text\\"><code class=\\"language-text\\">touch Sources/Application/Routes/StencilRoutes.swift</code></pre></div>\\n<p>Open your <code class=\\"language-text\\">StencilRoutes.swift</code> file:</p>\\n<div class=\\"gatsby-highlight\\" data-language=\\"text\\"><pre class=\\"language-text\\"><code class=\\"language-text\\">open Sources/Application/Routes/StencilRoutes.swift</code></pre></div>\\n<p>Inside this file, add the framework for our routes code:</p>\\n<div class=\\"gatsby-highlight\\" data-language=\\"swift\\"><pre class=\\"language-swift\\"><code class=\\"language-swift\\"><span class=\\"token keyword\\">import</span> <span class=\\"token builtin\\">KituraStencil</span>\\n\\n<span class=\\"token keyword\\">func</span> <span class=\\"token function\\">initializeStencilRoutes</span><span class=\\"token punctuation\\">(</span>app<span class=\\"token punctuation\\">:</span> <span class=\\"token builtin\\">App</span><span class=\\"token punctuation\\">)</span> <span class=\\"token punctuation\\">{</span>\\n    <span class=\\"token comment\\">// register template engine here</span>\\n    app<span class=\\"token punctuation\\">.</span>router<span class=\\"token punctuation\\">.</span><span class=\\"token keyword\\">get</span><span class=\\"token punctuation\\">(</span><span class=\\"token string\\">\\"/stencil\\"</span><span class=\\"token punctuation\\">)</span> <span class=\\"token punctuation\\">{</span> request<span class=\\"token punctuation\\">,</span> response<span class=\\"token punctuation\\">,</span> next <span class=\\"token keyword\\">in</span>\\n        <span class=\\"token comment\\">// render response here</span>\\n        <span class=\\"token function\\">next</span><span class=\\"token punctuation\\">(</span><span class=\\"token punctuation\\">)</span>\\n    <span class=\\"token punctuation\\">}</span>\\n<span class=\\"token punctuation\\">}</span></code></pre></div>\\n<hr>\\n<h2 id=\\"step-2-add-a-stencil-template-engine\\"><a href=\\"#step-2-add-a-stencil-template-engine\\" aria-label=\\"step 2 add a stencil template engine permalink\\" class=\\"anchor\\"><svg aria-hidden=\\"true\\" focusable=\\"false\\" height=\\"16\\" version=\\"1.1\\" viewBox=\\"0 0 16 16\\" width=\\"16\\"><path fill-rule=\\"evenodd\\" d=\\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\\"></path></svg></a>Step 2: Add a Stencil template engine</h2>\\n<p>Next we\'ll register a Stencil temple engine to our router instance.</p>\\n<p>Open your <code class=\\"language-text\\">Application.swift</code> file:</p>\\n<div class=\\"gatsby-highlight\\" data-language=\\"text\\"><pre class=\\"language-text\\"><code class=\\"language-text\\">open Sources/Application/Application.swift</code></pre></div>\\n<p>Inside the <code class=\\"language-text\\">postInit()</code> function, below the line where we define the router, add:</p>\\n<div class=\\"gatsby-highlight\\" data-language=\\"swift\\"><pre class=\\"language-swift\\"><code class=\\"language-swift\\">app<span class=\\"token punctuation\\">.</span>router<span class=\\"token punctuation\\">.</span><span class=\\"token function\\">add</span><span class=\\"token punctuation\\">(</span>templateEngine<span class=\\"token punctuation\\">:</span> <span class=\\"token function\\">StencilTemplateEngine</span><span class=\\"token punctuation\\">(</span><span class=\\"token punctuation\\">)</span><span class=\\"token punctuation\\">)</span></code></pre></div>\\n<p>The above line of code tells the server that on this instance of the router we\'d like to use the Stencil template engine.</p>\\n<blockquote>\\n<p>Kitura supports multiple template engines being registered to a single instance of a router. By default each templating engine will handle files in the <code class=\\"language-text\\">./Views</code> directory that match the file extension it supports.</p>\\n</blockquote>\\n<p>We\'ve just added the Stencil template engine to our router, so now we can use it in a route.</p>\\n<p>Inside our get route, add the following:</p>\\n<div class=\\"gatsby-highlight\\" data-language=\\"swift\\"><pre class=\\"language-swift\\"><code class=\\"language-swift\\"><span class=\\"token keyword\\">let</span> book <span class=\\"token operator\\">=</span> <span class=\\"token function\\">Book</span><span class=\\"token punctuation\\">(</span>id<span class=\\"token punctuation\\">:</span> <span class=\\"token number\\">0</span><span class=\\"token punctuation\\">,</span> title<span class=\\"token punctuation\\">:</span> <span class=\\"token string\\">\\"A Game of Thrones\\"</span><span class=\\"token punctuation\\">,</span> price<span class=\\"token punctuation\\">:</span> <span class=\\"token number\\">14.99</span><span class=\\"token punctuation\\">,</span> genre<span class=\\"token punctuation\\">:</span> <span class=\\"token string\\">\\"fantasy\\"</span><span class=\\"token punctuation\\">)</span>\\n<span class=\\"token keyword\\">try</span> response<span class=\\"token punctuation\\">.</span><span class=\\"token function\\">render</span><span class=\\"token punctuation\\">(</span><span class=\\"token string\\">\\"book.stencil\\"</span><span class=\\"token punctuation\\">,</span> with<span class=\\"token punctuation\\">:</span> book<span class=\\"token punctuation\\">)</span></code></pre></div>\\n<p>Your completed <code class=\\"language-text\\">StencilRoutes.swift</code> should now look as follows:</p>\\n<div class=\\"gatsby-highlight\\" data-language=\\"swift\\"><pre class=\\"language-swift\\"><code class=\\"language-swift\\"><span class=\\"token keyword\\">import</span> <span class=\\"token builtin\\">KituraStencil</span>\\n\\n<span class=\\"token keyword\\">func</span> <span class=\\"token function\\">initializeStencilRoutes</span><span class=\\"token punctuation\\">(</span>app<span class=\\"token punctuation\\">:</span> <span class=\\"token builtin\\">App</span><span class=\\"token punctuation\\">)</span> <span class=\\"token punctuation\\">{</span>\\n    app<span class=\\"token punctuation\\">.</span>router<span class=\\"token punctuation\\">.</span><span class=\\"token function\\">add</span><span class=\\"token punctuation\\">(</span>templateEngine<span class=\\"token punctuation\\">:</span> <span class=\\"token function\\">StencilTemplateEngine</span><span class=\\"token punctuation\\">(</span><span class=\\"token punctuation\\">)</span><span class=\\"token punctuation\\">)</span>\\n    app<span class=\\"token punctuation\\">.</span>router<span class=\\"token punctuation\\">.</span><span class=\\"token keyword\\">get</span><span class=\\"token punctuation\\">(</span><span class=\\"token string\\">\\"/stencil\\"</span><span class=\\"token punctuation\\">)</span> <span class=\\"token punctuation\\">{</span> request<span class=\\"token punctuation\\">,</span> response<span class=\\"token punctuation\\">,</span> next <span class=\\"token keyword\\">in</span>\\n        <span class=\\"token keyword\\">let</span> book <span class=\\"token operator\\">=</span> <span class=\\"token function\\">Book</span><span class=\\"token punctuation\\">(</span>id<span class=\\"token punctuation\\">:</span> <span class=\\"token number\\">0</span><span class=\\"token punctuation\\">,</span> title<span class=\\"token punctuation\\">:</span> <span class=\\"token string\\">\\"A Game of Thrones\\"</span><span class=\\"token punctuation\\">,</span> price<span class=\\"token punctuation\\">:</span> <span class=\\"token number\\">14.99</span><span class=\\"token punctuation\\">,</span> genre<span class=\\"token punctuation\\">:</span> <span class=\\"token string\\">\\"fantasy\\"</span><span class=\\"token punctuation\\">)</span>\\n        <span class=\\"token keyword\\">try</span> response<span class=\\"token punctuation\\">.</span><span class=\\"token function\\">render</span><span class=\\"token punctuation\\">(</span><span class=\\"token string\\">\\"book.stencil\\"</span><span class=\\"token punctuation\\">,</span> with<span class=\\"token punctuation\\">:</span> book<span class=\\"token punctuation\\">)</span>\\n        <span class=\\"token function\\">next</span><span class=\\"token punctuation\\">(</span><span class=\\"token punctuation\\">)</span>\\n    <span class=\\"token punctuation\\">}</span>\\n<span class=\\"token punctuation\\">}</span></code></pre></div>\\n<p>The <code class=\\"language-text\\">response.render()</code> method attempts to populate the provided template file with the provided data.</p>\\n<p>In our case, the file <code class=\\"language-text\\">book.stencil</code> template will be populated with the <code class=\\"language-text\\">book</code> data and then rendered in the browser on <code class=\\"language-text\\">&quot;/book&quot;</code>.</p>\\n<p>This obviously will not work as we haven\'t created our <code class=\\"language-text\\">book.stencil</code> file.</p>\\n<hr>\\n<h2 id=\\"step-3-create-the-template-file\\"><a href=\\"#step-3-create-the-template-file\\" aria-label=\\"step 3 create the template file permalink\\" class=\\"anchor\\"><svg aria-hidden=\\"true\\" focusable=\\"false\\" height=\\"16\\" version=\\"1.1\\" viewBox=\\"0 0 16 16\\" width=\\"16\\"><path fill-rule=\\"evenodd\\" d=\\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\\"></path></svg></a>Step 3: Create the template file</h2>\\n<p>By default Kitura looks for template files in a <code class=\\"language-text\\">./Views</code> directory found at the root of the project.</p>\\n<blockquote>\\n<p>Typically the root of your project is where the <code class=\\"language-text\\">.xcodeproj</code> directory is.</p>\\n</blockquote>\\n<p>Once we are in the root of our project we can create the directory:</p>\\n<div class=\\"gatsby-highlight\\" data-language=\\"text\\"><pre class=\\"language-text\\"><code class=\\"language-text\\">mkdir Views</code></pre></div>\\n<p>Then we need to create our template file within the Views directory.</p>\\n<p>In a terminal run the following:</p>\\n<div class=\\"gatsby-highlight\\" data-language=\\"text\\"><pre class=\\"language-text\\"><code class=\\"language-text\\">cd Views &amp;&amp; touch book.stencil</code></pre></div>\\n<p>Now we have everything we need to start creating our templates.</p>\\n<p>The last thing we need to do is recreate our Xcode project:</p>\\n<div class=\\"gatsby-highlight\\" data-language=\\"text\\"><pre class=\\"language-text\\"><code class=\\"language-text\\">swift package generate-xcodeproj</code></pre></div>\\n<p>This is to enable Xcode to pick up the new directory we\'ve just added.</p>\\n<hr>\\n<h2 id=\\"step-4-populate-the-stencil-template-file\\"><a href=\\"#step-4-populate-the-stencil-template-file\\" aria-label=\\"step 4 populate the stencil template file permalink\\" class=\\"anchor\\"><svg aria-hidden=\\"true\\" focusable=\\"false\\" height=\\"16\\" version=\\"1.1\\" viewBox=\\"0 0 16 16\\" width=\\"16\\"><path fill-rule=\\"evenodd\\" d=\\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\\"></path></svg></a>Step 4: Populate the Stencil template file</h2>\\n<blockquote>\\n<p>Stencil is a templating language that has a lot of powerful features, you can learn about them in the <a href=\\"http://stencil.fuller.li/en/latest/\\">Stencil guide</a>.</p>\\n</blockquote>\\n<p>We first need some template code to populate.</p>\\n<p>Open the <code class=\\"language-text\\">book.stencil</code> file and add the following:</p>\\n<div class=\\"gatsby-highlight\\" data-language=\\"html\\"><pre class=\\"language-html\\"><code class=\\"language-html\\"><span class=\\"token tag\\"><span class=\\"token tag\\"><span class=\\"token punctuation\\">&lt;</span>html</span><span class=\\"token punctuation\\">></span></span>\\n  <span class=\\"token tag\\"><span class=\\"token tag\\"><span class=\\"token punctuation\\">&lt;</span>p</span><span class=\\"token punctuation\\">></span></span> Id: {{ id }} <span class=\\"token tag\\"><span class=\\"token tag\\"><span class=\\"token punctuation\\">&lt;/</span>p</span><span class=\\"token punctuation\\">></span></span>\\n  <span class=\\"token tag\\"><span class=\\"token tag\\"><span class=\\"token punctuation\\">&lt;</span>p</span><span class=\\"token punctuation\\">></span></span> Title: {{ title }} <span class=\\"token tag\\"><span class=\\"token tag\\"><span class=\\"token punctuation\\">&lt;/</span>p</span><span class=\\"token punctuation\\">></span></span>\\n  <span class=\\"token tag\\"><span class=\\"token tag\\"><span class=\\"token punctuation\\">&lt;</span>p</span><span class=\\"token punctuation\\">></span></span> Price: {{ price }} <span class=\\"token tag\\"><span class=\\"token tag\\"><span class=\\"token punctuation\\">&lt;/</span>p</span><span class=\\"token punctuation\\">></span></span>\\n  <span class=\\"token tag\\"><span class=\\"token tag\\"><span class=\\"token punctuation\\">&lt;</span>p</span><span class=\\"token punctuation\\">></span></span> Genre: {{ genre }} <span class=\\"token tag\\"><span class=\\"token tag\\"><span class=\\"token punctuation\\">&lt;/</span>p</span><span class=\\"token punctuation\\">></span></span>\\n<span class=\\"token tag\\"><span class=\\"token tag\\"><span class=\\"token punctuation\\">&lt;/</span>html</span><span class=\\"token punctuation\\">></span></span></code></pre></div>\\n<p>Now to test our templating, we first need to start the Kitura server.</p>\\n<p>Then in a browser open: <a href=\\"http://localhost:8080/stencil\\" target=\\"blank\\">localhost:8080/stencil</a></p>\\n<p>In the browser we should see:</p>\\n<div class=\\"gatsby-highlight\\" data-language=\\"text\\"><pre class=\\"language-text\\"><code class=\\"language-text\\">Id: 0\\n\\nTitle: A Game of Thrones\\n\\nPrice: 14.99\\n\\nGenre: &quot;fantasy&quot;</code></pre></div>\\n<p>That\'s it! We\'ve just rendered a simple data type in the browser using Kitura Stencil.</p>","frontmatter":{"path":"/docs/web/stencil","title":"Kitura Stencil"}}},{"node":{"html":"<h1 id=\\"what-are-web-applications\\"><a href=\\"#what-are-web-applications\\" aria-label=\\"what are web applications permalink\\" class=\\"anchor\\"><svg aria-hidden=\\"true\\" focusable=\\"false\\" height=\\"16\\" version=\\"1.1\\" viewBox=\\"0 0 16 16\\" width=\\"16\\"><path fill-rule=\\"evenodd\\" d=\\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\\"></path></svg></a>What are Web Applications?</h1>\\n<p>A web application is a client-server program, which the client runs in a web browser. The server processes incoming requests and determines what should be returned to the user. The client browser then renders the response, which is usually HTML, CSS and JavaScript, to present the information in a human readable format.</p>\\n<p>Kitura supports being used as the server for a web application, and provides the following features:</p>\\n<blockquote>\\n<p>Since web applications are a non-RESTful API, we will need Raw routing to use these features.</p>\\n</blockquote>\\n<hr>\\n<h2 id=\\"serving-static-files\\"><a href=\\"#serving-static-files\\" aria-label=\\"serving static files permalink\\" class=\\"anchor\\"><svg aria-hidden=\\"true\\" focusable=\\"false\\" height=\\"16\\" version=\\"1.1\\" viewBox=\\"0 0 16 16\\" width=\\"16\\"><path fill-rule=\\"evenodd\\" d=\\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\\"></path></svg></a>Serving static files</h2>\\n<p>If you want to provide a file to the user that will not change based on the state of the server, you can use Kitura\'s built-in static file server middleware. This will return the file that is stored at the requested URL. This is useful for providing images, CSS files, JavaScript files, or a static HTML webpage.</p>\\n<h2 id=\\"templating\\"><a href=\\"#templating\\" aria-label=\\"templating permalink\\" class=\\"anchor\\"><svg aria-hidden=\\"true\\" focusable=\\"false\\" height=\\"16\\" version=\\"1.1\\" viewBox=\\"0 0 16 16\\" width=\\"16\\"><path fill-rule=\\"evenodd\\" d=\\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\\"></path></svg></a>Templating</h2>\\n<p>Templating is the process of creating template files that are reusable and populated at runtime using a Template Engine with values determined by your application logic.</p>\\n<p>Template files are files that contain placeholder values, such as:</p>\\n<div class=\\"gatsby-highlight\\" data-language=\\"text\\"><pre class=\\"language-text\\"><code class=\\"language-text\\">{{ yourVariableName }}</code></pre></div>\\n<p>It is these placeholder values that are replaced by the Template Engine.</p>\\n<p>A Template Engine executes the actual replacement of the variables within the template file. A template engine also transforms the template file into an HTML file which is then sent to the client. Template engines support more than just simply replacing values, they can also handle looping and conditional logic such as for loops and if statements. This makes template engines a good choice for creating HTML files.</p>\\n<p>A simple example of this is imagine you\'re creating a website. This website could have 5, 10, 15 or more pages but some things are consistent across these pages. Typically you may want to keep the header and footer the same across all pages but writing out code for the header and footer for each of these pages would be tedious. What happens if you need to change something in the header you would need to change this on every page of your website. Templating provides a simple solution to this problem. You can create a template file that contains the code for your header and footer but the main content section is determined at runtime using the template engine. An example of this template file using Stencil could look as follows:</p>\\n<div class=\\"gatsby-highlight\\" data-language=\\"html\\"><pre class=\\"language-html\\"><code class=\\"language-html\\"><span class=\\"token doctype\\">&lt;!DOCTYPE html></span>\\n<span class=\\"token tag\\"><span class=\\"token tag\\"><span class=\\"token punctuation\\">&lt;</span>html</span> <span class=\\"token attr-name\\">lang</span><span class=\\"token attr-value\\"><span class=\\"token punctuation\\">=</span><span class=\\"token punctuation\\">\\"</span>en<span class=\\"token punctuation\\">\\"</span></span> <span class=\\"token attr-name\\">dir</span><span class=\\"token attr-value\\"><span class=\\"token punctuation\\">=</span><span class=\\"token punctuation\\">\\"</span>ltr<span class=\\"token punctuation\\">\\"</span></span><span class=\\"token punctuation\\">></span></span>\\n  <span class=\\"token tag\\"><span class=\\"token tag\\"><span class=\\"token punctuation\\">&lt;</span>head</span><span class=\\"token punctuation\\">></span></span>\\n    <span class=\\"token tag\\"><span class=\\"token tag\\"><span class=\\"token punctuation\\">&lt;</span>meta</span> <span class=\\"token attr-name\\">charset</span><span class=\\"token attr-value\\"><span class=\\"token punctuation\\">=</span><span class=\\"token punctuation\\">\\"</span>utf-8<span class=\\"token punctuation\\">\\"</span></span><span class=\\"token punctuation\\">></span></span>\\n    <span class=\\"token tag\\"><span class=\\"token tag\\"><span class=\\"token punctuation\\">&lt;</span>title</span><span class=\\"token punctuation\\">></span></span>An Example of Templating<span class=\\"token tag\\"><span class=\\"token tag\\"><span class=\\"token punctuation\\">&lt;/</span>title</span><span class=\\"token punctuation\\">></span></span>\\n  <span class=\\"token tag\\"><span class=\\"token tag\\"><span class=\\"token punctuation\\">&lt;/</span>head</span><span class=\\"token punctuation\\">></span></span>\\n  <span class=\\"token tag\\"><span class=\\"token tag\\"><span class=\\"token punctuation\\">&lt;</span>body</span><span class=\\"token punctuation\\">></span></span>\\n    <span class=\\"token tag\\"><span class=\\"token tag\\"><span class=\\"token punctuation\\">&lt;</span>header</span><span class=\\"token punctuation\\">></span></span>\\n      <span class=\\"token tag\\"><span class=\\"token tag\\"><span class=\\"token punctuation\\">&lt;</span>h1</span><span class=\\"token punctuation\\">></span></span>Name<span class=\\"token tag\\"><span class=\\"token tag\\"><span class=\\"token punctuation\\">&lt;/</span>h1</span><span class=\\"token punctuation\\">></span></span>\\n      <span class=\\"token tag\\"><span class=\\"token tag\\"><span class=\\"token punctuation\\">&lt;</span>nav</span><span class=\\"token punctuation\\">></span></span>\\n        <span class=\\"token tag\\"><span class=\\"token tag\\"><span class=\\"token punctuation\\">&lt;</span>li</span><span class=\\"token punctuation\\">></span></span>Home<span class=\\"token tag\\"><span class=\\"token tag\\"><span class=\\"token punctuation\\">&lt;/</span>li</span><span class=\\"token punctuation\\">></span></span>\\n        <span class=\\"token tag\\"><span class=\\"token tag\\"><span class=\\"token punctuation\\">&lt;</span>li</span><span class=\\"token punctuation\\">></span></span>About<span class=\\"token tag\\"><span class=\\"token tag\\"><span class=\\"token punctuation\\">&lt;/</span>li</span><span class=\\"token punctuation\\">></span></span>\\n        <span class=\\"token tag\\"><span class=\\"token tag\\"><span class=\\"token punctuation\\">&lt;</span>li</span><span class=\\"token punctuation\\">></span></span>Contact<span class=\\"token tag\\"><span class=\\"token tag\\"><span class=\\"token punctuation\\">&lt;/</span>li</span><span class=\\"token punctuation\\">></span></span>\\n      <span class=\\"token tag\\"><span class=\\"token tag\\"><span class=\\"token punctuation\\">&lt;/</span>nav</span><span class=\\"token punctuation\\">></span></span>\\n    <span class=\\"token tag\\"><span class=\\"token tag\\"><span class=\\"token punctuation\\">&lt;/</span>header</span><span class=\\"token punctuation\\">></span></span>\\n\\n    <span class=\\"token tag\\"><span class=\\"token tag\\"><span class=\\"token punctuation\\">&lt;</span>main</span><span class=\\"token punctuation\\">></span></span>\\n\\n      {% block content %}{% endblock %}\\n\\n    <span class=\\"token tag\\"><span class=\\"token tag\\"><span class=\\"token punctuation\\">&lt;/</span>main</span><span class=\\"token punctuation\\">></span></span>\\n\\n    <span class=\\"token tag\\"><span class=\\"token tag\\"><span class=\\"token punctuation\\">&lt;</span>footer</span><span class=\\"token punctuation\\">></span></span>\\n      <span class=\\"token tag\\"><span class=\\"token tag\\"><span class=\\"token punctuation\\">&lt;</span>p</span><span class=\\"token punctuation\\">></span></span>Lorem ipsum dolor sit amet, consectetur adipisicing elit<span class=\\"token tag\\"><span class=\\"token tag\\"><span class=\\"token punctuation\\">&lt;/</span>p</span><span class=\\"token punctuation\\">></span></span>\\n      <span class=\\"token tag\\"><span class=\\"token tag\\"><span class=\\"token punctuation\\">&lt;</span>nav</span><span class=\\"token punctuation\\">></span></span>\\n        <span class=\\"token tag\\"><span class=\\"token tag\\"><span class=\\"token punctuation\\">&lt;</span>li</span><span class=\\"token punctuation\\">></span></span>Link1<span class=\\"token tag\\"><span class=\\"token tag\\"><span class=\\"token punctuation\\">&lt;/</span>li</span><span class=\\"token punctuation\\">></span></span>\\n        <span class=\\"token tag\\"><span class=\\"token tag\\"><span class=\\"token punctuation\\">&lt;</span>li</span><span class=\\"token punctuation\\">></span></span>Link2<span class=\\"token tag\\"><span class=\\"token tag\\"><span class=\\"token punctuation\\">&lt;/</span>li</span><span class=\\"token punctuation\\">></span></span>\\n        <span class=\\"token tag\\"><span class=\\"token tag\\"><span class=\\"token punctuation\\">&lt;</span>li</span><span class=\\"token punctuation\\">></span></span>Link3<span class=\\"token tag\\"><span class=\\"token tag\\"><span class=\\"token punctuation\\">&lt;/</span>li</span><span class=\\"token punctuation\\">></span></span>\\n      <span class=\\"token tag\\"><span class=\\"token tag\\"><span class=\\"token punctuation\\">&lt;/</span>nav</span><span class=\\"token punctuation\\">></span></span>\\n    <span class=\\"token tag\\"><span class=\\"token tag\\"><span class=\\"token punctuation\\">&lt;/</span>footer</span><span class=\\"token punctuation\\">></span></span>\\n  <span class=\\"token tag\\"><span class=\\"token tag\\"><span class=\\"token punctuation\\">&lt;/</span>body</span><span class=\\"token punctuation\\">></span></span>\\n<span class=\\"token tag\\"><span class=\\"token tag\\"><span class=\\"token punctuation\\">&lt;/</span>html</span><span class=\\"token punctuation\\">></span></span></code></pre></div>\\n<p>You could reuse this template file to generate every page on your website, but the code for your header and footer would be in a single location. This is a simple example but it illustrates how powerful templating can be when creating web applications.</p>\\n<p>Here is a list of Template Engines Kitura works with:</p>\\n<ul>\\n<li><a href=\\"https://github.com/stencilproject/Stencil\\">Stencil</a> using the <a href=\\"https://github.com/IBM-Swift/Kitura-StencilTemplateEngine\\">Kitura-StencilTemplateEngine</a> plugin.</li>\\n<li><a href=\\"https://daringfireball.net/projects/markdown/\\">Markdown</a> using the <a href=\\"https://github.com/IBM-Swift/Kitura-Markdown\\">Kitura-Markdown</a> plugin.</li>\\n</ul>\\n<h2 id=\\"next-steps\\"><a href=\\"#next-steps\\" aria-label=\\"next steps permalink\\" class=\\"anchor\\"><svg aria-hidden=\\"true\\" focusable=\\"false\\" height=\\"16\\" version=\\"1.1\\" viewBox=\\"0 0 16 16\\" width=\\"16\\"><path fill-rule=\\"evenodd\\" d=\\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\\"></path></svg></a>Next steps</h2>\\n<p><a href=\\"./static-file-server\\">StaticFileServer</a>: Learn how to serve static files from a Kitura server.</p>\\n<p><a href=\\"./stencil\\">Stencil</a>: Learn how to add Stencil templating to your Kitura application.</p>\\n<p><a href=\\"./markdown\\">Markdown</a>: Learn how to add Markdown templating to your Kitura application.</p>","frontmatter":{"path":"/docs/web/what-is-templating","title":"What are Web Applications?"}}},{"node":{"html":"<h1 id=\\"what-are-websockets\\"><a href=\\"#what-are-websockets\\" aria-label=\\"what are websockets permalink\\" class=\\"anchor\\"><svg aria-hidden=\\"true\\" focusable=\\"false\\" height=\\"16\\" version=\\"1.1\\" viewBox=\\"0 0 16 16\\" width=\\"16\\"><path fill-rule=\\"evenodd\\" d=\\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\\"></path></svg></a>What are WebSockets?</h1>\\n<p>In the early days of the web, a client and server relationship was viewed as following a single direction of workflow, the client would send a request to the server and the server would respond to the client with the data requested. However, as time progressed, this relationship evolved into one that became bidirectional, with both the client and server sending and receiving data to and from each other.</p>\\n<p>WebSockets were created as a way of providing a low latency persistent connection that is bidirectional between a client and a server. They are low latency as there is no need to send lots of headers that typical HTTP requests consist of. A WebSocket connection is created with a WebSocket handshake, this involves the client sending an initial HTTP request including an Upgrade\' header to which, if the server supports the protocol, it agrees with the request and sends back its own \'Upgrade\' header in response. After a successful handshake, the established connection uses the WebSocket protocol \'ws\'.</p>\\n<p><span\\n      class=\\"gatsby-resp-image-wrapper\\"\\n      style=\\"position: relative; display: block; margin-left: auto; margin-right: auto;  max-width: 300px;\\"\\n    >\\n      <a\\n    class=\\"gatsby-resp-image-link\\"\\n    href=\\"/static/601427ba13b5a28e0b13ee939c4730f7/135ae/websocket.png\\"\\n    style=\\"display: block\\"\\n    target=\\"_blank\\"\\n    rel=\\"noopener\\"\\n  >\\n    <span\\n    class=\\"gatsby-resp-image-background-image\\"\\n    style=\\"padding-bottom: 67%; position: relative; bottom: 0; left: 0; background-image: url(\'data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAANCAYAAACpUE5eAAAACXBIWXMAAAsSAAALEgHS3X78AAACWklEQVQ4y21T2XLiMBDM/3/O7n7A5iGQEwLESTABzGF835Iv2eodCZwiVTtVXVhCbnf3jG6klNBoYsjKBdBhqKYVMMw9yrKC7M/7D/dj/Pn9C0+Pj7gfj3F7+xfz+QxukGB78HAj6ZAUBWS2gCyWKCILZXMmZLyC7Ybn57JFlJXwohxlVaPrBJqmQV3XEELoM9u9eyGsQ8jkhd76RMt9ZLwntAgShiBKUdUNNnsHnDPkBcPhFKLvJa5LiI72AyJUVtkXqTPBMh9FJbUaVgns3Qyj+QnP7zbGozs8PT/jdTrBZGagbrofhF3XYW/7REi5yXSiFfLcA3GRIoGiFLBOGV6XDty4wtba4d0wsDKX8Ml2K3qUdYuYYkiLitaDQmW58ihDA6iPaBuOhAnkXCDNSwRhohX4MYPoJO3XiFNO/3GcvBicGpakBQ5OdEVYe+izOZHOkIQ7VO3ZBi9rHOmgqjBlWB9C2F6q12vLxt1ohMnkRccwe/vEyhqa0reU4YqyXKt4v3NRX1dNSUhNEOfUiI7UMSQZ1zZN8wsf7waWyw84fkKEzqAw0Opk9oayCMBqqUOPyNrXPsTrm4mHh3tMp1ON1eZA+Qk9QoxcRPQRN8jITXghbCLI3NCkBXU6K3vdZZXbcuvj6CZYLOaazDRN3ZS+76l5LaktkbNar/e2ylDdEj3cjFBezMpvy7ujRzeG5pJeUhWTXT6EfFWKfLU9XQgHUoXLehjc9c6BuTkSbMw/LP17dHxS4/3A4tNClrMrwv9gUKrGIklzpFlByBEnGSE/g/bDWN2ms4N/Fp3cwhSzLakAAAAASUVORK5CYII=\'); background-size: cover; display: block;\\"\\n  ></span>\\n  <img\\n        class=\\"gatsby-resp-image-image\\"\\n        alt=\\"Websocket Picture\\"\\n        title=\\"Websocket Picture\\"\\n        src=\\"/static/601427ba13b5a28e0b13ee939c4730f7/135ae/websocket.png\\"\\n        srcset=\\"/static/601427ba13b5a28e0b13ee939c4730f7/135ae/websocket.png 300w\\"\\n        sizes=\\"(max-width: 300px) 100vw, 300px\\"\\n        loading=\\"lazy\\"\\n      />\\n  </a>\\n    </span></p>\\n<p>WebSockets send data using a frame-based messaging system that helps reduce the amount of non-payload data that is transferred. Data is transferred as messages that consist of one or more frames containing the payload. Each frame is prefixed with 4-12 bytes of data about the payload so that it can be reconstructed properly. This is useful as the server or client can transfer as much data as they like without all the header overheads that come with traditional HTTP requests.</p>\\n<hr>\\n<h2 id=\\"kitura-websockets\\"><a href=\\"#kitura-websockets\\" aria-label=\\"kitura websockets permalink\\" class=\\"anchor\\"><svg aria-hidden=\\"true\\" focusable=\\"false\\" height=\\"16\\" version=\\"1.1\\" viewBox=\\"0 0 16 16\\" width=\\"16\\"><path fill-rule=\\"evenodd\\" d=\\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\\"></path></svg></a>Kitura WebSockets</h2>\\n<p><a href=\\"https://github.com/IBM-Swift/Kitura-WebSocket\\">Kitura-WebSocket</a> and <a href=\\"https://github.com/IBM-Swift/Kitura-WebSocket-NIO\\">Kitura-WebSocket-NIO</a> are two packages that enable WebSocket support for Kitura. They support version thirteen of the WebSocket protocol and are compatible with a variety of WebSocket clients, including: Built in WebSocket support for browsers (Chrome, FireFox and Safari) and the NPM WebSocket package. Both packages also support the WS and WSS (SSL/TLS secured WS) protocols.</p>\\n<hr>\\n<h2 id=\\"next-steps\\"><a href=\\"#next-steps\\" aria-label=\\"next steps permalink\\" class=\\"anchor\\"><svg aria-hidden=\\"true\\" focusable=\\"false\\" height=\\"16\\" version=\\"1.1\\" viewBox=\\"0 0 16 16\\" width=\\"16\\"><path fill-rule=\\"evenodd\\" d=\\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\\"></path></svg></a>Next steps</h2>\\n<p><a href=\\"./echo-server\\">Try out</a> creating a simple Echo Server using Kitura WebSockets.</p>","frontmatter":{"path":"/docs/websockets/websockets","title":"What are WebSockets?"}}},{"node":{"html":"<h1 id=\\"echo-server\\"><a href=\\"#echo-server\\" aria-label=\\"echo server permalink\\" class=\\"anchor\\"><svg aria-hidden=\\"true\\" focusable=\\"false\\" height=\\"16\\" version=\\"1.1\\" viewBox=\\"0 0 16 16\\" width=\\"16\\"><path fill-rule=\\"evenodd\\" d=\\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\\"></path></svg></a>Echo Server</h1>\\n<p>The application we are going to create is a very simple Echo Server, this is a server that will receive a message from a client and then echo back the same message to all clients connected to the server, this is the simplest implementation of WebSockets.</p>\\n<hr>\\n<h2 id=\\"step-1-pre-requisites\\"><a href=\\"#step-1-pre-requisites\\" aria-label=\\"step 1 pre requisites permalink\\" class=\\"anchor\\"><svg aria-hidden=\\"true\\" focusable=\\"false\\" height=\\"16\\" version=\\"1.1\\" viewBox=\\"0 0 16 16\\" width=\\"16\\"><path fill-rule=\\"evenodd\\" d=\\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\\"></path></svg></a>Step 1: Pre-requisites</h2>\\n<p>Before creating the server, we need to make sure everything is set up correctly, <a href=\\"https://nodejs.org/en/\\">Node.js</a> must be installed and the project directories should be created with this terminal command:</p>\\n<div class=\\"gatsby-highlight\\" data-language=\\"text\\"><pre class=\\"language-text\\"><code class=\\"language-text\\">mkdir EchoServer\\ncd EchoServer\\ntouch Package.swift\\nmkdir Sources\\ncd Sources\\nmkdir ChatServer\\ncd ChatServer\\ntouch ChatService.swift\\ntouch main.swift</code></pre></div>\\n<blockquote>\\n<p>You can use Swift for the client, however for simplicitiy we are using Node.js in this example.</p>\\n</blockquote>\\n<hr>\\n<h2 id=\\"step-2-setting-up-the-server\\"><a href=\\"#step-2-setting-up-the-server\\" aria-label=\\"step 2 setting up the server permalink\\" class=\\"anchor\\"><svg aria-hidden=\\"true\\" focusable=\\"false\\" height=\\"16\\" version=\\"1.1\\" viewBox=\\"0 0 16 16\\" width=\\"16\\"><path fill-rule=\\"evenodd\\" d=\\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\\"></path></svg></a>Step 2: Setting up the Server</h2>\\n<p>Add the following content to your <code class=\\"language-text\\">Package.swift</code> file, replacing \\"x.x.x\\" with the latest releases of <a href=\\"https://github.com/IBM-Swift/Kitura/releases\\">Kitura</a>, <a href=\\"https://github.com/IBM-Swift/HeliumLogger/releases\\">HeliumLogger</a>, <a href=\\"https://github.com/IBM-Swift/Kitura-WebSocket/releases\\">Kitura-WebSocket</a> and <a href=\\"https://github.com/IBM-Swift/Kitura-WebSocket-NIO/releases\\">Kitura-WebSocket-NIO</a>:</p>\\n<div class=\\"gatsby-highlight\\" data-language=\\"swift\\"><pre class=\\"language-swift\\"><code class=\\"language-swift\\"><span class=\\"token keyword\\">import</span> <span class=\\"token builtin\\">PackageDescription</span>\\n\\n<span class=\\"token keyword\\">let</span> package <span class=\\"token operator\\">=</span> <span class=\\"token function\\">Package</span><span class=\\"token punctuation\\">(</span>\\n    name<span class=\\"token punctuation\\">:</span> <span class=\\"token string\\">\\"ChatServer\\"</span><span class=\\"token punctuation\\">,</span>\\n    dependencies<span class=\\"token punctuation\\">:</span> <span class=\\"token punctuation\\">[</span>\\n         <span class=\\"token punctuation\\">.</span><span class=\\"token function\\">package</span><span class=\\"token punctuation\\">(</span>url<span class=\\"token punctuation\\">:</span> <span class=\\"token string\\">\\"https://github.com/IBM-Swift/Kitura.git\\"</span><span class=\\"token punctuation\\">,</span> <span class=\\"token punctuation\\">.</span><span class=\\"token function\\">upToNextMinor</span><span class=\\"token punctuation\\">(</span>from<span class=\\"token punctuation\\">:</span> <span class=\\"token string\\">\\"x.x.x\\"</span><span class=\\"token punctuation\\">)</span><span class=\\"token punctuation\\">)</span><span class=\\"token punctuation\\">,</span>\\n         <span class=\\"token punctuation\\">.</span><span class=\\"token function\\">package</span><span class=\\"token punctuation\\">(</span>url<span class=\\"token punctuation\\">:</span> <span class=\\"token string\\">\\"https://github.com/IBM-Swift/HeliumLogger.git\\"</span><span class=\\"token punctuation\\">,</span> from<span class=\\"token punctuation\\">:</span> <span class=\\"token string\\">\\"x.x.x\\"</span><span class=\\"token punctuation\\">)</span><span class=\\"token punctuation\\">,</span>\\n    <span class=\\"token punctuation\\">]</span><span class=\\"token punctuation\\">,</span>\\n    targets<span class=\\"token punctuation\\">:</span> <span class=\\"token punctuation\\">[</span>\\n        <span class=\\"token punctuation\\">.</span><span class=\\"token function\\">target</span><span class=\\"token punctuation\\">(</span>\\n            name<span class=\\"token punctuation\\">:</span> <span class=\\"token string\\">\\"ChatServer\\"</span><span class=\\"token punctuation\\">,</span>\\n            dependencies<span class=\\"token punctuation\\">:</span> <span class=\\"token punctuation\\">[</span><span class=\\"token string\\">\\"Kitura\\"</span><span class=\\"token punctuation\\">,</span> <span class=\\"token string\\">\\"HeliumLogger\\"</span><span class=\\"token punctuation\\">,</span> <span class=\\"token string\\">\\"Kitura-WebSocket\\"</span><span class=\\"token punctuation\\">]</span><span class=\\"token punctuation\\">)</span><span class=\\"token punctuation\\">,</span>\\n    <span class=\\"token punctuation\\">]</span>\\n\\n<span class=\\"token comment\\">// Use alternate implementation of Kitura-WebSocket while building in NIO mode</span>\\n<span class=\\"token keyword\\">if</span> <span class=\\"token builtin\\">ProcessInfo</span><span class=\\"token punctuation\\">.</span>processInfo<span class=\\"token punctuation\\">.</span>environment<span class=\\"token punctuation\\">[</span><span class=\\"token string\\">\\"KITURA_NIO\\"</span><span class=\\"token punctuation\\">]</span> <span class=\\"token operator\\">!=</span> <span class=\\"token constant\\">nil</span> <span class=\\"token punctuation\\">{</span>\\n    dependencies<span class=\\"token punctuation\\">.</span><span class=\\"token function\\">append</span><span class=\\"token punctuation\\">(</span><span class=\\"token punctuation\\">.</span><span class=\\"token function\\">package</span><span class=\\"token punctuation\\">(</span>url<span class=\\"token punctuation\\">:</span>  <span class=\\"token string\\">\\"https://github.com/IBM-Swift/Kitura-WebSocket-NIO.git\\"</span><span class=\\"token punctuation\\">,</span> from<span class=\\"token punctuation\\">:</span> <span class=\\"token string\\">\\"x.x.x\\"</span><span class=\\"token punctuation\\">)</span><span class=\\"token punctuation\\">)</span>\\n<span class=\\"token punctuation\\">}</span> <span class=\\"token keyword\\">else</span> <span class=\\"token punctuation\\">{</span>\\n    dependencies<span class=\\"token punctuation\\">.</span><span class=\\"token function\\">append</span><span class=\\"token punctuation\\">(</span><span class=\\"token punctuation\\">.</span><span class=\\"token function\\">package</span><span class=\\"token punctuation\\">(</span>url<span class=\\"token punctuation\\">:</span> <span class=\\"token string\\">\\"https://github.com/IBM-Swift/Kitura-WebSocket.git\\"</span><span class=\\"token punctuation\\">,</span> from<span class=\\"token punctuation\\">:</span> <span class=\\"token string\\">\\"x.x.x\\"</span><span class=\\"token punctuation\\">)</span><span class=\\"token punctuation\\">)</span>\\n<span class=\\"token punctuation\\">}</span>\\n\\n<span class=\\"token punctuation\\">)</span></code></pre></div>\\n<blockquote>\\n<p><a href=\\"/docs/configuring/swiftnio#using-kitura-websocket-nio\\">This code snippet</a> allows either <a href=\\"https://github.com/IBM-Swift/Kitura-WebSocket\\">Kitura-WebSocket</a> or <a href=\\"https://github.com/IBM-Swift/Kitura-WebSocket-NIO\\">Kitura-WebSocket-NIO</a> packages to be used.</p>\\n</blockquote>\\n<p>Add the following to your <code class=\\"language-text\\">ChatService.swift</code> file:</p>\\n<div class=\\"gatsby-highlight\\" data-language=\\"swift\\"><pre class=\\"language-swift\\"><code class=\\"language-swift\\"><span class=\\"token keyword\\">import</span> <span class=\\"token builtin\\">Foundation</span>\\n\\n<span class=\\"token keyword\\">import</span> <span class=\\"token builtin\\">KituraWebSocket</span>\\n\\n<span class=\\"token keyword\\">class</span> <span class=\\"token class-name\\">ChatService</span><span class=\\"token punctuation\\">:</span> <span class=\\"token builtin\\">WebSocketService</span> <span class=\\"token punctuation\\">{</span>\\n\\n    <span class=\\"token keyword\\">private</span> <span class=\\"token keyword\\">var</span> connections <span class=\\"token operator\\">=</span> <span class=\\"token punctuation\\">[</span><span class=\\"token builtin\\">String</span><span class=\\"token punctuation\\">:</span> <span class=\\"token builtin\\">WebSocketConnection</span><span class=\\"token punctuation\\">]</span><span class=\\"token punctuation\\">(</span><span class=\\"token punctuation\\">)</span>\\n\\n    <span class=\\"token keyword\\">let</span> connectionTimeout<span class=\\"token punctuation\\">:</span> <span class=\\"token builtin\\">Int</span><span class=\\"token operator\\">?</span> <span class=\\"token operator\\">=</span> <span class=\\"token number\\">60</span>\\n\\n    <span class=\\"token keyword\\">public</span> <span class=\\"token keyword\\">func</span> <span class=\\"token function\\">connected</span><span class=\\"token punctuation\\">(</span>connection<span class=\\"token punctuation\\">:</span> <span class=\\"token builtin\\">WebSocketConnection</span><span class=\\"token punctuation\\">)</span> <span class=\\"token punctuation\\">{</span>\\n        connections<span class=\\"token punctuation\\">[</span>connection<span class=\\"token punctuation\\">.</span>id<span class=\\"token punctuation\\">]</span> <span class=\\"token operator\\">=</span> connection\\n    <span class=\\"token punctuation\\">}</span>\\n\\n    <span class=\\"token keyword\\">public</span> <span class=\\"token keyword\\">func</span> <span class=\\"token function\\">disconnected</span><span class=\\"token punctuation\\">(</span>connection<span class=\\"token punctuation\\">:</span> <span class=\\"token builtin\\">WebSocketConnection</span><span class=\\"token punctuation\\">,</span> reason<span class=\\"token punctuation\\">:</span> <span class=\\"token builtin\\">WebSocketCloseReasonCode</span><span class=\\"token punctuation\\">)</span> <span class=\\"token punctuation\\">{</span>\\n        connections<span class=\\"token punctuation\\">.</span><span class=\\"token function\\">removeValue</span><span class=\\"token punctuation\\">(</span>forKey<span class=\\"token punctuation\\">:</span> connection<span class=\\"token punctuation\\">.</span>id<span class=\\"token punctuation\\">)</span>\\n    <span class=\\"token punctuation\\">}</span>\\n\\n    <span class=\\"token keyword\\">public</span> <span class=\\"token keyword\\">func</span> <span class=\\"token function\\">received</span><span class=\\"token punctuation\\">(</span>message<span class=\\"token punctuation\\">:</span> <span class=\\"token builtin\\">Data</span><span class=\\"token punctuation\\">,</span> from<span class=\\"token punctuation\\">:</span> <span class=\\"token builtin\\">WebSocketConnection</span><span class=\\"token punctuation\\">)</span> <span class=\\"token punctuation\\">{</span>\\n        from<span class=\\"token punctuation\\">.</span><span class=\\"token function\\">close</span><span class=\\"token punctuation\\">(</span>reason<span class=\\"token punctuation\\">:</span> <span class=\\"token punctuation\\">.</span>invalidDataType<span class=\\"token punctuation\\">,</span> description<span class=\\"token punctuation\\">:</span> <span class=\\"token string\\">\\"Chat-Server only accepts text messages\\"</span><span class=\\"token punctuation\\">)</span>\\n\\n        connections<span class=\\"token punctuation\\">.</span><span class=\\"token function\\">removeValue</span><span class=\\"token punctuation\\">(</span>forKey<span class=\\"token punctuation\\">:</span> from<span class=\\"token punctuation\\">.</span>id<span class=\\"token punctuation\\">)</span>\\n    <span class=\\"token punctuation\\">}</span>\\n\\n    <span class=\\"token keyword\\">public</span> <span class=\\"token keyword\\">func</span> <span class=\\"token function\\">received</span><span class=\\"token punctuation\\">(</span>message<span class=\\"token punctuation\\">:</span> <span class=\\"token builtin\\">String</span><span class=\\"token punctuation\\">,</span> from<span class=\\"token punctuation\\">:</span> <span class=\\"token builtin\\">WebSocketConnection</span><span class=\\"token punctuation\\">)</span> <span class=\\"token punctuation\\">{</span>\\n        <span class=\\"token keyword\\">for</span> <span class=\\"token punctuation\\">(</span>connectionId<span class=\\"token punctuation\\">,</span> connection<span class=\\"token punctuation\\">)</span> <span class=\\"token keyword\\">in</span> connections <span class=\\"token punctuation\\">{</span>\\n            <span class=\\"token keyword\\">if</span> connectionId <span class=\\"token operator\\">!=</span> from<span class=\\"token punctuation\\">.</span>id <span class=\\"token punctuation\\">{</span>\\n                connection<span class=\\"token punctuation\\">.</span><span class=\\"token function\\">send</span><span class=\\"token punctuation\\">(</span>message<span class=\\"token punctuation\\">:</span> message<span class=\\"token punctuation\\">)</span>\\n            <span class=\\"token punctuation\\">}</span>\\n        <span class=\\"token punctuation\\">}</span>\\n    <span class=\\"token punctuation\\">}</span>\\n  <span class=\\"token punctuation\\">}</span>\\n<span class=\\"token punctuation\\">}</span></code></pre></div>\\n<p>The class has a Dictionary, connections, which is used to keep track of the connections of all of the connected clients. The Dictionary is maintained by the connected and disconnected functions, which are, respectively, adding and removing connections from the dictionary.</p>\\n<p>The received function, which receives binary messages, is rejecting the message, closing the client connection and removing the connection from the set of known connections.</p>\\n<p>Lastly, the received function, which receives text messages, simply echoes the message received to all clients except the one who sent the message.</p>\\n<p>It should be noted that all of these functions can be invoked from many threads simultaneously. In real applications, one should add locking around the access of non-thread safe artifacts of the application such as the connections Dictionary in this very simplistic example.</p>\\n<p>Add the following to your <code class=\\"language-text\\">main.swift</code> file:</p>\\n<div class=\\"gatsby-highlight\\" data-language=\\"swift\\"><pre class=\\"language-swift\\"><code class=\\"language-swift\\"><span class=\\"token keyword\\">import</span> <span class=\\"token builtin\\">Foundation</span>\\n\\n<span class=\\"token keyword\\">import</span> <span class=\\"token builtin\\">KituraNet</span>\\n<span class=\\"token keyword\\">import</span> <span class=\\"token builtin\\">KituraWebSocket</span>\\n\\n<span class=\\"token keyword\\">import</span> <span class=\\"token builtin\\">HeliumLogger</span>\\n<span class=\\"token keyword\\">import</span> <span class=\\"token builtin\\">LoggerAPI</span>\\n\\n<span class=\\"token comment\\">// Using an implementation for a Logger</span>\\n<span class=\\"token builtin\\">HeliumLogger</span><span class=\\"token punctuation\\">.</span><span class=\\"token function\\">use</span><span class=\\"token punctuation\\">(</span><span class=\\"token punctuation\\">.</span>info<span class=\\"token punctuation\\">)</span>\\n\\n<span class=\\"token builtin\\">WebSocket</span><span class=\\"token punctuation\\">.</span><span class=\\"token function\\">register</span><span class=\\"token punctuation\\">(</span>service<span class=\\"token punctuation\\">:</span> <span class=\\"token function\\">ChatService</span><span class=\\"token punctuation\\">(</span><span class=\\"token punctuation\\">)</span><span class=\\"token punctuation\\">,</span> onPath<span class=\\"token punctuation\\">:</span> <span class=\\"token string\\">\\"chat\\"</span><span class=\\"token punctuation\\">)</span>\\n\\n<span class=\\"token keyword\\">class</span> <span class=\\"token class-name\\">ChatServerDelegate</span><span class=\\"token punctuation\\">:</span> <span class=\\"token builtin\\">ServerDelegate</span> <span class=\\"token punctuation\\">{</span>\\n    <span class=\\"token keyword\\">public</span> <span class=\\"token keyword\\">func</span> <span class=\\"token function\\">handle</span><span class=\\"token punctuation\\">(</span>request<span class=\\"token punctuation\\">:</span> <span class=\\"token builtin\\">ServerRequest</span><span class=\\"token punctuation\\">,</span> response<span class=\\"token punctuation\\">:</span> <span class=\\"token builtin\\">ServerResponse</span><span class=\\"token punctuation\\">)</span> <span class=\\"token punctuation\\">{</span><span class=\\"token punctuation\\">}</span>\\n<span class=\\"token punctuation\\">}</span>\\n\\n<span class=\\"token comment\\">// Add HTTP Server to listen on port 8080</span>\\n<span class=\\"token keyword\\">let</span> server <span class=\\"token operator\\">=</span> <span class=\\"token constant\\">HTTP</span><span class=\\"token punctuation\\">.</span><span class=\\"token function\\">createServer</span><span class=\\"token punctuation\\">(</span><span class=\\"token punctuation\\">)</span>\\nserver<span class=\\"token punctuation\\">.</span>delegate <span class=\\"token operator\\">=</span> <span class=\\"token function\\">ChatServerDelegate</span><span class=\\"token punctuation\\">(</span><span class=\\"token punctuation\\">)</span>\\n\\n<span class=\\"token keyword\\">do</span> <span class=\\"token punctuation\\">{</span>\\n    <span class=\\"token keyword\\">try</span> server<span class=\\"token punctuation\\">.</span><span class=\\"token function\\">listen</span><span class=\\"token punctuation\\">(</span>on<span class=\\"token punctuation\\">:</span> <span class=\\"token number\\">8080</span><span class=\\"token punctuation\\">)</span>\\n    <span class=\\"token builtin\\">ListenerGroup</span><span class=\\"token punctuation\\">.</span><span class=\\"token function\\">waitForListeners</span><span class=\\"token punctuation\\">(</span><span class=\\"token punctuation\\">)</span>\\n<span class=\\"token punctuation\\">}</span> <span class=\\"token keyword\\">catch</span> <span class=\\"token punctuation\\">{</span>\\n    <span class=\\"token builtin\\">Log</span><span class=\\"token punctuation\\">.</span><span class=\\"token function\\">error</span><span class=\\"token punctuation\\">(</span><span class=\\"token string\\">\\"Error listening on port 8080: <span class=\\"token interpolation\\"><span class=\\"token delimiter variable\\">\\\\(</span>error<span class=\\"token delimiter variable\\">)</span></span>.\\"</span><span class=\\"token punctuation\\">)</span>\\n<span class=\\"token punctuation\\">}</span></code></pre></div>\\n<p>The <code class=\\"language-text\\">HeliumLogger</code> is set up to log info, warning, and error type messages.</p>\\n<p>The ChatService defined in the <code class=\\"language-text\\">ChatService.swift</code> file is registered on the path chat.</p>\\n<p>An HTTP server is created and setup to listen on port 8080.</p>\\n<p>With this server set up clients should connect to the chat service as ws://host:8080/chat, where host is the host running the server.</p>\\n<hr>\\n<h2 id=\\"step-3-setting-up-the-client\\"><a href=\\"#step-3-setting-up-the-client\\" aria-label=\\"step 3 setting up the client permalink\\" class=\\"anchor\\"><svg aria-hidden=\\"true\\" focusable=\\"false\\" height=\\"16\\" version=\\"1.1\\" viewBox=\\"0 0 16 16\\" width=\\"16\\"><path fill-rule=\\"evenodd\\" d=\\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\\"></path></svg></a>Step 3: Setting up the Client</h2>\\n<p>The client has a simple command line interface. At startup one passes the host and port number. The client simply reads messages to be sent from the terminal and displays messages received on the terminal as well.</p>\\n<p>To create a new directory for the client, exit out of your server directory and run this terminal command:</p>\\n<div class=\\"gatsby-highlight\\" data-language=\\"text\\"><pre class=\\"language-text\\"><code class=\\"language-text\\">mkdir EchoClient\\ncd EchoClient\\ntouch package.json\\ntouch chat.js</code></pre></div>\\n<p>Add the following content to your <code class=\\"language-text\\">package.json</code> file:</p>\\n<div class=\\"gatsby-highlight\\" data-language=\\"json\\"><pre class=\\"language-json\\"><code class=\\"language-json\\"><span class=\\"token punctuation\\">{</span>\\n  <span class=\\"token property\\">\\"name\\"</span><span class=\\"token operator\\">:</span> <span class=\\"token string\\">\\"chat\\"</span><span class=\\"token punctuation\\">,</span>\\n  <span class=\\"token property\\">\\"description\\"</span><span class=\\"token operator\\">:</span> <span class=\\"token string\\">\\"Simple chat server client\\"</span><span class=\\"token punctuation\\">,</span>\\n  <span class=\\"token property\\">\\"version\\"</span><span class=\\"token operator\\">:</span> <span class=\\"token string\\">\\"0.0.1\\"</span><span class=\\"token punctuation\\">,</span>\\n  <span class=\\"token property\\">\\"engines\\"</span><span class=\\"token operator\\">:</span> <span class=\\"token punctuation\\">{</span>\\n    <span class=\\"token property\\">\\"node\\"</span><span class=\\"token operator\\">:</span> <span class=\\"token string\\">\\">=0.8.0\\"</span>\\n  <span class=\\"token punctuation\\">}</span><span class=\\"token punctuation\\">,</span>\\n  <span class=\\"token property\\">\\"dependencies\\"</span><span class=\\"token operator\\">:</span> <span class=\\"token punctuation\\">{</span>\\n    <span class=\\"token property\\">\\"websocket\\"</span><span class=\\"token operator\\">:</span> <span class=\\"token string\\">\\"^1.0.23\\"</span>\\n  <span class=\\"token punctuation\\">}</span>\\n<span class=\\"token punctuation\\">}</span></code></pre></div>\\n<p>Then add the following content to your <code class=\\"language-text\\">chat.js</code> file:</p>\\n<div class=\\"gatsby-highlight\\" data-language=\\"javascript\\"><pre class=\\"language-javascript\\"><code class=\\"language-javascript\\"><span class=\\"token comment\\">/* main file of Simple Chat Server Client */</span>\\n\\n<span class=\\"token keyword\\">var</span> readline <span class=\\"token operator\\">=</span> <span class=\\"token function\\">require</span><span class=\\"token punctuation\\">(</span><span class=\\"token string\\">\'readline\'</span><span class=\\"token punctuation\\">)</span><span class=\\"token punctuation\\">;</span>\\n<span class=\\"token keyword\\">var</span> WebSocketClient <span class=\\"token operator\\">=</span> <span class=\\"token function\\">require</span><span class=\\"token punctuation\\">(</span><span class=\\"token string\\">\'websocket\'</span><span class=\\"token punctuation\\">)</span><span class=\\"token punctuation\\">.</span>client\\n\\n<span class=\\"token keyword\\">var</span> host <span class=\\"token operator\\">=</span> process<span class=\\"token punctuation\\">.</span>argv<span class=\\"token punctuation\\">[</span><span class=\\"token number\\">2</span><span class=\\"token punctuation\\">]</span><span class=\\"token punctuation\\">;</span>\\n\\nrl <span class=\\"token operator\\">=</span> readline<span class=\\"token punctuation\\">.</span><span class=\\"token function\\">createInterface</span><span class=\\"token punctuation\\">(</span>process<span class=\\"token punctuation\\">.</span>stdin<span class=\\"token punctuation\\">,</span> process<span class=\\"token punctuation\\">.</span>stdout<span class=\\"token punctuation\\">)</span><span class=\\"token punctuation\\">;</span>\\n\\nrl<span class=\\"token punctuation\\">.</span><span class=\\"token function\\">setPrompt</span><span class=\\"token punctuation\\">(</span><span class=\\"token string\\">\'> \'</span><span class=\\"token punctuation\\">)</span><span class=\\"token punctuation\\">;</span>\\nrl<span class=\\"token punctuation\\">.</span><span class=\\"token function\\">prompt</span><span class=\\"token punctuation\\">(</span><span class=\\"token punctuation\\">)</span><span class=\\"token punctuation\\">;</span>\\n<span class=\\"token keyword\\">var</span> client <span class=\\"token operator\\">=</span> <span class=\\"token keyword\\">new</span> <span class=\\"token class-name\\">WebSocketClient</span><span class=\\"token punctuation\\">(</span><span class=\\"token punctuation\\">)</span><span class=\\"token punctuation\\">;</span>\\n\\nclient<span class=\\"token punctuation\\">.</span><span class=\\"token function\\">on</span><span class=\\"token punctuation\\">(</span><span class=\\"token string\\">\'connectFailed\'</span><span class=\\"token punctuation\\">,</span> <span class=\\"token keyword\\">function</span><span class=\\"token punctuation\\">(</span><span class=\\"token parameter\\">error</span><span class=\\"token punctuation\\">)</span> <span class=\\"token punctuation\\">{</span>\\n    console<span class=\\"token punctuation\\">.</span><span class=\\"token function\\">log</span><span class=\\"token punctuation\\">(</span><span class=\\"token string\\">\'Connect Error: \'</span> <span class=\\"token operator\\">+</span> error<span class=\\"token punctuation\\">.</span><span class=\\"token function\\">toString</span><span class=\\"token punctuation\\">(</span><span class=\\"token punctuation\\">)</span><span class=\\"token punctuation\\">)</span><span class=\\"token punctuation\\">;</span>\\n    process<span class=\\"token punctuation\\">.</span><span class=\\"token function\\">exit</span><span class=\\"token punctuation\\">(</span><span class=\\"token punctuation\\">)</span><span class=\\"token punctuation\\">;</span>\\n<span class=\\"token punctuation\\">}</span><span class=\\"token punctuation\\">)</span><span class=\\"token punctuation\\">;</span>\\n\\nclient<span class=\\"token punctuation\\">.</span><span class=\\"token function\\">on</span><span class=\\"token punctuation\\">(</span><span class=\\"token string\\">\'connect\'</span><span class=\\"token punctuation\\">,</span> <span class=\\"token keyword\\">function</span><span class=\\"token punctuation\\">(</span><span class=\\"token parameter\\">connection</span><span class=\\"token punctuation\\">)</span> <span class=\\"token punctuation\\">{</span>\\n    connection<span class=\\"token punctuation\\">.</span><span class=\\"token function\\">on</span><span class=\\"token punctuation\\">(</span><span class=\\"token string\\">\'error\'</span><span class=\\"token punctuation\\">,</span> <span class=\\"token keyword\\">function</span><span class=\\"token punctuation\\">(</span><span class=\\"token parameter\\">error</span><span class=\\"token punctuation\\">)</span> <span class=\\"token punctuation\\">{</span>\\n        console<span class=\\"token punctuation\\">.</span><span class=\\"token function\\">log</span><span class=\\"token punctuation\\">(</span><span class=\\"token string\\">\\"Connection Error: \\"</span> <span class=\\"token operator\\">+</span> error<span class=\\"token punctuation\\">.</span><span class=\\"token function\\">toString</span><span class=\\"token punctuation\\">(</span><span class=\\"token punctuation\\">)</span><span class=\\"token punctuation\\">)</span><span class=\\"token punctuation\\">;</span>\\n        process<span class=\\"token punctuation\\">.</span><span class=\\"token function\\">exit</span><span class=\\"token punctuation\\">(</span><span class=\\"token punctuation\\">)</span><span class=\\"token punctuation\\">;</span>\\n    <span class=\\"token punctuation\\">}</span><span class=\\"token punctuation\\">)</span><span class=\\"token punctuation\\">;</span>\\n\\n    connection<span class=\\"token punctuation\\">.</span><span class=\\"token function\\">on</span><span class=\\"token punctuation\\">(</span><span class=\\"token string\\">\'close\'</span><span class=\\"token punctuation\\">,</span> <span class=\\"token keyword\\">function</span><span class=\\"token punctuation\\">(</span><span class=\\"token parameter\\">reasonCode<span class=\\"token punctuation\\">,</span> description</span><span class=\\"token punctuation\\">)</span> <span class=\\"token punctuation\\">{</span>\\n        console<span class=\\"token punctuation\\">.</span><span class=\\"token function\\">log</span><span class=\\"token punctuation\\">(</span><span class=\\"token string\\">\'chat Connection Closed. Code=\'</span> <span class=\\"token operator\\">+</span> reasonCode <span class=\\"token operator\\">+</span> <span class=\\"token string\\">\' (\'</span> <span class=\\"token operator\\">+</span> description <span class=\\"token operator\\">+</span><span class=\\"token string\\">\')\'</span><span class=\\"token punctuation\\">)</span><span class=\\"token punctuation\\">;</span>\\n    <span class=\\"token punctuation\\">}</span><span class=\\"token punctuation\\">)</span><span class=\\"token punctuation\\">;</span>\\n\\n    connection<span class=\\"token punctuation\\">.</span><span class=\\"token function\\">on</span><span class=\\"token punctuation\\">(</span><span class=\\"token string\\">\'message\'</span><span class=\\"token punctuation\\">,</span> <span class=\\"token keyword\\">function</span><span class=\\"token punctuation\\">(</span><span class=\\"token parameter\\">message</span><span class=\\"token punctuation\\">)</span> <span class=\\"token punctuation\\">{</span>\\n        <span class=\\"token keyword\\">if</span> <span class=\\"token punctuation\\">(</span>message<span class=\\"token punctuation\\">.</span>type <span class=\\"token operator\\">===</span> <span class=\\"token string\\">\'utf8\'</span><span class=\\"token punctuation\\">)</span> <span class=\\"token punctuation\\">{</span>\\n            console<span class=\\"token punctuation\\">.</span><span class=\\"token function\\">log</span><span class=\\"token punctuation\\">(</span><span class=\\"token string\\">\'\\\\r=> \'</span> <span class=\\"token operator\\">+</span> message<span class=\\"token punctuation\\">.</span>utf8Data<span class=\\"token punctuation\\">)</span><span class=\\"token punctuation\\">;</span>\\n            rl<span class=\\"token punctuation\\">.</span><span class=\\"token function\\">prompt</span><span class=\\"token punctuation\\">(</span><span class=\\"token punctuation\\">)</span><span class=\\"token punctuation\\">;</span>\\n        <span class=\\"token punctuation\\">}</span>\\n    <span class=\\"token punctuation\\">}</span><span class=\\"token punctuation\\">)</span><span class=\\"token punctuation\\">;</span>\\n\\n    rl<span class=\\"token punctuation\\">.</span><span class=\\"token function\\">on</span><span class=\\"token punctuation\\">(</span><span class=\\"token string\\">\'line\'</span><span class=\\"token punctuation\\">,</span> <span class=\\"token keyword\\">function</span><span class=\\"token punctuation\\">(</span><span class=\\"token parameter\\">line</span><span class=\\"token punctuation\\">)</span> <span class=\\"token punctuation\\">{</span>\\n        connection<span class=\\"token punctuation\\">.</span><span class=\\"token function\\">sendUTF</span><span class=\\"token punctuation\\">(</span>line<span class=\\"token punctuation\\">)</span><span class=\\"token punctuation\\">;</span>\\n        rl<span class=\\"token punctuation\\">.</span><span class=\\"token function\\">prompt</span><span class=\\"token punctuation\\">(</span><span class=\\"token punctuation\\">)</span><span class=\\"token punctuation\\">;</span>\\n    <span class=\\"token punctuation\\">}</span><span class=\\"token punctuation\\">)</span><span class=\\"token punctuation\\">;</span>\\n\\n    rl<span class=\\"token punctuation\\">.</span><span class=\\"token function\\">on</span><span class=\\"token punctuation\\">(</span><span class=\\"token string\\">\'close\'</span><span class=\\"token punctuation\\">,</span> <span class=\\"token keyword\\">function</span><span class=\\"token punctuation\\">(</span><span class=\\"token punctuation\\">)</span> <span class=\\"token punctuation\\">{</span>\\n        connection<span class=\\"token punctuation\\">.</span><span class=\\"token function\\">close</span><span class=\\"token punctuation\\">(</span><span class=\\"token punctuation\\">)</span><span class=\\"token punctuation\\">;</span>\\n        console<span class=\\"token punctuation\\">.</span><span class=\\"token function\\">log</span><span class=\\"token punctuation\\">(</span><span class=\\"token string\\">\'Have a great day!\'</span><span class=\\"token punctuation\\">)</span><span class=\\"token punctuation\\">;</span>\\n        process<span class=\\"token punctuation\\">.</span><span class=\\"token function\\">exit</span><span class=\\"token punctuation\\">(</span><span class=\\"token number\\">0</span><span class=\\"token punctuation\\">)</span><span class=\\"token punctuation\\">;</span>\\n    <span class=\\"token punctuation\\">}</span><span class=\\"token punctuation\\">)</span><span class=\\"token punctuation\\">;</span>\\n\\n    rl<span class=\\"token punctuation\\">.</span><span class=\\"token function\\">prompt</span><span class=\\"token punctuation\\">(</span><span class=\\"token punctuation\\">)</span><span class=\\"token punctuation\\">;</span>\\n<span class=\\"token punctuation\\">}</span><span class=\\"token punctuation\\">)</span><span class=\\"token punctuation\\">;</span>\\nclient<span class=\\"token punctuation\\">.</span><span class=\\"token function\\">connect</span><span class=\\"token punctuation\\">(</span><span class=\\"token string\\">\\"ws://\\"</span> <span class=\\"token operator\\">+</span> host <span class=\\"token operator\\">+</span><span class=\\"token string\\">\\"/chat\\"</span><span class=\\"token punctuation\\">,</span> <span class=\\"token string\\">\\"chat\\"</span><span class=\\"token punctuation\\">)</span><span class=\\"token punctuation\\">;</span></code></pre></div>\\n<hr>\\n<h2 id=\\"step-4-building-and-running-your-server\\"><a href=\\"#step-4-building-and-running-your-server\\" aria-label=\\"step 4 building and running your server permalink\\" class=\\"anchor\\"><svg aria-hidden=\\"true\\" focusable=\\"false\\" height=\\"16\\" version=\\"1.1\\" viewBox=\\"0 0 16 16\\" width=\\"16\\"><path fill-rule=\\"evenodd\\" d=\\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\\"></path></svg></a>Step 4: Building and Running your server</h2>\\n<p>To build the server, go in to your server directory and run the command:</p>\\n<div class=\\"gatsby-highlight\\" data-language=\\"text\\"><pre class=\\"language-text\\"><code class=\\"language-text\\">swift build</code></pre></div>\\n<p>To run the server, in the same directory, run:</p>\\n<div class=\\"gatsby-highlight\\" data-language=\\"text\\"><pre class=\\"language-text\\"><code class=\\"language-text\\">.build/debug/ChatServer</code></pre></div>\\n<p>The server will now be up and running. The informational log message below will be displayed:</p>\\n<div class=\\"gatsby-highlight\\" data-language=\\"text\\"><pre class=\\"language-text\\"><code class=\\"language-text\\">[INFO] [HTTPServer.swift:124 listen(on:)] Listening on port 8080</code></pre></div>\\n<hr>\\n<h2 id=\\"step-5-setting-up-and-running-the-client\\"><a href=\\"#step-5-setting-up-and-running-the-client\\" aria-label=\\"step 5 setting up and running the client permalink\\" class=\\"anchor\\"><svg aria-hidden=\\"true\\" focusable=\\"false\\" height=\\"16\\" version=\\"1.1\\" viewBox=\\"0 0 16 16\\" width=\\"16\\"><path fill-rule=\\"evenodd\\" d=\\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\\"></path></svg></a>Step 5: Setting up and Running the client</h2>\\n<p>To setup the client, open a new terminal window, go in to your client directory and run the command:</p>\\n<div class=\\"gatsby-highlight\\" data-language=\\"text\\"><pre class=\\"language-text\\"><code class=\\"language-text\\">npm install</code></pre></div>\\n<blockquote>\\n<p>That will install the WebSocket package.</p>\\n</blockquote>\\n<p>To run the client, go into your client directory and run the following command (<strong>Note</strong>: You will need to open multiple terminal windows and run the client multiple times to see the example action):</p>\\n<div class=\\"gatsby-highlight\\" data-language=\\"text\\"><pre class=\\"language-text\\"><code class=\\"language-text\\">node chat.js localhost:8080</code></pre></div>\\n<p>You can then enter a message on one client and see it appear on another client and vice versa.</p>","frontmatter":{"path":"/docs/websockets/echo-server","title":"Echo Server"}}},{"node":{"html":"<h1 id=\\"signing-and-verifying-jwts-with-hmac\\"><a href=\\"#signing-and-verifying-jwts-with-hmac\\" aria-label=\\"signing and verifying jwts with hmac permalink\\" class=\\"anchor\\"><svg aria-hidden=\\"true\\" focusable=\\"false\\" height=\\"16\\" version=\\"1.1\\" viewBox=\\"0 0 16 16\\" width=\\"16\\"><path fill-rule=\\"evenodd\\" d=\\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\\"></path></svg></a>Signing and verifying JWTs with HMAC</h1>\\n<p>You can process JWTs using a Hashed Message Authentication Code (HMAC). This uses a shared symmetric key as a password for both signing and verifying. This is simple and fast but requires a secure method of sending the password to the verifier.</p>\\n<hr>\\n<h2 id=\\"step-1-create-your-jwtsigner\\"><a href=\\"#step-1-create-your-jwtsigner\\" aria-label=\\"step 1 create your jwtsigner permalink\\" class=\\"anchor\\"><svg aria-hidden=\\"true\\" focusable=\\"false\\" height=\\"16\\" version=\\"1.1\\" viewBox=\\"0 0 16 16\\" width=\\"16\\"><path fill-rule=\\"evenodd\\" d=\\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\\"></path></svg></a>Step 1: Create your JWTSigner</h2>\\n<p>The <code class=\\"language-text\\">JWTSigner</code> is used to sign a <code class=\\"language-text\\">JWT</code> instance and produce a signed JWT string.</p>\\n<p>Inside the <code class=\\"language-text\\">App</code> extension, create an HMAC <code class=\\"language-text\\">JWTSigner</code> by providing a password:</p>\\n<div class=\\"gatsby-highlight\\" data-language=\\"swift\\"><pre class=\\"language-swift\\"><code class=\\"language-swift\\"><span class=\\"token keyword\\">static</span> <span class=\\"token keyword\\">let</span> jwtSigner <span class=\\"token operator\\">=</span> <span class=\\"token builtin\\">JWTSigner</span><span class=\\"token punctuation\\">.</span><span class=\\"token function\\">hs256</span><span class=\\"token punctuation\\">(</span>key<span class=\\"token punctuation\\">:</span> <span class=\\"token function\\">Data</span><span class=\\"token punctuation\\">(</span><span class=\\"token string\\">\\"kitura\\"</span><span class=\\"token punctuation\\">.</span>utf8<span class=\\"token punctuation\\">)</span><span class=\\"token punctuation\\">)</span></code></pre></div>\\n<hr>\\n<h2 id=\\"step-2-create-your-jwtverifier\\"><a href=\\"#step-2-create-your-jwtverifier\\" aria-label=\\"step 2 create your jwtverifier permalink\\" class=\\"anchor\\"><svg aria-hidden=\\"true\\" focusable=\\"false\\" height=\\"16\\" version=\\"1.1\\" viewBox=\\"0 0 16 16\\" width=\\"16\\"><path fill-rule=\\"evenodd\\" d=\\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\\"></path></svg></a>Step 2: Create your JWTVerifier</h2>\\n<p>The <code class=\\"language-text\\">JWTVerifier</code> is used to verify a signed JWT string. This ensures the signature was generated using the same password and the JWT has not been changed.</p>\\n<p>Inside the <code class=\\"language-text\\">App</code> extension, we create an HMAC <code class=\\"language-text\\">JWTVerifier</code> by providing the same password as before:</p>\\n<div class=\\"gatsby-highlight\\" data-language=\\"swift\\"><pre class=\\"language-swift\\"><code class=\\"language-swift\\"><span class=\\"token keyword\\">static</span> <span class=\\"token keyword\\">let</span> jwtVerifier <span class=\\"token operator\\">=</span> <span class=\\"token builtin\\">JWTVerifier</span><span class=\\"token punctuation\\">.</span><span class=\\"token function\\">hs256</span><span class=\\"token punctuation\\">(</span>key<span class=\\"token punctuation\\">:</span> <span class=\\"token function\\">Data</span><span class=\\"token punctuation\\">(</span><span class=\\"token string\\">\\"kitura\\"</span><span class=\\"token punctuation\\">.</span>utf8<span class=\\"token punctuation\\">)</span><span class=\\"token punctuation\\">)</span></code></pre></div>\\n<hr>\\n<p>Now you can return to the <a href=\\"./jwt#step-2-set-up-your-signing-and-verifying-algorithm\\">JSON Web Token Authentication</a> guide.</p>","frontmatter":{"path":"/docs/authentication/jwt-hmac","title":"Signing and verifying JWTs with HMAC"}}},{"node":{"html":"<h1 id=\\"oauth-20-authentication-with-googlefacebook\\"><a href=\\"#oauth-20-authentication-with-googlefacebook\\" aria-label=\\"oauth 20 authentication with googlefacebook permalink\\" class=\\"anchor\\"><svg aria-hidden=\\"true\\" focusable=\\"false\\" height=\\"16\\" version=\\"1.1\\" viewBox=\\"0 0 16 16\\" width=\\"16\\"><path fill-rule=\\"evenodd\\" d=\\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\\"></path></svg></a>OAuth 2.0 authentication with Google/Facebook</h1>\\n<p><a href=\\"https://oauth.net/2/\\">OAuth 2.0</a> is an authorization framework that enables you to authenticate a user via a trusted third party. A brief summary of the protocol flow is as follows:</p>\\n<ul>\\n<li>The user wants to log in to a server (e.g. your Kitura application).</li>\\n<li>The user is redirected to the OAuth 2.0 provider (e.g. Facebook/Google).</li>\\n<li>The user authenticates with the OAuth 2.0 provider and is given a single use access code.</li>\\n<li>The user is sent back to the server and provides them with the access code.</li>\\n<li>The server sends the access code to the OAuth 2.0 provider and is given an access token.</li>\\n<li>The server uses the access token to request the user\'s information and authenticate them.</li>\\n</ul>\\n<p>If you would like a more in-depth explanation of OAuth 2.0, you can read <a href=\\"https://www.digitalocean.com/community/tutorials/an-introduction-to-oauth-2\\">this guide</a> by DigitalOcean.</p>\\n<p>Kitura supports OAuth 2.0 authentication using plugins for the <a href=\\"https://github.com/IBM-Swift/Kitura-Credentials\\">Kitura-Credentials</a> authentication framework. In this guide, we show you how to use the <a href=\\"https://github.com/IBM-Swift/Kitura-CredentialsGoogle\\">Kitura-CredentialsGoogle</a> and the <a href=\\"https://github.com/IBM-Swift/Kitura-CredentialsFacebook\\">Kitura-CredentialsFacebook</a> plugins. Because we are authenticating using a third party, the user does not need to create a new account for our service and we don\'t need to handle their username and password.</p>\\n<blockquote>\\n<p>This guide describes how to implement the OAuth 2.0 flow for a client accessing the server via a web browser.<br>\\nFor a mobile application, the user must authenticate themselves on the device, send the access token to the server and have the token authenticated using a Credentials token plugin. We will not cover the mobile application flow in this guide.</p>\\n</blockquote>\\n<hr>\\n<h2 id=\\"step-1-create-your-third-party-oauth-20-application\\"><a href=\\"#step-1-create-your-third-party-oauth-20-application\\" aria-label=\\"step 1 create your third party oauth 20 application permalink\\" class=\\"anchor\\"><svg aria-hidden=\\"true\\" focusable=\\"false\\" height=\\"16\\" version=\\"1.1\\" viewBox=\\"0 0 16 16\\" width=\\"16\\"><path fill-rule=\\"evenodd\\" d=\\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\\"></path></svg></a>Step 1: Create your third party OAuth 2.0 application</h2>\\n<p>For this guide we need a third party OAuth 2.0 provider who will authenticate the user. We will be using Google for this guide, but you can read instructions on how to create the OAuth 2.0 provider for Facebook below. After this initial setup, swapping Google for Facebook in code examples would create valid Facebook OAuth 2.0 authentication.</p>\\n<h3 id=\\"google-oauth-20\\"><a href=\\"#google-oauth-20\\" aria-label=\\"google oauth 20 permalink\\" class=\\"anchor\\"><svg aria-hidden=\\"true\\" focusable=\\"false\\" height=\\"16\\" version=\\"1.1\\" viewBox=\\"0 0 16 16\\" width=\\"16\\"><path fill-rule=\\"evenodd\\" d=\\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\\"></path></svg></a>Google OAuth 2.0:</h3>\\n<ul>\\n<li>Follow the Google <a href=\\"https://support.google.com/cloud/answer/6158849?hl=en\\">Setting up OAuth 2.0</a> guide.</li>\\n<li>Once you have created your client ID, add <a href=\\"http://localhost:8080/oauth2/google\\">http://localhost:8080/oauth2/google</a> to your authorized redirect URIs.</li>\\n<li>Note down the client ID and client secret. We will need them later.</li>\\n</ul>\\n<h3 id=\\"facebook-oauth-20\\"><a href=\\"#facebook-oauth-20\\" aria-label=\\"facebook oauth 20 permalink\\" class=\\"anchor\\"><svg aria-hidden=\\"true\\" focusable=\\"false\\" height=\\"16\\" version=\\"1.1\\" viewBox=\\"0 0 16 16\\" width=\\"16\\"><path fill-rule=\\"evenodd\\" d=\\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\\"></path></svg></a>Facebook Oauth 2.0:</h3>\\n<ul>\\n<li>Log in/sign up to <a href=\\"https://developers.facebook.com/apps/\\">Facebook developers.</a></li>\\n<li>Create a new Facebook App with a name of your choice.</li>\\n<li>From the dashboard, add the Facebook login product.</li>\\n<li>Inside Facebook login settings, add <a href=\\"http://localhost:8080/oauth2/facebook\\">http://localhost:8080/oauth2/facebook</a> to the Valid OAuth Redirect URIs.</li>\\n<li>Inside the App settings, note down the App ID and App Secret. We will need them later.</li>\\n</ul>\\n<hr>\\n<h2 id=\\"step-2-create-the-oauth-20-routes\\"><a href=\\"#step-2-create-the-oauth-20-routes\\" aria-label=\\"step 2 create the oauth 20 routes permalink\\" class=\\"anchor\\"><svg aria-hidden=\\"true\\" focusable=\\"false\\" height=\\"16\\" version=\\"1.1\\" viewBox=\\"0 0 16 16\\" width=\\"16\\"><path fill-rule=\\"evenodd\\" d=\\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\\"></path></svg></a>Step 2: Create the OAuth 2.0 routes</h2>\\n<p>In this guide we are going to create three Kitura routes:</p>\\n<ul>\\n<li>A log in route, where we authenticate the user</li>\\n<li>A protected route, which can only be accessed by a user who is logged in</li>\\n<li>A log out route, where we revoke the users credentials</li>\\n</ul>\\n<p>In this step we will create the framework for our protected and log out routes.</p>\\n<blockquote>\\n<p>If you don\'t have a server, follow our <a href=\\"../getting-started/create-server-cli\\">Create a server</a> guide.</p>\\n</blockquote>\\n<p>Firstly, open your <code class=\\"language-text\\">Application.swift</code> file in your default text editor (or Xcode if you prefer):</p>\\n<div class=\\"gatsby-highlight\\" data-language=\\"text\\"><pre class=\\"language-text\\"><code class=\\"language-text\\">open Sources/Application/Application.swift</code></pre></div>\\n<p>Inside the <code class=\\"language-text\\">postInit()</code> function add:</p>\\n<div class=\\"gatsby-highlight\\" data-language=\\"swift\\"><pre class=\\"language-swift\\"><code class=\\"language-swift\\"><span class=\\"token function\\">initializeOAuth2Routes</span><span class=\\"token punctuation\\">(</span>app<span class=\\"token punctuation\\">:</span> <span class=\\"token keyword\\">self</span><span class=\\"token punctuation\\">)</span></code></pre></div>\\n<p>Next, create a new file, called <code class=\\"language-text\\">OAuth2Routes.swift</code>, to contain the framework for our routes code:</p>\\n<div class=\\"gatsby-highlight\\" data-language=\\"text\\"><pre class=\\"language-text\\"><code class=\\"language-text\\">touch Sources/Application/Routes/OAuth2Routes.swift</code></pre></div>\\n<p>Open your <code class=\\"language-text\\">OAuth2Routes.swift</code> file:</p>\\n<div class=\\"gatsby-highlight\\" data-language=\\"text\\"><pre class=\\"language-text\\"><code class=\\"language-text\\">open Sources/Application/Routes/OAuth2Routes.swift</code></pre></div>\\n<p>Inside this file, add the framework for our routes code:</p>\\n<div class=\\"gatsby-highlight\\" data-language=\\"swift\\"><pre class=\\"language-swift\\"><code class=\\"language-swift\\"><span class=\\"token keyword\\">func</span> <span class=\\"token function\\">initializeOAuth2Routes</span><span class=\\"token punctuation\\">(</span>app<span class=\\"token punctuation\\">:</span> <span class=\\"token builtin\\">App</span><span class=\\"token punctuation\\">)</span> <span class=\\"token punctuation\\">{</span>\\n\\n    <span class=\\"token comment\\">// Configure Credentials and session here</span>\\n\\n    app<span class=\\"token punctuation\\">.</span>router<span class=\\"token punctuation\\">.</span><span class=\\"token keyword\\">get</span><span class=\\"token punctuation\\">(</span><span class=\\"token string\\">\\"/oauth2/protected\\"</span><span class=\\"token punctuation\\">)</span> <span class=\\"token punctuation\\">{</span> request<span class=\\"token punctuation\\">,</span> response<span class=\\"token punctuation\\">,</span> next <span class=\\"token keyword\\">in</span>\\n      <span class=\\"token comment\\">// Check the user is authenticated here</span>\\n      <span class=\\"token function\\">next</span><span class=\\"token punctuation\\">(</span><span class=\\"token punctuation\\">)</span>\\n    <span class=\\"token punctuation\\">}</span>\\n\\n    app<span class=\\"token punctuation\\">.</span>router<span class=\\"token punctuation\\">.</span><span class=\\"token keyword\\">get</span><span class=\\"token punctuation\\">(</span><span class=\\"token string\\">\\"/oauth2/logout\\"</span><span class=\\"token punctuation\\">)</span> <span class=\\"token punctuation\\">{</span> request<span class=\\"token punctuation\\">,</span> response<span class=\\"token punctuation\\">,</span> next <span class=\\"token keyword\\">in</span>\\n      <span class=\\"token comment\\">// Log out user here</span>\\n      <span class=\\"token function\\">next</span><span class=\\"token punctuation\\">(</span><span class=\\"token punctuation\\">)</span>\\n    <span class=\\"token punctuation\\">}</span>\\n<span class=\\"token punctuation\\">}</span></code></pre></div>\\n<hr>\\n<h2 id=\\"step-3-import-dependencies\\"><a href=\\"#step-3-import-dependencies\\" aria-label=\\"step 3 import dependencies permalink\\" class=\\"anchor\\"><svg aria-hidden=\\"true\\" focusable=\\"false\\" height=\\"16\\" version=\\"1.1\\" viewBox=\\"0 0 16 16\\" width=\\"16\\"><path fill-rule=\\"evenodd\\" d=\\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\\"></path></svg></a>Step 3: Import dependencies</h2>\\n<p>Add <a href=\\"https://github.com/IBM-Swift/Kitura-Credentials\\">Kitura-Credentials</a>, <a href=\\"https://github.com/IBM-Swift/Kitura-CredentialsGoogle\\">Kitura-CredentialsGoogle</a> and <a href=\\"https://github.com/IBM-Swift/Kitura-Session\\">Kitura-Session</a> to the dependencies in the <code class=\\"language-text\\">Package.swift</code> file.</p>\\n<p>Inside the file which defines the routes, <code class=\\"language-text\\">OAuth2Routes.swift</code>, import Credentials, CredentialsGoogle and KituraSession:</p>\\n<div class=\\"gatsby-highlight\\" data-language=\\"swift\\"><pre class=\\"language-swift\\"><code class=\\"language-swift\\"><span class=\\"token keyword\\">import</span> <span class=\\"token builtin\\">Credentials</span>\\n<span class=\\"token keyword\\">import</span> <span class=\\"token builtin\\">CredentialsGoogle</span>\\n<span class=\\"token keyword\\">import</span> <span class=\\"token builtin\\">KituraSession</span></code></pre></div>\\n<hr>\\n<h2 id=\\"step-4-set-up-a-session\\"><a href=\\"#step-4-set-up-a-session\\" aria-label=\\"step 4 set up a session permalink\\" class=\\"anchor\\"><svg aria-hidden=\\"true\\" focusable=\\"false\\" height=\\"16\\" version=\\"1.1\\" viewBox=\\"0 0 16 16\\" width=\\"16\\"><path fill-rule=\\"evenodd\\" d=\\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\\"></path></svg></a>Step 4: Set up a session</h2>\\n<p>Kitura-Credentials requires a session to be set up on the protected routes. This will use cookies to keep the user logged in after the initial authentication.</p>\\n<div class=\\"gatsby-highlight\\" data-language=\\"swift\\"><pre class=\\"language-swift\\"><code class=\\"language-swift\\"><span class=\\"token keyword\\">let</span> session <span class=\\"token operator\\">=</span> <span class=\\"token function\\">Session</span><span class=\\"token punctuation\\">(</span>secret<span class=\\"token punctuation\\">:</span> <span class=\\"token string\\">\\"AuthSecret\\"</span><span class=\\"token punctuation\\">,</span> cookie<span class=\\"token punctuation\\">:</span> <span class=\\"token punctuation\\">[</span><span class=\\"token builtin\\">CookieParameter</span><span class=\\"token punctuation\\">.</span><span class=\\"token function\\">name</span><span class=\\"token punctuation\\">(</span><span class=\\"token string\\">\\"Kitura-Auth-cookie\\"</span><span class=\\"token punctuation\\">)</span><span class=\\"token punctuation\\">]</span><span class=\\"token punctuation\\">)</span>\\napp<span class=\\"token punctuation\\">.</span>router<span class=\\"token punctuation\\">.</span><span class=\\"token function\\">all</span><span class=\\"token punctuation\\">(</span><span class=\\"token string\\">\\"/oauth2\\"</span><span class=\\"token punctuation\\">,</span> middleware<span class=\\"token punctuation\\">:</span> session<span class=\\"token punctuation\\">)</span></code></pre></div>\\n<hr>\\n<h2 id=\\"step-5-configure-your-credentials-middleware\\"><a href=\\"#step-5-configure-your-credentials-middleware\\" aria-label=\\"step 5 configure your credentials middleware permalink\\" class=\\"anchor\\"><svg aria-hidden=\\"true\\" focusable=\\"false\\" height=\\"16\\" version=\\"1.1\\" viewBox=\\"0 0 16 16\\" width=\\"16\\"><path fill-rule=\\"evenodd\\" d=\\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\\"></path></svg></a>Step 5: Configure your Credentials middleware</h2>\\n<p>We need to initialize an instance of our Credentials plugin using the id and secret from the OAuth 2.0 application we created in step 1.</p>\\n<p>We add the following code to our <code class=\\"language-text\\">initializeOAuth2Routes</code> function, substituting in our own id and secret:</p>\\n<div class=\\"gatsby-highlight\\" data-language=\\"swift\\"><pre class=\\"language-swift\\"><code class=\\"language-swift\\"><span class=\\"token keyword\\">let</span> googleClientId <span class=\\"token operator\\">=</span> <span class=\\"token string\\">\\"&lt;Your Google Client Id>\\"</span>\\n<span class=\\"token keyword\\">let</span> googleClientSecret <span class=\\"token operator\\">=</span> <span class=\\"token string\\">\\"&lt;Your Google Client Secret>\\"</span>\\n<span class=\\"token keyword\\">let</span> googleCallbackUrl <span class=\\"token operator\\">=</span> <span class=\\"token string\\">\\"http://localhost:8080/oauth2/google\\"</span>\\n<span class=\\"token keyword\\">let</span> googleCredentials <span class=\\"token operator\\">=</span> <span class=\\"token function\\">CredentialsGoogle</span><span class=\\"token punctuation\\">(</span>clientId<span class=\\"token punctuation\\">:</span> googleClientId<span class=\\"token punctuation\\">,</span> clientSecret<span class=\\"token punctuation\\">:</span> googleClientSecret<span class=\\"token punctuation\\">,</span> callbackUrl<span class=\\"token punctuation\\">:</span> googleCallbackUrl<span class=\\"token punctuation\\">)</span></code></pre></div>\\n<hr>\\n<h2 id=\\"step-6-register-your-credentials-plugin\\"><a href=\\"#step-6-register-your-credentials-plugin\\" aria-label=\\"step 6 register your credentials plugin permalink\\" class=\\"anchor\\"><svg aria-hidden=\\"true\\" focusable=\\"false\\" height=\\"16\\" version=\\"1.1\\" viewBox=\\"0 0 16 16\\" width=\\"16\\"><path fill-rule=\\"evenodd\\" d=\\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\\"></path></svg></a>Step 6: Register your Credentials plugin</h2>\\n<p>We need to register our plugin credentials to a <code class=\\"language-text\\">Credentials</code> middleware.</p>\\n<div class=\\"gatsby-highlight\\" data-language=\\"swift\\"><pre class=\\"language-swift\\"><code class=\\"language-swift\\"><span class=\\"token keyword\\">let</span> googleCredMiddleware <span class=\\"token operator\\">=</span> <span class=\\"token function\\">Credentials</span><span class=\\"token punctuation\\">(</span>options<span class=\\"token punctuation\\">:</span> <span class=\\"token punctuation\\">[</span><span class=\\"token string\\">\\"successRedirect\\"</span><span class=\\"token punctuation\\">:</span> <span class=\\"token string\\">\\"/oauth2/protected\\"</span><span class=\\"token punctuation\\">]</span><span class=\\"token punctuation\\">)</span>\\ngoogleCredMiddleware<span class=\\"token punctuation\\">.</span><span class=\\"token function\\">register</span><span class=\\"token punctuation\\">(</span>plugin<span class=\\"token punctuation\\">:</span> googleCredentials<span class=\\"token punctuation\\">)</span></code></pre></div>\\n<p>Next, we need to register our <code class=\\"language-text\\">Credentials</code> middleware on our login route.</p>\\n<p>When a user hits this route, they will be redirected to the OAuth 2.0 provider.</p>\\n<p>When the user is sent back to this route, their access code with be authenticated.</p>\\n<p>If they successfully authenticate, they will be redirected to the \\"successRedirect\\" we set on our middleware.</p>\\n<div class=\\"gatsby-highlight\\" data-language=\\"swift\\"><pre class=\\"language-swift\\"><code class=\\"language-swift\\">app<span class=\\"token punctuation\\">.</span>router<span class=\\"token punctuation\\">.</span><span class=\\"token keyword\\">get</span><span class=\\"token punctuation\\">(</span><span class=\\"token string\\">\\"/oauth2/google\\"</span><span class=\\"token punctuation\\">,</span> handler<span class=\\"token punctuation\\">:</span> googleCredMiddleware<span class=\\"token punctuation\\">.</span><span class=\\"token function\\">authenticate</span><span class=\\"token punctuation\\">(</span>credentialsType<span class=\\"token punctuation\\">:</span> googleCredentials<span class=\\"token punctuation\\">.</span>name<span class=\\"token punctuation\\">)</span><span class=\\"token punctuation\\">)</span></code></pre></div>\\n<hr>\\n<h2 id=\\"step-7-check-if-a-user-is-logged-in\\"><a href=\\"#step-7-check-if-a-user-is-logged-in\\" aria-label=\\"step 7 check if a user is logged in permalink\\" class=\\"anchor\\"><svg aria-hidden=\\"true\\" focusable=\\"false\\" height=\\"16\\" version=\\"1.1\\" viewBox=\\"0 0 16 16\\" width=\\"16\\"><path fill-rule=\\"evenodd\\" d=\\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\\"></path></svg></a>Step 7: Check if a user is logged in</h2>\\n<p>Once a user successfully authenticates, they will have a <code class=\\"language-text\\">userProfile</code> attached to all their requests via the session we set up in step 4.</p>\\n<p>Inside our <code class=\\"language-text\\">oauth2/protected</code> route, we want to check if they have logged in using the <code class=\\"language-text\\">userProfile</code>.</p>\\n<div class=\\"gatsby-highlight\\" data-language=\\"swift\\"><pre class=\\"language-swift\\"><code class=\\"language-swift\\"><span class=\\"token keyword\\">guard</span> <span class=\\"token keyword\\">let</span> user <span class=\\"token operator\\">=</span> request<span class=\\"token punctuation\\">.</span>userProfile <span class=\\"token keyword\\">else</span> <span class=\\"token punctuation\\">{</span>\\n    <span class=\\"token keyword\\">return</span> <span class=\\"token keyword\\">try</span> response<span class=\\"token punctuation\\">.</span><span class=\\"token function\\">send</span><span class=\\"token punctuation\\">(</span><span class=\\"token string\\">\\"Not authorized to view this route\\"</span><span class=\\"token punctuation\\">)</span><span class=\\"token punctuation\\">.</span><span class=\\"token function\\">end</span><span class=\\"token punctuation\\">(</span><span class=\\"token punctuation\\">)</span>\\n<span class=\\"token punctuation\\">}</span>\\nresponse<span class=\\"token punctuation\\">.</span><span class=\\"token function\\">send</span><span class=\\"token punctuation\\">(</span><span class=\\"token string\\">\\"Hello <span class=\\"token interpolation\\"><span class=\\"token delimiter variable\\">\\\\(</span>user<span class=\\"token punctuation\\">.</span>displayName<span class=\\"token delimiter variable\\">)</span></span>\\"</span><span class=\\"token punctuation\\">)</span></code></pre></div>\\n<blockquote>\\n<p>The user profile contains information about the user such as how they authenticated, their unique id and their displayName.</p>\\n</blockquote>\\n<hr>\\n<h2 id=\\"step-8-logging-out-a-user\\"><a href=\\"#step-8-logging-out-a-user\\" aria-label=\\"step 8 logging out a user permalink\\" class=\\"anchor\\"><svg aria-hidden=\\"true\\" focusable=\\"false\\" height=\\"16\\" version=\\"1.1\\" viewBox=\\"0 0 16 16\\" width=\\"16\\"><path fill-rule=\\"evenodd\\" d=\\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\\"></path></svg></a>Step 8: Logging out a user</h2>\\n<p>The user will remain logged in as long as their cookie provides a valid <code class=\\"language-text\\">userProfile</code>. We can log out a user by invalidating the cookie with the session store or by setting the <code class=\\"language-text\\">userProfile</code> to <code class=\\"language-text\\">nil</code>.</p>\\n<p>Inside our logout route handler, call the <code class=\\"language-text\\">Credentials.logOut</code> function:</p>\\n<div class=\\"gatsby-highlight\\" data-language=\\"swift\\"><pre class=\\"language-swift\\"><code class=\\"language-swift\\">googleCredMiddleware<span class=\\"token punctuation\\">.</span><span class=\\"token function\\">logOut</span><span class=\\"token punctuation\\">(</span>request<span class=\\"token punctuation\\">:</span> request<span class=\\"token punctuation\\">)</span></code></pre></div>\\n<p>Our completed OAuth 2.0 routes should now look as follows:</p>\\n<div class=\\"gatsby-highlight\\" data-language=\\"swift\\"><pre class=\\"language-swift\\"><code class=\\"language-swift\\"><span class=\\"token keyword\\">import</span> <span class=\\"token builtin\\">Credentials</span>\\n<span class=\\"token keyword\\">import</span> <span class=\\"token builtin\\">CredentialsGoogle</span>\\n<span class=\\"token keyword\\">import</span> <span class=\\"token builtin\\">KituraSession</span>\\n\\n<span class=\\"token keyword\\">func</span> <span class=\\"token function\\">initializeOAuth2Routes</span><span class=\\"token punctuation\\">(</span>app<span class=\\"token punctuation\\">:</span> <span class=\\"token builtin\\">App</span><span class=\\"token punctuation\\">)</span> <span class=\\"token punctuation\\">{</span>\\n\\n    <span class=\\"token keyword\\">let</span> session <span class=\\"token operator\\">=</span> <span class=\\"token function\\">Session</span><span class=\\"token punctuation\\">(</span>secret<span class=\\"token punctuation\\">:</span> <span class=\\"token string\\">\\"AuthSecret\\"</span><span class=\\"token punctuation\\">,</span> cookie<span class=\\"token punctuation\\">:</span> <span class=\\"token punctuation\\">[</span><span class=\\"token builtin\\">CookieParameter</span><span class=\\"token punctuation\\">.</span><span class=\\"token function\\">name</span><span class=\\"token punctuation\\">(</span><span class=\\"token string\\">\\"Kitura-Auth-cookie\\"</span><span class=\\"token punctuation\\">)</span><span class=\\"token punctuation\\">]</span><span class=\\"token punctuation\\">)</span>\\n    app<span class=\\"token punctuation\\">.</span>router<span class=\\"token punctuation\\">.</span><span class=\\"token function\\">all</span><span class=\\"token punctuation\\">(</span><span class=\\"token string\\">\\"/oauth2\\"</span><span class=\\"token punctuation\\">,</span> middleware<span class=\\"token punctuation\\">:</span> session<span class=\\"token punctuation\\">)</span>\\n\\n    <span class=\\"token keyword\\">let</span> googleClientId <span class=\\"token operator\\">=</span> <span class=\\"token string\\">\\"&lt;Your Google Client Id>\\"</span>\\n    <span class=\\"token keyword\\">let</span> googleClientSecret <span class=\\"token operator\\">=</span> <span class=\\"token string\\">\\"&lt;Your Google Client Secret>\\"</span>\\n    <span class=\\"token keyword\\">let</span> googleCallbackUrl <span class=\\"token operator\\">=</span> <span class=\\"token string\\">\\"http://localhost:8080/oauth2/google\\"</span>\\n    <span class=\\"token keyword\\">let</span> googleCredentials <span class=\\"token operator\\">=</span> <span class=\\"token function\\">CredentialsGoogle</span><span class=\\"token punctuation\\">(</span>clientId<span class=\\"token punctuation\\">:</span> googleClientId<span class=\\"token punctuation\\">,</span> clientSecret<span class=\\"token punctuation\\">:</span> googleClientSecret<span class=\\"token punctuation\\">,</span> callbackUrl<span class=\\"token punctuation\\">:</span> googleCallbackUrl<span class=\\"token punctuation\\">)</span>\\n\\n    <span class=\\"token keyword\\">let</span> googleCredMiddleware <span class=\\"token operator\\">=</span> <span class=\\"token function\\">Credentials</span><span class=\\"token punctuation\\">(</span>options<span class=\\"token punctuation\\">:</span> <span class=\\"token punctuation\\">[</span><span class=\\"token string\\">\\"successRedirect\\"</span><span class=\\"token punctuation\\">:</span> <span class=\\"token string\\">\\"/oauth2/protected\\"</span><span class=\\"token punctuation\\">]</span><span class=\\"token punctuation\\">)</span>\\n    googleCredMiddleware<span class=\\"token punctuation\\">.</span><span class=\\"token function\\">register</span><span class=\\"token punctuation\\">(</span>plugin<span class=\\"token punctuation\\">:</span> googleCredentials<span class=\\"token punctuation\\">)</span>\\n\\n    app<span class=\\"token punctuation\\">.</span>router<span class=\\"token punctuation\\">.</span><span class=\\"token keyword\\">get</span><span class=\\"token punctuation\\">(</span><span class=\\"token string\\">\\"/oauth2/google\\"</span><span class=\\"token punctuation\\">,</span> handler<span class=\\"token punctuation\\">:</span> googleCredMiddleware<span class=\\"token punctuation\\">.</span><span class=\\"token function\\">authenticate</span><span class=\\"token punctuation\\">(</span>credentialsType<span class=\\"token punctuation\\">:</span> googleCredentials<span class=\\"token punctuation\\">.</span>name<span class=\\"token punctuation\\">)</span><span class=\\"token punctuation\\">)</span>\\n\\n    app<span class=\\"token punctuation\\">.</span>router<span class=\\"token punctuation\\">.</span><span class=\\"token keyword\\">get</span><span class=\\"token punctuation\\">(</span><span class=\\"token string\\">\\"/oauth2/protected\\"</span><span class=\\"token punctuation\\">)</span> <span class=\\"token punctuation\\">{</span> request<span class=\\"token punctuation\\">,</span> response<span class=\\"token punctuation\\">,</span> next <span class=\\"token keyword\\">in</span>\\n      <span class=\\"token keyword\\">guard</span> <span class=\\"token keyword\\">let</span> user <span class=\\"token operator\\">=</span> request<span class=\\"token punctuation\\">.</span>userProfile <span class=\\"token keyword\\">else</span> <span class=\\"token punctuation\\">{</span>\\n          <span class=\\"token keyword\\">return</span> <span class=\\"token keyword\\">try</span> response<span class=\\"token punctuation\\">.</span><span class=\\"token function\\">send</span><span class=\\"token punctuation\\">(</span><span class=\\"token string\\">\\"Not authorized to view this route\\"</span><span class=\\"token punctuation\\">)</span><span class=\\"token punctuation\\">.</span><span class=\\"token function\\">end</span><span class=\\"token punctuation\\">(</span><span class=\\"token punctuation\\">)</span>\\n      <span class=\\"token punctuation\\">}</span>\\n      response<span class=\\"token punctuation\\">.</span><span class=\\"token function\\">send</span><span class=\\"token punctuation\\">(</span><span class=\\"token string\\">\\"Hello <span class=\\"token interpolation\\"><span class=\\"token delimiter variable\\">\\\\(</span>user<span class=\\"token punctuation\\">.</span>displayName<span class=\\"token delimiter variable\\">)</span></span>\\"</span><span class=\\"token punctuation\\">)</span>\\n      <span class=\\"token function\\">next</span><span class=\\"token punctuation\\">(</span><span class=\\"token punctuation\\">)</span>\\n    <span class=\\"token punctuation\\">}</span>\\n\\n    app<span class=\\"token punctuation\\">.</span>router<span class=\\"token punctuation\\">.</span><span class=\\"token keyword\\">get</span><span class=\\"token punctuation\\">(</span><span class=\\"token string\\">\\"/oauth2/logout\\"</span><span class=\\"token punctuation\\">)</span> <span class=\\"token punctuation\\">{</span> request<span class=\\"token punctuation\\">,</span> response<span class=\\"token punctuation\\">,</span> next <span class=\\"token keyword\\">in</span>\\n      googleCredMiddleware<span class=\\"token punctuation\\">.</span><span class=\\"token function\\">logOut</span><span class=\\"token punctuation\\">(</span>request<span class=\\"token punctuation\\">:</span> request<span class=\\"token punctuation\\">)</span>\\n      <span class=\\"token function\\">next</span><span class=\\"token punctuation\\">(</span><span class=\\"token punctuation\\">)</span>\\n    <span class=\\"token punctuation\\">}</span>\\n<span class=\\"token punctuation\\">}</span></code></pre></div>\\n<hr>\\n<h2 id=\\"step-9-testing-our-oauth-20-authentication-system\\"><a href=\\"#step-9-testing-our-oauth-20-authentication-system\\" aria-label=\\"step 9 testing our oauth 20 authentication system permalink\\" class=\\"anchor\\"><svg aria-hidden=\\"true\\" focusable=\\"false\\" height=\\"16\\" version=\\"1.1\\" viewBox=\\"0 0 16 16\\" width=\\"16\\"><path fill-rule=\\"evenodd\\" d=\\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\\"></path></svg></a>Step 9: Testing our OAuth 2.0 authentication system</h2>\\n<p>Now that everything is set up we can test logging in using OAuth 2.0.</p>\\n<p>Start your server and open your browser at:</p>\\n<p><a href=\\"http://localhost:8080/oauth2/protected\\" target=\\"blank\\">localhost:8080/oauth2/protected</a></p>\\n<p>We will be sent our unauthorized message since we haven\'t logged in yet.</p>\\n<p>We authenticate by going to the login route for our plugin:</p>\\n<p><a href=\\"http://localhost:8080/oauth2/google\\">http://localhost:8080/oauth2/google</a></p>\\n<p><a href=\\"http://localhost:8080/oauth2/google\\" target=\\"blank\\">localhost:8080/oauth2/google</a></p>\\n<p>This will send you to the OAuth 2.0 provider who will request that you log in and provide access to our server.</p>\\n<p>Once you complete this you will be sent back to our server which will redirect you to our \\"/oauth2/protected\\" route.</p>\\n<p>This time you will be authenticated and will see a welcome message.</p>\\n<p>As long as your session persists, you can return to <a href=\\"http://localhost:8080/oauth2/protected\\" target=\\"blank\\">localhost:8080/oauth2/protected</a> and will be allowed access.</p>\\n<p>Congratulations! You have just set up OAuth 2.0 authentication on your Kitura server.</p>","frontmatter":{"path":"/docs/authentication/oauth2","title":"Add Oauth2 to your app"}}},{"node":{"html":"<h1 id=\\"ios-client\\"><a href=\\"#ios-client\\" aria-label=\\"ios client permalink\\" class=\\"anchor\\"><svg aria-hidden=\\"true\\" focusable=\\"false\\" height=\\"16\\" version=\\"1.1\\" viewBox=\\"0 0 16 16\\" width=\\"16\\"><path fill-rule=\\"evenodd\\" d=\\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\\"></path></svg></a>iOS Client</h1>\\n<p>In this guide we are going to create a simple iOS application that uses a KituraKit client to interact with a Kitura server.  The app we are going to make will be simple and holds a list of fruit that you can scroll through.  Upon selecting a desired fruit, we will send a <code class=\\"language-text\\">GET</code> request to a server that will return the price of the selected fruit.</p>\\n<p><strong>This guide requires Xcode 11.</strong></p>\\n<hr>\\n<h2 id=\\"setting-up-your-server\\"><a href=\\"#setting-up-your-server\\" aria-label=\\"setting up your server permalink\\" class=\\"anchor\\"><svg aria-hidden=\\"true\\" focusable=\\"false\\" height=\\"16\\" version=\\"1.1\\" viewBox=\\"0 0 16 16\\" width=\\"16\\"><path fill-rule=\\"evenodd\\" d=\\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\\"></path></svg></a>Setting up your server</h2>\\n<blockquote>\\n<p>If you don\'t have a server, follow our <a href=\\"../getting-started/create-server-cli\\">Create a Server</a> guide.</p>\\n</blockquote>\\n<p>Kitura and KituraKit send and receive instances of Swift types directly. These types (aka models) can be shared between the client and server.</p>\\n<p>We\'re going to do our development inside Xcode, so let\'s open your server project in Xcode.</p>\\n<p>Firstly, we need to create a <code class=\\"language-text\\">Fruit</code> model.  Create a folder, if you haven\'t already, called Models, inside your Application folder, by doing File > New > Group.  Within your Models folder, create a new file called <code class=\\"language-text\\">Fruit.swift</code>, by doing File > New > File and selecting Swift as the type of file.</p>\\n<p>Open your <code class=\\"language-text\\">Fruit.swift</code> file and create your Fruit model.  The only requirement for a model is that it conforms to the Codable protocol:</p>\\n<div class=\\"gatsby-highlight\\" data-language=\\"swift\\"><pre class=\\"language-swift\\"><code class=\\"language-swift\\"><span class=\\"token keyword\\">public</span> <span class=\\"token keyword\\">struct</span> <span class=\\"token builtin\\">Fruit</span><span class=\\"token punctuation\\">:</span> <span class=\\"token builtin\\">Codable</span> <span class=\\"token punctuation\\">{</span>\\n    <span class=\\"token keyword\\">public</span> <span class=\\"token keyword\\">let</span> name<span class=\\"token punctuation\\">:</span> <span class=\\"token builtin\\">String</span>\\n    <span class=\\"token keyword\\">public</span> <span class=\\"token keyword\\">let</span> price<span class=\\"token punctuation\\">:</span> <span class=\\"token builtin\\">Double</span>\\n    <span class=\\"token keyword\\">public</span> <span class=\\"token keyword\\">init</span><span class=\\"token punctuation\\">(</span>name<span class=\\"token punctuation\\">:</span> <span class=\\"token builtin\\">String</span><span class=\\"token punctuation\\">,</span> price<span class=\\"token punctuation\\">:</span> <span class=\\"token builtin\\">Double</span><span class=\\"token punctuation\\">)</span> <span class=\\"token punctuation\\">{</span>\\n        <span class=\\"token keyword\\">self</span><span class=\\"token punctuation\\">.</span>name <span class=\\"token operator\\">=</span> name\\n        <span class=\\"token keyword\\">self</span><span class=\\"token punctuation\\">.</span>price <span class=\\"token operator\\">=</span> price\\n    <span class=\\"token punctuation\\">}</span>\\n<span class=\\"token punctuation\\">}</span></code></pre></div>\\n<p>We need to add a file for our fruit routes.  Open your <code class=\\"language-text\\">Application.swift</code> file and inside the <code class=\\"language-text\\">postInit()</code> function add:</p>\\n<div class=\\"gatsby-highlight\\" data-language=\\"swift\\"><pre class=\\"language-swift\\"><code class=\\"language-swift\\"><span class=\\"token function\\">initializeFruitRoutes</span><span class=\\"token punctuation\\">(</span>app<span class=\\"token punctuation\\">:</span> <span class=\\"token keyword\\">self</span><span class=\\"token punctuation\\">)</span></code></pre></div>\\n<p>Create a new file, called <code class=\\"language-text\\">FruitRoutes.swift</code> in your Routes folder and inside this file, add the following code:</p>\\n<div class=\\"gatsby-highlight\\" data-language=\\"swift\\"><pre class=\\"language-swift\\"><code class=\\"language-swift\\"><span class=\\"token keyword\\">import</span> <span class=\\"token builtin\\">Foundation</span>\\n<span class=\\"token keyword\\">import</span> <span class=\\"token builtin\\">KituraContracts</span>\\n\\n<span class=\\"token keyword\\">func</span> <span class=\\"token function\\">initializeFruitRoutes</span><span class=\\"token punctuation\\">(</span>app<span class=\\"token punctuation\\">:</span> <span class=\\"token builtin\\">App</span><span class=\\"token punctuation\\">)</span> <span class=\\"token punctuation\\">{</span>\\n\\n<span class=\\"token punctuation\\">}</span></code></pre></div>\\n<p>This code imports our required modules and sets up the framework for a routes page.</p>\\n<p>Firstly, we\'re going to create a <code class=\\"language-text\\">String</code> to <code class=\\"language-text\\">Double</code> dictionary that holds all the names for fruit in our list and their corresponding prices.  Inside the scope of our <code class=\\"language-text\\">initializeFruitRoutes</code> function add this code:</p>\\n<div class=\\"gatsby-highlight\\" data-language=\\"swift\\"><pre class=\\"language-swift\\"><code class=\\"language-swift\\"><span class=\\"token keyword\\">var</span> fruitDict<span class=\\"token punctuation\\">:</span> <span class=\\"token punctuation\\">[</span><span class=\\"token builtin\\">String</span><span class=\\"token punctuation\\">:</span><span class=\\"token builtin\\">Double</span><span class=\\"token punctuation\\">]</span> <span class=\\"token operator\\">=</span> <span class=\\"token punctuation\\">[</span><span class=\\"token punctuation\\">:</span><span class=\\"token punctuation\\">]</span>\\nfruitDict <span class=\\"token operator\\">=</span> <span class=\\"token punctuation\\">[</span><span class=\\"token string\\">\\"Apple\\"</span><span class=\\"token punctuation\\">:</span> <span class=\\"token number\\">0.35</span><span class=\\"token punctuation\\">,</span>\\n               <span class=\\"token string\\">\\"Banana\\"</span><span class=\\"token punctuation\\">:</span> <span class=\\"token number\\">0.27</span><span class=\\"token punctuation\\">,</span>\\n               <span class=\\"token string\\">\\"Orange\\"</span><span class=\\"token punctuation\\">:</span> <span class=\\"token number\\">0.29</span><span class=\\"token punctuation\\">,</span>\\n               <span class=\\"token string\\">\\"Pear\\"</span><span class=\\"token punctuation\\">:</span> <span class=\\"token number\\">0.18</span><span class=\\"token punctuation\\">,</span>\\n               <span class=\\"token string\\">\\"Watermelon\\"</span><span class=\\"token punctuation\\">:</span> <span class=\\"token number\\">1.79</span><span class=\\"token punctuation\\">,</span>\\n               <span class=\\"token string\\">\\"Mango\\"</span><span class=\\"token punctuation\\">:</span> <span class=\\"token number\\">0.68</span><span class=\\"token punctuation\\">,</span>\\n               <span class=\\"token string\\">\\"Pineapple\\"</span><span class=\\"token punctuation\\">:</span> <span class=\\"token number\\">1.49</span><span class=\\"token punctuation\\">,</span>\\n               <span class=\\"token string\\">\\"Lemon\\"</span><span class=\\"token punctuation\\">:</span> <span class=\\"token number\\">0.45</span><span class=\\"token punctuation\\">,</span>\\n               <span class=\\"token string\\">\\"Kiwi\\"</span><span class=\\"token punctuation\\">:</span> <span class=\\"token number\\">0.78</span><span class=\\"token punctuation\\">,</span>\\n               <span class=\\"token string\\">\\"Grapefruit\\"</span><span class=\\"token punctuation\\">:</span> <span class=\\"token number\\">0.64</span><span class=\\"token punctuation\\">]</span></code></pre></div>\\n<p>After we have done this, we will register a <code class=\\"language-text\\">GET</code> route on the router to the <code class=\\"language-text\\">&quot;/fruit&quot;</code> path.  We will want this to take the the name of the fruit, as a String, get the corresponding value and return the Fruit object containing both the fruit name and its price.  Add this code after the dictionary:</p>\\n<div class=\\"gatsby-highlight\\" data-language=\\"swift\\"><pre class=\\"language-swift\\"><code class=\\"language-swift\\">app<span class=\\"token punctuation\\">.</span>router<span class=\\"token punctuation\\">.</span><span class=\\"token keyword\\">get</span><span class=\\"token punctuation\\">(</span><span class=\\"token string\\">\\"/fruit\\"</span><span class=\\"token punctuation\\">)</span> <span class=\\"token punctuation\\">{</span> <span class=\\"token punctuation\\">(</span>fruitName<span class=\\"token punctuation\\">:</span> <span class=\\"token builtin\\">String</span><span class=\\"token punctuation\\">,</span> completion<span class=\\"token punctuation\\">:</span> <span class=\\"token punctuation\\">(</span><span class=\\"token builtin\\">Fruit</span><span class=\\"token operator\\">?</span><span class=\\"token punctuation\\">,</span> <span class=\\"token builtin\\">RequestError</span><span class=\\"token operator\\">?</span><span class=\\"token punctuation\\">)</span> <span class=\\"token operator\\">-</span><span class=\\"token operator\\">></span> <span class=\\"token builtin\\">Void</span><span class=\\"token punctuation\\">)</span> <span class=\\"token keyword\\">in</span>\\n    <span class=\\"token keyword\\">let</span> fruitPrice <span class=\\"token operator\\">=</span> fruitDict<span class=\\"token punctuation\\">[</span>fruitName<span class=\\"token punctuation\\">]</span>\\n    <span class=\\"token keyword\\">let</span> fruitObject <span class=\\"token operator\\">=</span> <span class=\\"token function\\">Fruit</span><span class=\\"token punctuation\\">(</span>name<span class=\\"token punctuation\\">:</span> fruitName<span class=\\"token punctuation\\">,</span> price<span class=\\"token punctuation\\">:</span> fruitPrice<span class=\\"token operator\\">!</span><span class=\\"token punctuation\\">)</span>\\n    <span class=\\"token function\\">completion</span><span class=\\"token punctuation\\">(</span>fruitObject<span class=\\"token punctuation\\">,</span> <span class=\\"token constant\\">nil</span><span class=\\"token punctuation\\">)</span>\\n  <span class=\\"token punctuation\\">}</span></code></pre></div>\\n<p>Your finished <code class=\\"language-text\\">FruitRoutes.swift</code> file should look like so:</p>\\n<div class=\\"gatsby-highlight\\" data-language=\\"swift\\"><pre class=\\"language-swift\\"><code class=\\"language-swift\\"><span class=\\"token keyword\\">import</span> <span class=\\"token builtin\\">Foundation</span>\\n<span class=\\"token keyword\\">import</span> <span class=\\"token builtin\\">KituraContracts</span>\\n\\n<span class=\\"token keyword\\">func</span> <span class=\\"token function\\">initializeFruitRoutes</span><span class=\\"token punctuation\\">(</span>app<span class=\\"token punctuation\\">:</span> <span class=\\"token builtin\\">App</span><span class=\\"token punctuation\\">)</span> <span class=\\"token punctuation\\">{</span>\\n\\n    <span class=\\"token keyword\\">var</span> fruitDict<span class=\\"token punctuation\\">:</span> <span class=\\"token punctuation\\">[</span><span class=\\"token builtin\\">String</span><span class=\\"token punctuation\\">:</span><span class=\\"token builtin\\">Double</span><span class=\\"token punctuation\\">]</span> <span class=\\"token operator\\">=</span> <span class=\\"token punctuation\\">[</span><span class=\\"token punctuation\\">:</span><span class=\\"token punctuation\\">]</span>\\n    fruitDict <span class=\\"token operator\\">=</span> <span class=\\"token punctuation\\">[</span><span class=\\"token string\\">\\"Apple\\"</span><span class=\\"token punctuation\\">:</span> <span class=\\"token number\\">0.35</span><span class=\\"token punctuation\\">,</span>\\n                   <span class=\\"token string\\">\\"Banana\\"</span><span class=\\"token punctuation\\">:</span> <span class=\\"token number\\">0.27</span><span class=\\"token punctuation\\">,</span>\\n                   <span class=\\"token string\\">\\"Orange\\"</span><span class=\\"token punctuation\\">:</span> <span class=\\"token number\\">0.29</span><span class=\\"token punctuation\\">,</span>\\n                   <span class=\\"token string\\">\\"Pear\\"</span><span class=\\"token punctuation\\">:</span> <span class=\\"token number\\">0.18</span><span class=\\"token punctuation\\">,</span>\\n                   <span class=\\"token string\\">\\"Watermelon\\"</span><span class=\\"token punctuation\\">:</span> <span class=\\"token number\\">1.79</span><span class=\\"token punctuation\\">,</span>\\n                   <span class=\\"token string\\">\\"Mango\\"</span><span class=\\"token punctuation\\">:</span> <span class=\\"token number\\">0.68</span><span class=\\"token punctuation\\">,</span>\\n                   <span class=\\"token string\\">\\"Pineapple\\"</span><span class=\\"token punctuation\\">:</span> <span class=\\"token number\\">1.49</span><span class=\\"token punctuation\\">,</span>\\n                   <span class=\\"token string\\">\\"Lemon\\"</span><span class=\\"token punctuation\\">:</span> <span class=\\"token number\\">0.45</span><span class=\\"token punctuation\\">,</span>\\n                   <span class=\\"token string\\">\\"Kiwi\\"</span><span class=\\"token punctuation\\">:</span> <span class=\\"token number\\">0.78</span><span class=\\"token punctuation\\">,</span>\\n                   <span class=\\"token string\\">\\"Grapefruit\\"</span><span class=\\"token punctuation\\">:</span> <span class=\\"token number\\">0.64</span><span class=\\"token punctuation\\">]</span>\\n\\n    app<span class=\\"token punctuation\\">.</span>router<span class=\\"token punctuation\\">.</span><span class=\\"token keyword\\">get</span><span class=\\"token punctuation\\">(</span><span class=\\"token string\\">\\"/fruit\\"</span><span class=\\"token punctuation\\">)</span> <span class=\\"token punctuation\\">{</span> <span class=\\"token punctuation\\">(</span>fruitName<span class=\\"token punctuation\\">:</span> <span class=\\"token builtin\\">String</span><span class=\\"token punctuation\\">,</span> completion<span class=\\"token punctuation\\">:</span> <span class=\\"token punctuation\\">(</span><span class=\\"token builtin\\">Fruit</span><span class=\\"token operator\\">?</span><span class=\\"token punctuation\\">,</span> <span class=\\"token builtin\\">RequestError</span><span class=\\"token operator\\">?</span><span class=\\"token punctuation\\">)</span> <span class=\\"token operator\\">-</span><span class=\\"token operator\\">></span> <span class=\\"token builtin\\">Void</span><span class=\\"token punctuation\\">)</span> <span class=\\"token keyword\\">in</span>\\n        <span class=\\"token keyword\\">let</span> fruitPrice <span class=\\"token operator\\">=</span> fruitDict<span class=\\"token punctuation\\">[</span>fruitName<span class=\\"token punctuation\\">]</span>\\n        <span class=\\"token keyword\\">let</span> fruitObject <span class=\\"token operator\\">=</span> <span class=\\"token function\\">Fruit</span><span class=\\"token punctuation\\">(</span>name<span class=\\"token punctuation\\">:</span> fruitName<span class=\\"token punctuation\\">,</span> price<span class=\\"token punctuation\\">:</span> fruitPrice<span class=\\"token operator\\">!</span><span class=\\"token punctuation\\">)</span>\\n        <span class=\\"token function\\">completion</span><span class=\\"token punctuation\\">(</span>fruitObject<span class=\\"token punctuation\\">,</span> <span class=\\"token constant\\">nil</span><span class=\\"token punctuation\\">)</span>\\n    <span class=\\"token punctuation\\">}</span>\\n<span class=\\"token punctuation\\">}</span></code></pre></div>\\n<h2 id=\\"setting-up-your-ios-app\\"><a href=\\"#setting-up-your-ios-app\\" aria-label=\\"setting up your ios app permalink\\" class=\\"anchor\\"><svg aria-hidden=\\"true\\" focusable=\\"false\\" height=\\"16\\" version=\\"1.1\\" viewBox=\\"0 0 16 16\\" width=\\"16\\"><path fill-rule=\\"evenodd\\" d=\\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\\"></path></svg></a>Setting up your iOS app</h2>\\n<p>Open Xcode, and select File > New > Project and select new iOS Single View App.  Name the product name <code class=\\"language-text\\">FruitApp</code>, enter your organization identifier as your name and select Storyboard as the option for your user interface.  Select the directory where you would like your app to be situated, then click create.</p>\\n<h3 id=\\"adding-kiturakit-using-cocoapods\\"><a href=\\"#adding-kiturakit-using-cocoapods\\" aria-label=\\"adding kiturakit using cocoapods permalink\\" class=\\"anchor\\"><svg aria-hidden=\\"true\\" focusable=\\"false\\" height=\\"16\\" version=\\"1.1\\" viewBox=\\"0 0 16 16\\" width=\\"16\\"><path fill-rule=\\"evenodd\\" d=\\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\\"></path></svg></a>Adding KituraKit using CocoaPods</h3>\\n<p>Before we begin creating the app, open a terminal window and navigate to where your .xcodeproj file is and enter the following code:</p>\\n<div class=\\"gatsby-highlight\\" data-language=\\"text\\"><pre class=\\"language-text\\"><code class=\\"language-text\\">pod init</code></pre></div>\\n<p>This will create the podfile for our app, open the podfile in your default text editor and add the following code beneath <code class=\\"language-text\\"># Pods for FruitApp</code>:</p>\\n<div class=\\"gatsby-highlight\\" data-language=\\"text\\"><pre class=\\"language-text\\"><code class=\\"language-text\\">pod &#39;KituraKit&#39;</code></pre></div>\\n<p>Save the file, close Xcode and run:</p>\\n<div class=\\"gatsby-highlight\\" data-language=\\"text\\"><pre class=\\"language-text\\"><code class=\\"language-text\\">pod install</code></pre></div>\\n<p>You will notice that an .xcworkspace file has been generated, from now on we will be using this file when creating the app.</p>\\n<h3 id=\\"creating-the-user-interface\\"><a href=\\"#creating-the-user-interface\\" aria-label=\\"creating the user interface permalink\\" class=\\"anchor\\"><svg aria-hidden=\\"true\\" focusable=\\"false\\" height=\\"16\\" version=\\"1.1\\" viewBox=\\"0 0 16 16\\" width=\\"16\\"><path fill-rule=\\"evenodd\\" d=\\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\\"></path></svg></a>Creating the user interface</h3>\\n<p>Open <code class=\\"language-text\\">FruitApp.xcworkspace</code> in Xcode and navigate to the <code class=\\"language-text\\">Main.storyboard</code> file, click on this file and you should see a blank iPhone screen.  At the top right of the Xcode window you should see a plus symbol on a button, this is the library for the user interface.  Click on this button and add a label, picker view and button individually so that it looks like this:</p>\\n<p><span\\n      class=\\"gatsby-resp-image-wrapper\\"\\n      style=\\"position: relative; display: block; margin-left: auto; margin-right: auto;  max-width: 1200px;\\"\\n    >\\n      <a\\n    class=\\"gatsby-resp-image-link\\"\\n    href=\\"/static/19c46152fdf6fba573b6c82d96823466/079dc/iOSImage1.png\\"\\n    style=\\"display: block\\"\\n    target=\\"_blank\\"\\n    rel=\\"noopener\\"\\n  >\\n    <span\\n    class=\\"gatsby-resp-image-background-image\\"\\n    style=\\"padding-bottom: 58.92857142857143%; position: relative; bottom: 0; left: 0; background-image: url(\'data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAAMCAYAAABiDJ37AAAACXBIWXMAABYlAAAWJQFJUiTwAAACR0lEQVQoz33Ty27aQBQGYJJ1+gakSpUWDIRbAsbm4gtgbBLuSXDSpqpaQOwq8S7xJm0XLOAtKnXRbZ8DxIJuiIAOzOnxEFpBm1j6ZY3t+XRm5thxdqp9uaiUb6/MulWr1qysKllpOWmViwXL0LJWtVSwKoW8JSUTVjGfs1QpaSXjopVKxFkMTbutVSufa+XSR4d93Vxfgq5pIKcSkDdykBB5EPkTOM0b0Ol0IKPKbNxut6FYOANZSoEiy3+iKgp+q0MyEf+B3K7j/bu3UCoWZpFw8FdS5Ek4FCJeD0dyuk7G4zGZ3N/j/ScBANJsNokoiiSdThNFUVhkRZnhGPhY7CsDzcsq4HIWx6EAPQ4egd/nA/+RD3Rdh9FoBOtrsVhAo9EABEFVVZCxuocsMpkMCILwjYE3V2UsN7EIBwOUc7nA43r1CEg2QKyOxQbtCiVJWoFpSQQ+EsEKg9TLucHjdm2AlFKYzWZAtip8FIzxURD4FWhjDMRlG4YBw+EQCCEwmUxgTpbw4QkQ7ytQjPEQi26B/1ny8okK7T1MpVJ/QYGPkgeQBUGKIB0MBhQtigdC5/M5RZAiSBGkiLH8cyiI4R6eEDyU5TY4nU4ZuE6r1aI4kYEIrUM2QAUbFdvGrhJ8Hg7sgwkFApDDZv90dwf9fh+63S70ej24OD8He7KG77RsliWLYz2Xw60QvjOQj0ZfCzxfx4Y2n+/vm06n03xxcGAGA37z2d6eubuzw4Ifmy8PD/F5wPRwnInNv07d5/W+8XBu2f7zfgMT1bdQxjPLygAAAABJRU5ErkJggg==\'); background-size: cover; display: block;\\"\\n  ></span>\\n  <img\\n        class=\\"gatsby-resp-image-image\\"\\n        alt=\\"iOS UI iamge\\"\\n        title=\\"iOS UI iamge\\"\\n        src=\\"/static/19c46152fdf6fba573b6c82d96823466/6ff5e/iOSImage1.png\\"\\n        srcset=\\"/static/19c46152fdf6fba573b6c82d96823466/135ae/iOSImage1.png 300w,\\n/static/19c46152fdf6fba573b6c82d96823466/34e8a/iOSImage1.png 600w,\\n/static/19c46152fdf6fba573b6c82d96823466/6ff5e/iOSImage1.png 1200w,\\n/static/19c46152fdf6fba573b6c82d96823466/79a4a/iOSImage1.png 1800w,\\n/static/19c46152fdf6fba573b6c82d96823466/2fb56/iOSImage1.png 2400w,\\n/static/19c46152fdf6fba573b6c82d96823466/079dc/iOSImage1.png 3584w\\"\\n        sizes=\\"(max-width: 1200px) 100vw, 1200px\\"\\n        loading=\\"lazy\\"\\n      />\\n  </a>\\n    </span></p>\\n<p>Once you have set up your interface, in the top bar, click Editor > Assistant so that your Xcode has the Main.storyboard and <code class=\\"language-text\\">ViewController.swift</code> file showing.</p>\\n<p>Now, hold control, click on the UIPIckerView and drag it into the ViewController class naming it <code class=\\"language-text\\">itemName</code>.  Then do the same for the Button, naming it <code class=\\"language-text\\">priceButton</code>.</p>\\n<blockquote>\\n<p>Make sure to select outlet as the option for type of connection.</p>\\n</blockquote>\\n<p>Finally, click on the Button and drag it into the ViewController class after the <code class=\\"language-text\\">viewDidLoad</code> function, this time select Action for the type of connection, select the sender to be UIButton and name it <code class=\\"language-text\\">getPriceAction</code>:</p>\\n<h3 id=\\"adding-functionality\\"><a href=\\"#adding-functionality\\" aria-label=\\"adding functionality permalink\\" class=\\"anchor\\"><svg aria-hidden=\\"true\\" focusable=\\"false\\" height=\\"16\\" version=\\"1.1\\" viewBox=\\"0 0 16 16\\" width=\\"16\\"><path fill-rule=\\"evenodd\\" d=\\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\\"></path></svg></a>Adding functionality</h3>\\n<p>Firstly, open the <code class=\\"language-text\\">info.plist</code> file in your default text editor and add this anywhere in the first dictionary declaration:</p>\\n<div class=\\"gatsby-highlight\\" data-language=\\"text\\"><pre class=\\"language-text\\"><code class=\\"language-text\\">&lt;key&gt;NSAppTransportSecurity&lt;/key&gt;\\n&lt;dict&gt;\\n  &lt;key&gt;NSAllowsArbitraryLoads&lt;/key&gt;\\n  &lt;true/&gt;\\n&lt;/dict&gt;</code></pre></div>\\n<p>Next, we need to create another Fruit model.  Create a <code class=\\"language-text\\">Fruit.swift</code> file in your FruitApp folder, open your file and create your Fruit model:</p>\\n<div class=\\"gatsby-highlight\\" data-language=\\"swift\\"><pre class=\\"language-swift\\"><code class=\\"language-swift\\"><span class=\\"token keyword\\">public</span> <span class=\\"token keyword\\">struct</span> <span class=\\"token builtin\\">Fruit</span><span class=\\"token punctuation\\">:</span> <span class=\\"token builtin\\">Codable</span> <span class=\\"token punctuation\\">{</span>\\n    <span class=\\"token keyword\\">public</span> <span class=\\"token keyword\\">let</span> name<span class=\\"token punctuation\\">:</span> <span class=\\"token builtin\\">String</span>\\n    <span class=\\"token keyword\\">public</span> <span class=\\"token keyword\\">let</span> price<span class=\\"token punctuation\\">:</span> <span class=\\"token builtin\\">Double</span>\\n    <span class=\\"token keyword\\">public</span> <span class=\\"token keyword\\">init</span><span class=\\"token punctuation\\">(</span>name<span class=\\"token punctuation\\">:</span> <span class=\\"token builtin\\">String</span><span class=\\"token punctuation\\">,</span> price<span class=\\"token punctuation\\">:</span> <span class=\\"token builtin\\">Double</span><span class=\\"token punctuation\\">)</span> <span class=\\"token punctuation\\">{</span>\\n        <span class=\\"token keyword\\">self</span><span class=\\"token punctuation\\">.</span>name <span class=\\"token operator\\">=</span> name\\n        <span class=\\"token keyword\\">self</span><span class=\\"token punctuation\\">.</span>price <span class=\\"token operator\\">=</span> price\\n    <span class=\\"token punctuation\\">}</span>\\n<span class=\\"token punctuation\\">}</span></code></pre></div>\\n<p>Then go back to our <code class=\\"language-text\\">ViewController.swift</code> file and add these to our import statements:</p>\\n<div class=\\"gatsby-highlight\\" data-language=\\"swift\\"><pre class=\\"language-swift\\"><code class=\\"language-swift\\"><span class=\\"token keyword\\">import</span> <span class=\\"token builtin\\">UIKit</span>\\n<span class=\\"token keyword\\">import</span> <span class=\\"token builtin\\">KituraKit</span>\\n<span class=\\"token keyword\\">import</span> <span class=\\"token builtin\\">KituraContracts</span>\\n<span class=\\"token keyword\\">import</span> <span class=\\"token builtin\\">Dispatch</span></code></pre></div>\\n<p>Now, add UIPickerViewDelegate and UIPickerViewDataSource as conformities for the ViewController so that it looks like this:</p>\\n<div class=\\"gatsby-highlight\\" data-language=\\"swift\\"><pre class=\\"language-swift\\"><code class=\\"language-swift\\"><span class=\\"token keyword\\">class</span> <span class=\\"token class-name\\">ViewController</span><span class=\\"token punctuation\\">:</span> <span class=\\"token builtin\\">UIViewController</span><span class=\\"token punctuation\\">,</span> <span class=\\"token builtin\\">UIPickerViewDelegate</span><span class=\\"token punctuation\\">,</span> <span class=\\"token builtin\\">UIPickerViewDataSource</span> <span class=\\"token punctuation\\">{</span></code></pre></div>\\n<p>After this, create two variables, we will use these later on:</p>\\n<div class=\\"gatsby-highlight\\" data-language=\\"swift\\"><pre class=\\"language-swift\\"><code class=\\"language-swift\\"><span class=\\"token keyword\\">var</span> valueSelected<span class=\\"token punctuation\\">:</span> <span class=\\"token builtin\\">String</span> <span class=\\"token operator\\">=</span> <span class=\\"token string\\">\\"Apple\\"</span>\\n<span class=\\"token keyword\\">var</span> pickerData<span class=\\"token punctuation\\">:</span> <span class=\\"token punctuation\\">[</span><span class=\\"token builtin\\">String</span><span class=\\"token punctuation\\">]</span> <span class=\\"token operator\\">=</span> <span class=\\"token punctuation\\">[</span><span class=\\"token builtin\\">String</span><span class=\\"token punctuation\\">]</span><span class=\\"token punctuation\\">(</span><span class=\\"token punctuation\\">)</span></code></pre></div>\\n<p>Inside the scope of the <code class=\\"language-text\\">viewDidLoad</code> function, we need to add the data for the UIPickerView to display:</p>\\n<div class=\\"gatsby-highlight\\" data-language=\\"swift\\"><pre class=\\"language-swift\\"><code class=\\"language-swift\\"><span class=\\"token keyword\\">self</span><span class=\\"token punctuation\\">.</span>itemName<span class=\\"token punctuation\\">.</span>delegate <span class=\\"token operator\\">=</span> <span class=\\"token keyword\\">self</span>\\n<span class=\\"token keyword\\">self</span><span class=\\"token punctuation\\">.</span>itemName<span class=\\"token punctuation\\">.</span>dataSource <span class=\\"token operator\\">=</span> <span class=\\"token keyword\\">self</span>\\n\\npickerData <span class=\\"token operator\\">=</span> <span class=\\"token punctuation\\">[</span><span class=\\"token string\\">\\"Apple\\"</span><span class=\\"token punctuation\\">,</span> <span class=\\"token string\\">\\"Banana\\"</span><span class=\\"token punctuation\\">,</span> <span class=\\"token string\\">\\"Orange\\"</span><span class=\\"token punctuation\\">,</span> <span class=\\"token string\\">\\"Pear\\"</span><span class=\\"token punctuation\\">,</span> <span class=\\"token string\\">\\"Watermelon\\"</span><span class=\\"token punctuation\\">,</span> <span class=\\"token string\\">\\"Mango\\"</span><span class=\\"token punctuation\\">,</span> <span class=\\"token string\\">\\"Pineapple\\"</span><span class=\\"token punctuation\\">,</span> <span class=\\"token string\\">\\"Lemon\\"</span><span class=\\"token punctuation\\">,</span> <span class=\\"token string\\">\\"Kiwi\\"</span><span class=\\"token punctuation\\">,</span> <span class=\\"token string\\">\\"Grapefruit\\"</span><span class=\\"token punctuation\\">]</span></code></pre></div>\\n<p>In order to get the selected value from the UIPickerView, we have to include several functions. After the <code class=\\"language-text\\">viewDidLoad()</code> function, add:</p>\\n<div class=\\"gatsby-highlight\\" data-language=\\"swift\\"><pre class=\\"language-swift\\"><code class=\\"language-swift\\"><span class=\\"token keyword\\">func</span> <span class=\\"token function\\">numberOfComponents</span><span class=\\"token punctuation\\">(</span><span class=\\"token keyword\\">in</span> pickerView<span class=\\"token punctuation\\">:</span> <span class=\\"token builtin\\">UIPickerView</span><span class=\\"token punctuation\\">)</span> <span class=\\"token operator\\">-</span><span class=\\"token operator\\">></span> <span class=\\"token builtin\\">Int</span> <span class=\\"token punctuation\\">{</span>\\n    <span class=\\"token keyword\\">return</span> <span class=\\"token number\\">1</span>\\n<span class=\\"token punctuation\\">}</span>\\n\\n<span class=\\"token keyword\\">func</span> <span class=\\"token function\\">pickerView</span><span class=\\"token punctuation\\">(</span><span class=\\"token number\\">_</span> pickerView<span class=\\"token punctuation\\">:</span> <span class=\\"token builtin\\">UIPickerView</span><span class=\\"token punctuation\\">,</span> numberOfRowsInComponent component<span class=\\"token punctuation\\">:</span> <span class=\\"token builtin\\">Int</span><span class=\\"token punctuation\\">)</span> <span class=\\"token operator\\">-</span><span class=\\"token operator\\">></span> <span class=\\"token builtin\\">Int</span> <span class=\\"token punctuation\\">{</span>\\n    <span class=\\"token keyword\\">return</span> pickerData<span class=\\"token punctuation\\">.</span><span class=\\"token builtin\\">count</span>\\n<span class=\\"token punctuation\\">}</span>\\n\\n<span class=\\"token keyword\\">func</span> <span class=\\"token function\\">pickerView</span><span class=\\"token punctuation\\">(</span><span class=\\"token number\\">_</span> pickerView<span class=\\"token punctuation\\">:</span> <span class=\\"token builtin\\">UIPickerView</span><span class=\\"token punctuation\\">,</span> titleForRow row<span class=\\"token punctuation\\">:</span> <span class=\\"token builtin\\">Int</span><span class=\\"token punctuation\\">,</span> forComponent component<span class=\\"token punctuation\\">:</span> <span class=\\"token builtin\\">Int</span><span class=\\"token punctuation\\">)</span> <span class=\\"token operator\\">-</span><span class=\\"token operator\\">></span> <span class=\\"token builtin\\">String</span><span class=\\"token operator\\">?</span> <span class=\\"token punctuation\\">{</span>\\n    <span class=\\"token keyword\\">return</span> pickerData<span class=\\"token punctuation\\">[</span>row<span class=\\"token punctuation\\">]</span>\\n<span class=\\"token punctuation\\">}</span>\\n\\n<span class=\\"token keyword\\">func</span> <span class=\\"token function\\">pickerView</span><span class=\\"token punctuation\\">(</span><span class=\\"token number\\">_</span> pickerView<span class=\\"token punctuation\\">:</span> <span class=\\"token builtin\\">UIPickerView</span><span class=\\"token punctuation\\">,</span> didSelectRow row<span class=\\"token punctuation\\">:</span> <span class=\\"token builtin\\">Int</span><span class=\\"token punctuation\\">,</span> inComponent component<span class=\\"token punctuation\\">:</span> <span class=\\"token builtin\\">Int</span><span class=\\"token punctuation\\">)</span> <span class=\\"token punctuation\\">{</span>\\n    valueSelected <span class=\\"token operator\\">=</span> pickerData<span class=\\"token punctuation\\">[</span>row<span class=\\"token punctuation\\">]</span> <span class=\\"token keyword\\">as</span> <span class=\\"token builtin\\">String</span>\\n<span class=\\"token punctuation\\">}</span></code></pre></div>\\n<p>Now, when using the variable <code class=\\"language-text\\">valueSelected</code>, it will return the value that is currently selected on the UIPickerView.</p>\\n<blockquote>\\n<p><code class=\\"language-text\\">valueSelected</code> has an initial default value set to Apple, the first fruit in our list.</p>\\n</blockquote>\\n<p>Inside the scope of the <code class=\\"language-text\\">getPriceAction</code> function we will now set up the client side of our application.  Firstly we will create a client object:</p>\\n<div class=\\"gatsby-highlight\\" data-language=\\"swift\\"><pre class=\\"language-swift\\"><code class=\\"language-swift\\"><span class=\\"token keyword\\">if</span> <span class=\\"token keyword\\">let</span> client <span class=\\"token operator\\">=</span> <span class=\\"token function\\">KituraKit</span><span class=\\"token punctuation\\">(</span>baseURL<span class=\\"token punctuation\\">:</span> <span class=\\"token string\\">\\"http://localhost:8080\\"</span><span class=\\"token punctuation\\">)</span> <span class=\\"token punctuation\\">{</span>\\n\\n<span class=\\"token punctuation\\">}</span></code></pre></div>\\n<p>Inside this if statement, we will declare our <code class=\\"language-text\\">GET</code> route, which has an identifier of <code class=\\"language-text\\">valueSelected</code> and expects a Fruit object returned:</p>\\n<div class=\\"gatsby-highlight\\" data-language=\\"swift\\"><pre class=\\"language-swift\\"><code class=\\"language-swift\\">client<span class=\\"token punctuation\\">.</span><span class=\\"token keyword\\">get</span><span class=\\"token punctuation\\">(</span><span class=\\"token string\\">\\"/fruit\\"</span><span class=\\"token punctuation\\">,</span> identifier<span class=\\"token punctuation\\">:</span> valueSelected<span class=\\"token punctuation\\">)</span> <span class=\\"token punctuation\\">{</span> <span class=\\"token punctuation\\">(</span>returnedFruit<span class=\\"token punctuation\\">:</span> <span class=\\"token builtin\\">Fruit</span><span class=\\"token operator\\">?</span><span class=\\"token punctuation\\">,</span> error<span class=\\"token punctuation\\">:</span> <span class=\\"token builtin\\">RequestError</span><span class=\\"token operator\\">?</span><span class=\\"token punctuation\\">)</span> <span class=\\"token operator\\">-</span><span class=\\"token operator\\">></span> <span class=\\"token builtin\\">Void</span> <span class=\\"token keyword\\">in</span>\\n<span class=\\"token punctuation\\">}</span></code></pre></div>\\n<p>With the returned fruit, we will create an alert that will tell the user how much one of their selected fruit costs:</p>\\n<div class=\\"gatsby-highlight\\" data-language=\\"swift\\"><pre class=\\"language-swift\\"><code class=\\"language-swift\\"><span class=\\"token keyword\\">let</span> alert <span class=\\"token operator\\">=</span> <span class=\\"token function\\">UIAlertController</span><span class=\\"token punctuation\\">(</span>title<span class=\\"token punctuation\\">:</span> <span class=\\"token string\\">\\"Fruit price:\\"</span><span class=\\"token punctuation\\">,</span> message<span class=\\"token punctuation\\">:</span> <span class=\\"token string\\">\\"<span class=\\"token interpolation\\"><span class=\\"token delimiter variable\\">\\\\(</span>returnedFruit<span class=\\"token operator\\">!</span><span class=\\"token punctuation\\">.</span>name<span class=\\"token delimiter variable\\">)</span></span>s cost £<span class=\\"token interpolation\\"><span class=\\"token delimiter variable\\">\\\\(</span>returnedFruit<span class=\\"token operator\\">!</span><span class=\\"token punctuation\\">.</span>price<span class=\\"token delimiter variable\\">)</span></span> each\\"</span><span class=\\"token punctuation\\">,</span> preferredStyle<span class=\\"token punctuation\\">:</span> <span class=\\"token builtin\\">UIAlertController</span><span class=\\"token punctuation\\">.</span><span class=\\"token builtin\\">Style</span><span class=\\"token punctuation\\">.</span>alert<span class=\\"token punctuation\\">)</span>\\nalert<span class=\\"token punctuation\\">.</span><span class=\\"token function\\">addAction</span><span class=\\"token punctuation\\">(</span><span class=\\"token function\\">UIAlertAction</span><span class=\\"token punctuation\\">(</span>title<span class=\\"token punctuation\\">:</span> <span class=\\"token string\\">\\"Dismiss\\"</span><span class=\\"token punctuation\\">,</span> style<span class=\\"token punctuation\\">:</span> <span class=\\"token punctuation\\">.</span><span class=\\"token keyword\\">default</span><span class=\\"token punctuation\\">)</span><span class=\\"token punctuation\\">)</span></code></pre></div>\\n<p>Finally, we need to present this alert in the view:</p>\\n<div class=\\"gatsby-highlight\\" data-language=\\"swift\\"><pre class=\\"language-swift\\"><code class=\\"language-swift\\"><span class=\\"token builtin\\">DispatchQueue</span><span class=\\"token punctuation\\">.</span>main<span class=\\"token punctuation\\">.</span>async <span class=\\"token punctuation\\">{</span>\\n    <span class=\\"token keyword\\">self</span><span class=\\"token punctuation\\">.</span><span class=\\"token function\\">present</span><span class=\\"token punctuation\\">(</span>alert<span class=\\"token punctuation\\">,</span> animated<span class=\\"token punctuation\\">:</span> <span class=\\"token boolean\\">true</span><span class=\\"token punctuation\\">,</span> completion<span class=\\"token punctuation\\">:</span> <span class=\\"token constant\\">nil</span><span class=\\"token punctuation\\">)</span>\\n<span class=\\"token punctuation\\">}</span></code></pre></div>\\n<blockquote>\\n<p>Any code that changes the view has to be executed on the main thread, this is why we have to use <code class=\\"language-text\\">DispatchQueue.main.async</code>.</p>\\n</blockquote>\\n<p>Congratulations!  If you have followed everything correctly, your <code class=\\"language-text\\">ViewController.swift</code> file should look like this:</p>\\n<div class=\\"gatsby-highlight\\" data-language=\\"swift\\"><pre class=\\"language-swift\\"><code class=\\"language-swift\\"><span class=\\"token keyword\\">import</span> <span class=\\"token builtin\\">UIKit</span>\\n<span class=\\"token keyword\\">import</span> <span class=\\"token builtin\\">KituraKit</span>\\n<span class=\\"token keyword\\">import</span> <span class=\\"token builtin\\">KituraContracts</span>\\n<span class=\\"token keyword\\">import</span> <span class=\\"token builtin\\">Dispatch</span>\\n\\n<span class=\\"token keyword\\">class</span> <span class=\\"token class-name\\">ViewController</span><span class=\\"token punctuation\\">:</span> <span class=\\"token builtin\\">UIViewController</span><span class=\\"token punctuation\\">,</span> <span class=\\"token builtin\\">UIPickerViewDelegate</span><span class=\\"token punctuation\\">,</span> <span class=\\"token builtin\\">UIPickerViewDataSource</span> <span class=\\"token punctuation\\">{</span>\\n\\n    <span class=\\"token atrule\\">@IBOutlet</span> <span class=\\"token keyword\\">weak</span> <span class=\\"token keyword\\">var</span> itemName<span class=\\"token punctuation\\">:</span> <span class=\\"token builtin\\">UIPickerView</span><span class=\\"token operator\\">!</span>\\n    <span class=\\"token atrule\\">@IBOutlet</span> <span class=\\"token keyword\\">weak</span> <span class=\\"token keyword\\">var</span> priceButton<span class=\\"token punctuation\\">:</span> <span class=\\"token builtin\\">UIButton</span><span class=\\"token operator\\">!</span>\\n\\n    <span class=\\"token keyword\\">var</span> valueSelected<span class=\\"token punctuation\\">:</span> <span class=\\"token builtin\\">String</span> <span class=\\"token operator\\">=</span> <span class=\\"token string\\">\\"Apple\\"</span>\\n\\n    <span class=\\"token keyword\\">var</span> pickerData<span class=\\"token punctuation\\">:</span> <span class=\\"token punctuation\\">[</span><span class=\\"token builtin\\">String</span><span class=\\"token punctuation\\">]</span> <span class=\\"token operator\\">=</span> <span class=\\"token punctuation\\">[</span><span class=\\"token builtin\\">String</span><span class=\\"token punctuation\\">]</span><span class=\\"token punctuation\\">(</span><span class=\\"token punctuation\\">)</span>\\n\\n    <span class=\\"token keyword\\">override</span> <span class=\\"token keyword\\">func</span> <span class=\\"token function\\">viewDidLoad</span><span class=\\"token punctuation\\">(</span><span class=\\"token punctuation\\">)</span> <span class=\\"token punctuation\\">{</span>\\n        <span class=\\"token keyword\\">super</span><span class=\\"token punctuation\\">.</span><span class=\\"token function\\">viewDidLoad</span><span class=\\"token punctuation\\">(</span><span class=\\"token punctuation\\">)</span>\\n        <span class=\\"token comment\\">// Do any additional setup after loading the view.</span>\\n\\n        <span class=\\"token keyword\\">self</span><span class=\\"token punctuation\\">.</span>itemName<span class=\\"token punctuation\\">.</span>delegate <span class=\\"token operator\\">=</span> <span class=\\"token keyword\\">self</span>\\n        <span class=\\"token keyword\\">self</span><span class=\\"token punctuation\\">.</span>itemName<span class=\\"token punctuation\\">.</span>dataSource <span class=\\"token operator\\">=</span> <span class=\\"token keyword\\">self</span>\\n\\n        pickerData <span class=\\"token operator\\">=</span> <span class=\\"token punctuation\\">[</span><span class=\\"token string\\">\\"Apple\\"</span><span class=\\"token punctuation\\">,</span> <span class=\\"token string\\">\\"Banana\\"</span><span class=\\"token punctuation\\">,</span> <span class=\\"token string\\">\\"Orange\\"</span><span class=\\"token punctuation\\">,</span> <span class=\\"token string\\">\\"Pear\\"</span><span class=\\"token punctuation\\">,</span> <span class=\\"token string\\">\\"Watermelon\\"</span><span class=\\"token punctuation\\">,</span> <span class=\\"token string\\">\\"Mango\\"</span><span class=\\"token punctuation\\">,</span> <span class=\\"token string\\">\\"Pineapple\\"</span><span class=\\"token punctuation\\">,</span> <span class=\\"token string\\">\\"Lemon\\"</span><span class=\\"token punctuation\\">,</span> <span class=\\"token string\\">\\"Kiwi\\"</span><span class=\\"token punctuation\\">,</span> <span class=\\"token string\\">\\"Grapefruit\\"</span><span class=\\"token punctuation\\">]</span>\\n    <span class=\\"token punctuation\\">}</span>\\n\\n    <span class=\\"token keyword\\">func</span> <span class=\\"token function\\">numberOfComponents</span><span class=\\"token punctuation\\">(</span><span class=\\"token keyword\\">in</span> pickerView<span class=\\"token punctuation\\">:</span> <span class=\\"token builtin\\">UIPickerView</span><span class=\\"token punctuation\\">)</span> <span class=\\"token operator\\">-</span><span class=\\"token operator\\">></span> <span class=\\"token builtin\\">Int</span> <span class=\\"token punctuation\\">{</span>\\n        <span class=\\"token keyword\\">return</span> <span class=\\"token number\\">1</span>\\n    <span class=\\"token punctuation\\">}</span>\\n\\n    <span class=\\"token keyword\\">func</span> <span class=\\"token function\\">pickerView</span><span class=\\"token punctuation\\">(</span><span class=\\"token number\\">_</span> pickerView<span class=\\"token punctuation\\">:</span> <span class=\\"token builtin\\">UIPickerView</span><span class=\\"token punctuation\\">,</span> numberOfRowsInComponent component<span class=\\"token punctuation\\">:</span> <span class=\\"token builtin\\">Int</span><span class=\\"token punctuation\\">)</span> <span class=\\"token operator\\">-</span><span class=\\"token operator\\">></span> <span class=\\"token builtin\\">Int</span> <span class=\\"token punctuation\\">{</span>\\n        <span class=\\"token keyword\\">return</span> pickerData<span class=\\"token punctuation\\">.</span><span class=\\"token builtin\\">count</span>\\n    <span class=\\"token punctuation\\">}</span>\\n\\n    <span class=\\"token keyword\\">func</span> <span class=\\"token function\\">pickerView</span><span class=\\"token punctuation\\">(</span><span class=\\"token number\\">_</span> pickerView<span class=\\"token punctuation\\">:</span> <span class=\\"token builtin\\">UIPickerView</span><span class=\\"token punctuation\\">,</span> titleForRow row<span class=\\"token punctuation\\">:</span> <span class=\\"token builtin\\">Int</span><span class=\\"token punctuation\\">,</span> forComponent component<span class=\\"token punctuation\\">:</span> <span class=\\"token builtin\\">Int</span><span class=\\"token punctuation\\">)</span> <span class=\\"token operator\\">-</span><span class=\\"token operator\\">></span> <span class=\\"token builtin\\">String</span><span class=\\"token operator\\">?</span> <span class=\\"token punctuation\\">{</span>\\n        <span class=\\"token keyword\\">return</span> pickerData<span class=\\"token punctuation\\">[</span>row<span class=\\"token punctuation\\">]</span>\\n    <span class=\\"token punctuation\\">}</span>\\n\\n    <span class=\\"token keyword\\">func</span> <span class=\\"token function\\">pickerView</span><span class=\\"token punctuation\\">(</span><span class=\\"token number\\">_</span> pickerView<span class=\\"token punctuation\\">:</span> <span class=\\"token builtin\\">UIPickerView</span><span class=\\"token punctuation\\">,</span> didSelectRow row<span class=\\"token punctuation\\">:</span> <span class=\\"token builtin\\">Int</span><span class=\\"token punctuation\\">,</span> inComponent component<span class=\\"token punctuation\\">:</span> <span class=\\"token builtin\\">Int</span><span class=\\"token punctuation\\">)</span> <span class=\\"token punctuation\\">{</span>\\n        valueSelected <span class=\\"token operator\\">=</span> pickerData<span class=\\"token punctuation\\">[</span>row<span class=\\"token punctuation\\">]</span> <span class=\\"token keyword\\">as</span> <span class=\\"token builtin\\">String</span>\\n    <span class=\\"token punctuation\\">}</span>\\n\\n    <span class=\\"token atrule\\">@IBAction</span> <span class=\\"token keyword\\">func</span> <span class=\\"token function\\">getPriceAction</span><span class=\\"token punctuation\\">(</span><span class=\\"token number\\">_</span> sender<span class=\\"token punctuation\\">:</span> <span class=\\"token builtin\\">UIButton</span><span class=\\"token punctuation\\">)</span> <span class=\\"token punctuation\\">{</span>\\n        <span class=\\"token keyword\\">if</span> <span class=\\"token keyword\\">let</span> client <span class=\\"token operator\\">=</span> <span class=\\"token function\\">KituraKit</span><span class=\\"token punctuation\\">(</span>baseURL<span class=\\"token punctuation\\">:</span> <span class=\\"token string\\">\\"http://localhost:8080\\"</span><span class=\\"token punctuation\\">)</span> <span class=\\"token punctuation\\">{</span>\\n            <span class=\\"token comment\\">// Use client to make requests here</span>\\n            client<span class=\\"token punctuation\\">.</span><span class=\\"token keyword\\">get</span><span class=\\"token punctuation\\">(</span><span class=\\"token string\\">\\"/fruit\\"</span><span class=\\"token punctuation\\">,</span> identifier<span class=\\"token punctuation\\">:</span> valueSelected<span class=\\"token punctuation\\">)</span> <span class=\\"token punctuation\\">{</span> <span class=\\"token punctuation\\">(</span>returnedFruit<span class=\\"token punctuation\\">:</span> <span class=\\"token builtin\\">Fruit</span><span class=\\"token operator\\">?</span><span class=\\"token punctuation\\">,</span> error<span class=\\"token punctuation\\">:</span> <span class=\\"token builtin\\">RequestError</span><span class=\\"token operator\\">?</span><span class=\\"token punctuation\\">)</span> <span class=\\"token operator\\">-</span><span class=\\"token operator\\">></span> <span class=\\"token builtin\\">Void</span> <span class=\\"token keyword\\">in</span>\\n                <span class=\\"token keyword\\">let</span> alert <span class=\\"token operator\\">=</span> <span class=\\"token function\\">UIAlertController</span><span class=\\"token punctuation\\">(</span>title<span class=\\"token punctuation\\">:</span> <span class=\\"token string\\">\\"Fruit price:\\"</span><span class=\\"token punctuation\\">,</span> message<span class=\\"token punctuation\\">:</span> <span class=\\"token string\\">\\"<span class=\\"token interpolation\\"><span class=\\"token delimiter variable\\">\\\\(</span>returnedFruit<span class=\\"token operator\\">!</span><span class=\\"token punctuation\\">.</span>name<span class=\\"token delimiter variable\\">)</span></span>s cost £<span class=\\"token interpolation\\"><span class=\\"token delimiter variable\\">\\\\(</span>returnedFruit<span class=\\"token operator\\">!</span><span class=\\"token punctuation\\">.</span>price<span class=\\"token delimiter variable\\">)</span></span> each\\"</span><span class=\\"token punctuation\\">,</span> preferredStyle<span class=\\"token punctuation\\">:</span> <span class=\\"token builtin\\">UIAlertController</span><span class=\\"token punctuation\\">.</span><span class=\\"token builtin\\">Style</span><span class=\\"token punctuation\\">.</span>alert<span class=\\"token punctuation\\">)</span>\\n                alert<span class=\\"token punctuation\\">.</span><span class=\\"token function\\">addAction</span><span class=\\"token punctuation\\">(</span><span class=\\"token function\\">UIAlertAction</span><span class=\\"token punctuation\\">(</span>title<span class=\\"token punctuation\\">:</span> <span class=\\"token string\\">\\"Dismiss\\"</span><span class=\\"token punctuation\\">,</span> style<span class=\\"token punctuation\\">:</span> <span class=\\"token punctuation\\">.</span><span class=\\"token keyword\\">default</span><span class=\\"token punctuation\\">)</span><span class=\\"token punctuation\\">)</span>\\n                <span class=\\"token builtin\\">DispatchQueue</span><span class=\\"token punctuation\\">.</span>main<span class=\\"token punctuation\\">.</span>async <span class=\\"token punctuation\\">{</span>\\n                    <span class=\\"token keyword\\">self</span><span class=\\"token punctuation\\">.</span><span class=\\"token function\\">present</span><span class=\\"token punctuation\\">(</span>alert<span class=\\"token punctuation\\">,</span> animated<span class=\\"token punctuation\\">:</span> <span class=\\"token boolean\\">true</span><span class=\\"token punctuation\\">,</span> completion<span class=\\"token punctuation\\">:</span> <span class=\\"token constant\\">nil</span><span class=\\"token punctuation\\">)</span>\\n                <span class=\\"token punctuation\\">}</span>\\n            <span class=\\"token punctuation\\">}</span>\\n        <span class=\\"token punctuation\\">}</span>\\n    <span class=\\"token punctuation\\">}</span>\\n<span class=\\"token punctuation\\">}</span></code></pre></div>\\n<h2 id=\\"test-your-app\\"><a href=\\"#test-your-app\\" aria-label=\\"test your app permalink\\" class=\\"anchor\\"><svg aria-hidden=\\"true\\" focusable=\\"false\\" height=\\"16\\" version=\\"1.1\\" viewBox=\\"0 0 16 16\\" width=\\"16\\"><path fill-rule=\\"evenodd\\" d=\\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\\"></path></svg></a>Test your app</h2>\\n<p>Now everything is set up, run your server project and your iOS project to test your app!</p>\\n<p>You have now successfully created a front end in iOS using a KituraKit client and a corresponding back end on a server using Kitura!</p>","frontmatter":{"path":"/docs/client/iOSClient","title":"iOS Client"}}},{"node":{"html":"<h1 id=\\"kitura-couchdb\\"><a href=\\"#kitura-couchdb\\" aria-label=\\"kitura couchdb permalink\\" class=\\"anchor\\"><svg aria-hidden=\\"true\\" focusable=\\"false\\" height=\\"16\\" version=\\"1.1\\" viewBox=\\"0 0 16 16\\" width=\\"16\\"><path fill-rule=\\"evenodd\\" d=\\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\\"></path></svg></a>Kitura CouchDB</h1>\\n<p><a href=\\"https://couchdb.apache.org\\">CouchDB</a> is a NoSQL (or non-relational) database which takes a document-oriented approach to data storage.</p>\\n<p><a href=\\"https://github.com/IBM-Swift/Kitura-CouchDB\\">Kitura-CouchDB</a> is a pure Swift client which allows Kitura applications to interact with a CouchDB or <a href=\\"https://www.ibm.com/uk-en/cloud/cloudant\\">Cloudant</a> database.</p>\\n<p>In this guide we’ll demonstrate how to create a CouchDB database, define a CouchDB document, save the document to the database and finally retrieve the document from the database.</p>\\n<hr>\\n<h2 id=\\"step-1-install-couchdb-and-create-a-database\\"><a href=\\"#step-1-install-couchdb-and-create-a-database\\" aria-label=\\"step 1 install couchdb and create a database permalink\\" class=\\"anchor\\"><svg aria-hidden=\\"true\\" focusable=\\"false\\" height=\\"16\\" version=\\"1.1\\" viewBox=\\"0 0 16 16\\" width=\\"16\\"><path fill-rule=\\"evenodd\\" d=\\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\\"></path></svg></a>Step 1: Install CouchDB and create a database</h2>\\n<p>Before we can use CouchDB within our server we first need to:</p>\\n<ul>\\n<li><a href=\\"https://couchdb.apache.org/#download\\">Download and install CouchDB</a>.</li>\\n<li>Set up an admin username and password in CouchDB.</li>\\n<li>Create a database. (In this example we\'re using the name <code class=\\"language-text\\">bookstore</code>.)</li>\\n</ul>\\n<blockquote>\\n<p>It is important to remember the database name and credentials, as we will need them later on in the guide.</p>\\n</blockquote>\\n<hr>\\n<h2 id=\\"step-2-add-couchdb-to-your-project\\"><a href=\\"#step-2-add-couchdb-to-your-project\\" aria-label=\\"step 2 add couchdb to your project permalink\\" class=\\"anchor\\"><svg aria-hidden=\\"true\\" focusable=\\"false\\" height=\\"16\\" version=\\"1.1\\" viewBox=\\"0 0 16 16\\" width=\\"16\\"><path fill-rule=\\"evenodd\\" d=\\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\\"></path></svg></a>Step 2: Add CouchDB to your project</h2>\\n<p>To use CouchDB from a server, we need to <a href=\\"https://github.com/IBM-Swift/Kitura-CouchDB#add-dependencies\\">add Kitura-CouchDB to our dependencies</a>.</p>\\n<blockquote>\\n<p>If you don\'t have a server, follow our <a href=\\"../getting-started/create-server-cli\\">Create a server</a> guide.</p>\\n</blockquote>\\n<hr>\\n<h2 id=\\"step-3-define-the-couchdb-routes\\"><a href=\\"#step-3-define-the-couchdb-routes\\" aria-label=\\"step 3 define the couchdb routes permalink\\" class=\\"anchor\\"><svg aria-hidden=\\"true\\" focusable=\\"false\\" height=\\"16\\" version=\\"1.1\\" viewBox=\\"0 0 16 16\\" width=\\"16\\"><path fill-rule=\\"evenodd\\" d=\\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\\"></path></svg></a>Step 3: Define the CouchDB routes</h2>\\n<p>Next, we are going to create a file in our project for the CouchDB routes.</p>\\n<p>Open your <code class=\\"language-text\\">Application.swift</code> file:</p>\\n<div class=\\"gatsby-highlight\\" data-language=\\"text\\"><pre class=\\"language-text\\"><code class=\\"language-text\\">open Sources/Application/Application.swift</code></pre></div>\\n<p>Inside the <code class=\\"language-text\\">postInit()</code> function add:</p>\\n<div class=\\"gatsby-highlight\\" data-language=\\"swift\\"><pre class=\\"language-swift\\"><code class=\\"language-swift\\"><span class=\\"token function\\">initializeCouchRoutes</span><span class=\\"token punctuation\\">(</span>app<span class=\\"token punctuation\\">:</span> <span class=\\"token keyword\\">self</span><span class=\\"token punctuation\\">)</span></code></pre></div>\\n<p>Create a new file, called <code class=\\"language-text\\">CouchRoutes.swift</code>:</p>\\n<div class=\\"gatsby-highlight\\" data-language=\\"text\\"><pre class=\\"language-text\\"><code class=\\"language-text\\">touch Sources/Application/Routes/CouchRoutes.swift</code></pre></div>\\n<p>Open your <code class=\\"language-text\\">CouchRoutes.swift</code> file:</p>\\n<div class=\\"gatsby-highlight\\" data-language=\\"text\\"><pre class=\\"language-text\\"><code class=\\"language-text\\">open Sources/Application/Routes/CouchRoutes.swift</code></pre></div>\\n<p>Inside our file, we will define two routes. In the first route, we will retrieve a book from the user and save it into the bookstore database. In the second route, we will retrieve all of the documents that have been saved to the database.</p>\\n<div class=\\"gatsby-highlight\\" data-language=\\"swift\\"><pre class=\\"language-swift\\"><code class=\\"language-swift\\"><span class=\\"token keyword\\">import</span> <span class=\\"token builtin\\">KituraContracts</span>\\n<span class=\\"token keyword\\">import</span> <span class=\\"token builtin\\">CouchDB</span>\\n<span class=\\"token keyword\\">import</span> <span class=\\"token builtin\\">LoggerAPI</span>\\n\\n<span class=\\"token keyword\\">func</span> <span class=\\"token function\\">initializeCouchRoutes</span><span class=\\"token punctuation\\">(</span>app<span class=\\"token punctuation\\">:</span> <span class=\\"token builtin\\">App</span><span class=\\"token punctuation\\">)</span> <span class=\\"token punctuation\\">{</span>\\n    app<span class=\\"token punctuation\\">.</span>router<span class=\\"token punctuation\\">.</span><span class=\\"token function\\">post</span><span class=\\"token punctuation\\">(</span><span class=\\"token string\\">\\"/couch\\"</span><span class=\\"token punctuation\\">,</span> handler<span class=\\"token punctuation\\">:</span> app<span class=\\"token punctuation\\">.</span>couchSaveHandler<span class=\\"token punctuation\\">)</span>\\n    app<span class=\\"token punctuation\\">.</span>router<span class=\\"token punctuation\\">.</span><span class=\\"token keyword\\">get</span><span class=\\"token punctuation\\">(</span><span class=\\"token string\\">\\"/couch\\"</span><span class=\\"token punctuation\\">,</span> handler<span class=\\"token punctuation\\">:</span> app<span class=\\"token punctuation\\">.</span>couchFindAllHandler<span class=\\"token punctuation\\">)</span>\\n<span class=\\"token punctuation\\">}</span>\\n<span class=\\"token keyword\\">extension</span> <span class=\\"token builtin\\">App</span> <span class=\\"token punctuation\\">{</span>\\n    <span class=\\"token comment\\">// Define ConnectionProperties and CouchDBClient here</span>\\n\\n    <span class=\\"token keyword\\">func</span> <span class=\\"token function\\">couchSaveHandler</span><span class=\\"token punctuation\\">(</span>book<span class=\\"token punctuation\\">:</span> <span class=\\"token builtin\\">BookDocument</span><span class=\\"token punctuation\\">,</span> completion<span class=\\"token punctuation\\">:</span> @escaping <span class=\\"token punctuation\\">(</span><span class=\\"token builtin\\">BookDocument</span><span class=\\"token operator\\">?</span><span class=\\"token punctuation\\">,</span> <span class=\\"token builtin\\">RequestError</span><span class=\\"token operator\\">?</span><span class=\\"token punctuation\\">)</span> <span class=\\"token operator\\">-</span><span class=\\"token operator\\">></span> <span class=\\"token builtin\\">Void</span><span class=\\"token punctuation\\">)</span> <span class=\\"token punctuation\\">{</span>\\n        <span class=\\"token comment\\">// Save book here</span>\\n    <span class=\\"token punctuation\\">}</span>\\n\\n    <span class=\\"token keyword\\">func</span> <span class=\\"token function\\">couchFindAllHandler</span><span class=\\"token punctuation\\">(</span>completion<span class=\\"token punctuation\\">:</span> @escaping <span class=\\"token punctuation\\">(</span><span class=\\"token punctuation\\">[</span><span class=\\"token builtin\\">BookDocument</span><span class=\\"token punctuation\\">]</span><span class=\\"token operator\\">?</span><span class=\\"token punctuation\\">,</span> <span class=\\"token builtin\\">RequestError</span><span class=\\"token operator\\">?</span><span class=\\"token punctuation\\">)</span> <span class=\\"token operator\\">-</span><span class=\\"token operator\\">></span> <span class=\\"token builtin\\">Void</span><span class=\\"token punctuation\\">)</span> <span class=\\"token punctuation\\">{</span>\\n        <span class=\\"token comment\\">// Get all books here</span>\\n    <span class=\\"token punctuation\\">}</span>\\n<span class=\\"token punctuation\\">}</span></code></pre></div>\\n<hr>\\n<h2 id=\\"step-4-define-a-document\\"><a href=\\"#step-4-define-a-document\\" aria-label=\\"step 4 define a document permalink\\" class=\\"anchor\\"><svg aria-hidden=\\"true\\" focusable=\\"false\\" height=\\"16\\" version=\\"1.1\\" viewBox=\\"0 0 16 16\\" width=\\"16\\"><path fill-rule=\\"evenodd\\" d=\\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\\"></path></svg></a>Step 4: Define a Document</h2>\\n<p>CouchDB is a NoSQL database for storing documents. A <code class=\\"language-text\\">Document</code> is any structure that can be represented as JSON and contains <code class=\\"language-text\\">_id</code> and <code class=\\"language-text\\">_rev</code> fields.</p>\\n<ul>\\n<li>The <code class=\\"language-text\\">id</code> field is the unique identifier for the document.</li>\\n<li>The <code class=\\"language-text\\">_rev</code> field is the revision of the document. It is returned when you make requests and is used to prevent conflicts from multiple users updating the same document.</li>\\n</ul>\\n<p>To define a CouchDB document, all we need to do is create a Swift object and make it conform to the <code class=\\"language-text\\">Document</code> protocol.</p>\\n<p>Create a new file, called <code class=\\"language-text\\">BookDocument.swift</code>:</p>\\n<div class=\\"gatsby-highlight\\" data-language=\\"text\\"><pre class=\\"language-text\\"><code class=\\"language-text\\">touch Sources/Application/Models/BookDocument.swift</code></pre></div>\\n<p>Open your <code class=\\"language-text\\">BookDocument.swift</code> file:</p>\\n<div class=\\"gatsby-highlight\\" data-language=\\"text\\"><pre class=\\"language-text\\"><code class=\\"language-text\\">open Sources/Application/Models/BookDocument.swift</code></pre></div>\\n<p>Inside this file, define your <code class=\\"language-text\\">BookDocument</code>:</p>\\n<div class=\\"gatsby-highlight\\" data-language=\\"swift\\"><pre class=\\"language-swift\\"><code class=\\"language-swift\\"><span class=\\"token keyword\\">import</span> <span class=\\"token builtin\\">CouchDB</span>\\n\\n<span class=\\"token keyword\\">struct</span> <span class=\\"token builtin\\">BookDocument</span><span class=\\"token punctuation\\">:</span> <span class=\\"token builtin\\">Document</span> <span class=\\"token punctuation\\">{</span>\\n    <span class=\\"token keyword\\">let</span> _id<span class=\\"token punctuation\\">:</span> <span class=\\"token builtin\\">String</span><span class=\\"token operator\\">?</span>\\n    <span class=\\"token keyword\\">var</span> _rev<span class=\\"token punctuation\\">:</span> <span class=\\"token builtin\\">String</span><span class=\\"token operator\\">?</span>\\n    <span class=\\"token keyword\\">let</span> title<span class=\\"token punctuation\\">:</span> <span class=\\"token builtin\\">String</span>\\n    <span class=\\"token keyword\\">let</span> price<span class=\\"token punctuation\\">:</span> <span class=\\"token builtin\\">Double</span>\\n    <span class=\\"token keyword\\">let</span> genre<span class=\\"token punctuation\\">:</span> <span class=\\"token builtin\\">String</span>\\n<span class=\\"token punctuation\\">}</span></code></pre></div>\\n<hr>\\n<h2 id=\\"step-5-connect-to-couchdb-database\\"><a href=\\"#step-5-connect-to-couchdb-database\\" aria-label=\\"step 5 connect to couchdb database permalink\\" class=\\"anchor\\"><svg aria-hidden=\\"true\\" focusable=\\"false\\" height=\\"16\\" version=\\"1.1\\" viewBox=\\"0 0 16 16\\" width=\\"16\\"><path fill-rule=\\"evenodd\\" d=\\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\\"></path></svg></a>Step 5: Connect to CouchDB database</h2>\\n<p>Inside our App extension, we will define our connection properties for CouchDB, substituting in the credentials we defined earlier for the admin username and password:</p>\\n<div class=\\"gatsby-highlight\\" data-language=\\"swift\\"><pre class=\\"language-swift\\"><code class=\\"language-swift\\"><span class=\\"token keyword\\">static</span> <span class=\\"token keyword\\">let</span> properties <span class=\\"token operator\\">=</span> <span class=\\"token function\\">ConnectionProperties</span><span class=\\"token punctuation\\">(</span>\\n        host<span class=\\"token punctuation\\">:</span> <span class=\\"token string\\">\\"127.0.0.1\\"</span><span class=\\"token punctuation\\">,</span>              <span class=\\"token comment\\">// http address</span>\\n        port<span class=\\"token punctuation\\">:</span> <span class=\\"token number\\">5984</span><span class=\\"token punctuation\\">,</span>                     <span class=\\"token comment\\">// http port</span>\\n        secured<span class=\\"token punctuation\\">:</span> <span class=\\"token boolean\\">false</span><span class=\\"token punctuation\\">,</span>                 <span class=\\"token comment\\">// https or http</span>\\n        username<span class=\\"token punctuation\\">:</span> <span class=\\"token string\\">\\"&lt;CouchDB-username>\\"</span><span class=\\"token punctuation\\">,</span> <span class=\\"token comment\\">// admin username</span>\\n        password<span class=\\"token punctuation\\">:</span> <span class=\\"token string\\">\\"&lt;CouchDB-password>\\"</span>  <span class=\\"token comment\\">// admin password</span>\\n<span class=\\"token punctuation\\">)</span></code></pre></div>\\n<p>Now we can use these connection properties to create our CouchDB client:</p>\\n<div class=\\"gatsby-highlight\\" data-language=\\"swift\\"><pre class=\\"language-swift\\"><code class=\\"language-swift\\"><span class=\\"token keyword\\">static</span> <span class=\\"token keyword\\">let</span> couchDBClient <span class=\\"token operator\\">=</span> <span class=\\"token function\\">CouchDBClient</span><span class=\\"token punctuation\\">(</span>connectionProperties<span class=\\"token punctuation\\">:</span> properties<span class=\\"token punctuation\\">)</span></code></pre></div>\\n<p>The <code class=\\"language-text\\">CouchDBClient</code> represents a connection to a CouchDB server. It is initialized with your <code class=\\"language-text\\">ConnectionProperties</code> and handles the creation, retrieval and deletion of CouchDB databases.</p>\\n<hr>\\n<h2 id=\\"step-6-save-our-document-to-the-database\\"><a href=\\"#step-6-save-our-document-to-the-database\\" aria-label=\\"step 6 save our document to the database permalink\\" class=\\"anchor\\"><svg aria-hidden=\\"true\\" focusable=\\"false\\" height=\\"16\\" version=\\"1.1\\" viewBox=\\"0 0 16 16\\" width=\\"16\\"><path fill-rule=\\"evenodd\\" d=\\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\\"></path></svg></a>Step 6: Save our document to the database</h2>\\n<p>We are going to modify the <code class=\\"language-text\\">couchSaveHandler</code> we defined earlier to store a document in our database.</p>\\n<p>The first thing we need to do is connect to our <code class=\\"language-text\\">bookstore</code> database. We achieve this by using the <code class=\\"language-text\\">CouchDBClient.retrieveDB()</code> method and passing in our database name.</p>\\n<p>Inside the <code class=\\"language-text\\">couchSaveHandler</code> add the following code:</p>\\n<div class=\\"gatsby-highlight\\" data-language=\\"swift\\"><pre class=\\"language-swift\\"><code class=\\"language-swift\\"><span class=\\"token builtin\\">App</span><span class=\\"token punctuation\\">.</span>couchDBClient<span class=\\"token punctuation\\">.</span><span class=\\"token function\\">retrieveDB</span><span class=\\"token punctuation\\">(</span><span class=\\"token string\\">\\"bookstore\\"</span><span class=\\"token punctuation\\">)</span> <span class=\\"token punctuation\\">{</span> <span class=\\"token punctuation\\">(</span>database<span class=\\"token punctuation\\">,</span> error<span class=\\"token punctuation\\">)</span> <span class=\\"token keyword\\">in</span>\\n    <span class=\\"token keyword\\">guard</span> <span class=\\"token keyword\\">let</span> database <span class=\\"token operator\\">=</span> database  <span class=\\"token keyword\\">else</span> <span class=\\"token punctuation\\">{</span>\\n        <span class=\\"token keyword\\">return</span> <span class=\\"token function\\">completion</span><span class=\\"token punctuation\\">(</span><span class=\\"token constant\\">nil</span><span class=\\"token punctuation\\">,</span> <span class=\\"token punctuation\\">.</span>internalServerError<span class=\\"token punctuation\\">)</span>\\n    <span class=\\"token punctuation\\">}</span>\\n    <span class=\\"token comment\\">// Initialize document here</span>\\n<span class=\\"token punctuation\\">}</span></code></pre></div>\\n<blockquote>\\n<p>Since the CouchDB functions are asynchronous, we must handle responses inside the function\'s callback.</p>\\n</blockquote>\\n<p>Now we are going to save our book document to the database. We will use the CouchDB <code class=\\"language-text\\">Database</code> class to make an HTTP request to our database. This class can make CRUD (Create, Retrieve, Update, Delete) requests for our CouchDB <code class=\\"language-text\\">Document</code>. In this case we will use <code class=\\"language-text\\">create</code> to save our book document. If the call succeeds we then return the book document with it\'s updated id and revision, otherwise we return an error.</p>\\n<div class=\\"gatsby-highlight\\" data-language=\\"swift\\"><pre class=\\"language-swift\\"><code class=\\"language-swift\\">database<span class=\\"token punctuation\\">.</span><span class=\\"token function\\">create</span><span class=\\"token punctuation\\">(</span>bookDocument<span class=\\"token punctuation\\">)</span> <span class=\\"token punctuation\\">{</span> <span class=\\"token punctuation\\">(</span>response<span class=\\"token punctuation\\">,</span> error<span class=\\"token punctuation\\">)</span> <span class=\\"token keyword\\">in</span>\\n    <span class=\\"token keyword\\">guard</span> <span class=\\"token keyword\\">let</span> response <span class=\\"token operator\\">=</span> response <span class=\\"token keyword\\">else</span> <span class=\\"token punctuation\\">{</span>\\n        <span class=\\"token keyword\\">return</span> <span class=\\"token function\\">completion</span><span class=\\"token punctuation\\">(</span><span class=\\"token constant\\">nil</span><span class=\\"token punctuation\\">,</span> <span class=\\"token function\\">RequestError</span><span class=\\"token punctuation\\">(</span>httpCode<span class=\\"token punctuation\\">:</span> error<span class=\\"token operator\\">?</span><span class=\\"token punctuation\\">.</span>statusCode <span class=\\"token operator\\">?</span><span class=\\"token operator\\">?</span> <span class=\\"token number\\">500</span><span class=\\"token punctuation\\">)</span><span class=\\"token punctuation\\">)</span>\\n    <span class=\\"token punctuation\\">}</span>\\n    <span class=\\"token keyword\\">var</span> updatedBook <span class=\\"token operator\\">=</span> book\\n    updatedBook<span class=\\"token punctuation\\">.</span>_id <span class=\\"token operator\\">=</span> response<span class=\\"token punctuation\\">.</span>id\\n    updatedBook<span class=\\"token punctuation\\">.</span>_rev <span class=\\"token operator\\">=</span> response<span class=\\"token punctuation\\">.</span>rev\\n    <span class=\\"token function\\">completion</span><span class=\\"token punctuation\\">(</span>updatedBook<span class=\\"token punctuation\\">,</span> <span class=\\"token constant\\">nil</span><span class=\\"token punctuation\\">)</span>\\n<span class=\\"token punctuation\\">}</span></code></pre></div>\\n<p>Your completed <code class=\\"language-text\\">POST</code> handler should now look as follows:</p>\\n<div class=\\"gatsby-highlight\\" data-language=\\"swift\\"><pre class=\\"language-swift\\"><code class=\\"language-swift\\"><span class=\\"token keyword\\">func</span> <span class=\\"token function\\">couchSaveHandler</span><span class=\\"token punctuation\\">(</span>book<span class=\\"token punctuation\\">:</span> <span class=\\"token builtin\\">BookDocument</span><span class=\\"token punctuation\\">,</span> completion<span class=\\"token punctuation\\">:</span> @escaping <span class=\\"token punctuation\\">(</span><span class=\\"token builtin\\">BookDocument</span><span class=\\"token operator\\">?</span><span class=\\"token punctuation\\">,</span> <span class=\\"token builtin\\">RequestError</span><span class=\\"token operator\\">?</span><span class=\\"token punctuation\\">)</span> <span class=\\"token operator\\">-</span><span class=\\"token operator\\">></span> <span class=\\"token builtin\\">Void</span><span class=\\"token punctuation\\">)</span> <span class=\\"token punctuation\\">{</span>\\n    <span class=\\"token builtin\\">App</span><span class=\\"token punctuation\\">.</span>couchDBClient<span class=\\"token punctuation\\">.</span><span class=\\"token function\\">retrieveDB</span><span class=\\"token punctuation\\">(</span><span class=\\"token string\\">\\"bookstore\\"</span><span class=\\"token punctuation\\">)</span> <span class=\\"token punctuation\\">{</span> <span class=\\"token punctuation\\">(</span>database<span class=\\"token punctuation\\">,</span> error<span class=\\"token punctuation\\">)</span> <span class=\\"token keyword\\">in</span>\\n        <span class=\\"token keyword\\">guard</span> <span class=\\"token keyword\\">let</span> database <span class=\\"token operator\\">=</span> database  <span class=\\"token keyword\\">else</span> <span class=\\"token punctuation\\">{</span>\\n            <span class=\\"token keyword\\">return</span> <span class=\\"token function\\">completion</span><span class=\\"token punctuation\\">(</span><span class=\\"token constant\\">nil</span><span class=\\"token punctuation\\">,</span> <span class=\\"token punctuation\\">.</span>internalServerError<span class=\\"token punctuation\\">)</span>\\n        <span class=\\"token punctuation\\">}</span>\\n        database<span class=\\"token punctuation\\">.</span><span class=\\"token function\\">create</span><span class=\\"token punctuation\\">(</span>book<span class=\\"token punctuation\\">)</span> <span class=\\"token punctuation\\">{</span> <span class=\\"token punctuation\\">(</span>response<span class=\\"token punctuation\\">,</span> error<span class=\\"token punctuation\\">)</span> <span class=\\"token keyword\\">in</span>\\n            <span class=\\"token keyword\\">guard</span> <span class=\\"token keyword\\">let</span> response <span class=\\"token operator\\">=</span> response <span class=\\"token keyword\\">else</span> <span class=\\"token punctuation\\">{</span>\\n                <span class=\\"token keyword\\">return</span> <span class=\\"token function\\">completion</span><span class=\\"token punctuation\\">(</span><span class=\\"token constant\\">nil</span><span class=\\"token punctuation\\">,</span> <span class=\\"token function\\">RequestError</span><span class=\\"token punctuation\\">(</span>httpCode<span class=\\"token punctuation\\">:</span> error<span class=\\"token operator\\">?</span><span class=\\"token punctuation\\">.</span>statusCode <span class=\\"token operator\\">?</span><span class=\\"token operator\\">?</span> <span class=\\"token number\\">500</span><span class=\\"token punctuation\\">)</span><span class=\\"token punctuation\\">)</span>\\n            <span class=\\"token punctuation\\">}</span>\\n            <span class=\\"token keyword\\">var</span> updatedBook <span class=\\"token operator\\">=</span> book\\n            updatedBook<span class=\\"token punctuation\\">.</span>_id <span class=\\"token operator\\">=</span> response<span class=\\"token punctuation\\">.</span>id\\n            updatedBook<span class=\\"token punctuation\\">.</span>_rev <span class=\\"token operator\\">=</span> response<span class=\\"token punctuation\\">.</span>rev\\n            <span class=\\"token function\\">completion</span><span class=\\"token punctuation\\">(</span>updatedBook<span class=\\"token punctuation\\">,</span> <span class=\\"token constant\\">nil</span><span class=\\"token punctuation\\">)</span>\\n        <span class=\\"token punctuation\\">}</span>\\n    <span class=\\"token punctuation\\">}</span>\\n<span class=\\"token punctuation\\">}</span></code></pre></div>\\n<hr>\\n<h2 id=\\"step-7-test-saving-a-document-to-the-database\\"><a href=\\"#step-7-test-saving-a-document-to-the-database\\" aria-label=\\"step 7 test saving a document to the database permalink\\" class=\\"anchor\\"><svg aria-hidden=\\"true\\" focusable=\\"false\\" height=\\"16\\" version=\\"1.1\\" viewBox=\\"0 0 16 16\\" width=\\"16\\"><path fill-rule=\\"evenodd\\" d=\\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\\"></path></svg></a>Step 7: Test saving a document to the database</h2>\\n<p>Now we\'re going to test our route by passing in a book and checking that it is saved to the database.</p>\\n<p>First we need to start our Kitura server.</p>\\n<p>Once the server is running, open a terminal and run the following:</p>\\n<div class=\\"gatsby-highlight\\" data-language=\\"text\\"><pre class=\\"language-text\\"><code class=\\"language-text\\">curl -X POST \\\\\\n      http://localhost:8080/couch \\\\\\n      -H &#39;content-type: application/json&#39; \\\\\\n      -d &#39;{\\n      &quot;title&quot;: &quot;A Game of Thrones&quot;,\\n      &quot;price&quot;: 14.99,\\n      &quot;genre&quot;: &quot;Fantasy&quot;\\n  }&#39;</code></pre></div>\\n<p>This will make a POST request to the server and we should be returned our book document in JSON format:</p>\\n<div class=\\"gatsby-highlight\\" data-language=\\"text\\"><pre class=\\"language-text\\"><code class=\\"language-text\\">{&quot;_id&quot;:&quot;&lt;generated id number&gt;&quot;,&quot;_rev&quot;:&quot;&lt;generated revision number&gt;&quot;,&quot;title&quot;:&quot;A Game of Thrones&quot;,&quot;price&quot;:14.99,&quot;genre&quot;:&quot;Fantasy&quot;}</code></pre></div>\\n<blockquote>\\n<p>Since we did not provide an <code class=\\"language-text\\">_id</code> in our request, a UUID was generated for us.</p>\\n</blockquote>\\n<hr>\\n<h2 id=\\"step-8-retrieve-the-document-from-the-database\\"><a href=\\"#step-8-retrieve-the-document-from-the-database\\" aria-label=\\"step 8 retrieve the document from the database permalink\\" class=\\"anchor\\"><svg aria-hidden=\\"true\\" focusable=\\"false\\" height=\\"16\\" version=\\"1.1\\" viewBox=\\"0 0 16 16\\" width=\\"16\\"><path fill-rule=\\"evenodd\\" d=\\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\\"></path></svg></a>Step 8: Retrieve the document from the database</h2>\\n<p>Similar to our other handler, the first step is to connect to our <code class=\\"language-text\\">bookstore</code> database.</p>\\n<p>Inside the <code class=\\"language-text\\">couchFindAllHandler</code> add the following code:</p>\\n<div class=\\"gatsby-highlight\\" data-language=\\"swift\\"><pre class=\\"language-swift\\"><code class=\\"language-swift\\"><span class=\\"token builtin\\">App</span><span class=\\"token punctuation\\">.</span>couchDBClient<span class=\\"token punctuation\\">.</span><span class=\\"token function\\">retrieveDB</span><span class=\\"token punctuation\\">(</span><span class=\\"token string\\">\\"bookstore\\"</span><span class=\\"token punctuation\\">)</span> <span class=\\"token punctuation\\">{</span> <span class=\\"token punctuation\\">(</span>database<span class=\\"token punctuation\\">,</span> error<span class=\\"token punctuation\\">)</span> <span class=\\"token keyword\\">in</span>\\n    <span class=\\"token keyword\\">guard</span> <span class=\\"token keyword\\">let</span> database <span class=\\"token operator\\">=</span> database  <span class=\\"token keyword\\">else</span> <span class=\\"token punctuation\\">{</span>\\n        <span class=\\"token keyword\\">return</span> <span class=\\"token function\\">completion</span><span class=\\"token punctuation\\">(</span><span class=\\"token constant\\">nil</span><span class=\\"token punctuation\\">,</span> <span class=\\"token punctuation\\">.</span>internalServerError<span class=\\"token punctuation\\">)</span>\\n    <span class=\\"token punctuation\\">}</span>\\n    <span class=\\"token comment\\">// Retrieve documents here</span>\\n<span class=\\"token punctuation\\">}</span></code></pre></div>\\n<p>Next we\'re going to retrieve our document from the database. To retrieve all the documents from a CouchDB database we need to use the aptly named <code class=\\"language-text\\">retrieveAll</code> method.</p>\\n<div class=\\"gatsby-highlight\\" data-language=\\"swift\\"><pre class=\\"language-swift\\"><code class=\\"language-swift\\">database<span class=\\"token punctuation\\">.</span><span class=\\"token function\\">retrieveAll</span><span class=\\"token punctuation\\">(</span>includeDocuments<span class=\\"token punctuation\\">:</span> <span class=\\"token boolean\\">true</span><span class=\\"token punctuation\\">,</span> callback<span class=\\"token punctuation\\">:</span> <span class=\\"token punctuation\\">{</span> <span class=\\"token punctuation\\">(</span>allDocuments<span class=\\"token punctuation\\">,</span> error<span class=\\"token punctuation\\">)</span> <span class=\\"token keyword\\">in</span>\\n    <span class=\\"token keyword\\">guard</span> <span class=\\"token keyword\\">let</span> allDocuments <span class=\\"token operator\\">=</span> allDocuments <span class=\\"token keyword\\">else</span> <span class=\\"token punctuation\\">{</span>\\n        <span class=\\"token keyword\\">return</span> <span class=\\"token function\\">completion</span><span class=\\"token punctuation\\">(</span><span class=\\"token constant\\">nil</span><span class=\\"token punctuation\\">,</span> <span class=\\"token function\\">RequestError</span><span class=\\"token punctuation\\">(</span>httpCode<span class=\\"token punctuation\\">:</span> error<span class=\\"token operator\\">?</span><span class=\\"token punctuation\\">.</span>statusCode <span class=\\"token operator\\">?</span><span class=\\"token operator\\">?</span> <span class=\\"token number\\">500</span><span class=\\"token punctuation\\">)</span><span class=\\"token punctuation\\">)</span>\\n    <span class=\\"token punctuation\\">}</span>\\n    <span class=\\"token comment\\">// Decode and return books here</span>\\n<span class=\\"token punctuation\\">}</span><span class=\\"token punctuation\\">)</span></code></pre></div>\\n<p>When we made the call to <code class=\\"language-text\\">retrieveAll</code> we set the <code class=\\"language-text\\">includeDocuments</code> parameter to true, this means that each row returned from the database will have an additional field called \\"doc\\" in it which contains the JSON document. These documents can then be decoded to a given Swift type using <code class=\\"language-text\\">decodeDocuments(ofType:)</code>.</p>\\n<p>We decode all the documents that match the <code class=\\"language-text\\">BookDocument</code> type, and return them in the completion:</p>\\n<div class=\\"gatsby-highlight\\" data-language=\\"swift\\"><pre class=\\"language-swift\\"><code class=\\"language-swift\\"><span class=\\"token keyword\\">let</span> books <span class=\\"token operator\\">=</span> allDocuments<span class=\\"token punctuation\\">.</span><span class=\\"token function\\">decodeDocuments</span><span class=\\"token punctuation\\">(</span>ofType<span class=\\"token punctuation\\">:</span> <span class=\\"token builtin\\">BookDocument</span><span class=\\"token punctuation\\">.</span><span class=\\"token keyword\\">self</span><span class=\\"token punctuation\\">)</span>\\n<span class=\\"token function\\">completion</span><span class=\\"token punctuation\\">(</span>books<span class=\\"token punctuation\\">,</span> <span class=\\"token constant\\">nil</span><span class=\\"token punctuation\\">)</span></code></pre></div>\\n<p>Your completed <code class=\\"language-text\\">GET</code> handler should now look as follows:</p>\\n<div class=\\"gatsby-highlight\\" data-language=\\"swift\\"><pre class=\\"language-swift\\"><code class=\\"language-swift\\"><span class=\\"token keyword\\">func</span> <span class=\\"token function\\">couchFindAllHandler</span><span class=\\"token punctuation\\">(</span>completion<span class=\\"token punctuation\\">:</span> @escaping <span class=\\"token punctuation\\">(</span><span class=\\"token punctuation\\">[</span><span class=\\"token builtin\\">BookDocument</span><span class=\\"token punctuation\\">]</span><span class=\\"token operator\\">?</span><span class=\\"token punctuation\\">,</span> <span class=\\"token builtin\\">RequestError</span><span class=\\"token operator\\">?</span><span class=\\"token punctuation\\">)</span> <span class=\\"token operator\\">-</span><span class=\\"token operator\\">></span> <span class=\\"token builtin\\">Void</span><span class=\\"token punctuation\\">)</span> <span class=\\"token punctuation\\">{</span>\\n    <span class=\\"token builtin\\">App</span><span class=\\"token punctuation\\">.</span>couchDBClient<span class=\\"token punctuation\\">.</span><span class=\\"token function\\">retrieveDB</span><span class=\\"token punctuation\\">(</span><span class=\\"token string\\">\\"bookstore\\"</span><span class=\\"token punctuation\\">)</span> <span class=\\"token punctuation\\">{</span> <span class=\\"token punctuation\\">(</span>database<span class=\\"token punctuation\\">,</span> error<span class=\\"token punctuation\\">)</span> <span class=\\"token keyword\\">in</span>\\n        <span class=\\"token keyword\\">guard</span> <span class=\\"token keyword\\">let</span> database <span class=\\"token operator\\">=</span> database  <span class=\\"token keyword\\">else</span> <span class=\\"token punctuation\\">{</span>\\n            <span class=\\"token keyword\\">return</span> <span class=\\"token function\\">completion</span><span class=\\"token punctuation\\">(</span><span class=\\"token constant\\">nil</span><span class=\\"token punctuation\\">,</span> <span class=\\"token punctuation\\">.</span>internalServerError<span class=\\"token punctuation\\">)</span>\\n        <span class=\\"token punctuation\\">}</span>\\n        database<span class=\\"token punctuation\\">.</span><span class=\\"token function\\">retrieveAll</span><span class=\\"token punctuation\\">(</span>includeDocuments<span class=\\"token punctuation\\">:</span> <span class=\\"token boolean\\">true</span><span class=\\"token punctuation\\">,</span> callback<span class=\\"token punctuation\\">:</span> <span class=\\"token punctuation\\">{</span> <span class=\\"token punctuation\\">(</span>allDocuments<span class=\\"token punctuation\\">,</span> error<span class=\\"token punctuation\\">)</span> <span class=\\"token keyword\\">in</span>\\n            <span class=\\"token keyword\\">guard</span> <span class=\\"token keyword\\">let</span> allDocuments <span class=\\"token operator\\">=</span> allDocuments <span class=\\"token keyword\\">else</span> <span class=\\"token punctuation\\">{</span>\\n                <span class=\\"token keyword\\">return</span> <span class=\\"token function\\">completion</span><span class=\\"token punctuation\\">(</span><span class=\\"token constant\\">nil</span><span class=\\"token punctuation\\">,</span> <span class=\\"token function\\">RequestError</span><span class=\\"token punctuation\\">(</span>httpCode<span class=\\"token punctuation\\">:</span> error<span class=\\"token operator\\">?</span><span class=\\"token punctuation\\">.</span>statusCode <span class=\\"token operator\\">?</span><span class=\\"token operator\\">?</span> <span class=\\"token number\\">500</span><span class=\\"token punctuation\\">)</span><span class=\\"token punctuation\\">)</span>\\n            <span class=\\"token punctuation\\">}</span>\\n            <span class=\\"token keyword\\">let</span> books <span class=\\"token operator\\">=</span> allDocuments<span class=\\"token punctuation\\">.</span><span class=\\"token function\\">decodeDocuments</span><span class=\\"token punctuation\\">(</span>ofType<span class=\\"token punctuation\\">:</span> <span class=\\"token builtin\\">BookDocument</span><span class=\\"token punctuation\\">.</span><span class=\\"token keyword\\">self</span><span class=\\"token punctuation\\">)</span>\\n            <span class=\\"token function\\">completion</span><span class=\\"token punctuation\\">(</span>books<span class=\\"token punctuation\\">,</span> <span class=\\"token constant\\">nil</span><span class=\\"token punctuation\\">)</span>\\n        <span class=\\"token punctuation\\">}</span><span class=\\"token punctuation\\">)</span>\\n    <span class=\\"token punctuation\\">}</span>\\n<span class=\\"token punctuation\\">}</span></code></pre></div>\\n<hr>\\n<h2 id=\\"step-9-test-retrieving-documents-from-the-database\\"><a href=\\"#step-9-test-retrieving-documents-from-the-database\\" aria-label=\\"step 9 test retrieving documents from the database permalink\\" class=\\"anchor\\"><svg aria-hidden=\\"true\\" focusable=\\"false\\" height=\\"16\\" version=\\"1.1\\" viewBox=\\"0 0 16 16\\" width=\\"16\\"><path fill-rule=\\"evenodd\\" d=\\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\\"></path></svg></a>Step 9: Test retrieving documents from the database</h2>\\n<p>If you have followed the guide so far then you will now have a book document in your database, which we can retrieve using the code we just wrote.</p>\\n<p>To do this, start the server and navigate to: <a href=\\"http://localhost:8080/couch\\" target=\\"blank\\">localhost:8080/couch</a>.</p>\\n<p>This will call GET on the <code class=\\"language-text\\">/couch</code> route and we will see the book we posted earlier returned in JSON format. The book data persists even if we restart the Kitura server as it is now stored in a database.</p>","frontmatter":{"path":"/docs/databases/couchdb","title":"Kitura CouchDB"}}},{"node":{"html":"<h1 id=\\"swift-kuery\\"><a href=\\"#swift-kuery\\" aria-label=\\"swift kuery permalink\\" class=\\"anchor\\"><svg aria-hidden=\\"true\\" focusable=\\"false\\" height=\\"16\\" version=\\"1.1\\" viewBox=\\"0 0 16 16\\" width=\\"16\\"><path fill-rule=\\"evenodd\\" d=\\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\\"></path></svg></a>Swift Kuery</h1>\\n<p><a href=\\"https://github.com/IBM-Swift/Swift-Kuery\\">Swift-Kuery</a> is a pluggable SQL database driver/SDK abstraction layer. Its main idea is to unify the APIs to the various relational databases, providing a Swifty yet SQL-like API. This guide will demonstrate how to connect to a SQL database using one of the Swift-Kuery plugins and how to use this connection to send SQL queries to your database.</p>\\n<hr>\\n<h2 id=\\"step-1-create-the-kuery-routes\\"><a href=\\"#step-1-create-the-kuery-routes\\" aria-label=\\"step 1 create the kuery routes permalink\\" class=\\"anchor\\"><svg aria-hidden=\\"true\\" focusable=\\"false\\" height=\\"16\\" version=\\"1.1\\" viewBox=\\"0 0 16 16\\" width=\\"16\\"><path fill-rule=\\"evenodd\\" d=\\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\\"></path></svg></a>Step 1: Create the Kuery routes</h2>\\n<p>We are going to create a new file in our project for the Kuery routes.  The routes defined in this guide are examples of Codable routes. The equivalent definitions for raw routes can be found using the links below each code segment.</p>\\n<blockquote>\\n<p>If you don\'t have a server, follow our <a href=\\"https://www.kitura.io/docs/getting-started/create-server-cli.html\\">Create a server</a> guide.</p>\\n</blockquote>\\n<p>Open your <code class=\\"language-text\\">Application.swift</code> file:</p>\\n<div class=\\"gatsby-highlight\\" data-language=\\"text\\"><pre class=\\"language-text\\"><code class=\\"language-text\\">open Sources/Application/Application.swift</code></pre></div>\\n<p>Inside the <code class=\\"language-text\\">postInit()</code> function add:</p>\\n<div class=\\"gatsby-highlight\\" data-language=\\"swift\\"><pre class=\\"language-swift\\"><code class=\\"language-swift\\"><span class=\\"token function\\">initializeKueryRoutes</span><span class=\\"token punctuation\\">(</span>app<span class=\\"token punctuation\\">:</span> <span class=\\"token keyword\\">self</span><span class=\\"token punctuation\\">)</span></code></pre></div>\\n<p>Create a new file called <code class=\\"language-text\\">KueryRoutes.swift</code>:</p>\\n<div class=\\"gatsby-highlight\\" data-language=\\"text\\"><pre class=\\"language-text\\"><code class=\\"language-text\\">touch Sources/Application/Routes/KueryRoutes.swift</code></pre></div>\\n<p>Open the <code class=\\"language-text\\">KueryRoutes.swift</code> file:</p>\\n<div class=\\"gatsby-highlight\\" data-language=\\"swift\\"><pre class=\\"language-swift\\"><code class=\\"language-swift\\">touch <span class=\\"token builtin\\">Sources</span><span class=\\"token operator\\">/</span><span class=\\"token builtin\\">Application</span><span class=\\"token operator\\">/</span><span class=\\"token builtin\\">Routes</span><span class=\\"token operator\\">/</span><span class=\\"token builtin\\">KueryRoutes</span><span class=\\"token punctuation\\">.</span>swift</code></pre></div>\\n<p>Inside this file we are going to create two routes. The first will use Swift-Kuery to save a <code class=\\"language-text\\">Book</code> into a database and the second will retrieve all of the saved books.</p>\\n<p>Add the following code to your <code class=\\"language-text\\">KueryRoutes.swift</code> file.</p>\\n<div class=\\"gatsby-highlight\\" data-language=\\"swift\\"><pre class=\\"language-swift\\"><code class=\\"language-swift\\"><span class=\\"token keyword\\">import</span> <span class=\\"token builtin\\">KituraContracts</span>\\n<span class=\\"token keyword\\">import</span> <span class=\\"token builtin\\">LoggerAPI</span>\\n<span class=\\"token keyword\\">import</span> <span class=\\"token builtin\\">Foundation</span>\\n\\n<span class=\\"token keyword\\">func</span> <span class=\\"token function\\">initializeKueryRoutes</span><span class=\\"token punctuation\\">(</span>app<span class=\\"token punctuation\\">:</span> <span class=\\"token builtin\\">App</span><span class=\\"token punctuation\\">)</span> <span class=\\"token punctuation\\">{</span>\\n    app<span class=\\"token punctuation\\">.</span>router<span class=\\"token punctuation\\">.</span><span class=\\"token function\\">post</span><span class=\\"token punctuation\\">(</span><span class=\\"token string\\">\\"/kuery\\"</span><span class=\\"token punctuation\\">,</span> handler<span class=\\"token punctuation\\">:</span> app<span class=\\"token punctuation\\">.</span>insertHandler<span class=\\"token punctuation\\">)</span>\\n    app<span class=\\"token punctuation\\">.</span>router<span class=\\"token punctuation\\">.</span><span class=\\"token keyword\\">get</span><span class=\\"token punctuation\\">(</span><span class=\\"token string\\">\\"/kuery\\"</span><span class=\\"token punctuation\\">,</span> handler<span class=\\"token punctuation\\">:</span> app<span class=\\"token punctuation\\">.</span>selectHandler<span class=\\"token punctuation\\">)</span>\\n<span class=\\"token punctuation\\">}</span>\\n\\n<span class=\\"token keyword\\">extension</span> <span class=\\"token builtin\\">App</span> <span class=\\"token punctuation\\">{</span>\\n    <span class=\\"token comment\\">// Create connection pool and initialize BookTable here</span>\\n\\n    <span class=\\"token keyword\\">func</span> <span class=\\"token function\\">insertHandler</span><span class=\\"token punctuation\\">(</span>book<span class=\\"token punctuation\\">:</span> <span class=\\"token builtin\\">Book</span><span class=\\"token punctuation\\">,</span> completion<span class=\\"token punctuation\\">:</span> @escaping <span class=\\"token punctuation\\">(</span><span class=\\"token builtin\\">Book</span><span class=\\"token operator\\">?</span><span class=\\"token punctuation\\">,</span> <span class=\\"token builtin\\">RequestError</span><span class=\\"token operator\\">?</span><span class=\\"token punctuation\\">)</span> <span class=\\"token operator\\">-</span><span class=\\"token operator\\">></span> <span class=\\"token builtin\\">Void</span><span class=\\"token punctuation\\">)</span> <span class=\\"token punctuation\\">{</span>\\n        <span class=\\"token comment\\">// Handle POST here</span>\\n    <span class=\\"token punctuation\\">}</span>\\n\\n    <span class=\\"token keyword\\">func</span> <span class=\\"token function\\">selectHandler</span><span class=\\"token punctuation\\">(</span>completion<span class=\\"token punctuation\\">:</span> @escaping <span class=\\"token punctuation\\">(</span><span class=\\"token punctuation\\">[</span><span class=\\"token builtin\\">Book</span><span class=\\"token punctuation\\">]</span><span class=\\"token operator\\">?</span><span class=\\"token punctuation\\">,</span> <span class=\\"token builtin\\">RequestError</span><span class=\\"token operator\\">?</span><span class=\\"token punctuation\\">)</span> <span class=\\"token operator\\">-</span><span class=\\"token operator\\">></span> <span class=\\"token builtin\\">Void</span><span class=\\"token punctuation\\">)</span> <span class=\\"token punctuation\\">{</span>\\n        <span class=\\"token comment\\">// Handle GET here</span>\\n    <span class=\\"token punctuation\\">}</span>\\n<span class=\\"token punctuation\\">}</span></code></pre></div>\\n<p><a href=\\"/docs/databases/kuery1\\" target=\\"blank\\"> See the above code as a raw route.</a></p>\\n<blockquote>\\n<p>The routes in this guide are using the <a href=\\"/docs/routing/what-is-routing#codable-model\\">Book model from the routing guide</a>, however you could use any Codable type.</p>\\n</blockquote>\\n<hr>\\n<h2 id=\\"step-2-install-a-database-plugin\\"><a href=\\"#step-2-install-a-database-plugin\\" aria-label=\\"step 2 install a database plugin permalink\\" class=\\"anchor\\"><svg aria-hidden=\\"true\\" focusable=\\"false\\" height=\\"16\\" version=\\"1.1\\" viewBox=\\"0 0 16 16\\" width=\\"16\\"><path fill-rule=\\"evenodd\\" d=\\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\\"></path></svg></a>Step 2: Install a database plugin</h2>\\n<p>Kitura has built in support for PostgreSQL, MySQL and SQLite.</p>\\n<p>The API to use each plugin is the same but the installation steps differ slightly.</p>\\n<p>The algorithms are as follows:</p>\\n<ul>\\n<li><a href=\\"/docs/databases/kuery-postgresql\\">PostgreSQL</a></li>\\n<li><a href=\\"/docs/databases/kuery-mysql\\">MySQL</a></li>\\n<li><a href=\\"/docs/databases/kuery-sqlite\\">SQLite</a></li>\\n</ul>\\n<hr>\\n<h2 id=\\"step-3-create-a-class-to-represent-the-database-table\\"><a href=\\"#step-3-create-a-class-to-represent-the-database-table\\" aria-label=\\"step 3 create a class to represent the database table permalink\\" class=\\"anchor\\"><svg aria-hidden=\\"true\\" focusable=\\"false\\" height=\\"16\\" version=\\"1.1\\" viewBox=\\"0 0 16 16\\" width=\\"16\\"><path fill-rule=\\"evenodd\\" d=\\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\\"></path></svg></a>Step 3: Create a class to represent the database table</h2>\\n<p>To use SwiftKuery we need to create a class in Swift that matches our database table.</p>\\n<p>Create a new file called <code class=\\"language-text\\">BookTable.swift</code>:</p>\\n<div class=\\"gatsby-highlight\\" data-language=\\"text\\"><pre class=\\"language-text\\"><code class=\\"language-text\\">touch Sources/Application/Models/BookTable.swift</code></pre></div>\\n<p>Open the <code class=\\"language-text\\">BookTable.swift</code> file:</p>\\n<div class=\\"gatsby-highlight\\" data-language=\\"text\\"><pre class=\\"language-text\\"><code class=\\"language-text\\">open Sources/Application/Models/BookTable.swift</code></pre></div>\\n<p>Inside <code class=\\"language-text\\">BookTable.swift</code>, define your <code class=\\"language-text\\">BookTable</code> class:</p>\\n<div class=\\"gatsby-highlight\\" data-language=\\"swift\\"><pre class=\\"language-swift\\"><code class=\\"language-swift\\"><span class=\\"token keyword\\">import</span> <span class=\\"token builtin\\">SwiftKuery</span>\\n\\n<span class=\\"token keyword\\">class</span> <span class=\\"token class-name\\">BookTable</span><span class=\\"token punctuation\\">:</span> <span class=\\"token builtin\\">Table</span> <span class=\\"token punctuation\\">{</span>\\n    <span class=\\"token keyword\\">let</span> tableName <span class=\\"token operator\\">=</span> <span class=\\"token string\\">\\"BookTable\\"</span>\\n    <span class=\\"token keyword\\">let</span> id <span class=\\"token operator\\">=</span> <span class=\\"token function\\">Column</span><span class=\\"token punctuation\\">(</span><span class=\\"token string\\">\\"id\\"</span><span class=\\"token punctuation\\">,</span> <span class=\\"token builtin\\">Int32</span><span class=\\"token punctuation\\">.</span><span class=\\"token keyword\\">self</span><span class=\\"token punctuation\\">,</span> primaryKey<span class=\\"token punctuation\\">:</span> <span class=\\"token boolean\\">true</span><span class=\\"token punctuation\\">)</span>\\n    <span class=\\"token keyword\\">let</span> title <span class=\\"token operator\\">=</span> <span class=\\"token function\\">Column</span><span class=\\"token punctuation\\">(</span><span class=\\"token string\\">\\"title\\"</span><span class=\\"token punctuation\\">,</span> <span class=\\"token builtin\\">String</span><span class=\\"token punctuation\\">.</span><span class=\\"token keyword\\">self</span><span class=\\"token punctuation\\">)</span>\\n    <span class=\\"token keyword\\">let</span> price <span class=\\"token operator\\">=</span> <span class=\\"token function\\">Column</span><span class=\\"token punctuation\\">(</span><span class=\\"token string\\">\\"price\\"</span><span class=\\"token punctuation\\">,</span> <span class=\\"token builtin\\">Float</span><span class=\\"token punctuation\\">.</span><span class=\\"token keyword\\">self</span><span class=\\"token punctuation\\">)</span>\\n    <span class=\\"token keyword\\">let</span> genre <span class=\\"token operator\\">=</span> <span class=\\"token function\\">Column</span><span class=\\"token punctuation\\">(</span><span class=\\"token string\\">\\"genre\\"</span><span class=\\"token punctuation\\">,</span> <span class=\\"token builtin\\">String</span><span class=\\"token punctuation\\">.</span><span class=\\"token keyword\\">self</span><span class=\\"token punctuation\\">)</span>\\n<span class=\\"token punctuation\\">}</span></code></pre></div>\\n<p>The <code class=\\"language-text\\">BookTable</code> class represents our <code class=\\"language-text\\">Book</code> model as an SQL table. It needs to inherit from <code class=\\"language-text\\">Table</code> and match the column names of the table we created in the database. We must also provide the table name as a property.</p>\\n<p>Return to the <code class=\\"language-text\\">KueryRoutes.swift</code> file. In the <code class=\\"language-text\\">App</code> extension, create an instance of this table:</p>\\n<div class=\\"gatsby-highlight\\" data-language=\\"swift\\"><pre class=\\"language-swift\\"><code class=\\"language-swift\\"><span class=\\"token keyword\\">static</span> <span class=\\"token keyword\\">let</span> bookTable <span class=\\"token operator\\">=</span> <span class=\\"token function\\">BookTable</span><span class=\\"token punctuation\\">(</span><span class=\\"token punctuation\\">)</span></code></pre></div>\\n<p>Now we\'re ready to start saving data to our database.</p>\\n<hr>\\n<h2 id=\\"step-4-save-data-to-the-database\\"><a href=\\"#step-4-save-data-to-the-database\\" aria-label=\\"step 4 save data to the database permalink\\" class=\\"anchor\\"><svg aria-hidden=\\"true\\" focusable=\\"false\\" height=\\"16\\" version=\\"1.1\\" viewBox=\\"0 0 16 16\\" width=\\"16\\"><path fill-rule=\\"evenodd\\" d=\\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\\"></path></svg></a>Step 4: Save data to the database</h2>\\n<p>Now we\'re going to save a book that is posted to the \'/kuery\' route into our database.</p>\\n<p>Inside the handler for our POST route, we need to convert our book to an Array of Arrays of type <code class=\\"language-text\\">Any</code>. This converts the book that was sent to the route into the format required by Swift-Kuery. We need to use the <code class=\\"language-text\\">Any</code> type here as the database fields could be of any type.</p>\\n<div class=\\"gatsby-highlight\\" data-language=\\"swift\\"><pre class=\\"language-swift\\"><code class=\\"language-swift\\"><span class=\\"token keyword\\">let</span> rows <span class=\\"token operator\\">=</span> <span class=\\"token punctuation\\">[</span><span class=\\"token punctuation\\">[</span>book<span class=\\"token punctuation\\">.</span>id<span class=\\"token punctuation\\">,</span> book<span class=\\"token punctuation\\">.</span>title<span class=\\"token punctuation\\">,</span> book<span class=\\"token punctuation\\">.</span>price<span class=\\"token punctuation\\">,</span> book<span class=\\"token punctuation\\">.</span>genre<span class=\\"token punctuation\\">]</span><span class=\\"token punctuation\\">]</span>\\n<span class=\\"token comment\\">// Get connection from pool here</span></code></pre></div>\\n<p>To talk to the database, the first thing we need to do is get a connection from the connection pool.</p>\\n<p>To do this we can use the <code class=\\"language-text\\">getConnection</code> method. We can add this into the handler for our POST route:</p>\\n<div class=\\"gatsby-highlight\\" data-language=\\"swift\\"><pre class=\\"language-swift\\"><code class=\\"language-swift\\"><span class=\\"token builtin\\">App</span><span class=\\"token punctuation\\">.</span>pool<span class=\\"token punctuation\\">.</span><span class=\\"token function\\">getConnection</span><span class=\\"token punctuation\\">(</span><span class=\\"token punctuation\\">)</span> <span class=\\"token punctuation\\">{</span> connection<span class=\\"token punctuation\\">,</span> error <span class=\\"token keyword\\">in</span>\\n    <span class=\\"token keyword\\">guard</span> <span class=\\"token keyword\\">let</span> connection <span class=\\"token operator\\">=</span> connection <span class=\\"token keyword\\">else</span> <span class=\\"token punctuation\\">{</span>\\n        <span class=\\"token builtin\\">Log</span><span class=\\"token punctuation\\">.</span><span class=\\"token function\\">error</span><span class=\\"token punctuation\\">(</span><span class=\\"token string\\">\\"Error connecting: <span class=\\"token interpolation\\"><span class=\\"token delimiter variable\\">\\\\(</span>error<span class=\\"token operator\\">?</span><span class=\\"token punctuation\\">.</span>localizedDescription <span class=\\"token operator\\">?</span><span class=\\"token operator\\">?</span> <span class=\\"token string\\">\\"Unknown Error\\"</span><span class=\\"token delimiter variable\\">)</span></span>\\"</span><span class=\\"token punctuation\\">)</span>\\n        <span class=\\"token keyword\\">return</span> <span class=\\"token function\\">completion</span><span class=\\"token punctuation\\">(</span><span class=\\"token constant\\">nil</span><span class=\\"token punctuation\\">,</span> <span class=\\"token punctuation\\">.</span>internalServerError<span class=\\"token punctuation\\">)</span>\\n    <span class=\\"token punctuation\\">}</span>\\n    <span class=\\"token comment\\">// Write query and execute it here</span>\\n<span class=\\"token punctuation\\">}</span></code></pre></div>\\n<p><a href=\\"/docs/databases/kuery2\\" target=\\"blank\\"> See the above code as a raw route.</a></p>\\n<p>When we get a connection from the connection pool we need to confirm it\'s a valid connection.</p>\\n<p>If we don\'t get a valid connection, we will stop the execution and log an error to the console.</p>\\n<p>Now we can build the query for inserting data into a database.</p>\\n<p>Beneath our connection guard closure, add the following code:</p>\\n<div class=\\"gatsby-highlight\\" data-language=\\"swift\\"><pre class=\\"language-swift\\"><code class=\\"language-swift\\"><span class=\\"token keyword\\">let</span> insertQuery <span class=\\"token operator\\">=</span> <span class=\\"token function\\">Insert</span><span class=\\"token punctuation\\">(</span>into<span class=\\"token punctuation\\">:</span> <span class=\\"token builtin\\">App</span><span class=\\"token punctuation\\">.</span>bookTable<span class=\\"token punctuation\\">,</span> rows<span class=\\"token punctuation\\">:</span> rows<span class=\\"token punctuation\\">)</span></code></pre></div>\\n<p>Once we have defined our insert query, we need to execute the query using the connection we took from the pool:</p>\\n<div class=\\"gatsby-highlight\\" data-language=\\"swift\\"><pre class=\\"language-swift\\"><code class=\\"language-swift\\">    connection<span class=\\"token punctuation\\">.</span><span class=\\"token function\\">execute</span><span class=\\"token punctuation\\">(</span>query<span class=\\"token punctuation\\">:</span> insertQuery<span class=\\"token punctuation\\">)</span> <span class=\\"token punctuation\\">{</span> insertResult <span class=\\"token keyword\\">in</span>\\n        <span class=\\"token keyword\\">guard</span> insertResult<span class=\\"token punctuation\\">.</span>success <span class=\\"token keyword\\">else</span> <span class=\\"token punctuation\\">{</span>\\n            <span class=\\"token builtin\\">Log</span><span class=\\"token punctuation\\">.</span><span class=\\"token function\\">error</span><span class=\\"token punctuation\\">(</span><span class=\\"token string\\">\\"Error executing query: <span class=\\"token interpolation\\"><span class=\\"token delimiter variable\\">\\\\(</span>insertResult<span class=\\"token punctuation\\">.</span>asError<span class=\\"token operator\\">?</span><span class=\\"token punctuation\\">.</span>localizedDescription <span class=\\"token operator\\">?</span><span class=\\"token operator\\">?</span> <span class=\\"token string\\">\\"Unknown Error\\"</span><span class=\\"token delimiter variable\\">)</span></span>\\"</span><span class=\\"token punctuation\\">)</span>\\n            <span class=\\"token keyword\\">return</span> <span class=\\"token function\\">completion</span><span class=\\"token punctuation\\">(</span><span class=\\"token constant\\">nil</span><span class=\\"token punctuation\\">,</span> <span class=\\"token punctuation\\">.</span>internalServerError<span class=\\"token punctuation\\">)</span>\\n        <span class=\\"token punctuation\\">}</span>\\n        <span class=\\"token function\\">completion</span><span class=\\"token punctuation\\">(</span>book<span class=\\"token punctuation\\">,</span> <span class=\\"token constant\\">nil</span><span class=\\"token punctuation\\">)</span>\\n    <span class=\\"token punctuation\\">}</span></code></pre></div>\\n<p><a href=\\"/docs/databases/kuery3\\" target=\\"blank\\"> See the above code as a raw route.</a></p>\\n<p>That\'s it! We\'ve setup our POST route to save data to a database. the completed handler for your POST route should now look as follows:</p>\\n<div class=\\"gatsby-highlight\\" data-language=\\"swift\\"><pre class=\\"language-swift\\"><code class=\\"language-swift\\"><span class=\\"token keyword\\">func</span> <span class=\\"token function\\">insertHandler</span><span class=\\"token punctuation\\">(</span>book<span class=\\"token punctuation\\">:</span> <span class=\\"token builtin\\">Book</span><span class=\\"token punctuation\\">,</span> completion<span class=\\"token punctuation\\">:</span> @escaping <span class=\\"token punctuation\\">(</span><span class=\\"token builtin\\">Book</span><span class=\\"token operator\\">?</span><span class=\\"token punctuation\\">,</span> <span class=\\"token builtin\\">RequestError</span><span class=\\"token operator\\">?</span><span class=\\"token punctuation\\">)</span> <span class=\\"token operator\\">-</span><span class=\\"token operator\\">></span> <span class=\\"token builtin\\">Void</span><span class=\\"token punctuation\\">)</span> <span class=\\"token punctuation\\">{</span>\\n    <span class=\\"token keyword\\">let</span> rows <span class=\\"token operator\\">=</span> <span class=\\"token punctuation\\">[</span><span class=\\"token punctuation\\">[</span>book<span class=\\"token punctuation\\">.</span>id<span class=\\"token punctuation\\">,</span> book<span class=\\"token punctuation\\">.</span>title<span class=\\"token punctuation\\">,</span> book<span class=\\"token punctuation\\">.</span>price<span class=\\"token punctuation\\">,</span> book<span class=\\"token punctuation\\">.</span>genre<span class=\\"token punctuation\\">]</span><span class=\\"token punctuation\\">]</span>\\n    <span class=\\"token builtin\\">App</span><span class=\\"token punctuation\\">.</span>pool<span class=\\"token punctuation\\">.</span><span class=\\"token function\\">getConnection</span><span class=\\"token punctuation\\">(</span><span class=\\"token punctuation\\">)</span> <span class=\\"token punctuation\\">{</span> connection<span class=\\"token punctuation\\">,</span> error <span class=\\"token keyword\\">in</span>\\n        <span class=\\"token keyword\\">guard</span> <span class=\\"token keyword\\">let</span> connection <span class=\\"token operator\\">=</span> connection <span class=\\"token keyword\\">else</span> <span class=\\"token punctuation\\">{</span>\\n            <span class=\\"token builtin\\">Log</span><span class=\\"token punctuation\\">.</span><span class=\\"token function\\">error</span><span class=\\"token punctuation\\">(</span><span class=\\"token string\\">\\"Error connecting: <span class=\\"token interpolation\\"><span class=\\"token delimiter variable\\">\\\\(</span>error<span class=\\"token operator\\">?</span><span class=\\"token punctuation\\">.</span>localizedDescription <span class=\\"token operator\\">?</span><span class=\\"token operator\\">?</span> <span class=\\"token string\\">\\"Unknown Error\\"</span><span class=\\"token delimiter variable\\">)</span></span>\\"</span><span class=\\"token punctuation\\">)</span>\\n            <span class=\\"token keyword\\">return</span> <span class=\\"token function\\">completion</span><span class=\\"token punctuation\\">(</span><span class=\\"token constant\\">nil</span><span class=\\"token punctuation\\">,</span> <span class=\\"token punctuation\\">.</span>internalServerError<span class=\\"token punctuation\\">)</span>\\n        <span class=\\"token punctuation\\">}</span>\\n        <span class=\\"token keyword\\">let</span> insertQuery <span class=\\"token operator\\">=</span> <span class=\\"token function\\">Insert</span><span class=\\"token punctuation\\">(</span>into<span class=\\"token punctuation\\">:</span> <span class=\\"token builtin\\">App</span><span class=\\"token punctuation\\">.</span>bookTable<span class=\\"token punctuation\\">,</span> rows<span class=\\"token punctuation\\">:</span> rows<span class=\\"token punctuation\\">)</span>\\n        connection<span class=\\"token punctuation\\">.</span><span class=\\"token function\\">execute</span><span class=\\"token punctuation\\">(</span>query<span class=\\"token punctuation\\">:</span> insertQuery<span class=\\"token punctuation\\">)</span> <span class=\\"token punctuation\\">{</span> insertResult <span class=\\"token keyword\\">in</span>\\n            <span class=\\"token keyword\\">guard</span> insertResult<span class=\\"token punctuation\\">.</span>success <span class=\\"token keyword\\">else</span> <span class=\\"token punctuation\\">{</span>\\n                <span class=\\"token builtin\\">Log</span><span class=\\"token punctuation\\">.</span><span class=\\"token function\\">error</span><span class=\\"token punctuation\\">(</span><span class=\\"token string\\">\\"Error executing query: <span class=\\"token interpolation\\"><span class=\\"token delimiter variable\\">\\\\(</span>insertResult<span class=\\"token punctuation\\">.</span>asError<span class=\\"token operator\\">?</span><span class=\\"token punctuation\\">.</span>localizedDescription <span class=\\"token operator\\">?</span><span class=\\"token operator\\">?</span> <span class=\\"token string\\">\\"Unknown Error\\"</span><span class=\\"token delimiter variable\\">)</span></span>\\"</span><span class=\\"token punctuation\\">)</span>\\n                <span class=\\"token keyword\\">return</span> <span class=\\"token function\\">completion</span><span class=\\"token punctuation\\">(</span><span class=\\"token constant\\">nil</span><span class=\\"token punctuation\\">,</span> <span class=\\"token punctuation\\">.</span>internalServerError<span class=\\"token punctuation\\">)</span>\\n            <span class=\\"token punctuation\\">}</span>\\n            <span class=\\"token function\\">completion</span><span class=\\"token punctuation\\">(</span>book<span class=\\"token punctuation\\">,</span> <span class=\\"token constant\\">nil</span><span class=\\"token punctuation\\">)</span>\\n        <span class=\\"token punctuation\\">}</span>\\n    <span class=\\"token punctuation\\">}</span>\\n<span class=\\"token punctuation\\">}</span></code></pre></div>\\n<p><a href=\\"/docs/databases/kuery4\\" target=\\"blank\\"> See the above code as a raw route.</a></p>\\n<p>Next we can test our implementation.</p>\\n<hr>\\n<h2 id=\\"step-5-optional-test-saving-a-book-to-database\\"><a href=\\"#step-5-optional-test-saving-a-book-to-database\\" aria-label=\\"step 5 optional test saving a book to database permalink\\" class=\\"anchor\\"><svg aria-hidden=\\"true\\" focusable=\\"false\\" height=\\"16\\" version=\\"1.1\\" viewBox=\\"0 0 16 16\\" width=\\"16\\"><path fill-rule=\\"evenodd\\" d=\\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\\"></path></svg></a>Step 5 (Optional): Test saving a book to database</h2>\\n<p>First we need to start our Kitura server.</p>\\n<p>Once the server is running run the following in a terminal:</p>\\n<div class=\\"gatsby-highlight\\" data-language=\\"text\\"><pre class=\\"language-text\\"><code class=\\"language-text\\">curl -X POST \\\\\\n      http://localhost:8080/kuery \\\\\\n      -H &#39;content-type: application/json&#39; \\\\\\n      -d &#39;{\\n      &quot;id&quot;: 0,\\n      &quot;title&quot;: &quot;A Game of Thrones&quot;,\\n      &quot;price&quot;: 14.99,\\n      &quot;genre&quot;: &quot;Fantasy&quot;\\n  }&#39;</code></pre></div>\\n<p>This will make a POST request to the server and we should be returned our book in JSON format:</p>\\n<div class=\\"gatsby-highlight\\" data-language=\\"text\\"><pre class=\\"language-text\\"><code class=\\"language-text\\">{&quot;id&quot;:0,&quot;title&quot;:&quot;A Game of Thrones&quot;,&quot;price&quot;:14.99,&quot;genre&quot;:&quot;Fantasy&quot;}</code></pre></div>\\n<blockquote>\\n<p>The following steps are for PostgreSQL. The commands will be different if you used a different database.</p>\\n</blockquote>\\n<p>Then using the PostgreSQL CLI we can query the database to see if our data was saved.</p>\\n<p>Start the PostgreSQL CLI for our database by running the following in a terminal:</p>\\n<div class=\\"gatsby-highlight\\" data-language=\\"text\\"><pre class=\\"language-text\\"><code class=\\"language-text\\">psql bookstoredb</code></pre></div>\\n<p>In a terminal which is running the <code class=\\"language-text\\">psql</code> command, run the following:</p>\\n<div class=\\"gatsby-highlight\\" data-language=\\"text\\"><pre class=\\"language-text\\"><code class=\\"language-text\\">    SELECT * FROM &quot;BookTable&quot;;</code></pre></div>\\n<p>You should see the following printed in the terminal:</p>\\n<div class=\\"gatsby-highlight\\" data-language=\\"text\\"><pre class=\\"language-text\\"><code class=\\"language-text\\"> id |       title       | price |  genre\\n----+-------------------+-------+---------\\n 0  | A Game of Thrones | 14.99 | Fantasy\\n(1 row)</code></pre></div>\\n<p>This shows our POST route is working as we\'d expect.</p>\\n<p>A better way to test this, as we\'re writing Swift code, would be to query the database directly from our server instead of using Terminal.</p>\\n<hr>\\n<h2 id=\\"step-6-retrieve-data-from-the-database\\"><a href=\\"#step-6-retrieve-data-from-the-database\\" aria-label=\\"step 6 retrieve data from the database permalink\\" class=\\"anchor\\"><svg aria-hidden=\\"true\\" focusable=\\"false\\" height=\\"16\\" version=\\"1.1\\" viewBox=\\"0 0 16 16\\" width=\\"16\\"><path fill-rule=\\"evenodd\\" d=\\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\\"></path></svg></a>Step 6: Retrieve data from the database</h2>\\n<p>Now we\'re going to build a SELECT query that will query the database and return all the entries in our <code class=\\"language-text\\">BookTable</code>.</p>\\n<p>Inside the handler for our GET route, we need to get a connection from the connection pool:</p>\\n<div class=\\"gatsby-highlight\\" data-language=\\"swift\\"><pre class=\\"language-swift\\"><code class=\\"language-swift\\"><span class=\\"token builtin\\">App</span><span class=\\"token punctuation\\">.</span>pool<span class=\\"token punctuation\\">.</span><span class=\\"token function\\">getConnection</span><span class=\\"token punctuation\\">(</span><span class=\\"token punctuation\\">)</span> <span class=\\"token punctuation\\">{</span> connection<span class=\\"token punctuation\\">,</span> error <span class=\\"token keyword\\">in</span>\\n    <span class=\\"token keyword\\">guard</span> <span class=\\"token keyword\\">let</span> connection <span class=\\"token operator\\">=</span> connection <span class=\\"token keyword\\">else</span> <span class=\\"token punctuation\\">{</span>\\n        <span class=\\"token builtin\\">Log</span><span class=\\"token punctuation\\">.</span><span class=\\"token function\\">error</span><span class=\\"token punctuation\\">(</span><span class=\\"token string\\">\\"Error connecting: <span class=\\"token interpolation\\"><span class=\\"token delimiter variable\\">\\\\(</span>error<span class=\\"token operator\\">?</span><span class=\\"token punctuation\\">.</span>localizedDescription <span class=\\"token operator\\">?</span><span class=\\"token operator\\">?</span> <span class=\\"token string\\">\\"Unknown Error\\"</span><span class=\\"token delimiter variable\\">)</span></span>\\"</span><span class=\\"token punctuation\\">)</span>\\n        <span class=\\"token keyword\\">return</span> <span class=\\"token function\\">completion</span><span class=\\"token punctuation\\">(</span><span class=\\"token constant\\">nil</span><span class=\\"token punctuation\\">,</span> <span class=\\"token punctuation\\">.</span>internalServerError<span class=\\"token punctuation\\">)</span>\\n    <span class=\\"token punctuation\\">}</span>\\n    <span class=\\"token comment\\">// Write query and execute it here</span>\\n<span class=\\"token punctuation\\">}</span></code></pre></div>\\n<p><a href=\\"/docs/databases/kuery5\\" target=\\"blank\\"> See the above code as a raw route.</a></p>\\n<p>Now we can build our SELECT query that will query the database for every entry in the \\"BookTable\\":</p>\\n<div class=\\"gatsby-highlight\\" data-language=\\"text\\"><pre class=\\"language-text\\"><code class=\\"language-text\\">let selectQuery = Select(from: App.bookTable)</code></pre></div>\\n<p>Like before we can now execute our query using <code class=\\"language-text\\">connection.execute</code>:</p>\\n<div class=\\"gatsby-highlight\\" data-language=\\"swift\\"><pre class=\\"language-swift\\"><code class=\\"language-swift\\">connection<span class=\\"token punctuation\\">.</span><span class=\\"token function\\">execute</span><span class=\\"token punctuation\\">(</span>query<span class=\\"token punctuation\\">:</span> selectQuery<span class=\\"token punctuation\\">)</span> <span class=\\"token punctuation\\">{</span> selectResult <span class=\\"token keyword\\">in</span>\\n    <span class=\\"token keyword\\">guard</span> <span class=\\"token keyword\\">let</span> resultSet <span class=\\"token operator\\">=</span> selectResult<span class=\\"token punctuation\\">.</span>asResultSet <span class=\\"token keyword\\">else</span> <span class=\\"token punctuation\\">{</span>\\n        <span class=\\"token builtin\\">Log</span><span class=\\"token punctuation\\">.</span><span class=\\"token function\\">error</span><span class=\\"token punctuation\\">(</span><span class=\\"token string\\">\\"Error connecting: <span class=\\"token interpolation\\"><span class=\\"token delimiter variable\\">\\\\(</span>selectResult<span class=\\"token punctuation\\">.</span>asError<span class=\\"token operator\\">?</span><span class=\\"token punctuation\\">.</span>localizedDescription <span class=\\"token operator\\">?</span><span class=\\"token operator\\">?</span> <span class=\\"token string\\">\\"Unknown Error\\"</span><span class=\\"token delimiter variable\\">)</span></span>\\"</span><span class=\\"token punctuation\\">)</span>\\n        <span class=\\"token keyword\\">return</span> <span class=\\"token function\\">completion</span><span class=\\"token punctuation\\">(</span><span class=\\"token constant\\">nil</span><span class=\\"token punctuation\\">,</span> <span class=\\"token punctuation\\">.</span>internalServerError<span class=\\"token punctuation\\">)</span>\\n    <span class=\\"token punctuation\\">}</span>\\n    <span class=\\"token comment\\">// Iterate through result set here</span>\\n<span class=\\"token punctuation\\">}</span></code></pre></div>\\n<p><a href=\\"/docs/databases/kuery6\\" target=\\"blank\\"> See the above code as a raw route.</a></p>\\n<p>The query should return a set of results, in the code we use <code class=\\"language-text\\">.asResultSet</code> to check that the returned value is a valid result set, otherwise we log an error and return.</p>\\n<p>Next we need to iterate through our result set, converting each of the returned database table rows into a book:</p>\\n<div class=\\"gatsby-highlight\\" data-language=\\"swift\\"><pre class=\\"language-swift\\"><code class=\\"language-swift\\"><span class=\\"token keyword\\">var</span> books <span class=\\"token operator\\">=</span> <span class=\\"token punctuation\\">[</span><span class=\\"token builtin\\">Book</span><span class=\\"token punctuation\\">]</span><span class=\\"token punctuation\\">(</span><span class=\\"token punctuation\\">)</span>\\nresultSet<span class=\\"token punctuation\\">.</span><span class=\\"token function\\">forEach</span><span class=\\"token punctuation\\">(</span><span class=\\"token punctuation\\">)</span> <span class=\\"token punctuation\\">{</span> row<span class=\\"token punctuation\\">,</span> error <span class=\\"token keyword\\">in</span>\\n    <span class=\\"token comment\\">// Handle callback here</span>\\n<span class=\\"token punctuation\\">}</span></code></pre></div>\\n<p>The <code class=\\"language-text\\">forEach</code> function will return either a <code class=\\"language-text\\">row</code>, an <code class=\\"language-text\\">error</code> or <code class=\\"language-text\\">nil</code> (in this case <code class=\\"language-text\\">nil</code> means that there are no more rows).</p>\\n<p>Inside the <code class=\\"language-text\\">forEach</code> callback, we need to handle these three cases:</p>\\n<div class=\\"gatsby-highlight\\" data-language=\\"swift\\"><pre class=\\"language-swift\\"><code class=\\"language-swift\\"><span class=\\"token keyword\\">guard</span> <span class=\\"token keyword\\">let</span> row <span class=\\"token operator\\">=</span> row <span class=\\"token keyword\\">else</span> <span class=\\"token punctuation\\">{</span>\\n    <span class=\\"token keyword\\">if</span> <span class=\\"token keyword\\">let</span> error <span class=\\"token operator\\">=</span> error <span class=\\"token punctuation\\">{</span>\\n        <span class=\\"token builtin\\">Log</span><span class=\\"token punctuation\\">.</span><span class=\\"token function\\">error</span><span class=\\"token punctuation\\">(</span><span class=\\"token string\\">\\"Error getting row: <span class=\\"token interpolation\\"><span class=\\"token delimiter variable\\">\\\\(</span>error<span class=\\"token delimiter variable\\">)</span></span>\\"</span><span class=\\"token punctuation\\">)</span>\\n        <span class=\\"token keyword\\">return</span> <span class=\\"token function\\">completion</span><span class=\\"token punctuation\\">(</span><span class=\\"token constant\\">nil</span><span class=\\"token punctuation\\">,</span> <span class=\\"token punctuation\\">.</span>internalServerError<span class=\\"token punctuation\\">)</span>\\n    <span class=\\"token punctuation\\">}</span> <span class=\\"token keyword\\">else</span> <span class=\\"token punctuation\\">{</span>\\n        <span class=\\"token comment\\">// All rows have been processed</span>\\n        <span class=\\"token keyword\\">return</span> <span class=\\"token function\\">completion</span><span class=\\"token punctuation\\">(</span>books<span class=\\"token punctuation\\">,</span> <span class=\\"token constant\\">nil</span><span class=\\"token punctuation\\">)</span>\\n    <span class=\\"token punctuation\\">}</span>\\n<span class=\\"token punctuation\\">}</span>\\n<span class=\\"token comment\\">// Convert row to book here</span></code></pre></div>\\n<p><a href=\\"/docs/databases/kuery7\\" target=\\"blank\\"> See the above code as a raw route.</a></p>\\n<p>When we get a row back from the database we need to convert it back into a <code class=\\"language-text\\">Book</code> model type.</p>\\n<p>After the <code class=\\"language-text\\">guard</code> closure, add the following code:</p>\\n<div class=\\"gatsby-highlight\\" data-language=\\"swift\\"><pre class=\\"language-swift\\"><code class=\\"language-swift\\"><span class=\\"token keyword\\">guard</span> <span class=\\"token keyword\\">let</span> idString <span class=\\"token operator\\">=</span> row<span class=\\"token punctuation\\">[</span><span class=\\"token number\\">0</span><span class=\\"token punctuation\\">]</span> <span class=\\"token keyword\\">as</span><span class=\\"token operator\\">?</span> <span class=\\"token builtin\\">String</span><span class=\\"token punctuation\\">,</span>\\n      <span class=\\"token keyword\\">let</span> id <span class=\\"token operator\\">=</span> <span class=\\"token function\\">Int</span><span class=\\"token punctuation\\">(</span>idString<span class=\\"token punctuation\\">)</span><span class=\\"token punctuation\\">,</span>\\n      <span class=\\"token keyword\\">let</span> title <span class=\\"token operator\\">=</span> row<span class=\\"token punctuation\\">[</span><span class=\\"token number\\">1</span><span class=\\"token punctuation\\">]</span> <span class=\\"token keyword\\">as</span><span class=\\"token operator\\">?</span> <span class=\\"token builtin\\">String</span><span class=\\"token punctuation\\">,</span>\\n      <span class=\\"token keyword\\">let</span> price <span class=\\"token operator\\">=</span> row<span class=\\"token punctuation\\">[</span><span class=\\"token number\\">2</span><span class=\\"token punctuation\\">]</span> <span class=\\"token keyword\\">as</span><span class=\\"token operator\\">?</span> <span class=\\"token builtin\\">Double</span><span class=\\"token punctuation\\">,</span>\\n      <span class=\\"token keyword\\">let</span> genre <span class=\\"token operator\\">=</span> row<span class=\\"token punctuation\\">[</span><span class=\\"token number\\">3</span><span class=\\"token punctuation\\">]</span> <span class=\\"token keyword\\">as</span><span class=\\"token operator\\">?</span> <span class=\\"token builtin\\">String</span>\\n<span class=\\"token keyword\\">else</span> <span class=\\"token punctuation\\">{</span>\\n      <span class=\\"token builtin\\">Log</span><span class=\\"token punctuation\\">.</span><span class=\\"token function\\">error</span><span class=\\"token punctuation\\">(</span><span class=\\"token string\\">\\"Unable to decode book\\"</span><span class=\\"token punctuation\\">)</span>\\n      <span class=\\"token keyword\\">let</span> <span class=\\"token number\\">_</span> <span class=\\"token operator\\">=</span> response<span class=\\"token punctuation\\">.</span><span class=\\"token function\\">send</span><span class=\\"token punctuation\\">(</span>status<span class=\\"token punctuation\\">:</span> <span class=\\"token punctuation\\">.</span>internalServerError<span class=\\"token punctuation\\">)</span>\\n      <span class=\\"token keyword\\">return</span> <span class=\\"token function\\">next</span><span class=\\"token punctuation\\">(</span><span class=\\"token punctuation\\">)</span>\\n<span class=\\"token punctuation\\">}</span>\\nbooks<span class=\\"token punctuation\\">.</span><span class=\\"token function\\">append</span><span class=\\"token punctuation\\">(</span><span class=\\"token function\\">Book</span><span class=\\"token punctuation\\">(</span>id<span class=\\"token punctuation\\">:</span> id<span class=\\"token punctuation\\">,</span> title<span class=\\"token punctuation\\">:</span> title<span class=\\"token punctuation\\">,</span> price<span class=\\"token punctuation\\">:</span> price<span class=\\"token punctuation\\">,</span> genre<span class=\\"token punctuation\\">:</span> genre<span class=\\"token punctuation\\">)</span><span class=\\"token punctuation\\">)</span></code></pre></div>\\n<p>That\'s it! We\'ve enabled our GET route to retrieve data from a database.</p>\\n<p>Our completed <code class=\\"language-text\\">KueryRoutes.swift</code> file should now look as follows:</p>\\n<div class=\\"gatsby-highlight\\" data-language=\\"swift\\"><pre class=\\"language-swift\\"><code class=\\"language-swift\\"><span class=\\"token keyword\\">import</span> <span class=\\"token builtin\\">KituraContracts</span>\\n<span class=\\"token keyword\\">import</span> <span class=\\"token builtin\\">LoggerAPI</span>\\n<span class=\\"token keyword\\">import</span> <span class=\\"token builtin\\">Foundation</span>\\n<span class=\\"token keyword\\">import</span> <span class=\\"token builtin\\">SwiftKuery</span>\\n<span class=\\"token keyword\\">import</span> <span class=\\"token builtin\\">SwiftKueryPostgreSQL</span> <span class=\\"token comment\\">// This will be different if you did not use PostgreSQL</span>\\n\\n<span class=\\"token keyword\\">func</span> <span class=\\"token function\\">initializeKueryRoutes</span><span class=\\"token punctuation\\">(</span>app<span class=\\"token punctuation\\">:</span> <span class=\\"token builtin\\">App</span><span class=\\"token punctuation\\">)</span> <span class=\\"token punctuation\\">{</span>\\n    app<span class=\\"token punctuation\\">.</span>router<span class=\\"token punctuation\\">.</span><span class=\\"token function\\">post</span><span class=\\"token punctuation\\">(</span><span class=\\"token string\\">\\"/kuery\\"</span><span class=\\"token punctuation\\">,</span> handler<span class=\\"token punctuation\\">:</span> app<span class=\\"token punctuation\\">.</span>insertHandler<span class=\\"token punctuation\\">)</span>\\n    app<span class=\\"token punctuation\\">.</span>router<span class=\\"token punctuation\\">.</span><span class=\\"token keyword\\">get</span><span class=\\"token punctuation\\">(</span><span class=\\"token string\\">\\"/kuery\\"</span><span class=\\"token punctuation\\">,</span> handler<span class=\\"token punctuation\\">:</span> app<span class=\\"token punctuation\\">.</span>selectHandler<span class=\\"token punctuation\\">)</span>\\n<span class=\\"token punctuation\\">}</span>\\n\\n<span class=\\"token keyword\\">extension</span> <span class=\\"token builtin\\">App</span> <span class=\\"token punctuation\\">{</span>\\n    <span class=\\"token keyword\\">static</span> <span class=\\"token keyword\\">let</span> poolOptions <span class=\\"token operator\\">=</span> <span class=\\"token function\\">ConnectionPoolOptions</span><span class=\\"token punctuation\\">(</span>initialCapacity<span class=\\"token punctuation\\">:</span> <span class=\\"token number\\">1</span><span class=\\"token punctuation\\">,</span> maxCapacity<span class=\\"token punctuation\\">:</span> <span class=\\"token number\\">5</span><span class=\\"token punctuation\\">)</span>\\n    <span class=\\"token comment\\">// The createPool() will be different if you used a plugin other than PostgreSQL</span>\\n    <span class=\\"token keyword\\">static</span> <span class=\\"token keyword\\">let</span> pool <span class=\\"token operator\\">=</span> <span class=\\"token builtin\\">PostgreSQLConnection</span><span class=\\"token punctuation\\">.</span><span class=\\"token function\\">createPool</span><span class=\\"token punctuation\\">(</span>host<span class=\\"token punctuation\\">:</span> <span class=\\"token string\\">\\"localhost\\"</span><span class=\\"token punctuation\\">,</span> port<span class=\\"token punctuation\\">:</span> <span class=\\"token number\\">5432</span><span class=\\"token punctuation\\">,</span> options<span class=\\"token punctuation\\">:</span> <span class=\\"token punctuation\\">[</span><span class=\\"token punctuation\\">.</span><span class=\\"token function\\">databaseName</span><span class=\\"token punctuation\\">(</span><span class=\\"token string\\">\\"bookstoredb\\"</span><span class=\\"token punctuation\\">)</span><span class=\\"token punctuation\\">]</span><span class=\\"token punctuation\\">,</span> poolOptions<span class=\\"token punctuation\\">:</span> poolOptions<span class=\\"token punctuation\\">)</span>\\n    <span class=\\"token keyword\\">static</span> <span class=\\"token keyword\\">let</span> bookTable <span class=\\"token operator\\">=</span> <span class=\\"token function\\">BookTable</span><span class=\\"token punctuation\\">(</span><span class=\\"token punctuation\\">)</span>\\n\\n    <span class=\\"token keyword\\">func</span> <span class=\\"token function\\">insertHandler</span><span class=\\"token punctuation\\">(</span>book<span class=\\"token punctuation\\">:</span> <span class=\\"token builtin\\">Book</span><span class=\\"token punctuation\\">,</span> completion<span class=\\"token punctuation\\">:</span> @escaping <span class=\\"token punctuation\\">(</span><span class=\\"token builtin\\">Book</span><span class=\\"token operator\\">?</span><span class=\\"token punctuation\\">,</span> <span class=\\"token builtin\\">RequestError</span><span class=\\"token operator\\">?</span><span class=\\"token punctuation\\">)</span> <span class=\\"token operator\\">-</span><span class=\\"token operator\\">></span> <span class=\\"token builtin\\">Void</span><span class=\\"token punctuation\\">)</span> <span class=\\"token punctuation\\">{</span>\\n        <span class=\\"token keyword\\">let</span> rows <span class=\\"token operator\\">=</span> <span class=\\"token punctuation\\">[</span><span class=\\"token punctuation\\">[</span>book<span class=\\"token punctuation\\">.</span>id<span class=\\"token punctuation\\">,</span> book<span class=\\"token punctuation\\">.</span>title<span class=\\"token punctuation\\">,</span> book<span class=\\"token punctuation\\">.</span>price<span class=\\"token punctuation\\">,</span> book<span class=\\"token punctuation\\">.</span>genre<span class=\\"token punctuation\\">]</span><span class=\\"token punctuation\\">]</span>\\n        <span class=\\"token builtin\\">App</span><span class=\\"token punctuation\\">.</span>pool<span class=\\"token punctuation\\">.</span><span class=\\"token function\\">getConnection</span><span class=\\"token punctuation\\">(</span><span class=\\"token punctuation\\">)</span> <span class=\\"token punctuation\\">{</span> connection<span class=\\"token punctuation\\">,</span> error <span class=\\"token keyword\\">in</span>\\n            <span class=\\"token keyword\\">guard</span> <span class=\\"token keyword\\">let</span> connection <span class=\\"token operator\\">=</span> connection <span class=\\"token keyword\\">else</span> <span class=\\"token punctuation\\">{</span>\\n                <span class=\\"token builtin\\">Log</span><span class=\\"token punctuation\\">.</span><span class=\\"token function\\">error</span><span class=\\"token punctuation\\">(</span><span class=\\"token string\\">\\"Error connecting: <span class=\\"token interpolation\\"><span class=\\"token delimiter variable\\">\\\\(</span>error<span class=\\"token operator\\">?</span><span class=\\"token punctuation\\">.</span>localizedDescription <span class=\\"token operator\\">?</span><span class=\\"token operator\\">?</span> <span class=\\"token string\\">\\"Unknown Error\\"</span><span class=\\"token delimiter variable\\">)</span></span>\\"</span><span class=\\"token punctuation\\">)</span>\\n                <span class=\\"token keyword\\">return</span> <span class=\\"token function\\">completion</span><span class=\\"token punctuation\\">(</span><span class=\\"token constant\\">nil</span><span class=\\"token punctuation\\">,</span> <span class=\\"token punctuation\\">.</span>internalServerError<span class=\\"token punctuation\\">)</span>\\n            <span class=\\"token punctuation\\">}</span>\\n            <span class=\\"token keyword\\">let</span> insertQuery <span class=\\"token operator\\">=</span> <span class=\\"token function\\">Insert</span><span class=\\"token punctuation\\">(</span>into<span class=\\"token punctuation\\">:</span> <span class=\\"token builtin\\">App</span><span class=\\"token punctuation\\">.</span>bookTable<span class=\\"token punctuation\\">,</span> rows<span class=\\"token punctuation\\">:</span> rows<span class=\\"token punctuation\\">)</span>\\n            connection<span class=\\"token punctuation\\">.</span><span class=\\"token function\\">execute</span><span class=\\"token punctuation\\">(</span>query<span class=\\"token punctuation\\">:</span> insertQuery<span class=\\"token punctuation\\">)</span> <span class=\\"token punctuation\\">{</span> insertResult <span class=\\"token keyword\\">in</span>\\n                <span class=\\"token keyword\\">guard</span> insertResult<span class=\\"token punctuation\\">.</span>success <span class=\\"token keyword\\">else</span> <span class=\\"token punctuation\\">{</span>\\n                    <span class=\\"token builtin\\">Log</span><span class=\\"token punctuation\\">.</span><span class=\\"token function\\">error</span><span class=\\"token punctuation\\">(</span><span class=\\"token string\\">\\"Error executing query: <span class=\\"token interpolation\\"><span class=\\"token delimiter variable\\">\\\\(</span>insertResult<span class=\\"token punctuation\\">.</span>asError<span class=\\"token operator\\">?</span><span class=\\"token punctuation\\">.</span>localizedDescription <span class=\\"token operator\\">?</span><span class=\\"token operator\\">?</span> <span class=\\"token string\\">\\"Unknown Error\\"</span><span class=\\"token delimiter variable\\">)</span></span>\\"</span><span class=\\"token punctuation\\">)</span>\\n                    <span class=\\"token keyword\\">return</span> <span class=\\"token function\\">completion</span><span class=\\"token punctuation\\">(</span><span class=\\"token constant\\">nil</span><span class=\\"token punctuation\\">,</span> <span class=\\"token punctuation\\">.</span>internalServerError<span class=\\"token punctuation\\">)</span>\\n                <span class=\\"token punctuation\\">}</span>\\n                <span class=\\"token function\\">completion</span><span class=\\"token punctuation\\">(</span>book<span class=\\"token punctuation\\">,</span> <span class=\\"token constant\\">nil</span><span class=\\"token punctuation\\">)</span>\\n            <span class=\\"token punctuation\\">}</span>\\n        <span class=\\"token punctuation\\">}</span>\\n    <span class=\\"token punctuation\\">}</span>\\n\\n    <span class=\\"token keyword\\">func</span> <span class=\\"token function\\">selectHandler</span><span class=\\"token punctuation\\">(</span>completion<span class=\\"token punctuation\\">:</span> @escaping <span class=\\"token punctuation\\">(</span><span class=\\"token punctuation\\">[</span><span class=\\"token builtin\\">Book</span><span class=\\"token punctuation\\">]</span><span class=\\"token operator\\">?</span><span class=\\"token punctuation\\">,</span> <span class=\\"token builtin\\">RequestError</span><span class=\\"token operator\\">?</span><span class=\\"token punctuation\\">)</span> <span class=\\"token operator\\">-</span><span class=\\"token operator\\">></span> <span class=\\"token builtin\\">Void</span><span class=\\"token punctuation\\">)</span> <span class=\\"token punctuation\\">{</span>\\n        <span class=\\"token builtin\\">App</span><span class=\\"token punctuation\\">.</span>pool<span class=\\"token punctuation\\">.</span><span class=\\"token function\\">getConnection</span><span class=\\"token punctuation\\">(</span><span class=\\"token punctuation\\">)</span> <span class=\\"token punctuation\\">{</span> connection<span class=\\"token punctuation\\">,</span> error <span class=\\"token keyword\\">in</span>\\n            <span class=\\"token keyword\\">guard</span> <span class=\\"token keyword\\">let</span> connection <span class=\\"token operator\\">=</span> connection <span class=\\"token keyword\\">else</span> <span class=\\"token punctuation\\">{</span>\\n                <span class=\\"token builtin\\">Log</span><span class=\\"token punctuation\\">.</span><span class=\\"token function\\">error</span><span class=\\"token punctuation\\">(</span><span class=\\"token string\\">\\"Error connecting: <span class=\\"token interpolation\\"><span class=\\"token delimiter variable\\">\\\\(</span>error<span class=\\"token operator\\">?</span><span class=\\"token punctuation\\">.</span>localizedDescription <span class=\\"token operator\\">?</span><span class=\\"token operator\\">?</span> <span class=\\"token string\\">\\"Unknown Error\\"</span><span class=\\"token delimiter variable\\">)</span></span>\\"</span><span class=\\"token punctuation\\">)</span>\\n                <span class=\\"token keyword\\">return</span> <span class=\\"token function\\">completion</span><span class=\\"token punctuation\\">(</span><span class=\\"token constant\\">nil</span><span class=\\"token punctuation\\">,</span> <span class=\\"token punctuation\\">.</span>internalServerError<span class=\\"token punctuation\\">)</span>\\n            <span class=\\"token punctuation\\">}</span>\\n            <span class=\\"token keyword\\">let</span> selectQuery <span class=\\"token operator\\">=</span> <span class=\\"token function\\">Select</span><span class=\\"token punctuation\\">(</span>from<span class=\\"token punctuation\\">:</span> <span class=\\"token builtin\\">App</span><span class=\\"token punctuation\\">.</span>bookTable<span class=\\"token punctuation\\">)</span>\\n            connection<span class=\\"token punctuation\\">.</span><span class=\\"token function\\">execute</span><span class=\\"token punctuation\\">(</span>query<span class=\\"token punctuation\\">:</span> selectQuery<span class=\\"token punctuation\\">)</span> <span class=\\"token punctuation\\">{</span> selectResult <span class=\\"token keyword\\">in</span>\\n                <span class=\\"token keyword\\">guard</span> <span class=\\"token keyword\\">let</span> resultSet <span class=\\"token operator\\">=</span> selectResult<span class=\\"token punctuation\\">.</span>asResultSet <span class=\\"token keyword\\">else</span> <span class=\\"token punctuation\\">{</span>\\n                    <span class=\\"token builtin\\">Log</span><span class=\\"token punctuation\\">.</span><span class=\\"token function\\">error</span><span class=\\"token punctuation\\">(</span><span class=\\"token string\\">\\"Error connecting: <span class=\\"token interpolation\\"><span class=\\"token delimiter variable\\">\\\\(</span>selectResult<span class=\\"token punctuation\\">.</span>asError<span class=\\"token operator\\">?</span><span class=\\"token punctuation\\">.</span>localizedDescription <span class=\\"token operator\\">?</span><span class=\\"token operator\\">?</span> <span class=\\"token string\\">\\"Unknown Error\\"</span><span class=\\"token delimiter variable\\">)</span></span>\\"</span><span class=\\"token punctuation\\">)</span>\\n                    <span class=\\"token keyword\\">return</span> <span class=\\"token function\\">completion</span><span class=\\"token punctuation\\">(</span><span class=\\"token constant\\">nil</span><span class=\\"token punctuation\\">,</span> <span class=\\"token punctuation\\">.</span>internalServerError<span class=\\"token punctuation\\">)</span>\\n                <span class=\\"token punctuation\\">}</span>\\n                <span class=\\"token keyword\\">var</span> books <span class=\\"token operator\\">=</span> <span class=\\"token punctuation\\">[</span><span class=\\"token builtin\\">Book</span><span class=\\"token punctuation\\">]</span><span class=\\"token punctuation\\">(</span><span class=\\"token punctuation\\">)</span>\\n                resultSet<span class=\\"token punctuation\\">.</span><span class=\\"token function\\">forEach</span><span class=\\"token punctuation\\">(</span><span class=\\"token punctuation\\">)</span> <span class=\\"token punctuation\\">{</span> row<span class=\\"token punctuation\\">,</span> error <span class=\\"token keyword\\">in</span>\\n                    <span class=\\"token keyword\\">guard</span> <span class=\\"token keyword\\">let</span> row <span class=\\"token operator\\">=</span> row <span class=\\"token keyword\\">else</span> <span class=\\"token punctuation\\">{</span>\\n                        <span class=\\"token keyword\\">if</span> <span class=\\"token keyword\\">let</span> error <span class=\\"token operator\\">=</span> error <span class=\\"token punctuation\\">{</span>\\n                            <span class=\\"token builtin\\">Log</span><span class=\\"token punctuation\\">.</span><span class=\\"token function\\">error</span><span class=\\"token punctuation\\">(</span><span class=\\"token string\\">\\"Error getting row: <span class=\\"token interpolation\\"><span class=\\"token delimiter variable\\">\\\\(</span>error<span class=\\"token delimiter variable\\">)</span></span>\\"</span><span class=\\"token punctuation\\">)</span>\\n                            <span class=\\"token keyword\\">return</span> <span class=\\"token function\\">completion</span><span class=\\"token punctuation\\">(</span><span class=\\"token constant\\">nil</span><span class=\\"token punctuation\\">,</span> <span class=\\"token punctuation\\">.</span>internalServerError<span class=\\"token punctuation\\">)</span>\\n                        <span class=\\"token punctuation\\">}</span> <span class=\\"token keyword\\">else</span> <span class=\\"token punctuation\\">{</span>\\n                            <span class=\\"token comment\\">// All rows have been processed</span>\\n                            <span class=\\"token keyword\\">return</span> <span class=\\"token function\\">completion</span><span class=\\"token punctuation\\">(</span>books<span class=\\"token punctuation\\">,</span> <span class=\\"token constant\\">nil</span><span class=\\"token punctuation\\">)</span>\\n                        <span class=\\"token punctuation\\">}</span>\\n                    <span class=\\"token punctuation\\">}</span>\\n                    <span class=\\"token keyword\\">guard</span> <span class=\\"token keyword\\">let</span> idString <span class=\\"token operator\\">=</span> row<span class=\\"token punctuation\\">[</span><span class=\\"token number\\">0</span><span class=\\"token punctuation\\">]</span> <span class=\\"token keyword\\">as</span><span class=\\"token operator\\">?</span> <span class=\\"token builtin\\">String</span><span class=\\"token punctuation\\">,</span>\\n                        <span class=\\"token keyword\\">let</span> id <span class=\\"token operator\\">=</span> <span class=\\"token function\\">Int</span><span class=\\"token punctuation\\">(</span>idString<span class=\\"token punctuation\\">)</span><span class=\\"token punctuation\\">,</span>\\n                        <span class=\\"token keyword\\">let</span> title <span class=\\"token operator\\">=</span> row<span class=\\"token punctuation\\">[</span><span class=\\"token number\\">1</span><span class=\\"token punctuation\\">]</span> <span class=\\"token keyword\\">as</span><span class=\\"token operator\\">?</span> <span class=\\"token builtin\\">String</span><span class=\\"token punctuation\\">,</span>\\n                        <span class=\\"token keyword\\">let</span> price <span class=\\"token operator\\">=</span> row<span class=\\"token punctuation\\">[</span><span class=\\"token number\\">2</span><span class=\\"token punctuation\\">]</span> <span class=\\"token keyword\\">as</span><span class=\\"token operator\\">?</span> <span class=\\"token builtin\\">Double</span><span class=\\"token punctuation\\">,</span>\\n                        <span class=\\"token keyword\\">let</span> genre <span class=\\"token operator\\">=</span> row<span class=\\"token punctuation\\">[</span><span class=\\"token number\\">3</span><span class=\\"token punctuation\\">]</span> <span class=\\"token keyword\\">as</span><span class=\\"token operator\\">?</span> <span class=\\"token builtin\\">String</span>\\n                    <span class=\\"token keyword\\">else</span> <span class=\\"token punctuation\\">{</span>\\n                        <span class=\\"token builtin\\">Log</span><span class=\\"token punctuation\\">.</span><span class=\\"token function\\">error</span><span class=\\"token punctuation\\">(</span><span class=\\"token string\\">\\"Unable to decode book\\"</span><span class=\\"token punctuation\\">)</span>\\n                        <span class=\\"token keyword\\">return</span> <span class=\\"token function\\">completion</span><span class=\\"token punctuation\\">(</span><span class=\\"token constant\\">nil</span><span class=\\"token punctuation\\">,</span> <span class=\\"token punctuation\\">.</span>internalServerError<span class=\\"token punctuation\\">)</span>\\n                    <span class=\\"token punctuation\\">}</span>\\n                    books<span class=\\"token punctuation\\">.</span><span class=\\"token function\\">append</span><span class=\\"token punctuation\\">(</span><span class=\\"token function\\">Book</span><span class=\\"token punctuation\\">(</span>id<span class=\\"token punctuation\\">:</span> id<span class=\\"token punctuation\\">,</span> title<span class=\\"token punctuation\\">:</span> title<span class=\\"token punctuation\\">,</span> price<span class=\\"token punctuation\\">:</span> price<span class=\\"token punctuation\\">,</span> genre<span class=\\"token punctuation\\">:</span> genre<span class=\\"token punctuation\\">)</span><span class=\\"token punctuation\\">)</span>\\n                <span class=\\"token punctuation\\">}</span>\\n            <span class=\\"token punctuation\\">}</span>\\n        <span class=\\"token punctuation\\">}</span>\\n    <span class=\\"token punctuation\\">}</span>\\n<span class=\\"token punctuation\\">}</span></code></pre></div>\\n<p><a href=\\"/docs/databases/kuery8\\" target=\\"blank\\"> See the above code as a raw route.</a></p>\\n<hr>\\n<h2 id=\\"step-7-optional-test-retrieving-the-books-from-a-database\\"><a href=\\"#step-7-optional-test-retrieving-the-books-from-a-database\\" aria-label=\\"step 7 optional test retrieving the books from a database permalink\\" class=\\"anchor\\"><svg aria-hidden=\\"true\\" focusable=\\"false\\" height=\\"16\\" version=\\"1.1\\" viewBox=\\"0 0 16 16\\" width=\\"16\\"><path fill-rule=\\"evenodd\\" d=\\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\\"></path></svg></a>Step 7 (Optional): Test retrieving the books from a database</h2>\\n<p>If you followed \\"Step 5: Testing saving to database\\", then you will have a book in your database, which we can retrieve using the code we wrote in \\"Step 6: Retrieve data from the database\\".</p>\\n<p>To do this, start the server and navigate to: <a href=\\"http://localhost:8080/kuery\\" target=\\"blank\\">localhost:8080/kuery</a></p>\\n<p>This will call GET on the <code class=\\"language-text\\">/kuery</code> route and we will see the book we posted in Step 5 returned in JSON format. The book data persists even if we restart the Kitura server as it is now stored in a database.</p>","frontmatter":{"path":"/docs/databases/kuery","title":"Add Swift Kuery to your app"}}},{"node":{"html":"<h1 id=\\"swift-kuery-orm\\"><a href=\\"#swift-kuery-orm\\" aria-label=\\"swift kuery orm permalink\\" class=\\"anchor\\"><svg aria-hidden=\\"true\\" focusable=\\"false\\" height=\\"16\\" version=\\"1.1\\" viewBox=\\"0 0 16 16\\" width=\\"16\\"><path fill-rule=\\"evenodd\\" d=\\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\\"></path></svg></a>Swift Kuery ORM</h1>\\n<p><a href=\\"https://github.com/IBM-Swift/Swift-Kuery-ORM\\">Swift-Kuery-ORM</a> is an ORM (Object Relational Mapping) library for Swift built on top of <a href=\\"https://github.com/IBM-Swift/Swift-Kuery\\">Swift Kuery</a>, using it allows you to simplify the persistence of model objects with your server.</p>\\n<p>In this guide we will show you how to save and retrieve a <code class=\\"language-text\\">Codable</code> Swift model from a database (in this case PostgreSQL) using the ORM.</p>\\n<p>This guide uses the ORM with <a href=\\"../routing/codable-routing\\">codable routes</a>, however, the ORM also works with Kitura\'s <a href=\\"../routing/raw-routing\\">raw routing</a>.</p>\\n<blockquote>\\n<p>Support for nested <code class=\\"language-text\\">Codable</code> types (models, structs, arrays etc.) is not currently available in the ORM. Support for simple nesting will be added prior to releasing V1.0, more complex nesting will be added for V2.0.</p>\\n</blockquote>\\n<hr>\\n<h2 id=\\"step-1-define-the-orm-routes\\"><a href=\\"#step-1-define-the-orm-routes\\" aria-label=\\"step 1 define the orm routes permalink\\" class=\\"anchor\\"><svg aria-hidden=\\"true\\" focusable=\\"false\\" height=\\"16\\" version=\\"1.1\\" viewBox=\\"0 0 16 16\\" width=\\"16\\"><path fill-rule=\\"evenodd\\" d=\\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\\"></path></svg></a>Step 1: Define the ORM routes</h2>\\n<p>We are going to create a new file in our project for the ORM routes.</p>\\n<blockquote>\\n<p>If you don\'t have a server, follow our <a href=\\"../getting-started/create-server-cli\\">Create a server</a> guide.</p>\\n</blockquote>\\n<p>Open your <code class=\\"language-text\\">Application.swift</code> file:</p>\\n<div class=\\"gatsby-highlight\\" data-language=\\"text\\"><pre class=\\"language-text\\"><code class=\\"language-text\\">open Sources/Application/Application.swift</code></pre></div>\\n<p>Inside the <code class=\\"language-text\\">postInit()</code> function add:</p>\\n<div class=\\"gatsby-highlight\\" data-language=\\"swift\\"><pre class=\\"language-swift\\"><code class=\\"language-swift\\"><span class=\\"token function\\">initializeORMRoutes</span><span class=\\"token punctuation\\">(</span>app<span class=\\"token punctuation\\">:</span> <span class=\\"token keyword\\">self</span><span class=\\"token punctuation\\">)</span></code></pre></div>\\n<p>Create a new file called <code class=\\"language-text\\">ORMRoutes.swift</code> to define the ORM routes in:</p>\\n<div class=\\"gatsby-highlight\\" data-language=\\"text\\"><pre class=\\"language-text\\"><code class=\\"language-text\\">touch Sources/Application/Routes/ORMRoutes.swift</code></pre></div>\\n<p>Open the <code class=\\"language-text\\">ORMRoutes.swift</code> file:</p>\\n<div class=\\"gatsby-highlight\\" data-language=\\"text\\"><pre class=\\"language-text\\"><code class=\\"language-text\\">open Sources/Application/Routes/ORMRoutes.swift</code></pre></div>\\n<p>Inside this file we will add the code for our ORM routes:</p>\\n<div class=\\"gatsby-highlight\\" data-language=\\"swift\\"><pre class=\\"language-swift\\"><code class=\\"language-swift\\"><span class=\\"token keyword\\">import</span> <span class=\\"token builtin\\">KituraContracts</span>\\n\\n<span class=\\"token keyword\\">func</span> <span class=\\"token function\\">initializeORMRoutes</span><span class=\\"token punctuation\\">(</span>app<span class=\\"token punctuation\\">:</span> <span class=\\"token builtin\\">App</span><span class=\\"token punctuation\\">)</span> <span class=\\"token punctuation\\">{</span>\\n    <span class=\\"token comment\\">// Connect to database here</span>\\n    app<span class=\\"token punctuation\\">.</span>router<span class=\\"token punctuation\\">.</span><span class=\\"token function\\">post</span><span class=\\"token punctuation\\">(</span><span class=\\"token string\\">\\"/orm\\"</span><span class=\\"token punctuation\\">,</span> handler<span class=\\"token punctuation\\">:</span> app<span class=\\"token punctuation\\">.</span>saveHandler<span class=\\"token punctuation\\">)</span>\\n    app<span class=\\"token punctuation\\">.</span>router<span class=\\"token punctuation\\">.</span><span class=\\"token keyword\\">get</span><span class=\\"token punctuation\\">(</span><span class=\\"token string\\">\\"/orm\\"</span><span class=\\"token punctuation\\">,</span> handler<span class=\\"token punctuation\\">:</span> app<span class=\\"token punctuation\\">.</span>findAllHandler<span class=\\"token punctuation\\">)</span>\\n    app<span class=\\"token punctuation\\">.</span>router<span class=\\"token punctuation\\">.</span><span class=\\"token keyword\\">get</span><span class=\\"token punctuation\\">(</span><span class=\\"token string\\">\\"/orm\\"</span><span class=\\"token punctuation\\">,</span> handler<span class=\\"token punctuation\\">:</span> app<span class=\\"token punctuation\\">.</span>findOneHandler<span class=\\"token punctuation\\">)</span>\\n<span class=\\"token punctuation\\">}</span>\\n<span class=\\"token keyword\\">extension</span> <span class=\\"token builtin\\">App</span> <span class=\\"token punctuation\\">{</span>\\n    <span class=\\"token keyword\\">func</span> <span class=\\"token function\\">saveHandler</span><span class=\\"token punctuation\\">(</span>book<span class=\\"token punctuation\\">:</span> <span class=\\"token builtin\\">Book</span><span class=\\"token punctuation\\">,</span> completion<span class=\\"token punctuation\\">:</span> <span class=\\"token punctuation\\">(</span><span class=\\"token builtin\\">Book</span><span class=\\"token operator\\">?</span><span class=\\"token punctuation\\">,</span> <span class=\\"token builtin\\">RequestError</span><span class=\\"token operator\\">?</span><span class=\\"token punctuation\\">)</span> <span class=\\"token operator\\">-</span><span class=\\"token operator\\">></span> <span class=\\"token builtin\\">Void</span><span class=\\"token punctuation\\">)</span> <span class=\\"token punctuation\\">{</span>\\n        <span class=\\"token comment\\">// Save book here</span>\\n    <span class=\\"token punctuation\\">}</span>\\n\\n    <span class=\\"token keyword\\">func</span> <span class=\\"token function\\">findAllHandler</span><span class=\\"token punctuation\\">(</span>completion<span class=\\"token punctuation\\">:</span> <span class=\\"token punctuation\\">(</span><span class=\\"token punctuation\\">[</span><span class=\\"token builtin\\">Book</span><span class=\\"token punctuation\\">]</span><span class=\\"token operator\\">?</span><span class=\\"token punctuation\\">,</span> <span class=\\"token builtin\\">RequestError</span><span class=\\"token operator\\">?</span><span class=\\"token punctuation\\">)</span> <span class=\\"token operator\\">-</span><span class=\\"token operator\\">></span> <span class=\\"token builtin\\">Void</span><span class=\\"token punctuation\\">)</span> <span class=\\"token punctuation\\">{</span>\\n        <span class=\\"token comment\\">// Get all books here</span>\\n    <span class=\\"token punctuation\\">}</span>\\n\\n    <span class=\\"token keyword\\">func</span> <span class=\\"token function\\">findOneHandler</span><span class=\\"token punctuation\\">(</span>id<span class=\\"token punctuation\\">:</span> <span class=\\"token builtin\\">Int</span><span class=\\"token punctuation\\">,</span> completion<span class=\\"token punctuation\\">:</span> <span class=\\"token punctuation\\">(</span><span class=\\"token builtin\\">Book</span><span class=\\"token operator\\">?</span><span class=\\"token punctuation\\">,</span> <span class=\\"token builtin\\">RequestError</span><span class=\\"token operator\\">?</span><span class=\\"token punctuation\\">)</span> <span class=\\"token operator\\">-</span><span class=\\"token operator\\">></span> <span class=\\"token builtin\\">Void</span><span class=\\"token punctuation\\">)</span> <span class=\\"token punctuation\\">{</span>\\n        <span class=\\"token comment\\">// Get one book here</span>\\n    <span class=\\"token punctuation\\">}</span>\\n<span class=\\"token punctuation\\">}</span></code></pre></div>\\n<p>We have defined three routes on the \\"/orm\\" endpoint. One to handle POST requests, one to handle GET requests with an identifier and one to handle GET requests without an identifier.</p>\\n<p>The routes in this guide are using the <a href=\\"/docs/routing/what-is-routing#codable-model\\">Book model from the routing guide</a>, however you could use any Codable type.</p>\\n<hr>\\n<h2 id=\\"step-2-add-the-orm-to-the-projects-dependencies\\"><a href=\\"#step-2-add-the-orm-to-the-projects-dependencies\\" aria-label=\\"step 2 add the orm to the projects dependencies permalink\\" class=\\"anchor\\"><svg aria-hidden=\\"true\\" focusable=\\"false\\" height=\\"16\\" version=\\"1.1\\" viewBox=\\"0 0 16 16\\" width=\\"16\\"><path fill-rule=\\"evenodd\\" d=\\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\\"></path></svg></a>Step 2: Add the ORM to the project\'s dependencies</h2>\\n<blockquote>\\n<p>You can use any of the other database plugins supported by <a href=\\"https://github.com/IBM-Swift/Swift-Kuery\\">Swift-Kuery</a>, however, the rest of this guide is written to work with the <a href=\\"https://github.com/IBM-Swift/Swift-Kuery-PostgreSQL\\">Swift-Kuery-PostgreSQL</a> plugin.</p>\\n</blockquote>\\n<p>To use the ORM, we need to <a href=\\"https://github.com/IBM-Swift/Swift-Kuery-ORM#update-your-packageswift-file\\">add Swift-Kuery-ORM</a> and add <a href=\\"https://github.com/IBM-Swift/Swift-Kuery-PostgreSQL#add-dependencies\\">Swift-Kuery-PostgreSQL</a> to your dependencies.</p>\\n<p>Next, we import the ORM library and our chosen plugin to the project:</p>\\n<div class=\\"gatsby-highlight\\" data-language=\\"swift\\"><pre class=\\"language-swift\\"><code class=\\"language-swift\\"><span class=\\"token keyword\\">import</span> <span class=\\"token builtin\\">SwiftKueryORM</span>\\n<span class=\\"token keyword\\">import</span> <span class=\\"token builtin\\">SwiftKueryPostgreSQL</span></code></pre></div>\\n<hr>\\n<h2 id=\\"step-3-update-our-model\\"><a href=\\"#step-3-update-our-model\\" aria-label=\\"step 3 update our model permalink\\" class=\\"anchor\\"><svg aria-hidden=\\"true\\" focusable=\\"false\\" height=\\"16\\" version=\\"1.1\\" viewBox=\\"0 0 16 16\\" width=\\"16\\"><path fill-rule=\\"evenodd\\" d=\\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\\"></path></svg></a>Step 3: Update our Model</h2>\\n<p>The key component of the ORM is the <code class=\\"language-text\\">Model</code> protocol which extends what <code class=\\"language-text\\">Codable</code> provides. In order to use the ORM, we need to make <code class=\\"language-text\\">Book</code> conform to the <code class=\\"language-text\\">Model</code> protocol.</p>\\n<p>We do this using an extension beneath our import statements:</p>\\n<div class=\\"gatsby-highlight\\" data-language=\\"swift\\"><pre class=\\"language-swift\\"><code class=\\"language-swift\\"><span class=\\"token keyword\\">extension</span> <span class=\\"token builtin\\">Book</span><span class=\\"token punctuation\\">:</span> <span class=\\"token builtin\\">Model</span> <span class=\\"token punctuation\\">{</span> <span class=\\"token punctuation\\">}</span></code></pre></div>\\n<p>Now that your <code class=\\"language-text\\">Book</code> struct conforms to <code class=\\"language-text\\">Model</code>, after you have set up your database connection pool and created a database table, you automatically have access to a slew of convenience functions for your object.</p>\\n<hr>\\n<h2 id=\\"step-4-create-a-database-connection\\"><a href=\\"#step-4-create-a-database-connection\\" aria-label=\\"step 4 create a database connection permalink\\" class=\\"anchor\\"><svg aria-hidden=\\"true\\" focusable=\\"false\\" height=\\"16\\" version=\\"1.1\\" viewBox=\\"0 0 16 16\\" width=\\"16\\"><path fill-rule=\\"evenodd\\" d=\\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\\"></path></svg></a>Step 4: Create a database connection</h2>\\n<h3 id=\\"install-the-postgresql-client\\"><a href=\\"#install-the-postgresql-client\\" aria-label=\\"install the postgresql client permalink\\" class=\\"anchor\\"><svg aria-hidden=\\"true\\" focusable=\\"false\\" height=\\"16\\" version=\\"1.1\\" viewBox=\\"0 0 16 16\\" width=\\"16\\"><path fill-rule=\\"evenodd\\" d=\\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\\"></path></svg></a>Install the PostgreSQL client</h3>\\n<p>To use Swift-Kuery-PostgreSQL you need to have the appropriate PostgreSQL C-language client installed.</p>\\n<h4 id=\\"macos\\"><a href=\\"#macos\\" aria-label=\\"macos permalink\\" class=\\"anchor\\"><svg aria-hidden=\\"true\\" focusable=\\"false\\" height=\\"16\\" version=\\"1.1\\" viewBox=\\"0 0 16 16\\" width=\\"16\\"><path fill-rule=\\"evenodd\\" d=\\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\\"></path></svg></a>macOS</h4>\\n<p>On macOS we can use Homebrew to install Postgres:</p>\\n<div class=\\"gatsby-highlight\\" data-language=\\"text\\"><pre class=\\"language-text\\"><code class=\\"language-text\\">brew install postgresql</code></pre></div>\\n<h4 id=\\"linux\\"><a href=\\"#linux\\" aria-label=\\"linux permalink\\" class=\\"anchor\\"><svg aria-hidden=\\"true\\" focusable=\\"false\\" height=\\"16\\" version=\\"1.1\\" viewBox=\\"0 0 16 16\\" width=\\"16\\"><path fill-rule=\\"evenodd\\" d=\\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\\"></path></svg></a>Linux</h4>\\n<p>On Linux we can use <code class=\\"language-text\\">apt</code> to install PostgreSQL:</p>\\n<div class=\\"gatsby-highlight\\" data-language=\\"text\\"><pre class=\\"language-text\\"><code class=\\"language-text\\">sudo apt install postgresql postgresql-contrib</code></pre></div>\\n<p>Linux requires that you <a href=\\"http://postgresguide.com/setup/users.html\\">create a PostgreSQL user</a>.</p>\\n<h3 id=\\"create-a-postgresql-database\\"><a href=\\"#create-a-postgresql-database\\" aria-label=\\"create a postgresql database permalink\\" class=\\"anchor\\"><svg aria-hidden=\\"true\\" focusable=\\"false\\" height=\\"16\\" version=\\"1.1\\" viewBox=\\"0 0 16 16\\" width=\\"16\\"><path fill-rule=\\"evenodd\\" d=\\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\\"></path></svg></a>Create a PostgreSQL database</h3>\\n<p>Now that we have PostgreSQL installed we can create a database:</p>\\n<div class=\\"gatsby-highlight\\" data-language=\\"text\\"><pre class=\\"language-text\\"><code class=\\"language-text\\">createdb bookdb</code></pre></div>\\n<p>Now we\'re ready to connect to our database from our Kitura server.</p>\\n<h3 id=\\"create-a-postgresql-connection-pool\\"><a href=\\"#create-a-postgresql-connection-pool\\" aria-label=\\"create a postgresql connection pool permalink\\" class=\\"anchor\\"><svg aria-hidden=\\"true\\" focusable=\\"false\\" height=\\"16\\" version=\\"1.1\\" viewBox=\\"0 0 16 16\\" width=\\"16\\"><path fill-rule=\\"evenodd\\" d=\\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\\"></path></svg></a>Create a PostgreSQL connection pool</h3>\\n<p>Inside <code class=\\"language-text\\">initializeORMRoutes</code>, create a PostgreSQL connection pool:</p>\\n<div class=\\"gatsby-highlight\\" data-language=\\"swift\\"><pre class=\\"language-swift\\"><code class=\\"language-swift\\"><span class=\\"token keyword\\">let</span> pool <span class=\\"token operator\\">=</span> <span class=\\"token builtin\\">PostgreSQLConnection</span><span class=\\"token punctuation\\">.</span><span class=\\"token function\\">createPool</span><span class=\\"token punctuation\\">(</span>host<span class=\\"token punctuation\\">:</span> <span class=\\"token string\\">\\"localhost\\"</span><span class=\\"token punctuation\\">,</span> port<span class=\\"token punctuation\\">:</span> <span class=\\"token number\\">5432</span><span class=\\"token punctuation\\">,</span> options<span class=\\"token punctuation\\">:</span> <span class=\\"token punctuation\\">[</span><span class=\\"token punctuation\\">.</span><span class=\\"token function\\">databaseName</span><span class=\\"token punctuation\\">(</span><span class=\\"token string\\">\\"bookdb\\"</span><span class=\\"token punctuation\\">)</span><span class=\\"token punctuation\\">]</span><span class=\\"token punctuation\\">,</span> poolOptions<span class=\\"token punctuation\\">:</span> <span class=\\"token function\\">ConnectionPoolOptions</span><span class=\\"token punctuation\\">(</span>initialCapacity<span class=\\"token punctuation\\">:</span> <span class=\\"token number\\">10</span><span class=\\"token punctuation\\">,</span> maxCapacity<span class=\\"token punctuation\\">:</span> <span class=\\"token number\\">50</span><span class=\\"token punctuation\\">)</span><span class=\\"token punctuation\\">)</span>\\n<span class=\\"token builtin\\">Database</span><span class=\\"token punctuation\\">.</span><span class=\\"token keyword\\">default</span> <span class=\\"token operator\\">=</span> <span class=\\"token function\\">Database</span><span class=\\"token punctuation\\">(</span>pool<span class=\\"token punctuation\\">)</span></code></pre></div>\\n<blockquote>\\n<p>If you are on Linux, you must provide your username and password in the options for <code class=\\"language-text\\">PostgreSQLConnection.createPool()</code>.</p>\\n</blockquote>\\n<h3 id=\\"create-a-book-table\\"><a href=\\"#create-a-book-table\\" aria-label=\\"create a book table permalink\\" class=\\"anchor\\"><svg aria-hidden=\\"true\\" focusable=\\"false\\" height=\\"16\\" version=\\"1.1\\" viewBox=\\"0 0 16 16\\" width=\\"16\\"><path fill-rule=\\"evenodd\\" d=\\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\\"></path></svg></a>Create a Book table</h3>\\n<p>Inside <code class=\\"language-text\\">initializeORMRoutes</code>, create a table in the SQL database that represents our <code class=\\"language-text\\">Book</code> model:</p>\\n<div class=\\"gatsby-highlight\\" data-language=\\"swift\\"><pre class=\\"language-swift\\"><code class=\\"language-swift\\"><span class=\\"token keyword\\">do</span> <span class=\\"token punctuation\\">{</span>\\n    <span class=\\"token keyword\\">try</span> <span class=\\"token builtin\\">Book</span><span class=\\"token punctuation\\">.</span><span class=\\"token function\\">createTableSync</span><span class=\\"token punctuation\\">(</span><span class=\\"token punctuation\\">)</span>\\n<span class=\\"token punctuation\\">}</span> <span class=\\"token keyword\\">catch</span> <span class=\\"token punctuation\\">{</span>\\n    <span class=\\"token function\\">print</span><span class=\\"token punctuation\\">(</span><span class=\\"token string\\">\\"Failed to create table: <span class=\\"token interpolation\\"><span class=\\"token delimiter variable\\">\\\\(</span>error<span class=\\"token delimiter variable\\">)</span></span>\\"</span><span class=\\"token punctuation\\">)</span>\\n<span class=\\"token punctuation\\">}</span></code></pre></div>\\n<p>To check that a database table called Book has been created, run your Kitura server and then use psql from the command-line as follows:</p>\\n<div class=\\"gatsby-highlight\\" data-language=\\"text\\"><pre class=\\"language-text\\"><code class=\\"language-text\\">psql bookdb\\nSELECT * FROM &quot;Book&quot;;</code></pre></div>\\n<p>This should print the column names of the Book table with no data (i.e. no rows).</p>\\n<hr>\\n<h2 id=\\"step-5-save-an-object-to-the-database\\"><a href=\\"#step-5-save-an-object-to-the-database\\" aria-label=\\"step 5 save an object to the database permalink\\" class=\\"anchor\\"><svg aria-hidden=\\"true\\" focusable=\\"false\\" height=\\"16\\" version=\\"1.1\\" viewBox=\\"0 0 16 16\\" width=\\"16\\"><path fill-rule=\\"evenodd\\" d=\\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\\"></path></svg></a>Step 5: Save an object to the database</h2>\\n<p>Now if we want to save a new <code class=\\"language-text\\">Book</code> object to our database we use the <code class=\\"language-text\\">save()</code> method.</p>\\n<p>In our handler for the <code class=\\"language-text\\">POST</code> route we add the following:</p>\\n<div class=\\"gatsby-highlight\\" data-language=\\"swift\\"><pre class=\\"language-swift\\"><code class=\\"language-swift\\">book<span class=\\"token punctuation\\">.</span><span class=\\"token function\\">save</span><span class=\\"token punctuation\\">(</span>completion<span class=\\"token punctuation\\">)</span></code></pre></div>\\n<p>Because we are passing our <code class=\\"language-text\\">completion</code> closure to an asynchronous function, we need to make <code class=\\"language-text\\">completion</code> escaping:</p>\\n<div class=\\"gatsby-highlight\\" data-language=\\"swift\\"><pre class=\\"language-swift\\"><code class=\\"language-swift\\">completion<span class=\\"token punctuation\\">:</span> @escaping <span class=\\"token punctuation\\">(</span><span class=\\"token builtin\\">Book</span><span class=\\"token operator\\">?</span><span class=\\"token punctuation\\">,</span> <span class=\\"token builtin\\">RequestError</span><span class=\\"token operator\\">?</span><span class=\\"token punctuation\\">)</span></code></pre></div>\\n<p>The POST handler should look similar to this:</p>\\n<div class=\\"gatsby-highlight\\" data-language=\\"swift\\"><pre class=\\"language-swift\\"><code class=\\"language-swift\\"><span class=\\"token keyword\\">func</span> <span class=\\"token function\\">saveHandler</span><span class=\\"token punctuation\\">(</span>book<span class=\\"token punctuation\\">:</span> <span class=\\"token builtin\\">Book</span><span class=\\"token punctuation\\">,</span> completion<span class=\\"token punctuation\\">:</span> @escaping <span class=\\"token punctuation\\">(</span><span class=\\"token builtin\\">Book</span><span class=\\"token operator\\">?</span><span class=\\"token punctuation\\">,</span> <span class=\\"token builtin\\">RequestError</span><span class=\\"token operator\\">?</span><span class=\\"token punctuation\\">)</span> <span class=\\"token operator\\">-</span><span class=\\"token operator\\">></span> <span class=\\"token builtin\\">Void</span><span class=\\"token punctuation\\">)</span> <span class=\\"token punctuation\\">{</span>\\n    book<span class=\\"token punctuation\\">.</span><span class=\\"token function\\">save</span><span class=\\"token punctuation\\">(</span>completion<span class=\\"token punctuation\\">)</span>\\n<span class=\\"token punctuation\\">}</span></code></pre></div>\\n<p>That\'s all we need to do, with that one line of code any book data posted to the <code class=\\"language-text\\">/orm</code> endpoint will be stored in the Book table in our database.</p>\\n<p>Next we will show how easy it is to retrieve our book data from the database.</p>\\n<hr>\\n<h2 id=\\"step-6-retrieve-all-the-books-from-the-database\\"><a href=\\"#step-6-retrieve-all-the-books-from-the-database\\" aria-label=\\"step 6 retrieve all the books from the database permalink\\" class=\\"anchor\\"><svg aria-hidden=\\"true\\" focusable=\\"false\\" height=\\"16\\" version=\\"1.1\\" viewBox=\\"0 0 16 16\\" width=\\"16\\"><path fill-rule=\\"evenodd\\" d=\\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\\"></path></svg></a>Step 6: Retrieve all the books from the database</h2>\\n<p>Next we will retrieve all the data from the book table in our database, to do this we use the <code class=\\"language-text\\">findAll</code> method.</p>\\n<p>The <code class=\\"language-text\\">findAll</code> method returns an array containing all the books.</p>\\n<p>In our <code class=\\"language-text\\">findAllHandler</code> add the following code:</p>\\n<div class=\\"gatsby-highlight\\" data-language=\\"swift\\"><pre class=\\"language-swift\\"><code class=\\"language-swift\\"><span class=\\"token builtin\\">Book</span><span class=\\"token punctuation\\">.</span><span class=\\"token function\\">findAll</span><span class=\\"token punctuation\\">(</span>completion<span class=\\"token punctuation\\">)</span></code></pre></div>\\n<p>As with the <code class=\\"language-text\\">saveHandler</code>, again we must make the <code class=\\"language-text\\">completion</code> escaping:</p>\\n<div class=\\"gatsby-highlight\\" data-language=\\"swift\\"><pre class=\\"language-swift\\"><code class=\\"language-swift\\">completion<span class=\\"token punctuation\\">:</span> @escaping <span class=\\"token punctuation\\">(</span><span class=\\"token punctuation\\">[</span><span class=\\"token builtin\\">Book</span><span class=\\"token punctuation\\">]</span><span class=\\"token operator\\">?</span><span class=\\"token punctuation\\">,</span> <span class=\\"token builtin\\">RequestError</span><span class=\\"token operator\\">?</span><span class=\\"token punctuation\\">)</span></code></pre></div>\\n<p>The <code class=\\"language-text\\">GET</code> handler should look similar to this:</p>\\n<div class=\\"gatsby-highlight\\" data-language=\\"swift\\"><pre class=\\"language-swift\\"><code class=\\"language-swift\\"><span class=\\"token keyword\\">func</span> <span class=\\"token function\\">findAllHandler</span><span class=\\"token punctuation\\">(</span>completion<span class=\\"token punctuation\\">:</span> @escaping <span class=\\"token punctuation\\">(</span><span class=\\"token punctuation\\">[</span><span class=\\"token builtin\\">Book</span><span class=\\"token punctuation\\">]</span><span class=\\"token operator\\">?</span><span class=\\"token punctuation\\">,</span> <span class=\\"token builtin\\">RequestError</span><span class=\\"token operator\\">?</span><span class=\\"token punctuation\\">)</span> <span class=\\"token operator\\">-</span><span class=\\"token operator\\">></span> <span class=\\"token builtin\\">Void</span><span class=\\"token punctuation\\">)</span> <span class=\\"token punctuation\\">{</span>\\n    <span class=\\"token builtin\\">Book</span><span class=\\"token punctuation\\">.</span><span class=\\"token function\\">findAll</span><span class=\\"token punctuation\\">(</span>completion<span class=\\"token punctuation\\">)</span>\\n<span class=\\"token punctuation\\">}</span></code></pre></div>\\n<p>Now that we have defined both a <code class=\\"language-text\\">POST</code> and a <code class=\\"language-text\\">GET</code> route we can test saving and retrieving a book from the database using curl.</p>\\n<blockquote>\\n<p>Kitura has support for <a href=\\"https://www.openapis.org\\">OpenAPI</a> which makes testing Codable routes easy and provides a UI for testing.\\nYou can add OpenAPI to your server using our <a href=\\"../routing/kitura-openapi\\">OpenAPI guide</a>.</p>\\n</blockquote>\\n<p>Firstly we need to start our Kitura server.</p>\\n<p>In the terminal use curl to post a book to our endpoint:</p>\\n<div class=\\"gatsby-highlight\\" data-language=\\"text\\"><pre class=\\"language-text\\"><code class=\\"language-text\\">curl -X POST \\\\\\n      http://localhost:8080/orm \\\\\\n      -H &#39;content-type: application/json&#39; \\\\\\n      -d &#39;{\\n        &quot;id&quot;: 0,\\n        &quot;title&quot;: &quot;A Game of Thrones&quot;,\\n        &quot;price&quot;: 14.99,\\n        &quot;genre&quot;: &quot;Fantasy&quot;\\n    }&#39;</code></pre></div>\\n<p>You should see the following output:</p>\\n<div class=\\"gatsby-highlight\\" data-language=\\"text\\"><pre class=\\"language-text\\"><code class=\\"language-text\\">{&quot;id&quot;: 0,&quot;title&quot;:&quot;A Game of Thrones&quot;,&quot;price&quot;:14.99,&quot;genre&quot;:&quot;Fantasy&quot;}</code></pre></div>\\n<p>Next we will retrieve our book data.</p>\\n<p>Open your browser at:</p>\\n<p><a href=\\"http://localhost:8080/orm\\" target=\\"blank\\">localhost:8080/orm</a></p>\\n<p>This will make a get request to the server and you should see the book we posted before:</p>\\n<div class=\\"gatsby-highlight\\" data-language=\\"text\\"><pre class=\\"language-text\\"><code class=\\"language-text\\">[{&quot;id&quot;: 0,&quot;title&quot;:&quot;A Game of Thrones&quot;,&quot;price&quot;:14.99,&quot;genre&quot;:&quot;Fantasy&quot;}]</code></pre></div>\\n<p>Now you can restart your Kitura server and the book data will persist in the database. This is one of the many advantages of using a database.</p>\\n<hr>\\n<h2 id=\\"step-7-retrieve-a-single-book-from-the-database\\"><a href=\\"#step-7-retrieve-a-single-book-from-the-database\\" aria-label=\\"step 7 retrieve a single book from the database permalink\\" class=\\"anchor\\"><svg aria-hidden=\\"true\\" focusable=\\"false\\" height=\\"16\\" version=\\"1.1\\" viewBox=\\"0 0 16 16\\" width=\\"16\\"><path fill-rule=\\"evenodd\\" d=\\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\\"></path></svg></a>Step 7: Retrieve a single book from the database</h2>\\n<p>If we want to retrieve a single book from our database, we use the <code class=\\"language-text\\">find(id:)</code> method.</p>\\n<p>This will return a single object with the provided <code class=\\"language-text\\">id</code>.</p>\\n<p>In our <code class=\\"language-text\\">findOneHandler</code> add the following code:</p>\\n<div class=\\"gatsby-highlight\\" data-language=\\"swift\\"><pre class=\\"language-swift\\"><code class=\\"language-swift\\"><span class=\\"token builtin\\">Book</span><span class=\\"token punctuation\\">.</span><span class=\\"token function\\">find</span><span class=\\"token punctuation\\">(</span>id<span class=\\"token punctuation\\">:</span> id<span class=\\"token punctuation\\">,</span> completion<span class=\\"token punctuation\\">)</span></code></pre></div>\\n<p>As with our previous handler, we must make the <code class=\\"language-text\\">completion</code> escaping:</p>\\n<div class=\\"gatsby-highlight\\" data-language=\\"swift\\"><pre class=\\"language-swift\\"><code class=\\"language-swift\\">completion<span class=\\"token punctuation\\">:</span> @escaping <span class=\\"token punctuation\\">(</span><span class=\\"token builtin\\">Book</span><span class=\\"token operator\\">?</span><span class=\\"token punctuation\\">,</span> <span class=\\"token builtin\\">RequestError</span><span class=\\"token operator\\">?</span><span class=\\"token punctuation\\">)</span></code></pre></div>\\n<p>The <code class=\\"language-text\\">GET</code> one handler should look similar to this:</p>\\n<div class=\\"gatsby-highlight\\" data-language=\\"swift\\"><pre class=\\"language-swift\\"><code class=\\"language-swift\\"><span class=\\"token keyword\\">func</span> <span class=\\"token function\\">findOneHandler</span><span class=\\"token punctuation\\">(</span>id<span class=\\"token punctuation\\">:</span> <span class=\\"token builtin\\">Int</span><span class=\\"token punctuation\\">,</span> completion<span class=\\"token punctuation\\">:</span> @escaping <span class=\\"token punctuation\\">(</span><span class=\\"token builtin\\">Book</span><span class=\\"token operator\\">?</span><span class=\\"token punctuation\\">,</span> <span class=\\"token builtin\\">RequestError</span><span class=\\"token operator\\">?</span><span class=\\"token punctuation\\">)</span> <span class=\\"token operator\\">-</span><span class=\\"token operator\\">></span> <span class=\\"token builtin\\">Void</span><span class=\\"token punctuation\\">)</span> <span class=\\"token punctuation\\">{</span>\\n    <span class=\\"token builtin\\">Book</span><span class=\\"token punctuation\\">.</span><span class=\\"token function\\">find</span><span class=\\"token punctuation\\">(</span>id<span class=\\"token punctuation\\">:</span> id<span class=\\"token punctuation\\">,</span> completion<span class=\\"token punctuation\\">)</span>\\n<span class=\\"token punctuation\\">}</span></code></pre></div>\\n<p>Test this out by opening your browser at:</p>\\n<p><a href=\\"http://localhost:8080/orm/0\\" target=\\"blank\\">localhost:8080/orm/0</a></p>\\n<p>This will make a get request to the server for a book with an <code class=\\"language-text\\">id</code> of 0, so it should return the book we posted previously.</p>\\n<p>Your completed routes file, <code class=\\"language-text\\">ORMRoutes.swift</code>, should look as follows:</p>\\n<div class=\\"gatsby-highlight\\" data-language=\\"swift\\"><pre class=\\"language-swift\\"><code class=\\"language-swift\\"><span class=\\"token keyword\\">import</span> <span class=\\"token builtin\\">KituraContracts</span>\\n<span class=\\"token keyword\\">import</span> <span class=\\"token builtin\\">SwiftKueryORM</span>\\n<span class=\\"token keyword\\">import</span> <span class=\\"token builtin\\">SwiftKueryPostgreSQL</span>\\n\\n<span class=\\"token keyword\\">extension</span> <span class=\\"token builtin\\">Book</span><span class=\\"token punctuation\\">:</span> <span class=\\"token builtin\\">Model</span> <span class=\\"token punctuation\\">{</span> <span class=\\"token punctuation\\">}</span>\\n<span class=\\"token keyword\\">func</span> <span class=\\"token function\\">initializeORMRoutes</span><span class=\\"token punctuation\\">(</span>app<span class=\\"token punctuation\\">:</span> <span class=\\"token builtin\\">App</span><span class=\\"token punctuation\\">)</span> <span class=\\"token punctuation\\">{</span>\\n    <span class=\\"token keyword\\">let</span> pool <span class=\\"token operator\\">=</span> <span class=\\"token builtin\\">PostgreSQLConnection</span><span class=\\"token punctuation\\">.</span><span class=\\"token function\\">createPool</span><span class=\\"token punctuation\\">(</span>host<span class=\\"token punctuation\\">:</span> <span class=\\"token string\\">\\"localhost\\"</span><span class=\\"token punctuation\\">,</span> port<span class=\\"token punctuation\\">:</span> <span class=\\"token number\\">5432</span><span class=\\"token punctuation\\">,</span> options<span class=\\"token punctuation\\">:</span> <span class=\\"token punctuation\\">[</span><span class=\\"token punctuation\\">.</span><span class=\\"token function\\">databaseName</span><span class=\\"token punctuation\\">(</span><span class=\\"token string\\">\\"bookdb\\"</span><span class=\\"token punctuation\\">)</span><span class=\\"token punctuation\\">]</span><span class=\\"token punctuation\\">,</span> poolOptions<span class=\\"token punctuation\\">:</span> <span class=\\"token function\\">ConnectionPoolOptions</span><span class=\\"token punctuation\\">(</span>initialCapacity<span class=\\"token punctuation\\">:</span> <span class=\\"token number\\">10</span><span class=\\"token punctuation\\">,</span> maxCapacity<span class=\\"token punctuation\\">:</span> <span class=\\"token number\\">50</span><span class=\\"token punctuation\\">)</span><span class=\\"token punctuation\\">)</span>\\n    <span class=\\"token builtin\\">Database</span><span class=\\"token punctuation\\">.</span><span class=\\"token keyword\\">default</span> <span class=\\"token operator\\">=</span> <span class=\\"token function\\">Database</span><span class=\\"token punctuation\\">(</span>pool<span class=\\"token punctuation\\">)</span>\\n    <span class=\\"token keyword\\">do</span> <span class=\\"token punctuation\\">{</span>\\n        <span class=\\"token keyword\\">try</span> <span class=\\"token builtin\\">Book</span><span class=\\"token punctuation\\">.</span><span class=\\"token function\\">createTableSync</span><span class=\\"token punctuation\\">(</span><span class=\\"token punctuation\\">)</span>\\n    <span class=\\"token punctuation\\">}</span> <span class=\\"token keyword\\">catch</span> <span class=\\"token punctuation\\">{</span>\\n        <span class=\\"token function\\">print</span><span class=\\"token punctuation\\">(</span><span class=\\"token string\\">\\"Failed to create table: <span class=\\"token interpolation\\"><span class=\\"token delimiter variable\\">\\\\(</span>error<span class=\\"token delimiter variable\\">)</span></span>\\"</span><span class=\\"token punctuation\\">)</span>\\n    <span class=\\"token punctuation\\">}</span>\\n    app<span class=\\"token punctuation\\">.</span>router<span class=\\"token punctuation\\">.</span><span class=\\"token function\\">post</span><span class=\\"token punctuation\\">(</span><span class=\\"token string\\">\\"/orm\\"</span><span class=\\"token punctuation\\">,</span> handler<span class=\\"token punctuation\\">:</span> app<span class=\\"token punctuation\\">.</span>saveHandler<span class=\\"token punctuation\\">)</span>\\n    app<span class=\\"token punctuation\\">.</span>router<span class=\\"token punctuation\\">.</span><span class=\\"token keyword\\">get</span><span class=\\"token punctuation\\">(</span><span class=\\"token string\\">\\"/orm\\"</span><span class=\\"token punctuation\\">,</span> handler<span class=\\"token punctuation\\">:</span> app<span class=\\"token punctuation\\">.</span>findAllHandler<span class=\\"token punctuation\\">)</span>\\n    app<span class=\\"token punctuation\\">.</span>router<span class=\\"token punctuation\\">.</span><span class=\\"token keyword\\">get</span><span class=\\"token punctuation\\">(</span><span class=\\"token string\\">\\"/orm\\"</span><span class=\\"token punctuation\\">,</span> handler<span class=\\"token punctuation\\">:</span> app<span class=\\"token punctuation\\">.</span>findOneHandler<span class=\\"token punctuation\\">)</span>\\n<span class=\\"token punctuation\\">}</span>\\n<span class=\\"token keyword\\">extension</span> <span class=\\"token builtin\\">App</span> <span class=\\"token punctuation\\">{</span>\\n    <span class=\\"token keyword\\">func</span> <span class=\\"token function\\">saveHandler</span><span class=\\"token punctuation\\">(</span>book<span class=\\"token punctuation\\">:</span> <span class=\\"token builtin\\">Book</span><span class=\\"token punctuation\\">,</span> completion<span class=\\"token punctuation\\">:</span> @escaping <span class=\\"token punctuation\\">(</span><span class=\\"token builtin\\">Book</span><span class=\\"token operator\\">?</span><span class=\\"token punctuation\\">,</span> <span class=\\"token builtin\\">RequestError</span><span class=\\"token operator\\">?</span><span class=\\"token punctuation\\">)</span> <span class=\\"token operator\\">-</span><span class=\\"token operator\\">></span> <span class=\\"token builtin\\">Void</span><span class=\\"token punctuation\\">)</span> <span class=\\"token punctuation\\">{</span>\\n        book<span class=\\"token punctuation\\">.</span><span class=\\"token function\\">save</span><span class=\\"token punctuation\\">(</span>completion<span class=\\"token punctuation\\">)</span>\\n    <span class=\\"token punctuation\\">}</span>\\n\\n    <span class=\\"token keyword\\">func</span> <span class=\\"token function\\">findAllHandler</span><span class=\\"token punctuation\\">(</span>completion<span class=\\"token punctuation\\">:</span> @escaping <span class=\\"token punctuation\\">(</span><span class=\\"token punctuation\\">[</span><span class=\\"token builtin\\">Book</span><span class=\\"token punctuation\\">]</span><span class=\\"token operator\\">?</span><span class=\\"token punctuation\\">,</span> <span class=\\"token builtin\\">RequestError</span><span class=\\"token operator\\">?</span><span class=\\"token punctuation\\">)</span> <span class=\\"token operator\\">-</span><span class=\\"token operator\\">></span> <span class=\\"token builtin\\">Void</span><span class=\\"token punctuation\\">)</span> <span class=\\"token punctuation\\">{</span>\\n        <span class=\\"token builtin\\">Book</span><span class=\\"token punctuation\\">.</span><span class=\\"token function\\">findAll</span><span class=\\"token punctuation\\">(</span>completion<span class=\\"token punctuation\\">)</span>\\n    <span class=\\"token punctuation\\">}</span>\\n\\n    <span class=\\"token keyword\\">func</span> <span class=\\"token function\\">findOneHandler</span><span class=\\"token punctuation\\">(</span>id<span class=\\"token punctuation\\">:</span> <span class=\\"token builtin\\">Int</span><span class=\\"token punctuation\\">,</span> completion<span class=\\"token punctuation\\">:</span> @escaping <span class=\\"token punctuation\\">(</span><span class=\\"token builtin\\">Book</span><span class=\\"token operator\\">?</span><span class=\\"token punctuation\\">,</span> <span class=\\"token builtin\\">RequestError</span><span class=\\"token operator\\">?</span><span class=\\"token punctuation\\">)</span> <span class=\\"token operator\\">-</span><span class=\\"token operator\\">></span> <span class=\\"token builtin\\">Void</span><span class=\\"token punctuation\\">)</span> <span class=\\"token punctuation\\">{</span>\\n        <span class=\\"token builtin\\">Book</span><span class=\\"token punctuation\\">.</span><span class=\\"token function\\">find</span><span class=\\"token punctuation\\">(</span>id<span class=\\"token punctuation\\">:</span> id<span class=\\"token punctuation\\">,</span> completion<span class=\\"token punctuation\\">)</span>\\n    <span class=\\"token punctuation\\">}</span>\\n<span class=\\"token punctuation\\">}</span></code></pre></div>\\n<hr>\\n<h2 id=\\"next-steps\\"><a href=\\"#next-steps\\" aria-label=\\"next steps permalink\\" class=\\"anchor\\"><svg aria-hidden=\\"true\\" focusable=\\"false\\" height=\\"16\\" version=\\"1.1\\" viewBox=\\"0 0 16 16\\" width=\\"16\\"><path fill-rule=\\"evenodd\\" d=\\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\\"></path></svg></a>Next steps</h2>\\n<p><a href=\\"../sessions/what-are-sessions\\">Sessions</a>: Learn about sessions and why you might want to use them.</p>","frontmatter":{"path":"/docs/databases/orm","title":"Swift Kuery ORM"}}},{"node":{"html":"<h1 id=\\"codable-routing\\"><a href=\\"#codable-routing\\" aria-label=\\"codable routing permalink\\" class=\\"anchor\\"><svg aria-hidden=\\"true\\" focusable=\\"false\\" height=\\"16\\" version=\\"1.1\\" viewBox=\\"0 0 16 16\\" width=\\"16\\"><path fill-rule=\\"evenodd\\" d=\\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\\"></path></svg></a>Codable Routing</h1>\\n<p>Codable routing is where the router handlers are just normal functions you might define elsewhere in your code; they take struct or class types as parameters, and respond with struct or class types via a completion handler. The only requirement is that those types conform to the Codable protocol introduced in Swift 4 (hence the name).</p>\\n<p>In this guide, we will show you how to set up Codable routes on your server. We will store a Swift object that is sent via a POST request. We will then return that object when a user sends a GET request.</p>\\n<blockquote>\\n<p>If you don\'t have a Kitura server, follow our <a href=\\"../getting-started/create-server-cli\\">Create a server</a> guide.</p>\\n</blockquote>\\n<hr>\\n<h2 id=\\"step-1-create-a-file-to-contain-the-routes\\"><a href=\\"#step-1-create-a-file-to-contain-the-routes\\" aria-label=\\"step 1 create a file to contain the routes permalink\\" class=\\"anchor\\"><svg aria-hidden=\\"true\\" focusable=\\"false\\" height=\\"16\\" version=\\"1.1\\" viewBox=\\"0 0 16 16\\" width=\\"16\\"><path fill-rule=\\"evenodd\\" d=\\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\\"></path></svg></a>Step 1: Create a file to contain the routes</h2>\\n<p>We are going to create a new file, where we will define the routes for this guide.</p>\\n<p>Open your <code class=\\"language-text\\">Application.swift</code> file:</p>\\n<div class=\\"gatsby-highlight\\" data-language=\\"text\\"><pre class=\\"language-text\\"><code class=\\"language-text\\">open Sources/Application/Application.swift</code></pre></div>\\n<p>Inside the <code class=\\"language-text\\">postInit()</code> function add:</p>\\n<div class=\\"gatsby-highlight\\" data-language=\\"swift\\"><pre class=\\"language-swift\\"><code class=\\"language-swift\\"><span class=\\"token function\\">initializeCodableRoutes</span><span class=\\"token punctuation\\">(</span>app<span class=\\"token punctuation\\">:</span> <span class=\\"token keyword\\">self</span><span class=\\"token punctuation\\">)</span></code></pre></div>\\n<p>Create a new file, called <code class=\\"language-text\\">CodableRoutes.swift</code>:</p>\\n<div class=\\"gatsby-highlight\\" data-language=\\"text\\"><pre class=\\"language-text\\"><code class=\\"language-text\\">touch Sources/Application/Routes/CodableRoutes.swift</code></pre></div>\\n<p>Open your <code class=\\"language-text\\">CodableRoutes.swift</code> file:</p>\\n<div class=\\"gatsby-highlight\\" data-language=\\"text\\"><pre class=\\"language-text\\"><code class=\\"language-text\\">open Sources/Application/Routes/CodableRoutes.swift</code></pre></div>\\n<p>Inside this file, add the framework for our routes code:</p>\\n<div class=\\"gatsby-highlight\\" data-language=\\"swift\\"><pre class=\\"language-swift\\"><code class=\\"language-swift\\"><span class=\\"token keyword\\">import</span> <span class=\\"token builtin\\">KituraContracts</span>\\n\\n<span class=\\"token keyword\\">func</span> <span class=\\"token function\\">initializeCodableRoutes</span><span class=\\"token punctuation\\">(</span>app<span class=\\"token punctuation\\">:</span> <span class=\\"token builtin\\">App</span><span class=\\"token punctuation\\">)</span> <span class=\\"token punctuation\\">{</span>\\n    <span class=\\"token comment\\">// Register routes here</span>\\n<span class=\\"token punctuation\\">}</span>\\n<span class=\\"token keyword\\">extension</span> <span class=\\"token builtin\\">App</span> <span class=\\"token punctuation\\">{</span>\\n    <span class=\\"token keyword\\">static</span> <span class=\\"token keyword\\">var</span> codableStore <span class=\\"token operator\\">=</span> <span class=\\"token punctuation\\">[</span><span class=\\"token builtin\\">Book</span><span class=\\"token punctuation\\">]</span><span class=\\"token punctuation\\">(</span><span class=\\"token punctuation\\">)</span>\\n    <span class=\\"token comment\\">// Write handlers here</span>\\n<span class=\\"token punctuation\\">}</span></code></pre></div>\\n<p>This code contains two sections. The first is the <code class=\\"language-text\\">initializeCodableRoutes</code> function. This will be run after the application has been initialized and is where we register routes on our router. The second is the <code class=\\"language-text\\">App</code> extension. This is where we write the logic to handle requests.</p>\\n<p>We also have a <code class=\\"language-text\\">codableStore</code> where we will store an array of objects. We will use the <a href=\\"./what-is-routing#bookmodel\\">Book model from the routing guide</a>, however you could use any Codable type.</p>\\n<p>Finally, we have imported the KituraContracts library, which is pulled in with Kitura, as it contains the shared type definition for <code class=\\"language-text\\">RequestError</code> which we will use in the next step.</p>\\n<hr>\\n<h2 id=\\"step-2-create-a-post-codable-route\\"><a href=\\"#step-2-create-a-post-codable-route\\" aria-label=\\"step 2 create a post codable route permalink\\" class=\\"anchor\\"><svg aria-hidden=\\"true\\" focusable=\\"false\\" height=\\"16\\" version=\\"1.1\\" viewBox=\\"0 0 16 16\\" width=\\"16\\"><path fill-rule=\\"evenodd\\" d=\\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\\"></path></svg></a>Step 2: Create a POST Codable Route</h2>\\n<p>We will now create a POST route that will recieve a Codable type and store it in our <code class=\\"language-text\\">codableStore</code>.</p>\\n<p>Inside the <code class=\\"language-text\\">initializeCodableRoutes</code> function add:</p>\\n<div class=\\"gatsby-highlight\\" data-language=\\"swift\\"><pre class=\\"language-swift\\"><code class=\\"language-swift\\">app<span class=\\"token punctuation\\">.</span>router<span class=\\"token punctuation\\">.</span><span class=\\"token function\\">post</span><span class=\\"token punctuation\\">(</span><span class=\\"token string\\">\\"/codable\\"</span><span class=\\"token punctuation\\">,</span> handler<span class=\\"token punctuation\\">:</span> app<span class=\\"token punctuation\\">.</span>postHandler<span class=\\"token punctuation\\">)</span></code></pre></div>\\n<p>This code will register a POST endpoint on our router that will handle any POST requests made to \\"/codable\\".</p>\\n<p>This will not compile as we haven\'t actually implemented the <code class=\\"language-text\\">postHandler</code> yet, so let\'s go ahead and do that.</p>\\n<p>The <code class=\\"language-text\\">postHandler</code> is a block of code, called a closure, that is executed when a POST request is made to \\"/codable\\".</p>\\n<p>Inside the <code class=\\"language-text\\">App</code> extension add:</p>\\n<div class=\\"gatsby-highlight\\" data-language=\\"swift\\"><pre class=\\"language-swift\\"><code class=\\"language-swift\\"><span class=\\"token keyword\\">func</span> <span class=\\"token function\\">postHandler</span><span class=\\"token punctuation\\">(</span>book<span class=\\"token punctuation\\">:</span> <span class=\\"token builtin\\">Book</span><span class=\\"token punctuation\\">,</span> completion<span class=\\"token punctuation\\">:</span> <span class=\\"token punctuation\\">(</span><span class=\\"token builtin\\">Book</span><span class=\\"token operator\\">?</span><span class=\\"token punctuation\\">,</span> <span class=\\"token builtin\\">RequestError</span><span class=\\"token operator\\">?</span><span class=\\"token punctuation\\">)</span> <span class=\\"token operator\\">-</span><span class=\\"token operator\\">></span> <span class=\\"token builtin\\">Void</span><span class=\\"token punctuation\\">)</span> <span class=\\"token punctuation\\">{</span>\\n    <span class=\\"token builtin\\">App</span><span class=\\"token punctuation\\">.</span>codableStore<span class=\\"token punctuation\\">.</span><span class=\\"token function\\">append</span><span class=\\"token punctuation\\">(</span>book<span class=\\"token punctuation\\">)</span>\\n    <span class=\\"token function\\">completion</span><span class=\\"token punctuation\\">(</span>book<span class=\\"token punctuation\\">,</span> <span class=\\"token constant\\">nil</span><span class=\\"token punctuation\\">)</span>\\n<span class=\\"token punctuation\\">}</span></code></pre></div>\\n<p>Here the postHandler accepts an object of type <code class=\\"language-text\\">Book</code> and responds using an asynchronous completion handler. The handler then stores the received book in the <code class=\\"language-text\\">codableStore</code> and returns the book in the completion to indicate success.</p>\\n<blockquote>\\n<p>The input parameter and the response parameter in the completion handler can be any Swift type, as long as it conforms to Codable.</p>\\n</blockquote>\\n<p>We can now successfully compile the project!</p>\\n<hr>\\n<h2 id=\\"step-3-test-the-post-route\\"><a href=\\"#step-3-test-the-post-route\\" aria-label=\\"step 3 test the post route permalink\\" class=\\"anchor\\"><svg aria-hidden=\\"true\\" focusable=\\"false\\" height=\\"16\\" version=\\"1.1\\" viewBox=\\"0 0 16 16\\" width=\\"16\\"><path fill-rule=\\"evenodd\\" d=\\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\\"></path></svg></a>Step 3: Test the POST route</h2>\\n<p>With the project now compiling we can start the server.</p>\\n<blockquote>\\n<p>Kitura has support for OpenAPI which makes testing Codable routes easy and provides a UI for testing. You can add OpenAPI to your server using our <a href=\\"./kitura-openapi\\">OpenAPI guide</a>.</p>\\n</blockquote>\\n<p>To test the route using curl, open Terminal and enter the following:</p>\\n<div class=\\"gatsby-highlight\\" data-language=\\"text\\"><pre class=\\"language-text\\"><code class=\\"language-text\\">curl -X POST \\\\\\n  http://localhost:8080/codable \\\\\\n  -H &#39;content-type: application/json&#39; \\\\\\n  -d &#39;{\\n    &quot;id&quot;: 0,\\n    &quot;title&quot;: &quot;A Game of Thrones&quot;,\\n    &quot;price&quot;: 14.99,\\n    &quot;genre&quot;: &quot;Fantasy&quot;\\n  }&#39;</code></pre></div>\\n<p>If the Codable route was created correctly we should see the following:</p>\\n<div class=\\"gatsby-highlight\\" data-language=\\"text\\"><pre class=\\"language-text\\"><code class=\\"language-text\\">{&quot;id&quot;: 0,&quot;title&quot;:&quot;A Game of Thrones&quot;,&quot;price&quot;:14.99,&quot;genre&quot;:&quot;Fantasy&quot;}</code></pre></div>\\n<p>We have just successfully posted a book to the server and had it returned.</p>\\n<hr>\\n<h2 id=\\"step-4-create-a-get-all-codable-route\\"><a href=\\"#step-4-create-a-get-all-codable-route\\" aria-label=\\"step 4 create a get all codable route permalink\\" class=\\"anchor\\"><svg aria-hidden=\\"true\\" focusable=\\"false\\" height=\\"16\\" version=\\"1.1\\" viewBox=\\"0 0 16 16\\" width=\\"16\\"><path fill-rule=\\"evenodd\\" d=\\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\\"></path></svg></a>Step 4: Create a GET ALL Codable Route</h2>\\n<p>We register a GET route in a similar way to the POST route.</p>\\n<p>Inside the <code class=\\"language-text\\">initializeCodableRoutes</code> function add:</p>\\n<div class=\\"gatsby-highlight\\" data-language=\\"swift\\"><pre class=\\"language-swift\\"><code class=\\"language-swift\\">app<span class=\\"token punctuation\\">.</span>router<span class=\\"token punctuation\\">.</span><span class=\\"token keyword\\">get</span><span class=\\"token punctuation\\">(</span><span class=\\"token string\\">\\"/codable\\"</span><span class=\\"token punctuation\\">,</span> handler<span class=\\"token punctuation\\">:</span> app<span class=\\"token punctuation\\">.</span>getAllHandler<span class=\\"token punctuation\\">)</span></code></pre></div>\\n<p>Just like before we now need to define the handler.</p>\\n<p>Inside the <code class=\\"language-text\\">App</code> extension add:</p>\\n<div class=\\"gatsby-highlight\\" data-language=\\"swift\\"><pre class=\\"language-swift\\"><code class=\\"language-swift\\"><span class=\\"token keyword\\">func</span> <span class=\\"token function\\">getAllHandler</span><span class=\\"token punctuation\\">(</span>completion<span class=\\"token punctuation\\">:</span> <span class=\\"token punctuation\\">(</span><span class=\\"token punctuation\\">[</span><span class=\\"token builtin\\">Book</span><span class=\\"token punctuation\\">]</span><span class=\\"token operator\\">?</span><span class=\\"token punctuation\\">,</span> <span class=\\"token builtin\\">RequestError</span><span class=\\"token operator\\">?</span><span class=\\"token punctuation\\">)</span> <span class=\\"token operator\\">-</span><span class=\\"token operator\\">></span> <span class=\\"token builtin\\">Void</span><span class=\\"token punctuation\\">)</span> <span class=\\"token punctuation\\">{</span>\\n    <span class=\\"token function\\">completion</span><span class=\\"token punctuation\\">(</span><span class=\\"token builtin\\">App</span><span class=\\"token punctuation\\">.</span>codableStore<span class=\\"token punctuation\\">,</span> <span class=\\"token constant\\">nil</span><span class=\\"token punctuation\\">)</span>\\n<span class=\\"token punctuation\\">}</span></code></pre></div>\\n<p>You may have noticed that the completion here is expecting an array of books, this is because our route does not provide an identifier, so we retrieve all of the books.</p>\\n<p>Now we can restart our server to test our new endpoint.</p>\\n<p>Once the server is running, post a book using the curl command in Step 3.</p>\\n<p>Open a browser at:</p>\\n<p><a href=\\"http://localhost:8080/codable\\" target=\\"blank\\">localhost:8080/codable</a></p>\\n<p>This will make a GET request to the server and we should see the book we posted:</p>\\n<div class=\\"gatsby-highlight\\" data-language=\\"text\\"><pre class=\\"language-text\\"><code class=\\"language-text\\">[{\\n  &quot;id&quot;: 0,\\n  &quot;title&quot;: &quot;A Game of Thrones&quot;,\\n  &quot;price&quot;: 14.99,\\n  &quot;genre&quot;: &quot;Fantasy&quot;\\n}]</code></pre></div>\\n<hr>\\n<h2 id=\\"step-5-create-a-get-one-codable-route\\"><a href=\\"#step-5-create-a-get-one-codable-route\\" aria-label=\\"step 5 create a get one codable route permalink\\" class=\\"anchor\\"><svg aria-hidden=\\"true\\" focusable=\\"false\\" height=\\"16\\" version=\\"1.1\\" viewBox=\\"0 0 16 16\\" width=\\"16\\"><path fill-rule=\\"evenodd\\" d=\\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\\"></path></svg></a>Step 5: Create a GET ONE Codable Route</h2>\\n<p>Now we will create another GET route. This time we will register a handler for GET requests on \\"/codable/<id>\\" which will allow an identifier, <id> to be sent from the client which will identify the book to return information for.</p>\\n<p>Inside the <code class=\\"language-text\\">initializeCodableRoutes</code> function add:</p>\\n<div class=\\"gatsby-highlight\\" data-language=\\"swift\\"><pre class=\\"language-swift\\"><code class=\\"language-swift\\">app<span class=\\"token punctuation\\">.</span>router<span class=\\"token punctuation\\">.</span><span class=\\"token keyword\\">get</span><span class=\\"token punctuation\\">(</span><span class=\\"token string\\">\\"/codable\\"</span><span class=\\"token punctuation\\">,</span> handler<span class=\\"token punctuation\\">:</span> app<span class=\\"token punctuation\\">.</span>getOneHandler<span class=\\"token punctuation\\">)</span></code></pre></div>\\n<p>Just like before we now need to define the handler.</p>\\n<p>Inside the <code class=\\"language-text\\">App</code> extension add:</p>\\n<div class=\\"gatsby-highlight\\" data-language=\\"swift\\"><pre class=\\"language-swift\\"><code class=\\"language-swift\\"><span class=\\"token keyword\\">func</span> <span class=\\"token function\\">getOneHandler</span><span class=\\"token punctuation\\">(</span>id<span class=\\"token punctuation\\">:</span> <span class=\\"token builtin\\">Int</span><span class=\\"token punctuation\\">,</span> completion<span class=\\"token punctuation\\">:</span> <span class=\\"token punctuation\\">(</span><span class=\\"token builtin\\">Book</span><span class=\\"token operator\\">?</span><span class=\\"token punctuation\\">,</span> <span class=\\"token builtin\\">RequestError</span><span class=\\"token operator\\">?</span><span class=\\"token punctuation\\">)</span> <span class=\\"token operator\\">-</span><span class=\\"token operator\\">></span> <span class=\\"token builtin\\">Void</span><span class=\\"token punctuation\\">)</span> <span class=\\"token punctuation\\">{</span>\\n    <span class=\\"token keyword\\">guard</span> id <span class=\\"token operator\\">&lt;</span> <span class=\\"token builtin\\">App</span><span class=\\"token punctuation\\">.</span>codableStore<span class=\\"token punctuation\\">.</span><span class=\\"token builtin\\">count</span><span class=\\"token punctuation\\">,</span> id <span class=\\"token operator\\">>=</span> <span class=\\"token number\\">0</span> <span class=\\"token keyword\\">else</span> <span class=\\"token punctuation\\">{</span>\\n        <span class=\\"token keyword\\">return</span> <span class=\\"token function\\">completion</span><span class=\\"token punctuation\\">(</span><span class=\\"token constant\\">nil</span><span class=\\"token punctuation\\">,</span> <span class=\\"token punctuation\\">.</span>notFound<span class=\\"token punctuation\\">)</span>\\n    <span class=\\"token punctuation\\">}</span>\\n    <span class=\\"token function\\">completion</span><span class=\\"token punctuation\\">(</span><span class=\\"token builtin\\">App</span><span class=\\"token punctuation\\">.</span>codableStore<span class=\\"token punctuation\\">[</span>id<span class=\\"token punctuation\\">]</span><span class=\\"token punctuation\\">,</span> <span class=\\"token constant\\">nil</span><span class=\\"token punctuation\\">)</span>\\n<span class=\\"token punctuation\\">}</span></code></pre></div>\\n<p>In the handler, we are provided with an identifier <code class=\\"language-text\\">id</code>. This is the value following our route and can be either an <code class=\\"language-text\\">Int</code> or a <code class=\\"language-text\\">String</code>, in our example we use <code class=\\"language-text\\">Int</code>, as our model contains an identifier of type Int. We then use this identifier to return a single <code class=\\"language-text\\">Book</code>.</p>\\n<p>Now we can restart our server to test our new endpoint.</p>\\n<p>Once the server is running, open the browser at:</p>\\n<p><a href=\\"http://localhost:8080/codable/0\\" target=\\"blank\\">localhost:8080/codable/0</a></p>\\n<p>This will make a GET request to the server and we should see the first book in JSON format:</p>\\n<div class=\\"gatsby-highlight\\" data-language=\\"text\\"><pre class=\\"language-text\\"><code class=\\"language-text\\">{\\n  &quot;id&quot;: 0,\\n  &quot;title&quot;: &quot;A Game of Thrones&quot;,\\n  &quot;price&quot;: 14.99,\\n  &quot;genre&quot;: &quot;Fantasy&quot;\\n}</code></pre></div>\\n<p>Now we will POST a second book to the server:</p>\\n<div class=\\"gatsby-highlight\\" data-language=\\"text\\"><pre class=\\"language-text\\"><code class=\\"language-text\\">curl -X POST \\\\\\nhttp://localhost:8080/codable \\\\\\n-H &#39;content-type: application/json&#39; \\\\\\n-d &#39;{\\n  &quot;id&quot;: 0,\\n  &quot;title&quot;: &quot;Harry Potter&quot;,\\n  &quot;price&quot;: 10.00,\\n  &quot;genre&quot;: &quot;Fantasy&quot;\\n}&#39;</code></pre></div>\\n<p>Then open the browser at:</p>\\n<p><a href=\\"http://localhost:8080/codable/1\\" target=\\"blank\\">localhost:8080/codable/1</a></p>\\n<p>This will make a new GET request to the server and we should see the second book in JSON format:</p>\\n<div class=\\"gatsby-highlight\\" data-language=\\"text\\"><pre class=\\"language-text\\"><code class=\\"language-text\\">{&quot;id&quot;: 1,&quot;title&quot;:&quot;Harry Potter&quot;,&quot;price&quot;:10.00,&quot;genre&quot;:&quot;Fantasy&quot;}</code></pre></div>\\n<hr>\\n<h2 id=\\"step-6-adding-thread-safety-optional\\"><a href=\\"#step-6-adding-thread-safety-optional\\" aria-label=\\"step 6 adding thread safety optional permalink\\" class=\\"anchor\\"><svg aria-hidden=\\"true\\" focusable=\\"false\\" height=\\"16\\" version=\\"1.1\\" viewBox=\\"0 0 16 16\\" width=\\"16\\"><path fill-rule=\\"evenodd\\" d=\\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\\"></path></svg></a>Step 6: Adding thread safety (Optional)</h2>\\n<p>Kitura route handlers are asynchronous. If threads from different routes try to change the same object at the same time they will crash. To prevent these collisions in our example, we can serialize access to the <code class=\\"language-text\\">codableStore</code>.</p>\\n<blockquote>\\n<p>If you have completed the <a href=\\"./raw-routing\\">Raw Routing guide</a>, you will already have the execute function.</p>\\n</blockquote>\\n<p>Open your <code class=\\"language-text\\">Application.swift</code> file:</p>\\n<div class=\\"gatsby-highlight\\" data-language=\\"text\\"><pre class=\\"language-text\\"><code class=\\"language-text\\">open Sources/Application/Application.swift</code></pre></div>\\n<p>Add <code class=\\"language-text\\">Dispatch</code> to the import statements:</p>\\n<div class=\\"gatsby-highlight\\" data-language=\\"swift\\"><pre class=\\"language-swift\\"><code class=\\"language-swift\\"><span class=\\"token keyword\\">import</span> <span class=\\"token builtin\\">Dispatch</span></code></pre></div>\\n<p>Inside the <code class=\\"language-text\\">App</code> class, add a <code class=\\"language-text\\">DispatchQueue</code>:</p>\\n<div class=\\"gatsby-highlight\\" data-language=\\"swift\\"><pre class=\\"language-swift\\"><code class=\\"language-swift\\"><span class=\\"token keyword\\">let</span> workerQueue <span class=\\"token operator\\">=</span> <span class=\\"token function\\">DispatchQueue</span><span class=\\"token punctuation\\">(</span>label<span class=\\"token punctuation\\">:</span> <span class=\\"token string\\">\\"worker\\"</span><span class=\\"token punctuation\\">)</span></code></pre></div>\\n<p>At the end of the <code class=\\"language-text\\">App</code> class, add a helper function for atomically executing code:</p>\\n<div class=\\"gatsby-highlight\\" data-language=\\"swift\\"><pre class=\\"language-swift\\"><code class=\\"language-swift\\"><span class=\\"token keyword\\">func</span> <span class=\\"token function\\">execute</span><span class=\\"token punctuation\\">(</span><span class=\\"token number\\">_</span> block<span class=\\"token punctuation\\">:</span> <span class=\\"token punctuation\\">(</span><span class=\\"token punctuation\\">(</span><span class=\\"token punctuation\\">)</span> <span class=\\"token operator\\">-</span><span class=\\"token operator\\">></span> <span class=\\"token builtin\\">Void</span><span class=\\"token punctuation\\">)</span><span class=\\"token punctuation\\">)</span> <span class=\\"token punctuation\\">{</span>\\n    workerQueue<span class=\\"token punctuation\\">.</span>sync <span class=\\"token punctuation\\">{</span>\\n        <span class=\\"token function\\">block</span><span class=\\"token punctuation\\">(</span><span class=\\"token punctuation\\">)</span>\\n    <span class=\\"token punctuation\\">}</span>\\n<span class=\\"token punctuation\\">}</span></code></pre></div>\\n<p>Back in <code class=\\"language-text\\">CodableRoutes.swift</code>, we wrap the code in our handlers with this execute function.</p>\\n<p>Your completed <code class=\\"language-text\\">CodableRouting.swift</code> should now look as follows:</p>\\n<div class=\\"gatsby-highlight\\" data-language=\\"swift\\"><pre class=\\"language-swift\\"><code class=\\"language-swift\\"><span class=\\"token keyword\\">import</span> <span class=\\"token builtin\\">KituraContracts</span>\\n\\n<span class=\\"token keyword\\">func</span> <span class=\\"token function\\">initializeCodableRoutes</span><span class=\\"token punctuation\\">(</span>app<span class=\\"token punctuation\\">:</span> <span class=\\"token builtin\\">App</span><span class=\\"token punctuation\\">)</span> <span class=\\"token punctuation\\">{</span>\\n    app<span class=\\"token punctuation\\">.</span>router<span class=\\"token punctuation\\">.</span><span class=\\"token function\\">post</span><span class=\\"token punctuation\\">(</span><span class=\\"token string\\">\\"/codable\\"</span><span class=\\"token punctuation\\">,</span> handler<span class=\\"token punctuation\\">:</span> app<span class=\\"token punctuation\\">.</span>postHandler<span class=\\"token punctuation\\">)</span>\\n    app<span class=\\"token punctuation\\">.</span>router<span class=\\"token punctuation\\">.</span><span class=\\"token keyword\\">get</span><span class=\\"token punctuation\\">(</span><span class=\\"token string\\">\\"/codable\\"</span><span class=\\"token punctuation\\">,</span> handler<span class=\\"token punctuation\\">:</span> app<span class=\\"token punctuation\\">.</span>getAllHandler<span class=\\"token punctuation\\">)</span>\\n    app<span class=\\"token punctuation\\">.</span>router<span class=\\"token punctuation\\">.</span><span class=\\"token keyword\\">get</span><span class=\\"token punctuation\\">(</span><span class=\\"token string\\">\\"/codable\\"</span><span class=\\"token punctuation\\">,</span> handler<span class=\\"token punctuation\\">:</span> app<span class=\\"token punctuation\\">.</span>getOneHandler<span class=\\"token punctuation\\">)</span>\\n<span class=\\"token punctuation\\">}</span>\\n<span class=\\"token keyword\\">extension</span> <span class=\\"token builtin\\">App</span> <span class=\\"token punctuation\\">{</span>\\n    <span class=\\"token keyword\\">static</span> <span class=\\"token keyword\\">var</span> codableStore <span class=\\"token operator\\">=</span> <span class=\\"token punctuation\\">[</span><span class=\\"token builtin\\">Book</span><span class=\\"token punctuation\\">]</span><span class=\\"token punctuation\\">(</span><span class=\\"token punctuation\\">)</span>\\n\\n    <span class=\\"token keyword\\">func</span> <span class=\\"token function\\">postHandler</span><span class=\\"token punctuation\\">(</span>book<span class=\\"token punctuation\\">:</span> <span class=\\"token builtin\\">Book</span><span class=\\"token punctuation\\">,</span> completion<span class=\\"token punctuation\\">:</span> <span class=\\"token punctuation\\">(</span><span class=\\"token builtin\\">Book</span><span class=\\"token operator\\">?</span><span class=\\"token punctuation\\">,</span> <span class=\\"token builtin\\">RequestError</span><span class=\\"token operator\\">?</span><span class=\\"token punctuation\\">)</span> <span class=\\"token operator\\">-</span><span class=\\"token operator\\">></span> <span class=\\"token builtin\\">Void</span><span class=\\"token punctuation\\">)</span> <span class=\\"token punctuation\\">{</span>\\n        execute <span class=\\"token punctuation\\">{</span>\\n            <span class=\\"token builtin\\">App</span><span class=\\"token punctuation\\">.</span>codableStore<span class=\\"token punctuation\\">.</span><span class=\\"token function\\">append</span><span class=\\"token punctuation\\">(</span>book<span class=\\"token punctuation\\">)</span>\\n        <span class=\\"token punctuation\\">}</span>\\n        <span class=\\"token function\\">completion</span><span class=\\"token punctuation\\">(</span>book<span class=\\"token punctuation\\">,</span> <span class=\\"token constant\\">nil</span><span class=\\"token punctuation\\">)</span>\\n    <span class=\\"token punctuation\\">}</span>\\n\\n    <span class=\\"token keyword\\">func</span> <span class=\\"token function\\">getAllHandler</span><span class=\\"token punctuation\\">(</span>completion<span class=\\"token punctuation\\">:</span> <span class=\\"token punctuation\\">(</span><span class=\\"token punctuation\\">[</span><span class=\\"token builtin\\">Book</span><span class=\\"token punctuation\\">]</span><span class=\\"token operator\\">?</span><span class=\\"token punctuation\\">,</span> <span class=\\"token builtin\\">RequestError</span><span class=\\"token operator\\">?</span><span class=\\"token punctuation\\">)</span> <span class=\\"token operator\\">-</span><span class=\\"token operator\\">></span> <span class=\\"token builtin\\">Void</span><span class=\\"token punctuation\\">)</span> <span class=\\"token punctuation\\">{</span>\\n        execute <span class=\\"token punctuation\\">{</span>\\n            <span class=\\"token function\\">completion</span><span class=\\"token punctuation\\">(</span><span class=\\"token builtin\\">App</span><span class=\\"token punctuation\\">.</span>codableStore<span class=\\"token punctuation\\">,</span> <span class=\\"token constant\\">nil</span><span class=\\"token punctuation\\">)</span>\\n        <span class=\\"token punctuation\\">}</span>\\n    <span class=\\"token punctuation\\">}</span>\\n    <span class=\\"token keyword\\">func</span> <span class=\\"token function\\">getOneHandler</span><span class=\\"token punctuation\\">(</span>id<span class=\\"token punctuation\\">:</span> <span class=\\"token builtin\\">Int</span><span class=\\"token punctuation\\">,</span> completion<span class=\\"token punctuation\\">:</span> <span class=\\"token punctuation\\">(</span><span class=\\"token builtin\\">Book</span><span class=\\"token operator\\">?</span><span class=\\"token punctuation\\">,</span> <span class=\\"token builtin\\">RequestError</span><span class=\\"token operator\\">?</span><span class=\\"token punctuation\\">)</span> <span class=\\"token operator\\">-</span><span class=\\"token operator\\">></span> <span class=\\"token builtin\\">Void</span><span class=\\"token punctuation\\">)</span> <span class=\\"token punctuation\\">{</span>\\n        execute <span class=\\"token punctuation\\">{</span>\\n            <span class=\\"token keyword\\">guard</span> id <span class=\\"token operator\\">&lt;</span> <span class=\\"token builtin\\">App</span><span class=\\"token punctuation\\">.</span>codableStore<span class=\\"token punctuation\\">.</span><span class=\\"token builtin\\">count</span><span class=\\"token punctuation\\">,</span> id <span class=\\"token operator\\">>=</span> <span class=\\"token number\\">0</span> <span class=\\"token keyword\\">else</span> <span class=\\"token punctuation\\">{</span>\\n                <span class=\\"token keyword\\">return</span> <span class=\\"token function\\">completion</span><span class=\\"token punctuation\\">(</span><span class=\\"token constant\\">nil</span><span class=\\"token punctuation\\">,</span> <span class=\\"token punctuation\\">.</span>notFound<span class=\\"token punctuation\\">)</span>\\n            <span class=\\"token punctuation\\">}</span>\\n            <span class=\\"token function\\">completion</span><span class=\\"token punctuation\\">(</span><span class=\\"token builtin\\">App</span><span class=\\"token punctuation\\">.</span>codableStore<span class=\\"token punctuation\\">[</span>id<span class=\\"token punctuation\\">]</span><span class=\\"token punctuation\\">,</span> <span class=\\"token constant\\">nil</span><span class=\\"token punctuation\\">)</span>\\n        <span class=\\"token punctuation\\">}</span>\\n    <span class=\\"token punctuation\\">}</span>\\n<span class=\\"token punctuation\\">}</span></code></pre></div>\\n<p>We can continue to make POST and GET requests from our bookstore.</p>\\n<p>However, if the server is restarted, all the data will be lost and we will have an empty array again.</p>\\n<p>In the Database Guide we will look to resolve this issue and add persistence.</p>\\n<h2 id=\\"next-steps\\"><a href=\\"#next-steps\\" aria-label=\\"next steps permalink\\" class=\\"anchor\\"><svg aria-hidden=\\"true\\" focusable=\\"false\\" height=\\"16\\" version=\\"1.1\\" viewBox=\\"0 0 16 16\\" width=\\"16\\"><path fill-rule=\\"evenodd\\" d=\\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\\"></path></svg></a>Next steps</h2>\\n<p><a href=\\"./kitura-openapi\\">Add Kitura OpenAPI</a>: Provides a UI for viewing information about Codable routes.</p>","frontmatter":{"path":"/docs/routing/codable-routing","title":"Codable Routing"}}},{"node":{"html":"<h1 id=\\"raw-routing\\"><a href=\\"#raw-routing\\" aria-label=\\"raw routing permalink\\" class=\\"anchor\\"><svg aria-hidden=\\"true\\" focusable=\\"false\\" height=\\"16\\" version=\\"1.1\\" viewBox=\\"0 0 16 16\\" width=\\"16\\"><path fill-rule=\\"evenodd\\" d=\\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\\"></path></svg></a>Raw Routing</h1>\\n<p>Raw routing is based on the <a href=\\"https://expressjs.com\\">Express</a> framework for Node.js where the route handlers are called with <code class=\\"language-text\\">RouterRequest</code> and <code class=\\"language-text\\">RouterResponse</code> objects, which respectively handle the client request and build the response, along with a <code class=\\"language-text\\">next</code> completion handler.</p>\\n<p>Raw routing provides great flexibility and control, but requires you to understand the structure of requests, how to interpret HTTP request headers correctly, how to verify data, and to manually carry out things like JSON parsing.</p>\\n<p>In this guide, we will show you how to set up Raw routes on your server. We will store a Swift object that is sent via a POST request. We will then return that object when a user sends a GET request.</p>\\n<blockquote>\\n<p>If you don\'t have a Kitura server, follow our <a href=\\"../getting-started/create-server-cli\\">Create a server</a> guide.</p>\\n</blockquote>\\n<hr>\\n<h2 id=\\"step-1-create-a-file-to-contain-the-routes\\"><a href=\\"#step-1-create-a-file-to-contain-the-routes\\" aria-label=\\"step 1 create a file to contain the routes permalink\\" class=\\"anchor\\"><svg aria-hidden=\\"true\\" focusable=\\"false\\" height=\\"16\\" version=\\"1.1\\" viewBox=\\"0 0 16 16\\" width=\\"16\\"><path fill-rule=\\"evenodd\\" d=\\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\\"></path></svg></a>Step 1: Create a file to contain the routes</h2>\\n<p>We are going to create a new file, where we will define the routes for this guide.</p>\\n<p>Open your <code class=\\"language-text\\">Application.swift</code> file:</p>\\n<div class=\\"gatsby-highlight\\" data-language=\\"text\\"><pre class=\\"language-text\\"><code class=\\"language-text\\">open Sources/Application/Application.swift</code></pre></div>\\n<p>Inside the <code class=\\"language-text\\">postInit()</code> function add:</p>\\n<div class=\\"gatsby-highlight\\" data-language=\\"swift\\"><pre class=\\"language-swift\\"><code class=\\"language-swift\\"><span class=\\"token function\\">initializeRawRoutes</span><span class=\\"token punctuation\\">(</span>app<span class=\\"token punctuation\\">:</span> <span class=\\"token keyword\\">self</span><span class=\\"token punctuation\\">)</span></code></pre></div>\\n<p>Create a new file, called <code class=\\"language-text\\">RawRoutes.swift</code>:</p>\\n<div class=\\"gatsby-highlight\\" data-language=\\"text\\"><pre class=\\"language-text\\"><code class=\\"language-text\\">touch Sources/Application/Routes/RawRoutes.swift</code></pre></div>\\n<p>Open your <code class=\\"language-text\\">RawRoutes.swift</code> file:</p>\\n<div class=\\"gatsby-highlight\\" data-language=\\"text\\"><pre class=\\"language-text\\"><code class=\\"language-text\\">open Sources/Application/Routes/RawRoutes.swift</code></pre></div>\\n<p>Inside this file, add the framework for our routes code:</p>\\n<div class=\\"gatsby-highlight\\" data-language=\\"swift\\"><pre class=\\"language-swift\\"><code class=\\"language-swift\\"><span class=\\"token keyword\\">func</span> <span class=\\"token function\\">initializeRawRoutes</span><span class=\\"token punctuation\\">(</span>app<span class=\\"token punctuation\\">:</span> <span class=\\"token builtin\\">App</span><span class=\\"token punctuation\\">)</span> <span class=\\"token punctuation\\">{</span>\\n    <span class=\\"token comment\\">// Register routes with handlers here</span>\\n<span class=\\"token punctuation\\">}</span>\\n<span class=\\"token keyword\\">extension</span> <span class=\\"token builtin\\">App</span> <span class=\\"token punctuation\\">{</span>\\n    <span class=\\"token keyword\\">static</span> <span class=\\"token keyword\\">var</span> bookStore <span class=\\"token operator\\">=</span> <span class=\\"token punctuation\\">[</span><span class=\\"token builtin\\">Book</span><span class=\\"token punctuation\\">]</span><span class=\\"token punctuation\\">(</span><span class=\\"token punctuation\\">)</span>\\n<span class=\\"token punctuation\\">}</span></code></pre></div>\\n<p>This code contains two sections. The first is the <code class=\\"language-text\\">initializeRawRoutes</code> function. This will be run after the application has been initialized and is where we register routes on our router. The second is the <code class=\\"language-text\\">App</code> extension. This is where we define a <code class=\\"language-text\\">bookStore</code> which will store an array of objects. We will use the <a href=\\"./what-is-routing#bookmodel\\">Book model from the routing guide</a>, however you could use any Codable type.</p>\\n<hr>\\n<h2 id=\\"step-2-create-a-post-route\\"><a href=\\"#step-2-create-a-post-route\\" aria-label=\\"step 2 create a post route permalink\\" class=\\"anchor\\"><svg aria-hidden=\\"true\\" focusable=\\"false\\" height=\\"16\\" version=\\"1.1\\" viewBox=\\"0 0 16 16\\" width=\\"16\\"><path fill-rule=\\"evenodd\\" d=\\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\\"></path></svg></a>Step 2: Create a POST route</h2>\\n<p>Inside the <code class=\\"language-text\\">initializeRawRoutes</code> function add:</p>\\n<div class=\\"gatsby-highlight\\" data-language=\\"swift\\"><pre class=\\"language-swift\\"><code class=\\"language-swift\\">app<span class=\\"token punctuation\\">.</span>router<span class=\\"token punctuation\\">.</span><span class=\\"token function\\">post</span><span class=\\"token punctuation\\">(</span><span class=\\"token string\\">\\"/raw\\"</span><span class=\\"token punctuation\\">)</span> <span class=\\"token punctuation\\">{</span> request<span class=\\"token punctuation\\">,</span> response<span class=\\"token punctuation\\">,</span> next <span class=\\"token keyword\\">in</span>\\n    <span class=\\"token function\\">next</span><span class=\\"token punctuation\\">(</span><span class=\\"token punctuation\\">)</span>\\n<span class=\\"token punctuation\\">}</span></code></pre></div>\\n<p>What we\'ve done is register a POST on our router that will handle any POST requests made on \\"/raw\\".</p>\\n<blockquote>\\n<p>If the values <code class=\\"language-text\\">request</code>, <code class=\\"language-text\\">response</code> and <code class=\\"language-text\\">next</code> are unfamiliar to you, learn more about them in our <a href=\\"./what-is-routing\\">What is Routing?</a> guide.</p>\\n</blockquote>\\n<p>The POST route will be used to send information about our books to the server, therefore we need a way of reading this data from the request.</p>\\n<p>To do this we will use the <code class=\\"language-text\\">read(as:)</code> method of the <code class=\\"language-text\\">RouterRequest</code> class, as this method can throw we wrap it in a do-catch block:</p>\\n<div class=\\"gatsby-highlight\\" data-language=\\"swift\\"><pre class=\\"language-swift\\"><code class=\\"language-swift\\"><span class=\\"token keyword\\">do</span> <span class=\\"token punctuation\\">{</span>\\n    <span class=\\"token keyword\\">let</span> book <span class=\\"token operator\\">=</span> <span class=\\"token keyword\\">try</span> request<span class=\\"token punctuation\\">.</span><span class=\\"token function\\">read</span><span class=\\"token punctuation\\">(</span><span class=\\"token keyword\\">as</span><span class=\\"token punctuation\\">:</span> <span class=\\"token builtin\\">Book</span><span class=\\"token punctuation\\">.</span><span class=\\"token keyword\\">self</span><span class=\\"token punctuation\\">)</span>\\n<span class=\\"token punctuation\\">}</span> <span class=\\"token keyword\\">catch</span> <span class=\\"token punctuation\\">{</span>\\n    <span class=\\"token keyword\\">let</span> <span class=\\"token number\\">_</span> <span class=\\"token operator\\">=</span> response<span class=\\"token punctuation\\">.</span><span class=\\"token function\\">send</span><span class=\\"token punctuation\\">(</span>status<span class=\\"token punctuation\\">:</span> <span class=\\"token punctuation\\">.</span>badRequest<span class=\\"token punctuation\\">)</span>\\n<span class=\\"token punctuation\\">}</span></code></pre></div>\\n<p>We will now save this book to our bookstore and return it to the user with <code class=\\"language-text\\">send()</code>:</p>\\n<div class=\\"gatsby-highlight\\" data-language=\\"swift\\"><pre class=\\"language-swift\\"><code class=\\"language-swift\\"><span class=\\"token builtin\\">App</span><span class=\\"token punctuation\\">.</span>bookStore<span class=\\"token punctuation\\">.</span><span class=\\"token function\\">append</span><span class=\\"token punctuation\\">(</span>book<span class=\\"token punctuation\\">)</span>\\nresponse<span class=\\"token punctuation\\">.</span><span class=\\"token function\\">send</span><span class=\\"token punctuation\\">(</span>book<span class=\\"token punctuation\\">)</span></code></pre></div>\\n<p>Your completed POST route should now look as follows:</p>\\n<div class=\\"gatsby-highlight\\" data-language=\\"swift\\"><pre class=\\"language-swift\\"><code class=\\"language-swift\\">app<span class=\\"token punctuation\\">.</span>router<span class=\\"token punctuation\\">.</span><span class=\\"token function\\">post</span><span class=\\"token punctuation\\">(</span><span class=\\"token string\\">\\"/raw\\"</span><span class=\\"token punctuation\\">)</span> <span class=\\"token punctuation\\">{</span> request<span class=\\"token punctuation\\">,</span> response<span class=\\"token punctuation\\">,</span> next <span class=\\"token keyword\\">in</span>\\n    <span class=\\"token keyword\\">do</span> <span class=\\"token punctuation\\">{</span>\\n        <span class=\\"token keyword\\">let</span> book <span class=\\"token operator\\">=</span> <span class=\\"token keyword\\">try</span> request<span class=\\"token punctuation\\">.</span><span class=\\"token function\\">read</span><span class=\\"token punctuation\\">(</span><span class=\\"token keyword\\">as</span><span class=\\"token punctuation\\">:</span> <span class=\\"token builtin\\">Book</span><span class=\\"token punctuation\\">.</span><span class=\\"token keyword\\">self</span><span class=\\"token punctuation\\">)</span>\\n        <span class=\\"token builtin\\">App</span><span class=\\"token punctuation\\">.</span>bookStore<span class=\\"token punctuation\\">.</span><span class=\\"token function\\">append</span><span class=\\"token punctuation\\">(</span>book<span class=\\"token punctuation\\">)</span>\\n        response<span class=\\"token punctuation\\">.</span><span class=\\"token function\\">send</span><span class=\\"token punctuation\\">(</span>book<span class=\\"token punctuation\\">)</span>\\n    <span class=\\"token punctuation\\">}</span> <span class=\\"token keyword\\">catch</span> <span class=\\"token punctuation\\">{</span>\\n        <span class=\\"token keyword\\">let</span> <span class=\\"token number\\">_</span> <span class=\\"token operator\\">=</span> response<span class=\\"token punctuation\\">.</span><span class=\\"token function\\">send</span><span class=\\"token punctuation\\">(</span>status<span class=\\"token punctuation\\">:</span> <span class=\\"token punctuation\\">.</span>badRequest<span class=\\"token punctuation\\">)</span>\\n    <span class=\\"token punctuation\\">}</span>\\n    <span class=\\"token function\\">next</span><span class=\\"token punctuation\\">(</span><span class=\\"token punctuation\\">)</span>\\n<span class=\\"token punctuation\\">}</span></code></pre></div>\\n<p>Now if we start our Kitura server we can use curl to test our route.</p>\\n<p>In a terminal enter the following:</p>\\n<div class=\\"gatsby-highlight\\" data-language=\\"text\\"><pre class=\\"language-text\\"><code class=\\"language-text\\">curl -X POST \\\\\\n      http://localhost:8080/raw \\\\\\n      -H &#39;content-type: application/json&#39; \\\\\\n      -d &#39;{\\n            &quot;id&quot;: 0,\\n            &quot;title&quot;: &quot;A Game of Thrones&quot;,\\n            &quot;price&quot;: 14.99,\\n            &quot;genre&quot;: &quot;Fantasy&quot;\\n          }&#39;</code></pre></div>\\n<p>We should then see the following printed to the terminal:</p>\\n<div class=\\"gatsby-highlight\\" data-language=\\"text\\"><pre class=\\"language-text\\"><code class=\\"language-text\\">{&quot;id&quot;:0,&quot;title&quot;:&quot;A Game of Thrones&quot;,&quot;price&quot;:14.99,&quot;genre&quot;:&quot;Fantasy&quot;}</code></pre></div>\\n<p>That\'s it! We\'ve implemented a basic POST route.</p>\\n<hr>\\n<h2 id=\\"step-3-create-a-get-route\\"><a href=\\"#step-3-create-a-get-route\\" aria-label=\\"step 3 create a get route permalink\\" class=\\"anchor\\"><svg aria-hidden=\\"true\\" focusable=\\"false\\" height=\\"16\\" version=\\"1.1\\" viewBox=\\"0 0 16 16\\" width=\\"16\\"><path fill-rule=\\"evenodd\\" d=\\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\\"></path></svg></a>Step 3: Create a GET route</h2>\\n<p>We register a GET route in a similar way to the POST route.</p>\\n<p>Inside the <code class=\\"language-text\\">initializeRawRoutes</code> function add:</p>\\n<div class=\\"gatsby-highlight\\" data-language=\\"swift\\"><pre class=\\"language-swift\\"><code class=\\"language-swift\\">app<span class=\\"token punctuation\\">.</span>router<span class=\\"token punctuation\\">.</span><span class=\\"token keyword\\">get</span><span class=\\"token punctuation\\">(</span><span class=\\"token string\\">\\"/raw\\"</span><span class=\\"token punctuation\\">)</span> <span class=\\"token punctuation\\">{</span> request<span class=\\"token punctuation\\">,</span> response<span class=\\"token punctuation\\">,</span> next <span class=\\"token keyword\\">in</span>\\n    <span class=\\"token function\\">next</span><span class=\\"token punctuation\\">(</span><span class=\\"token punctuation\\">)</span>\\n<span class=\\"token punctuation\\">}</span></code></pre></div>\\n<p>In our GET route, we respond with our bookstore.</p>\\n<div class=\\"gatsby-highlight\\" data-language=\\"swift\\"><pre class=\\"language-swift\\"><code class=\\"language-swift\\">response<span class=\\"token punctuation\\">.</span><span class=\\"token function\\">send</span><span class=\\"token punctuation\\">(</span><span class=\\"token builtin\\">App</span><span class=\\"token punctuation\\">.</span>bookStore<span class=\\"token punctuation\\">)</span></code></pre></div>\\n<p>The completed GET route, should then look as follows:</p>\\n<div class=\\"gatsby-highlight\\" data-language=\\"swift\\"><pre class=\\"language-swift\\"><code class=\\"language-swift\\">app<span class=\\"token punctuation\\">.</span>router<span class=\\"token punctuation\\">.</span><span class=\\"token keyword\\">get</span><span class=\\"token punctuation\\">(</span><span class=\\"token string\\">\\"/raw\\"</span><span class=\\"token punctuation\\">)</span> <span class=\\"token punctuation\\">{</span> request<span class=\\"token punctuation\\">,</span> response<span class=\\"token punctuation\\">,</span> next <span class=\\"token keyword\\">in</span>\\n    response<span class=\\"token punctuation\\">.</span><span class=\\"token function\\">send</span><span class=\\"token punctuation\\">(</span><span class=\\"token builtin\\">App</span><span class=\\"token punctuation\\">.</span>bookStore<span class=\\"token punctuation\\">)</span>\\n    <span class=\\"token function\\">next</span><span class=\\"token punctuation\\">(</span><span class=\\"token punctuation\\">)</span>\\n<span class=\\"token punctuation\\">}</span></code></pre></div>\\n<p>Now we need to restart our server, once it is running we can post a book using the curl command from step 2.</p>\\n<p>Then if we navigate to <a href=\\"http://localhost:8080/raw\\" target=\\"blank\\">localhost:8080/raw</a>, we should see the book we posted:</p>\\n<div class=\\"gatsby-highlight\\" data-language=\\"text\\"><pre class=\\"language-text\\"><code class=\\"language-text\\">{\\n    &quot;id&quot;: 0,\\n    &quot;title&quot;: &quot;A Game of Thrones&quot;,\\n    &quot;price&quot;: 14.99,\\n    &quot;genre&quot;: &quot;Fantasy&quot;\\n}</code></pre></div>\\n<p>That\'s it! We\'ve now implemented a simple GET route.</p>\\n<hr>\\n<h2 id=\\"step-4-create-a-get-one-route\\"><a href=\\"#step-4-create-a-get-one-route\\" aria-label=\\"step 4 create a get one route permalink\\" class=\\"anchor\\"><svg aria-hidden=\\"true\\" focusable=\\"false\\" height=\\"16\\" version=\\"1.1\\" viewBox=\\"0 0 16 16\\" width=\\"16\\"><path fill-rule=\\"evenodd\\" d=\\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\\"></path></svg></a>Step 4: Create a GET one route</h2>\\n<p>When we register a GET one route, rather than a GET all route, we use an id parameter.</p>\\n<p>Inside the <code class=\\"language-text\\">initializeRawRoutes</code> function add:</p>\\n<div class=\\"gatsby-highlight\\" data-language=\\"swift\\"><pre class=\\"language-swift\\"><code class=\\"language-swift\\">app<span class=\\"token punctuation\\">.</span>router<span class=\\"token punctuation\\">.</span><span class=\\"token keyword\\">get</span><span class=\\"token punctuation\\">(</span><span class=\\"token string\\">\\"/raw/:id\\"</span><span class=\\"token punctuation\\">)</span> <span class=\\"token punctuation\\">{</span> request<span class=\\"token punctuation\\">,</span> response<span class=\\"token punctuation\\">,</span> next <span class=\\"token keyword\\">in</span>\\n    <span class=\\"token function\\">next</span><span class=\\"token punctuation\\">(</span><span class=\\"token punctuation\\">)</span>\\n<span class=\\"token punctuation\\">}</span></code></pre></div>\\n<p>In this case, the path \\"/:id\\" will be for \\"/123\\" as well as \\"/abc\\". You can then access the id parameter’s value via <code class=\\"language-text\\">request.parameters[&quot;id&quot;]</code>:</p>\\n<div class=\\"gatsby-highlight\\" data-language=\\"swift\\"><pre class=\\"language-swift\\"><code class=\\"language-swift\\"><span class=\\"token keyword\\">guard</span> <span class=\\"token keyword\\">let</span> idString <span class=\\"token operator\\">=</span> request<span class=\\"token punctuation\\">.</span>parameters<span class=\\"token punctuation\\">[</span><span class=\\"token string\\">\\"id\\"</span><span class=\\"token punctuation\\">]</span><span class=\\"token punctuation\\">,</span>\\n    <span class=\\"token keyword\\">let</span> id <span class=\\"token operator\\">=</span> <span class=\\"token function\\">Int</span><span class=\\"token punctuation\\">(</span>idString<span class=\\"token punctuation\\">)</span><span class=\\"token punctuation\\">,</span>\\n    id <span class=\\"token operator\\">>=</span> <span class=\\"token number\\">0</span><span class=\\"token punctuation\\">,</span>\\n    id <span class=\\"token operator\\">&lt;</span> <span class=\\"token builtin\\">App</span><span class=\\"token punctuation\\">.</span>bookStore<span class=\\"token punctuation\\">.</span><span class=\\"token builtin\\">count</span>\\n<span class=\\"token keyword\\">else</span> <span class=\\"token punctuation\\">{</span>\\n    <span class=\\"token keyword\\">let</span> <span class=\\"token number\\">_</span> <span class=\\"token operator\\">=</span> response<span class=\\"token punctuation\\">.</span><span class=\\"token function\\">send</span><span class=\\"token punctuation\\">(</span>status<span class=\\"token punctuation\\">:</span> <span class=\\"token punctuation\\">.</span>badRequest<span class=\\"token punctuation\\">)</span>\\n    <span class=\\"token keyword\\">return</span> <span class=\\"token function\\">next</span><span class=\\"token punctuation\\">(</span><span class=\\"token punctuation\\">)</span>\\n<span class=\\"token punctuation\\">}</span>\\nresponse<span class=\\"token punctuation\\">.</span><span class=\\"token function\\">send</span><span class=\\"token punctuation\\">(</span><span class=\\"token builtin\\">App</span><span class=\\"token punctuation\\">.</span>bookStore<span class=\\"token punctuation\\">[</span>id<span class=\\"token punctuation\\">]</span><span class=\\"token punctuation\\">)</span></code></pre></div>\\n<p>Your completed GET with <code class=\\"language-text\\">id</code> route, should then look as follows:</p>\\n<div class=\\"gatsby-highlight\\" data-language=\\"swift\\"><pre class=\\"language-swift\\"><code class=\\"language-swift\\">app<span class=\\"token punctuation\\">.</span>router<span class=\\"token punctuation\\">.</span><span class=\\"token keyword\\">get</span><span class=\\"token punctuation\\">(</span><span class=\\"token string\\">\\"/raw/:id\\"</span><span class=\\"token punctuation\\">)</span> <span class=\\"token punctuation\\">{</span> request<span class=\\"token punctuation\\">,</span> response<span class=\\"token punctuation\\">,</span> next <span class=\\"token keyword\\">in</span>\\n    <span class=\\"token keyword\\">guard</span> <span class=\\"token keyword\\">let</span> idString <span class=\\"token operator\\">=</span> request<span class=\\"token punctuation\\">.</span>parameters<span class=\\"token punctuation\\">[</span><span class=\\"token string\\">\\"id\\"</span><span class=\\"token punctuation\\">]</span><span class=\\"token punctuation\\">,</span>\\n        <span class=\\"token keyword\\">let</span> id <span class=\\"token operator\\">=</span> <span class=\\"token function\\">Int</span><span class=\\"token punctuation\\">(</span>idString<span class=\\"token punctuation\\">)</span><span class=\\"token punctuation\\">,</span>\\n        id <span class=\\"token operator\\">>=</span> <span class=\\"token number\\">0</span><span class=\\"token punctuation\\">,</span>\\n        id <span class=\\"token operator\\">&lt;</span> <span class=\\"token builtin\\">App</span><span class=\\"token punctuation\\">.</span>bookStore<span class=\\"token punctuation\\">.</span><span class=\\"token builtin\\">count</span>\\n    <span class=\\"token keyword\\">else</span> <span class=\\"token punctuation\\">{</span>\\n        <span class=\\"token keyword\\">let</span> <span class=\\"token number\\">_</span> <span class=\\"token operator\\">=</span> response<span class=\\"token punctuation\\">.</span><span class=\\"token function\\">send</span><span class=\\"token punctuation\\">(</span>status<span class=\\"token punctuation\\">:</span> <span class=\\"token punctuation\\">.</span>badRequest<span class=\\"token punctuation\\">)</span>\\n        <span class=\\"token keyword\\">return</span> <span class=\\"token function\\">next</span><span class=\\"token punctuation\\">(</span><span class=\\"token punctuation\\">)</span>\\n    <span class=\\"token punctuation\\">}</span>\\n    response<span class=\\"token punctuation\\">.</span><span class=\\"token function\\">send</span><span class=\\"token punctuation\\">(</span><span class=\\"token builtin\\">App</span><span class=\\"token punctuation\\">.</span>bookStore<span class=\\"token punctuation\\">[</span>id<span class=\\"token punctuation\\">]</span><span class=\\"token punctuation\\">)</span>\\n    <span class=\\"token function\\">next</span><span class=\\"token punctuation\\">(</span><span class=\\"token punctuation\\">)</span>\\n<span class=\\"token punctuation\\">}</span></code></pre></div>\\n<p>Now we need to restart our server and make a POST request using the curl command from step 2.</p>\\n<p>Use a browser to navigate to <a href=\\"http://localhost:8080/raw/0\\" target=\\"blank\\">localhost:8080/raw/0</a></p>\\n<p>This will make a GET request to the server and you should see the first book in JSON format:</p>\\n<div class=\\"gatsby-highlight\\" data-language=\\"text\\"><pre class=\\"language-text\\"><code class=\\"language-text\\">{\\n    &quot;id&quot;: 0,\\n    &quot;title&quot;: &quot;A Game of Thrones&quot;,\\n    &quot;price&quot;: 14.99,\\n    &quot;genre&quot;: &quot;Fantasy&quot;\\n}</code></pre></div>\\n<p>In Terminal enter the following to post a second book to the server:</p>\\n<div class=\\"gatsby-highlight\\" data-language=\\"text\\"><pre class=\\"language-text\\"><code class=\\"language-text\\">curl -X POST \\\\\\n    http://localhost:8080/raw \\\\\\n    -H &#39;content-type: application/json&#39; \\\\\\n    -d &#39;{\\n          &quot;id&quot;: 1,\\n          &quot;title&quot;: &quot;Harry Potter&quot;,\\n          &quot;price&quot;: 10.00,\\n          &quot;genre&quot;: &quot;Fantasy&quot;\\n       }&#39;</code></pre></div>\\n<p>Then open the browser at <a href=\\"http://localhost:8080/raw/1\\" target=\\"blank\\">localhost:8080/raw/1</a></p>\\n<p>This will make a new GET request to the server and you should see the second book in JSON format:</p>\\n<div class=\\"gatsby-highlight\\" data-language=\\"text\\"><pre class=\\"language-text\\"><code class=\\"language-text\\">{\\n    &quot;id&quot;: 1,\\n    &quot;title&quot;: &quot;Harry Potter&quot;,\\n    &quot;price&quot;: 10.00,\\n    &quot;genre&quot;: &quot;Fantasy&quot;\\n}</code></pre></div>\\n<p>That\'s it! We\'ve now also implemented a GET one route.</p>\\n<hr>\\n<h2 id=\\"step-5-making-bookstore-thread-safe-optional\\"><a href=\\"#step-5-making-bookstore-thread-safe-optional\\" aria-label=\\"step 5 making bookstore thread safe optional permalink\\" class=\\"anchor\\"><svg aria-hidden=\\"true\\" focusable=\\"false\\" height=\\"16\\" version=\\"1.1\\" viewBox=\\"0 0 16 16\\" width=\\"16\\"><path fill-rule=\\"evenodd\\" d=\\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\\"></path></svg></a>Step 5: Making bookstore thread safe (Optional)</h2>\\n<p>Kitura route handlers are asynchronous. If multiple route threads access the same object at the same time they will crash. To prevent these collisions, we will serialize access to the <code class=\\"language-text\\">rawStore</code>.</p>\\n<blockquote>\\n<p>If you have completed the <a href=\\"./codable-routing\\">Codable Routing guide</a>, you will already have the execute function.</p>\\n</blockquote>\\n<p>Open your <code class=\\"language-text\\">Application.swift</code> file:</p>\\n<div class=\\"gatsby-highlight\\" data-language=\\"text\\"><pre class=\\"language-text\\"><code class=\\"language-text\\">open Sources/Application/Application.swift</code></pre></div>\\n<p>Add <code class=\\"language-text\\">Dispatch</code> to the import statements:</p>\\n<div class=\\"gatsby-highlight\\" data-language=\\"swift\\"><pre class=\\"language-swift\\"><code class=\\"language-swift\\"><span class=\\"token keyword\\">import</span> <span class=\\"token builtin\\">Dispatch</span></code></pre></div>\\n<p>Inside the <code class=\\"language-text\\">App</code> class, add a <code class=\\"language-text\\">DispatchQueue</code>:</p>\\n<div class=\\"gatsby-highlight\\" data-language=\\"swift\\"><pre class=\\"language-swift\\"><code class=\\"language-swift\\"><span class=\\"token keyword\\">let</span> workerQueue <span class=\\"token operator\\">=</span> <span class=\\"token function\\">DispatchQueue</span><span class=\\"token punctuation\\">(</span>label<span class=\\"token punctuation\\">:</span> <span class=\\"token string\\">\\"worker\\"</span><span class=\\"token punctuation\\">)</span></code></pre></div>\\n<p>At the end of the <code class=\\"language-text\\">App</code> class, add a helper function for atomically executing code:</p>\\n<div class=\\"gatsby-highlight\\" data-language=\\"swift\\"><pre class=\\"language-swift\\"><code class=\\"language-swift\\"><span class=\\"token keyword\\">func</span> <span class=\\"token function\\">execute</span><span class=\\"token punctuation\\">(</span><span class=\\"token number\\">_</span> block<span class=\\"token punctuation\\">:</span> <span class=\\"token punctuation\\">(</span><span class=\\"token punctuation\\">(</span><span class=\\"token punctuation\\">)</span> <span class=\\"token operator\\">-</span><span class=\\"token operator\\">></span> <span class=\\"token builtin\\">Void</span><span class=\\"token punctuation\\">)</span><span class=\\"token punctuation\\">)</span> <span class=\\"token punctuation\\">{</span>\\n    workerQueue<span class=\\"token punctuation\\">.</span>sync <span class=\\"token punctuation\\">{</span>\\n        <span class=\\"token function\\">block</span><span class=\\"token punctuation\\">(</span><span class=\\"token punctuation\\">)</span>\\n    <span class=\\"token punctuation\\">}</span>\\n<span class=\\"token punctuation\\">}</span></code></pre></div>\\n<p>Back in <code class=\\"language-text\\">RawRoutes.swift</code>, we wrap the code in our handlers with this execute function.</p>\\n<p>Your completed <code class=\\"language-text\\">RawRouting.swift</code> should now look as follows:</p>\\n<div class=\\"gatsby-highlight\\" data-language=\\"swift\\"><pre class=\\"language-swift\\"><code class=\\"language-swift\\"><span class=\\"token keyword\\">func</span> <span class=\\"token function\\">initializeRawRoutes</span><span class=\\"token punctuation\\">(</span>app<span class=\\"token punctuation\\">:</span> <span class=\\"token builtin\\">App</span><span class=\\"token punctuation\\">)</span> <span class=\\"token punctuation\\">{</span>\\n\\n    app<span class=\\"token punctuation\\">.</span>router<span class=\\"token punctuation\\">.</span><span class=\\"token function\\">post</span><span class=\\"token punctuation\\">(</span><span class=\\"token string\\">\\"/raw\\"</span><span class=\\"token punctuation\\">)</span> <span class=\\"token punctuation\\">{</span> request<span class=\\"token punctuation\\">,</span> response<span class=\\"token punctuation\\">,</span> next <span class=\\"token keyword\\">in</span>\\n        <span class=\\"token keyword\\">do</span> <span class=\\"token punctuation\\">{</span>\\n            <span class=\\"token keyword\\">let</span> book <span class=\\"token operator\\">=</span> <span class=\\"token keyword\\">try</span> request<span class=\\"token punctuation\\">.</span><span class=\\"token function\\">read</span><span class=\\"token punctuation\\">(</span><span class=\\"token keyword\\">as</span><span class=\\"token punctuation\\">:</span> <span class=\\"token builtin\\">Book</span><span class=\\"token punctuation\\">.</span><span class=\\"token keyword\\">self</span><span class=\\"token punctuation\\">)</span>\\n            app<span class=\\"token punctuation\\">.</span>execute <span class=\\"token punctuation\\">{</span>\\n                <span class=\\"token builtin\\">App</span><span class=\\"token punctuation\\">.</span>bookStore<span class=\\"token punctuation\\">.</span><span class=\\"token function\\">append</span><span class=\\"token punctuation\\">(</span>book<span class=\\"token punctuation\\">)</span>\\n            <span class=\\"token punctuation\\">}</span>\\n            response<span class=\\"token punctuation\\">.</span><span class=\\"token function\\">send</span><span class=\\"token punctuation\\">(</span>book<span class=\\"token punctuation\\">)</span>\\n        <span class=\\"token punctuation\\">}</span> <span class=\\"token keyword\\">catch</span> <span class=\\"token punctuation\\">{</span>\\n            <span class=\\"token keyword\\">let</span> <span class=\\"token number\\">_</span> <span class=\\"token operator\\">=</span> response<span class=\\"token punctuation\\">.</span><span class=\\"token function\\">send</span><span class=\\"token punctuation\\">(</span>status<span class=\\"token punctuation\\">:</span> <span class=\\"token punctuation\\">.</span>badRequest<span class=\\"token punctuation\\">)</span>\\n        <span class=\\"token punctuation\\">}</span>\\n        <span class=\\"token function\\">next</span><span class=\\"token punctuation\\">(</span><span class=\\"token punctuation\\">)</span>\\n    <span class=\\"token punctuation\\">}</span>\\n\\n    app<span class=\\"token punctuation\\">.</span>router<span class=\\"token punctuation\\">.</span><span class=\\"token keyword\\">get</span><span class=\\"token punctuation\\">(</span><span class=\\"token string\\">\\"/raw\\"</span><span class=\\"token punctuation\\">)</span> <span class=\\"token punctuation\\">{</span> request<span class=\\"token punctuation\\">,</span> response<span class=\\"token punctuation\\">,</span> next <span class=\\"token keyword\\">in</span>\\n        app<span class=\\"token punctuation\\">.</span>execute <span class=\\"token punctuation\\">{</span>\\n            response<span class=\\"token punctuation\\">.</span><span class=\\"token function\\">send</span><span class=\\"token punctuation\\">(</span><span class=\\"token builtin\\">App</span><span class=\\"token punctuation\\">.</span>bookStore<span class=\\"token punctuation\\">)</span>\\n        <span class=\\"token punctuation\\">}</span>\\n        <span class=\\"token function\\">next</span><span class=\\"token punctuation\\">(</span><span class=\\"token punctuation\\">)</span>\\n    <span class=\\"token punctuation\\">}</span>\\n\\n    app<span class=\\"token punctuation\\">.</span>router<span class=\\"token punctuation\\">.</span><span class=\\"token keyword\\">get</span><span class=\\"token punctuation\\">(</span><span class=\\"token string\\">\\"/raw/:id\\"</span><span class=\\"token punctuation\\">)</span> <span class=\\"token punctuation\\">{</span> request<span class=\\"token punctuation\\">,</span> response<span class=\\"token punctuation\\">,</span> next <span class=\\"token keyword\\">in</span>\\n        app<span class=\\"token punctuation\\">.</span>execute <span class=\\"token punctuation\\">{</span>\\n            <span class=\\"token keyword\\">guard</span> <span class=\\"token keyword\\">let</span> idString <span class=\\"token operator\\">=</span> request<span class=\\"token punctuation\\">.</span>parameters<span class=\\"token punctuation\\">[</span><span class=\\"token string\\">\\"id\\"</span><span class=\\"token punctuation\\">]</span><span class=\\"token punctuation\\">,</span>\\n                <span class=\\"token keyword\\">let</span> id <span class=\\"token operator\\">=</span> <span class=\\"token function\\">Int</span><span class=\\"token punctuation\\">(</span>idString<span class=\\"token punctuation\\">)</span><span class=\\"token punctuation\\">,</span>\\n                id <span class=\\"token operator\\">>=</span> <span class=\\"token number\\">0</span><span class=\\"token punctuation\\">,</span>\\n                id <span class=\\"token operator\\">&lt;</span> <span class=\\"token builtin\\">App</span><span class=\\"token punctuation\\">.</span>bookStore<span class=\\"token punctuation\\">.</span><span class=\\"token builtin\\">count</span>\\n                <span class=\\"token keyword\\">else</span> <span class=\\"token punctuation\\">{</span>\\n                    <span class=\\"token keyword\\">let</span> <span class=\\"token number\\">_</span> <span class=\\"token operator\\">=</span> response<span class=\\"token punctuation\\">.</span><span class=\\"token function\\">send</span><span class=\\"token punctuation\\">(</span>status<span class=\\"token punctuation\\">:</span> <span class=\\"token punctuation\\">.</span>badRequest<span class=\\"token punctuation\\">)</span>\\n                    <span class=\\"token keyword\\">return</span> <span class=\\"token function\\">next</span><span class=\\"token punctuation\\">(</span><span class=\\"token punctuation\\">)</span>\\n            <span class=\\"token punctuation\\">}</span>\\n            response<span class=\\"token punctuation\\">.</span><span class=\\"token function\\">send</span><span class=\\"token punctuation\\">(</span><span class=\\"token builtin\\">App</span><span class=\\"token punctuation\\">.</span>bookStore<span class=\\"token punctuation\\">[</span>id<span class=\\"token punctuation\\">]</span><span class=\\"token punctuation\\">)</span>\\n        <span class=\\"token punctuation\\">}</span>\\n        <span class=\\"token function\\">next</span><span class=\\"token punctuation\\">(</span><span class=\\"token punctuation\\">)</span>\\n    <span class=\\"token punctuation\\">}</span>\\n<span class=\\"token punctuation\\">}</span>\\n<span class=\\"token keyword\\">extension</span> <span class=\\"token builtin\\">App</span> <span class=\\"token punctuation\\">{</span>\\n    <span class=\\"token keyword\\">static</span> <span class=\\"token keyword\\">var</span> bookStore <span class=\\"token operator\\">=</span> <span class=\\"token punctuation\\">[</span><span class=\\"token builtin\\">Book</span><span class=\\"token punctuation\\">]</span><span class=\\"token punctuation\\">(</span><span class=\\"token punctuation\\">)</span>\\n<span class=\\"token punctuation\\">}</span></code></pre></div>\\n<p>We can continue to make POST and GET requests from our bookstore.</p>\\n<p>However, if the server is restarted, all the data will be lost and we will have an empty array again.</p>\\n<p>In the Database Guide we will look to resolve this issue and add persistence.</p>\\n<h2 id=\\"next-steps\\"><a href=\\"#next-steps\\" aria-label=\\"next steps permalink\\" class=\\"anchor\\"><svg aria-hidden=\\"true\\" focusable=\\"false\\" height=\\"16\\" version=\\"1.1\\" viewBox=\\"0 0 16 16\\" width=\\"16\\"><path fill-rule=\\"evenodd\\" d=\\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\\"></path></svg></a>Next steps</h2>\\n<p><a href=\\"../databases/what-are-databases\\">Databases</a>: Learn about databases and the database providers Kitura supports.</p>","frontmatter":{"path":"/docs/routing/raw-routing","title":"Raw Routing"}}},{"node":{"html":"<h1 id=\\"what-is-routing\\"><a href=\\"#what-is-routing\\" aria-label=\\"what is routing permalink\\" class=\\"anchor\\"><svg aria-hidden=\\"true\\" focusable=\\"false\\" height=\\"16\\" version=\\"1.1\\" viewBox=\\"0 0 16 16\\" width=\\"16\\"><path fill-rule=\\"evenodd\\" d=\\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\\"></path></svg></a>What is routing?</h1>\\n<p>Routing is the way in which requests (the combination of a URL and a HTTP method) are routed to the code that handles them.</p>\\n<p>When you navigated to <a href=\\"https://www.kitura.io\\">www.kitura.io</a> in your browser you were requesting the HTML file that is located there. The server hosting the files will respond with the requested file, if it exists, and you will see the file rendered in your browser. This means that under the covers there’s a server hosting the files for the kitura.io website. In this server there is a route defined that states if we receive a GET request on \\"/\\" then respond with the home page.</p>\\n<p>Here we mentioned a GET request being made on \\"/\\" but what does that mean? In the next section we will look at GET, which is an HTTP Method, in more detail.</p>\\n<hr>\\n<h2 id=\\"rest-apis\\"><a href=\\"#rest-apis\\" aria-label=\\"rest apis permalink\\" class=\\"anchor\\"><svg aria-hidden=\\"true\\" focusable=\\"false\\" height=\\"16\\" version=\\"1.1\\" viewBox=\\"0 0 16 16\\" width=\\"16\\"><path fill-rule=\\"evenodd\\" d=\\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\\"></path></svg></a>REST APIs</h2>\\n<p>Representational state transfer (REST) or RESTful APIs are a way of building web services to allow clients and servers to communicate using standard HTTP protocols. Essentially it’s an architectural and design pattern for building an API using HTTP methods, URI paths, and request and response body data.</p>\\n<h3 id=\\"http-methods\\"><a href=\\"#http-methods\\" aria-label=\\"http methods permalink\\" class=\\"anchor\\"><svg aria-hidden=\\"true\\" focusable=\\"false\\" height=\\"16\\" version=\\"1.1\\" viewBox=\\"0 0 16 16\\" width=\\"16\\"><path fill-rule=\\"evenodd\\" d=\\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\\"></path></svg></a>HTTP Methods</h3>\\n<p>An HTTP method is the part that defines what type of REST API we are calling. For example: A GET request gets a resource from the specified location, hence the name GET.</p>\\n<p>Below is a table of the main HTTP methods used in REST, listing their primary usage, what the request body should contain and what response we should expect from a call of that type.</p>\\n<table>\\n<thead>\\n<tr>\\n<th>HTTP Method</th>\\n<th>Usage</th>\\n<th>Request Body</th>\\n<th>Response Body</th>\\n</tr>\\n</thead>\\n<tbody>\\n<tr>\\n<td>GET</td>\\n<td>The GET method is used to retrieve resources only</td>\\n<td>No request body needed</td>\\n<td>Reponds with resource</td>\\n</tr>\\n<tr>\\n<td>POST</td>\\n<td>The POST method is used to create a new resource</td>\\n<td>The resource to be created</td>\\n<td>Reponds with the created resource</td>\\n</tr>\\n<tr>\\n<td>PUT</td>\\n<td>The PUT method updates an existing resource</td>\\n<td>The new version of a resource</td>\\n<td>Responds with the updated resource</td>\\n</tr>\\n<tr>\\n<td>DELETE</td>\\n<td>The DELETE method deletes an existing resource</td>\\n<td>No request body needed</td>\\n<td>No reponse body</td>\\n</tr>\\n<tr>\\n<td>PATCH</td>\\n<td>The PATCH method makes a partial update to a resource</td>\\n<td>The partially updated resource</td>\\n<td>Responds with the updated resource</td>\\n</tr>\\n</tbody>\\n</table>\\n<h3 id=\\"uri-paths\\"><a href=\\"#uri-paths\\" aria-label=\\"uri paths permalink\\" class=\\"anchor\\"><svg aria-hidden=\\"true\\" focusable=\\"false\\" height=\\"16\\" version=\\"1.1\\" viewBox=\\"0 0 16 16\\" width=\\"16\\"><path fill-rule=\\"evenodd\\" d=\\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\\"></path></svg></a>URI Paths</h3>\\n<p>A URI path is the path upon which this route is linked. That is to say when a request is made to the specified path we know this is the code block to execute. Here is an example:</p>\\n<div class=\\"gatsby-highlight\\" data-language=\\"swift\\"><pre class=\\"language-swift\\"><code class=\\"language-swift\\">router<span class=\\"token punctuation\\">.</span><span class=\\"token keyword\\">get</span><span class=\\"token punctuation\\">(</span><span class=\\"token string\\">\\"/hello\\"</span><span class=\\"token punctuation\\">)</span></code></pre></div>\\n<p>Above is an example of registering a GET method on the <code class=\\"language-text\\">&quot;/hello&quot;</code> path. Let\'s assume our server is running at localhost:8080, then if I want to make a call to this endpoint I could open <a href=\\"http://localhost:8080/hello\\">http://localhost:8080/hello</a> in my browser and view the response.</p>\\n<h3 id=\\"route-handler\\"><a href=\\"#route-handler\\" aria-label=\\"route handler permalink\\" class=\\"anchor\\"><svg aria-hidden=\\"true\\" focusable=\\"false\\" height=\\"16\\" version=\\"1.1\\" viewBox=\\"0 0 16 16\\" width=\\"16\\"><path fill-rule=\\"evenodd\\" d=\\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\\"></path></svg></a>Route handler</h3>\\n<p>Each route has a route handler. This is a closure or function that is executed when a request is made to the route\'s path. The route handlers contain the developer\'s logic for how to process incoming requests and what response should be sent.</p>\\n<p>If multiple route handlers match the path, they will be executed in the order that they are registered on the router. This is important when using middlewares, since they should normally be executed before the other handlers.</p>\\n<p>Kitura provides two \'types\' of routing, Raw Routing and Codable Routing. Over the next couple of sections we will discuss them and highlight their differences.</p>\\n<hr>\\n<h2 id=\\"raw-routing\\"><a href=\\"#raw-routing\\" aria-label=\\"raw routing permalink\\" class=\\"anchor\\"><svg aria-hidden=\\"true\\" focusable=\\"false\\" height=\\"16\\" version=\\"1.1\\" viewBox=\\"0 0 16 16\\" width=\\"16\\"><path fill-rule=\\"evenodd\\" d=\\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\\"></path></svg></a>Raw Routing</h2>\\n<p>Raw routing is where the route handlers were called with <code class=\\"language-text\\">RouterRequest</code> and <code class=\\"language-text\\">RouterResponse</code> objects with which to handle the client request and build the response, along with a next completion handler. This approach provides great flexibility and control, but requires you to understand the structure of requests, how to interpret HTTP request headers correctly, how to verify data, and to manually carry out things like JSON parsing.</p>\\n<p>The following is an example of a Raw Route:</p>\\n<div class=\\"gatsby-highlight\\" data-language=\\"swift\\"><pre class=\\"language-swift\\"><code class=\\"language-swift\\">router<span class=\\"token punctuation\\">.</span><span class=\\"token keyword\\">get</span><span class=\\"token punctuation\\">(</span><span class=\\"token string\\">\\"/\\"</span><span class=\\"token punctuation\\">)</span> <span class=\\"token punctuation\\">{</span> request<span class=\\"token punctuation\\">,</span> response<span class=\\"token punctuation\\">,</span> next <span class=\\"token keyword\\">in</span>\\n    response<span class=\\"token punctuation\\">.</span><span class=\\"token function\\">send</span><span class=\\"token punctuation\\">(</span><span class=\\"token string\\">\\"Hello world\\"</span><span class=\\"token punctuation\\">)</span>\\n    <span class=\\"token function\\">next</span><span class=\\"token punctuation\\">(</span><span class=\\"token punctuation\\">)</span>\\n<span class=\\"token punctuation\\">}</span></code></pre></div>\\n<h3 id=\\"router-request\\"><a href=\\"#router-request\\" aria-label=\\"router request permalink\\" class=\\"anchor\\"><svg aria-hidden=\\"true\\" focusable=\\"false\\" height=\\"16\\" version=\\"1.1\\" viewBox=\\"0 0 16 16\\" width=\\"16\\"><path fill-rule=\\"evenodd\\" d=\\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\\"></path></svg></a>Router Request</h3>\\n<p>The <code class=\\"language-text\\">RouterRequest</code> class is used to interact with incoming HTTP requests to the router. It contains and allows access to the request’s headers and body as well as other properties of the request. It can also perform content negotiation based on the request’s <code class=\\"language-text\\">Accept</code> header.</p>\\n<h3 id=\\"router-response\\"><a href=\\"#router-response\\" aria-label=\\"router response permalink\\" class=\\"anchor\\"><svg aria-hidden=\\"true\\" focusable=\\"false\\" height=\\"16\\" version=\\"1.1\\" viewBox=\\"0 0 16 16\\" width=\\"16\\"><path fill-rule=\\"evenodd\\" d=\\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\\"></path></svg></a>Router Response</h3>\\n<p>The <code class=\\"language-text\\">RouterResponse</code> class is used to define and work with the response that will be sent by the router. It contains and allows access to the HTTP response code (e.g. 404 Not Found), the HTTP headers and the body of the response. It can also render template files, using a template engine registered to the router.</p>\\n<h3 id=\\"next\\"><a href=\\"#next\\" aria-label=\\"next permalink\\" class=\\"anchor\\"><svg aria-hidden=\\"true\\" focusable=\\"false\\" height=\\"16\\" version=\\"1.1\\" viewBox=\\"0 0 16 16\\" width=\\"16\\"><path fill-rule=\\"evenodd\\" d=\\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\\"></path></svg></a>Next</h3>\\n<p>In Kitura, multiple handlers can be registered on a single route. The handlers can alter the request or response before passing them to the next handler. By having the <code class=\\"language-text\\">next</code> closure, we can register a handler that acts as a middleware and is called before your routes.</p>\\n<p>Once a handler is finished, it calls the next handler using the <code class=\\"language-text\\">next()</code> closure. If there are no more handlers, the router will send the response. If there was an error and you do not want to call the next handler, you can call <code class=\\"language-text\\">request.end()</code> to send back the response immediately. You must call <code class=\\"language-text\\">next()</code> or <code class=\\"language-text\\">request.end()</code> once, and only once, in each route handler because the route handlers are asynchronous.</p>\\n<p>For example:</p>\\n<div class=\\"gatsby-highlight\\" data-language=\\"swift\\"><pre class=\\"language-swift\\"><code class=\\"language-swift\\">router<span class=\\"token punctuation\\">.</span><span class=\\"token keyword\\">get</span><span class=\\"token punctuation\\">(</span><span class=\\"token string\\">\\"/\\"</span><span class=\\"token punctuation\\">)</span> <span class=\\"token punctuation\\">{</span> request<span class=\\"token punctuation\\">,</span> response<span class=\\"token punctuation\\">,</span> next <span class=\\"token keyword\\">in</span>\\n    response<span class=\\"token punctuation\\">.</span><span class=\\"token function\\">send</span><span class=\\"token punctuation\\">(</span><span class=\\"token string\\">\\"Hello from the 1st route!\\"</span><span class=\\"token punctuation\\">)</span>\\n    <span class=\\"token function\\">next</span><span class=\\"token punctuation\\">(</span><span class=\\"token punctuation\\">)</span>\\n<span class=\\"token punctuation\\">}</span>\\n\\nrouter<span class=\\"token punctuation\\">.</span><span class=\\"token keyword\\">get</span><span class=\\"token punctuation\\">(</span><span class=\\"token string\\">\\"/\\"</span><span class=\\"token punctuation\\">)</span> <span class=\\"token punctuation\\">{</span> request<span class=\\"token punctuation\\">,</span> response<span class=\\"token punctuation\\">,</span> next <span class=\\"token keyword\\">in</span>\\n    response<span class=\\"token punctuation\\">.</span><span class=\\"token function\\">send</span><span class=\\"token punctuation\\">(</span><span class=\\"token string\\">\\"Hello from the 2nd route!\\"</span><span class=\\"token punctuation\\">)</span>\\n    <span class=\\"token function\\">next</span><span class=\\"token punctuation\\">(</span><span class=\\"token punctuation\\">)</span>\\n<span class=\\"token punctuation\\">}</span></code></pre></div>\\n<p>If a request comes into the server on \\"/\\" then the following would be returned to the client:</p>\\n<div class=\\"gatsby-highlight\\" data-language=\\"text\\"><pre class=\\"language-text\\"><code class=\\"language-text\\">&quot;Hello from the 1st route!&quot;\\n&quot;Hello from the 2nd route!&quot;</code></pre></div>\\n<p>As you can see one route is called immediately after the other, this is made possible because of <code class=\\"language-text\\">next()</code>.</p>\\n<hr>\\n<h2 id=\\"codable-routing\\"><a href=\\"#codable-routing\\" aria-label=\\"codable routing permalink\\" class=\\"anchor\\"><svg aria-hidden=\\"true\\" focusable=\\"false\\" height=\\"16\\" version=\\"1.1\\" viewBox=\\"0 0 16 16\\" width=\\"16\\"><path fill-rule=\\"evenodd\\" d=\\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\\"></path></svg></a>Codable Routing</h2>\\n<p>Codable routing is where the route handlers are like normal functions you might define elsewhere in your code; they take struct or class types as parameters, and respond with struct or class types via a completion handler. The only requirement is that those types conform to the <code class=\\"language-text\\">Codable</code> protocol introduced in Swift 4 (hence the name).</p>\\n<div class=\\"gatsby-highlight\\" data-language=\\"swift\\"><pre class=\\"language-swift\\"><code class=\\"language-swift\\"><span class=\\"token keyword\\">func</span> <span class=\\"token function\\">getHandler</span><span class=\\"token punctuation\\">(</span>completion<span class=\\"token punctuation\\">:</span> <span class=\\"token punctuation\\">(</span><span class=\\"token punctuation\\">[</span><span class=\\"token builtin\\">String</span><span class=\\"token punctuation\\">]</span><span class=\\"token operator\\">?</span><span class=\\"token punctuation\\">,</span> <span class=\\"token builtin\\">RequestError</span><span class=\\"token operator\\">?</span><span class=\\"token punctuation\\">)</span> <span class=\\"token operator\\">-</span><span class=\\"token operator\\">></span> <span class=\\"token builtin\\">Void</span><span class=\\"token punctuation\\">)</span> <span class=\\"token punctuation\\">{</span>\\n    <span class=\\"token function\\">completion</span><span class=\\"token punctuation\\">(</span><span class=\\"token punctuation\\">[</span><span class=\\"token string\\">\\"Hello World!\\"</span><span class=\\"token punctuation\\">]</span><span class=\\"token punctuation\\">,</span> <span class=\\"token constant\\">nil</span><span class=\\"token punctuation\\">)</span>\\n<span class=\\"token punctuation\\">}</span>\\n\\nrouter<span class=\\"token punctuation\\">.</span><span class=\\"token keyword\\">get</span><span class=\\"token punctuation\\">(</span><span class=\\"token string\\">\\"/\\"</span><span class=\\"token punctuation\\">,</span> handler<span class=\\"token punctuation\\">:</span> getHandler<span class=\\"token punctuation\\">)</span></code></pre></div>\\n<h3 id=\\"codable-model\\"><a href=\\"#codable-model\\" aria-label=\\"codable model permalink\\" class=\\"anchor\\"><svg aria-hidden=\\"true\\" focusable=\\"false\\" height=\\"16\\" version=\\"1.1\\" viewBox=\\"0 0 16 16\\" width=\\"16\\"><path fill-rule=\\"evenodd\\" d=\\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\\"></path></svg></a>Codable model</h3>\\n<p>Any type that conforms to <code class=\\"language-text\\">Codable</code> can be used as a parameter in Codable routing, including custom structs and classes. As we are simulating a bookstore in our guides, we are going to need to define a book. The book is a model so the first thing we need to do is create our Models folder:</p>\\n<div class=\\"gatsby-highlight\\" data-language=\\"text\\"><pre class=\\"language-text\\"><code class=\\"language-text\\">mkdir Sources/Application/Models</code></pre></div>\\n<p>This is the directory where we will store all of our models.</p>\\n<p>Next we will create our <code class=\\"language-text\\">Book.swift</code> file:</p>\\n<div class=\\"gatsby-highlight\\" data-language=\\"text\\"><pre class=\\"language-text\\"><code class=\\"language-text\\">touch Sources/Application/Models/Book.swift</code></pre></div>\\n<p>We will open the <code class=\\"language-text\\">Book.swift</code> file in our default text editor:</p>\\n<div class=\\"gatsby-highlight\\" data-language=\\"text\\"><pre class=\\"language-text\\"><code class=\\"language-text\\">open Sources/Application/Models/Book.swift</code></pre></div>\\n<p>Inside this file we define our Book:</p>\\n<div class=\\"gatsby-highlight\\" data-language=\\"swift\\"><pre class=\\"language-swift\\"><code class=\\"language-swift\\"><span class=\\"token keyword\\">struct</span> <span class=\\"token builtin\\">Book</span><span class=\\"token punctuation\\">:</span> <span class=\\"token builtin\\">Codable</span> <span class=\\"token punctuation\\">{</span>\\n    <span class=\\"token keyword\\">let</span> id<span class=\\"token punctuation\\">:</span> <span class=\\"token builtin\\">Int</span>\\n    <span class=\\"token keyword\\">let</span> title<span class=\\"token punctuation\\">:</span> <span class=\\"token builtin\\">String</span>\\n    <span class=\\"token keyword\\">let</span> price<span class=\\"token punctuation\\">:</span> <span class=\\"token builtin\\">Double</span>\\n    <span class=\\"token keyword\\">let</span> genre<span class=\\"token punctuation\\">:</span> <span class=\\"token builtin\\">String</span>\\n\\n    <span class=\\"token keyword\\">init</span><span class=\\"token punctuation\\">(</span>id<span class=\\"token punctuation\\">:</span> <span class=\\"token builtin\\">Int</span><span class=\\"token punctuation\\">,</span> title<span class=\\"token punctuation\\">:</span> <span class=\\"token builtin\\">String</span><span class=\\"token punctuation\\">,</span> price<span class=\\"token punctuation\\">:</span> <span class=\\"token builtin\\">Double</span><span class=\\"token punctuation\\">,</span> genre<span class=\\"token punctuation\\">:</span> <span class=\\"token builtin\\">String</span><span class=\\"token punctuation\\">)</span> <span class=\\"token punctuation\\">{</span>\\n        <span class=\\"token keyword\\">self</span><span class=\\"token punctuation\\">.</span>id <span class=\\"token operator\\">=</span> id\\n        <span class=\\"token keyword\\">self</span><span class=\\"token punctuation\\">.</span>title <span class=\\"token operator\\">=</span> title\\n        <span class=\\"token keyword\\">self</span><span class=\\"token punctuation\\">.</span>price <span class=\\"token operator\\">=</span> price\\n        <span class=\\"token keyword\\">self</span><span class=\\"token punctuation\\">.</span>genre <span class=\\"token operator\\">=</span> genre\\n    <span class=\\"token punctuation\\">}</span>\\n<span class=\\"token punctuation\\">}</span></code></pre></div>\\n<hr>\\n<h2 id=\\"conclusion\\"><a href=\\"#conclusion\\" aria-label=\\"conclusion permalink\\" class=\\"anchor\\"><svg aria-hidden=\\"true\\" focusable=\\"false\\" height=\\"16\\" version=\\"1.1\\" viewBox=\\"0 0 16 16\\" width=\\"16\\"><path fill-rule=\\"evenodd\\" d=\\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\\"></path></svg></a>Conclusion</h2>\\n<p>Codable routing provides a simple approach to building RESTful APIs. It adds compile-time type safety, creates cleaner code and can automatically generate an <a href=\\"https://swagger.io/docs/specification/about/\\">OpenAPI specification</a>. If you are building a <a href=\\"https://samnewman.io/patterns/architectural/bff/\\">Backend For Frontend (BFF)</a> for an iOS app, you should probably use Codable routing.</p>\\n<p>Raw routing is more flexible and provides greater control over your route handler implementation but does not have the same inherent type safety. If you are creating a non-RESTful API, such as a web application, then you will need to use Raw routing.</p>\\n<h2 id=\\"next-steps\\"><a href=\\"#next-steps\\" aria-label=\\"next steps permalink\\" class=\\"anchor\\"><svg aria-hidden=\\"true\\" focusable=\\"false\\" height=\\"16\\" version=\\"1.1\\" viewBox=\\"0 0 16 16\\" width=\\"16\\"><path fill-rule=\\"evenodd\\" d=\\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\\"></path></svg></a>Next steps</h2>\\n<p><a href=\\"./codable-routing\\">Add Codable Routing</a>: Use Kitura\'s Codable routing to define routes on your server.</p>\\n<p><a href=\\"./raw-routing\\">Add Raw Routing</a>: Use Kitura\'s Raw routing to define routes on your server.</p>","frontmatter":{"path":"/docs/routing/what-is-routing","title":"What is routing?"}}},{"node":{"html":"<h1 id=\\"raw-routing-session\\"><a href=\\"#raw-routing-session\\" aria-label=\\"raw routing session permalink\\" class=\\"anchor\\"><svg aria-hidden=\\"true\\" focusable=\\"false\\" height=\\"16\\" version=\\"1.1\\" viewBox=\\"0 0 16 16\\" width=\\"16\\"><path fill-rule=\\"evenodd\\" d=\\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\\"></path></svg></a>Raw Routing Session</h1>\\n<p>HTTP is a stateless connection protocol, that is the server can\'t distinguish one request from another. Sessions and cookies provide HTTP with state, they allow the server to know who is making a specific request and respond accordingly.</p>\\n<p>This guide demonstrates how to use the <a href=\\"https://github.com/IBM-Swift/Kitura-Session\\">Kitura-Session</a> package to manage user sessions in Kitura with Raw routing. If you are using Codable routing, follow the guide for <a href=\\"./codable-session\\">Kitura Session with type-safe sessions</a>.</p>\\n<hr>\\n<h2 id=\\"step-1-create-your-session-routes\\"><a href=\\"#step-1-create-your-session-routes\\" aria-label=\\"step 1 create your session routes permalink\\" class=\\"anchor\\"><svg aria-hidden=\\"true\\" focusable=\\"false\\" height=\\"16\\" version=\\"1.1\\" viewBox=\\"0 0 16 16\\" width=\\"16\\"><path fill-rule=\\"evenodd\\" d=\\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\\"></path></svg></a>Step 1: Create your session routes</h2>\\n<p>In this guide we are going to create two Kitura routes:</p>\\n<ul>\\n<li>A GET route, where we retrieve the books from our session.</li>\\n<li>A POST route, where we store a book in our session.</li>\\n</ul>\\n<p>We are using <a href=\\"/docs/routing/what-is-routing#codable-model\\">the Book model from the routing guide</a> in our routes, however you could use any codable object.</p>\\n<p>To use Kitura-Session from a server, we need to <a href=\\"https://github.com/IBM-Swift/Kitura-Session#add-dependencies\\">add Kitura-Session to our dependencies</a>.</p>\\n<blockquote>\\n<p>If you don\'t have a server, follow our <a href=\\"../getting-started/create-server-cli\\">Create a server</a> guide.</p>\\n</blockquote>\\n<p>Once that is complete, open your <code class=\\"language-text\\">Application.swift</code> file in your default text editor (or Xcode if you prefer):</p>\\n<div class=\\"gatsby-highlight\\" data-language=\\"text\\"><pre class=\\"language-text\\"><code class=\\"language-text\\">open Sources/Application/Application.swift</code></pre></div>\\n<p>Inside the <code class=\\"language-text\\">postInit()</code> function add:</p>\\n<div class=\\"gatsby-highlight\\" data-language=\\"swift\\"><pre class=\\"language-swift\\"><code class=\\"language-swift\\"><span class=\\"token function\\">initializeSessionRawRoutes</span><span class=\\"token punctuation\\">(</span>app<span class=\\"token punctuation\\">:</span> <span class=\\"token keyword\\">self</span><span class=\\"token punctuation\\">)</span></code></pre></div>\\n<p>Create a new file called <code class=\\"language-text\\">SessionRawRoutes.swift</code> to define the session routes in:</p>\\n<div class=\\"gatsby-highlight\\" data-language=\\"text\\"><pre class=\\"language-text\\"><code class=\\"language-text\\">touch Sources/Application/Routes/SessionRawRoutes.swift</code></pre></div>\\n<p>Open the <code class=\\"language-text\\">SessionRawRoutes.swift</code> file:</p>\\n<div class=\\"gatsby-highlight\\" data-language=\\"text\\"><pre class=\\"language-text\\"><code class=\\"language-text\\">open Sources/Application/Routes/SessionRawRoutes.swift</code></pre></div>\\n<p>Inside this file we will add the code for our session routes:</p>\\n<div class=\\"gatsby-highlight\\" data-language=\\"swift\\"><pre class=\\"language-swift\\"><code class=\\"language-swift\\"><span class=\\"token keyword\\">import</span> <span class=\\"token builtin\\">KituraSession</span>\\n\\n<span class=\\"token keyword\\">func</span> <span class=\\"token function\\">initializeSessionRawRoutes</span><span class=\\"token punctuation\\">(</span>app<span class=\\"token punctuation\\">:</span> <span class=\\"token builtin\\">App</span><span class=\\"token punctuation\\">)</span> <span class=\\"token punctuation\\">{</span>\\n    <span class=\\"token comment\\">// Define the Session here</span>\\n\\n    app<span class=\\"token punctuation\\">.</span>router<span class=\\"token punctuation\\">.</span><span class=\\"token keyword\\">get</span><span class=\\"token punctuation\\">(</span><span class=\\"token string\\">\\"/session\\"</span><span class=\\"token punctuation\\">)</span> <span class=\\"token punctuation\\">{</span> request<span class=\\"token punctuation\\">,</span> response<span class=\\"token punctuation\\">,</span> next <span class=\\"token keyword\\">in</span>\\n        <span class=\\"token comment\\">// Get the books from the session here</span>\\n        <span class=\\"token function\\">next</span><span class=\\"token punctuation\\">(</span><span class=\\"token punctuation\\">)</span>\\n    <span class=\\"token punctuation\\">}</span>\\n\\n    app<span class=\\"token punctuation\\">.</span>router<span class=\\"token punctuation\\">.</span><span class=\\"token function\\">post</span><span class=\\"token punctuation\\">(</span><span class=\\"token string\\">\\"/session\\"</span><span class=\\"token punctuation\\">)</span> <span class=\\"token punctuation\\">{</span> request<span class=\\"token punctuation\\">,</span> response<span class=\\"token punctuation\\">,</span> next <span class=\\"token keyword\\">in</span>\\n        <span class=\\"token comment\\">// Add books to the session here</span>\\n        <span class=\\"token function\\">next</span><span class=\\"token punctuation\\">(</span><span class=\\"token punctuation\\">)</span>\\n    <span class=\\"token punctuation\\">}</span>\\n<span class=\\"token punctuation\\">}</span></code></pre></div>\\n<hr>\\n<h2 id=\\"step-2-set-up-a-session\\"><a href=\\"#step-2-set-up-a-session\\" aria-label=\\"step 2 set up a session permalink\\" class=\\"anchor\\"><svg aria-hidden=\\"true\\" focusable=\\"false\\" height=\\"16\\" version=\\"1.1\\" viewBox=\\"0 0 16 16\\" width=\\"16\\"><path fill-rule=\\"evenodd\\" d=\\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\\"></path></svg></a>Step 2: Set up a session</h2>\\n<p>We will use a session to persist data between the user\'s requests. The session will provide the user with a cookie that the user will attach to future requests. That cookie is then linked to a session store, where we keep data we want to be associated with that user\'s cookie. This allows us to add features such as an online shopping cart, where multiple requests add items to the cart until we are ready to checkout.</p>\\n<p>When we create our session we can configure it with the following parameters:</p>\\n<ul>\\n<li><code class=\\"language-text\\">secret</code>: A <code class=\\"language-text\\">String</code> to be used for session encoding. This is your session\'s password and should be treated as such.</li>\\n<li><code class=\\"language-text\\">cookie</code>: A list of options for the session\'s cookies. In this example we will use this to set the cookie\'s name.</li>\\n<li><code class=\\"language-text\\">store</code>: A session backing store that implements the <code class=\\"language-text\\">Store</code> protocol. This determines where session data is persisted. In this example we do not set this, meaning the data is persisted on the server.</li>\\n</ul>\\n<blockquote>\\n<p>For live applications, you should use a persistent store, such as a database, or <a href=\\"https://github.com/IBM-Swift/Kitura-Session-Redis\\">Kitura-Session-Redis</a>.</p>\\n</blockquote>\\n<p>To set up our session, we create a <code class=\\"language-text\\">Session</code> middleware with our desired parameters.</p>\\n<p>Inside your <code class=\\"language-text\\">initializeSessionRawRoutes</code>, add the following code:</p>\\n<div class=\\"gatsby-highlight\\" data-language=\\"swift\\"><pre class=\\"language-swift\\"><code class=\\"language-swift\\"><span class=\\"token keyword\\">let</span> session <span class=\\"token operator\\">=</span> <span class=\\"token function\\">Session</span><span class=\\"token punctuation\\">(</span>secret<span class=\\"token punctuation\\">:</span> <span class=\\"token string\\">\\"password\\"</span><span class=\\"token punctuation\\">,</span> cookie<span class=\\"token punctuation\\">:</span> <span class=\\"token punctuation\\">[</span><span class=\\"token builtin\\">CookieParameter</span><span class=\\"token punctuation\\">.</span><span class=\\"token function\\">name</span><span class=\\"token punctuation\\">(</span><span class=\\"token string\\">\\"Raw-cookie\\"</span><span class=\\"token punctuation\\">)</span><span class=\\"token punctuation\\">]</span><span class=\\"token punctuation\\">)</span></code></pre></div>\\n<p>Below this line, register the middleware on our router:</p>\\n<div class=\\"gatsby-highlight\\" data-language=\\"swift\\"><pre class=\\"language-swift\\"><code class=\\"language-swift\\">app<span class=\\"token punctuation\\">.</span>router<span class=\\"token punctuation\\">.</span><span class=\\"token function\\">all</span><span class=\\"token punctuation\\">(</span>middleware<span class=\\"token punctuation\\">:</span> session<span class=\\"token punctuation\\">)</span></code></pre></div>\\n<p>We should now have access to our session using <code class=\\"language-text\\">request.session</code>.</p>\\n<p>Add the following <code class=\\"language-text\\">guard</code> statement to both route handlers to ensure that this is the case:</p>\\n<div class=\\"gatsby-highlight\\" data-language=\\"swift\\"><pre class=\\"language-swift\\"><code class=\\"language-swift\\"><span class=\\"token keyword\\">guard</span> <span class=\\"token keyword\\">let</span> session <span class=\\"token operator\\">=</span> request<span class=\\"token punctuation\\">.</span>session <span class=\\"token keyword\\">else</span> <span class=\\"token punctuation\\">{</span>\\n    <span class=\\"token keyword\\">return</span> <span class=\\"token keyword\\">try</span> response<span class=\\"token punctuation\\">.</span><span class=\\"token function\\">status</span><span class=\\"token punctuation\\">(</span><span class=\\"token punctuation\\">.</span>internalServerError<span class=\\"token punctuation\\">)</span><span class=\\"token punctuation\\">.</span><span class=\\"token function\\">end</span><span class=\\"token punctuation\\">(</span><span class=\\"token punctuation\\">)</span>\\n<span class=\\"token punctuation\\">}</span></code></pre></div>\\n<p>Our <code class=\\"language-text\\">SessionRawRoutes.swift</code> file should now look as follows:</p>\\n<div class=\\"gatsby-highlight\\" data-language=\\"swift\\"><pre class=\\"language-swift\\"><code class=\\"language-swift\\"><span class=\\"token keyword\\">import</span> <span class=\\"token builtin\\">KituraSession</span>\\n\\n<span class=\\"token keyword\\">func</span> <span class=\\"token function\\">initializeSessionRawRoutes</span><span class=\\"token punctuation\\">(</span>app<span class=\\"token punctuation\\">:</span> <span class=\\"token builtin\\">App</span><span class=\\"token punctuation\\">)</span> <span class=\\"token punctuation\\">{</span>\\n    <span class=\\"token keyword\\">let</span> session <span class=\\"token operator\\">=</span> <span class=\\"token function\\">Session</span><span class=\\"token punctuation\\">(</span>secret<span class=\\"token punctuation\\">:</span> <span class=\\"token string\\">\\"password\\"</span><span class=\\"token punctuation\\">,</span> cookie<span class=\\"token punctuation\\">:</span> <span class=\\"token punctuation\\">[</span><span class=\\"token builtin\\">CookieParameter</span><span class=\\"token punctuation\\">.</span><span class=\\"token function\\">name</span><span class=\\"token punctuation\\">(</span><span class=\\"token string\\">\\"Raw-cookie\\"</span><span class=\\"token punctuation\\">)</span><span class=\\"token punctuation\\">]</span><span class=\\"token punctuation\\">)</span>\\n    app<span class=\\"token punctuation\\">.</span>router<span class=\\"token punctuation\\">.</span><span class=\\"token function\\">all</span><span class=\\"token punctuation\\">(</span>middleware<span class=\\"token punctuation\\">:</span> session<span class=\\"token punctuation\\">)</span>\\n\\n    app<span class=\\"token punctuation\\">.</span>router<span class=\\"token punctuation\\">.</span><span class=\\"token keyword\\">get</span><span class=\\"token punctuation\\">(</span><span class=\\"token string\\">\\"/session\\"</span><span class=\\"token punctuation\\">)</span> <span class=\\"token punctuation\\">{</span> request<span class=\\"token punctuation\\">,</span> response<span class=\\"token punctuation\\">,</span> next <span class=\\"token keyword\\">in</span>\\n        <span class=\\"token keyword\\">guard</span> <span class=\\"token keyword\\">let</span> session <span class=\\"token operator\\">=</span> request<span class=\\"token punctuation\\">.</span>session <span class=\\"token keyword\\">else</span> <span class=\\"token punctuation\\">{</span>\\n            <span class=\\"token keyword\\">return</span> <span class=\\"token keyword\\">try</span> response<span class=\\"token punctuation\\">.</span><span class=\\"token function\\">status</span><span class=\\"token punctuation\\">(</span><span class=\\"token punctuation\\">.</span>internalServerError<span class=\\"token punctuation\\">)</span><span class=\\"token punctuation\\">.</span><span class=\\"token function\\">end</span><span class=\\"token punctuation\\">(</span><span class=\\"token punctuation\\">)</span>\\n        <span class=\\"token punctuation\\">}</span>\\n        <span class=\\"token comment\\">// Get the books from the session here</span>\\n        <span class=\\"token function\\">next</span><span class=\\"token punctuation\\">(</span><span class=\\"token punctuation\\">)</span>\\n    <span class=\\"token punctuation\\">}</span>\\n\\n    app<span class=\\"token punctuation\\">.</span>router<span class=\\"token punctuation\\">.</span><span class=\\"token function\\">post</span><span class=\\"token punctuation\\">(</span><span class=\\"token string\\">\\"/session\\"</span><span class=\\"token punctuation\\">)</span> <span class=\\"token punctuation\\">{</span> request<span class=\\"token punctuation\\">,</span> response<span class=\\"token punctuation\\">,</span> next <span class=\\"token keyword\\">in</span>\\n        <span class=\\"token keyword\\">guard</span> <span class=\\"token keyword\\">let</span> session <span class=\\"token operator\\">=</span> request<span class=\\"token punctuation\\">.</span>session <span class=\\"token keyword\\">else</span> <span class=\\"token punctuation\\">{</span>\\n            <span class=\\"token keyword\\">return</span> <span class=\\"token keyword\\">try</span> response<span class=\\"token punctuation\\">.</span><span class=\\"token function\\">status</span><span class=\\"token punctuation\\">(</span><span class=\\"token punctuation\\">.</span>internalServerError<span class=\\"token punctuation\\">)</span><span class=\\"token punctuation\\">.</span><span class=\\"token function\\">end</span><span class=\\"token punctuation\\">(</span><span class=\\"token punctuation\\">)</span>\\n        <span class=\\"token punctuation\\">}</span>\\n        <span class=\\"token comment\\">// Add books to the session here</span>\\n        <span class=\\"token function\\">next</span><span class=\\"token punctuation\\">(</span><span class=\\"token punctuation\\">)</span>\\n    <span class=\\"token punctuation\\">}</span>\\n<span class=\\"token punctuation\\">}</span></code></pre></div>\\n<hr>\\n<h2 id=\\"step-3-add-the-session-get-route\\"><a href=\\"#step-3-add-the-session-get-route\\" aria-label=\\"step 3 add the session get route permalink\\" class=\\"anchor\\"><svg aria-hidden=\\"true\\" focusable=\\"false\\" height=\\"16\\" version=\\"1.1\\" viewBox=\\"0 0 16 16\\" width=\\"16\\"><path fill-rule=\\"evenodd\\" d=\\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\\"></path></svg></a>Step 3: Add the session GET route</h2>\\n<p>Now we have access to our session, we can use it to persist data.</p>\\n<p>We are going to be persisting the <code class=\\"language-text\\">Book</code> model, but you can use any <code class=\\"language-text\\">Codable</code> Swift type.</p>\\n<p>The session is stored as a <code class=\\"language-text\\">[String: Any]</code> dictionary, however by declaring the expected type, we can directly decode our model from the session.</p>\\n<p>In our case, we decode an array of books by adding the following code to our GET handler:</p>\\n<div class=\\"gatsby-highlight\\" data-language=\\"swift\\"><pre class=\\"language-swift\\"><code class=\\"language-swift\\"><span class=\\"token keyword\\">let</span> books<span class=\\"token punctuation\\">:</span> <span class=\\"token punctuation\\">[</span><span class=\\"token builtin\\">Book</span><span class=\\"token punctuation\\">]</span> <span class=\\"token operator\\">=</span> session<span class=\\"token punctuation\\">[</span><span class=\\"token string\\">\\"books\\"</span><span class=\\"token punctuation\\">]</span> <span class=\\"token operator\\">?</span><span class=\\"token operator\\">?</span> <span class=\\"token punctuation\\">[</span><span class=\\"token punctuation\\">]</span></code></pre></div>\\n<p>This will get all the books stored for the \\"books\\" key in our model. If there are no books it returns an empty array.</p>\\n<p>Once we have our books, we send them to the user in the response:</p>\\n<div class=\\"gatsby-highlight\\" data-language=\\"swift\\"><pre class=\\"language-swift\\"><code class=\\"language-swift\\">response<span class=\\"token punctuation\\">.</span><span class=\\"token function\\">send</span><span class=\\"token punctuation\\">(</span>books<span class=\\"token punctuation\\">)</span></code></pre></div>\\n<p>Our completed GET route should now look as follows:</p>\\n<div class=\\"gatsby-highlight\\" data-language=\\"swift\\"><pre class=\\"language-swift\\"><code class=\\"language-swift\\">app<span class=\\"token punctuation\\">.</span>router<span class=\\"token punctuation\\">.</span><span class=\\"token keyword\\">get</span><span class=\\"token punctuation\\">(</span><span class=\\"token string\\">\\"/session\\"</span><span class=\\"token punctuation\\">)</span> <span class=\\"token punctuation\\">{</span> request<span class=\\"token punctuation\\">,</span> response<span class=\\"token punctuation\\">,</span> next <span class=\\"token keyword\\">in</span>\\n    <span class=\\"token keyword\\">guard</span> <span class=\\"token keyword\\">let</span> session <span class=\\"token operator\\">=</span> request<span class=\\"token punctuation\\">.</span>session <span class=\\"token keyword\\">else</span> <span class=\\"token punctuation\\">{</span>\\n        <span class=\\"token keyword\\">return</span> <span class=\\"token keyword\\">try</span> response<span class=\\"token punctuation\\">.</span><span class=\\"token function\\">status</span><span class=\\"token punctuation\\">(</span><span class=\\"token punctuation\\">.</span>internalServerError<span class=\\"token punctuation\\">)</span><span class=\\"token punctuation\\">.</span><span class=\\"token function\\">end</span><span class=\\"token punctuation\\">(</span><span class=\\"token punctuation\\">)</span>\\n    <span class=\\"token punctuation\\">}</span>\\n    <span class=\\"token keyword\\">let</span> books<span class=\\"token punctuation\\">:</span> <span class=\\"token punctuation\\">[</span><span class=\\"token builtin\\">Book</span><span class=\\"token punctuation\\">]</span> <span class=\\"token operator\\">=</span> session<span class=\\"token punctuation\\">[</span><span class=\\"token string\\">\\"books\\"</span><span class=\\"token punctuation\\">]</span> <span class=\\"token operator\\">?</span><span class=\\"token operator\\">?</span> <span class=\\"token punctuation\\">[</span><span class=\\"token punctuation\\">]</span>\\n    response<span class=\\"token punctuation\\">.</span><span class=\\"token function\\">send</span><span class=\\"token punctuation\\">(</span>books<span class=\\"token punctuation\\">)</span>\\n    <span class=\\"token function\\">next</span><span class=\\"token punctuation\\">(</span><span class=\\"token punctuation\\">)</span>\\n<span class=\\"token punctuation\\">}</span></code></pre></div>\\n<hr>\\n<h2 id=\\"step-4-add-the-session-post-route\\"><a href=\\"#step-4-add-the-session-post-route\\" aria-label=\\"step 4 add the session post route permalink\\" class=\\"anchor\\"><svg aria-hidden=\\"true\\" focusable=\\"false\\" height=\\"16\\" version=\\"1.1\\" viewBox=\\"0 0 16 16\\" width=\\"16\\"><path fill-rule=\\"evenodd\\" d=\\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\\"></path></svg></a>Step 4: Add the session POST route</h2>\\n<p>Now we need some books to retrieve. We will do this by adding a book that has been posted into our route.</p>\\n<p>The first thing we need to do is decode the book.</p>\\n<p>We do this by adding the following code to our POST handler:</p>\\n<div class=\\"gatsby-highlight\\" data-language=\\"swift\\"><pre class=\\"language-swift\\"><code class=\\"language-swift\\"><span class=\\"token keyword\\">let</span> inputBook <span class=\\"token operator\\">=</span> <span class=\\"token keyword\\">try</span> request<span class=\\"token punctuation\\">.</span><span class=\\"token function\\">read</span><span class=\\"token punctuation\\">(</span><span class=\\"token keyword\\">as</span><span class=\\"token punctuation\\">:</span> <span class=\\"token builtin\\">Book</span><span class=\\"token punctuation\\">.</span><span class=\\"token keyword\\">self</span><span class=\\"token punctuation\\">)</span></code></pre></div>\\n<p>Next we need to get the books that are currently in the session:</p>\\n<div class=\\"gatsby-highlight\\" data-language=\\"swift\\"><pre class=\\"language-swift\\"><code class=\\"language-swift\\"><span class=\\"token keyword\\">var</span> books<span class=\\"token punctuation\\">:</span> <span class=\\"token punctuation\\">[</span><span class=\\"token builtin\\">Book</span><span class=\\"token punctuation\\">]</span> <span class=\\"token operator\\">=</span> session<span class=\\"token punctuation\\">[</span><span class=\\"token string\\">\\"books\\"</span><span class=\\"token punctuation\\">]</span> <span class=\\"token operator\\">?</span><span class=\\"token operator\\">?</span> <span class=\\"token punctuation\\">[</span><span class=\\"token punctuation\\">]</span></code></pre></div>\\n<p>Now we append our new book to the existing books and store it in the session for the \\"books\\" key:</p>\\n<div class=\\"gatsby-highlight\\" data-language=\\"swift\\"><pre class=\\"language-swift\\"><code class=\\"language-swift\\">books<span class=\\"token punctuation\\">.</span><span class=\\"token function\\">append</span><span class=\\"token punctuation\\">(</span>inputBook<span class=\\"token punctuation\\">)</span>\\nsession<span class=\\"token punctuation\\">[</span><span class=\\"token string\\">\\"books\\"</span><span class=\\"token punctuation\\">]</span> <span class=\\"token operator\\">=</span> books</code></pre></div>\\n<p>Finally we respond with the book which we added to the session, to represent a successful request.</p>\\n<div class=\\"gatsby-highlight\\" data-language=\\"swift\\"><pre class=\\"language-swift\\"><code class=\\"language-swift\\">response<span class=\\"token punctuation\\">.</span><span class=\\"token function\\">status</span><span class=\\"token punctuation\\">(</span><span class=\\"token punctuation\\">.</span>created<span class=\\"token punctuation\\">)</span>\\nresponse<span class=\\"token punctuation\\">.</span><span class=\\"token function\\">send</span><span class=\\"token punctuation\\">(</span>inputBook<span class=\\"token punctuation\\">)</span></code></pre></div>\\n<p>Our completed POST route should now look as follows:</p>\\n<div class=\\"gatsby-highlight\\" data-language=\\"swift\\"><pre class=\\"language-swift\\"><code class=\\"language-swift\\">app<span class=\\"token punctuation\\">.</span>router<span class=\\"token punctuation\\">.</span><span class=\\"token function\\">post</span><span class=\\"token punctuation\\">(</span><span class=\\"token string\\">\\"/session\\"</span><span class=\\"token punctuation\\">)</span> <span class=\\"token punctuation\\">{</span> request<span class=\\"token punctuation\\">,</span> response<span class=\\"token punctuation\\">,</span> next <span class=\\"token keyword\\">in</span>\\n    <span class=\\"token keyword\\">guard</span> <span class=\\"token keyword\\">let</span> session <span class=\\"token operator\\">=</span> request<span class=\\"token punctuation\\">.</span>session <span class=\\"token keyword\\">else</span> <span class=\\"token punctuation\\">{</span>\\n        <span class=\\"token keyword\\">return</span> <span class=\\"token keyword\\">try</span> response<span class=\\"token punctuation\\">.</span><span class=\\"token function\\">status</span><span class=\\"token punctuation\\">(</span><span class=\\"token punctuation\\">.</span>internalServerError<span class=\\"token punctuation\\">)</span><span class=\\"token punctuation\\">.</span><span class=\\"token function\\">end</span><span class=\\"token punctuation\\">(</span><span class=\\"token punctuation\\">)</span>\\n    <span class=\\"token punctuation\\">}</span>\\n    <span class=\\"token keyword\\">let</span> inputBook <span class=\\"token operator\\">=</span> <span class=\\"token keyword\\">try</span> request<span class=\\"token punctuation\\">.</span><span class=\\"token function\\">read</span><span class=\\"token punctuation\\">(</span><span class=\\"token keyword\\">as</span><span class=\\"token punctuation\\">:</span> <span class=\\"token builtin\\">Book</span><span class=\\"token punctuation\\">.</span><span class=\\"token keyword\\">self</span><span class=\\"token punctuation\\">)</span>\\n    <span class=\\"token keyword\\">var</span> books<span class=\\"token punctuation\\">:</span> <span class=\\"token punctuation\\">[</span><span class=\\"token builtin\\">Book</span><span class=\\"token punctuation\\">]</span> <span class=\\"token operator\\">=</span> session<span class=\\"token punctuation\\">[</span><span class=\\"token string\\">\\"books\\"</span><span class=\\"token punctuation\\">]</span> <span class=\\"token operator\\">?</span><span class=\\"token operator\\">?</span> <span class=\\"token punctuation\\">[</span><span class=\\"token punctuation\\">]</span>\\n    books<span class=\\"token punctuation\\">.</span><span class=\\"token function\\">append</span><span class=\\"token punctuation\\">(</span>inputBook<span class=\\"token punctuation\\">)</span>\\n    session<span class=\\"token punctuation\\">[</span><span class=\\"token string\\">\\"books\\"</span><span class=\\"token punctuation\\">]</span> <span class=\\"token operator\\">=</span> books\\n    response<span class=\\"token punctuation\\">.</span><span class=\\"token function\\">status</span><span class=\\"token punctuation\\">(</span><span class=\\"token punctuation\\">.</span>created<span class=\\"token punctuation\\">)</span>\\n    response<span class=\\"token punctuation\\">.</span><span class=\\"token function\\">send</span><span class=\\"token punctuation\\">(</span>inputBook<span class=\\"token punctuation\\">)</span>\\n    <span class=\\"token function\\">next</span><span class=\\"token punctuation\\">(</span><span class=\\"token punctuation\\">)</span>\\n<span class=\\"token punctuation\\">}</span></code></pre></div>\\n<hr>\\n<h2 id=\\"step-5-test-our-session\\"><a href=\\"#step-5-test-our-session\\" aria-label=\\"step 5 test our session permalink\\" class=\\"anchor\\"><svg aria-hidden=\\"true\\" focusable=\\"false\\" height=\\"16\\" version=\\"1.1\\" viewBox=\\"0 0 16 16\\" width=\\"16\\"><path fill-rule=\\"evenodd\\" d=\\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\\"></path></svg></a>Step 5: Test our Session</h2>\\n<p>We have now completed the code for our session. This will allow us to add books to our cart and persist them between requests.</p>\\n<p>Our completed <code class=\\"language-text\\">SessionRawRoutes.swift</code> file should now look as follows:</p>\\n<div class=\\"gatsby-highlight\\" data-language=\\"swift\\"><pre class=\\"language-swift\\"><code class=\\"language-swift\\"><span class=\\"token keyword\\">import</span> <span class=\\"token builtin\\">KituraSession</span>\\n\\n<span class=\\"token keyword\\">func</span> <span class=\\"token function\\">initializeSessionRawRoutes</span><span class=\\"token punctuation\\">(</span>app<span class=\\"token punctuation\\">:</span> <span class=\\"token builtin\\">App</span><span class=\\"token punctuation\\">)</span> <span class=\\"token punctuation\\">{</span>\\n    <span class=\\"token keyword\\">let</span> session <span class=\\"token operator\\">=</span> <span class=\\"token function\\">Session</span><span class=\\"token punctuation\\">(</span>secret<span class=\\"token punctuation\\">:</span> <span class=\\"token string\\">\\"password\\"</span><span class=\\"token punctuation\\">,</span> cookie<span class=\\"token punctuation\\">:</span> <span class=\\"token punctuation\\">[</span><span class=\\"token builtin\\">CookieParameter</span><span class=\\"token punctuation\\">.</span><span class=\\"token function\\">name</span><span class=\\"token punctuation\\">(</span><span class=\\"token string\\">\\"Raw-cookie\\"</span><span class=\\"token punctuation\\">)</span><span class=\\"token punctuation\\">]</span><span class=\\"token punctuation\\">)</span>\\n    app<span class=\\"token punctuation\\">.</span>router<span class=\\"token punctuation\\">.</span><span class=\\"token function\\">all</span><span class=\\"token punctuation\\">(</span>middleware<span class=\\"token punctuation\\">:</span> session<span class=\\"token punctuation\\">)</span>\\n\\n    app<span class=\\"token punctuation\\">.</span>router<span class=\\"token punctuation\\">.</span><span class=\\"token keyword\\">get</span><span class=\\"token punctuation\\">(</span><span class=\\"token string\\">\\"/session\\"</span><span class=\\"token punctuation\\">)</span> <span class=\\"token punctuation\\">{</span> request<span class=\\"token punctuation\\">,</span> response<span class=\\"token punctuation\\">,</span> next <span class=\\"token keyword\\">in</span>\\n        <span class=\\"token keyword\\">guard</span> <span class=\\"token keyword\\">let</span> session <span class=\\"token operator\\">=</span> request<span class=\\"token punctuation\\">.</span>session <span class=\\"token keyword\\">else</span> <span class=\\"token punctuation\\">{</span>\\n            <span class=\\"token keyword\\">return</span> <span class=\\"token keyword\\">try</span> response<span class=\\"token punctuation\\">.</span><span class=\\"token function\\">status</span><span class=\\"token punctuation\\">(</span><span class=\\"token punctuation\\">.</span>internalServerError<span class=\\"token punctuation\\">)</span><span class=\\"token punctuation\\">.</span><span class=\\"token function\\">end</span><span class=\\"token punctuation\\">(</span><span class=\\"token punctuation\\">)</span>\\n        <span class=\\"token punctuation\\">}</span>\\n        <span class=\\"token keyword\\">let</span> books<span class=\\"token punctuation\\">:</span> <span class=\\"token punctuation\\">[</span><span class=\\"token builtin\\">Book</span><span class=\\"token punctuation\\">]</span> <span class=\\"token operator\\">=</span> session<span class=\\"token punctuation\\">[</span><span class=\\"token string\\">\\"books\\"</span><span class=\\"token punctuation\\">]</span> <span class=\\"token operator\\">?</span><span class=\\"token operator\\">?</span> <span class=\\"token punctuation\\">[</span><span class=\\"token punctuation\\">]</span>\\n        response<span class=\\"token punctuation\\">.</span><span class=\\"token function\\">send</span><span class=\\"token punctuation\\">(</span>books<span class=\\"token punctuation\\">)</span>\\n        <span class=\\"token function\\">next</span><span class=\\"token punctuation\\">(</span><span class=\\"token punctuation\\">)</span>\\n    <span class=\\"token punctuation\\">}</span>\\n\\n    app<span class=\\"token punctuation\\">.</span>router<span class=\\"token punctuation\\">.</span><span class=\\"token function\\">post</span><span class=\\"token punctuation\\">(</span><span class=\\"token string\\">\\"/session\\"</span><span class=\\"token punctuation\\">)</span> <span class=\\"token punctuation\\">{</span> request<span class=\\"token punctuation\\">,</span> response<span class=\\"token punctuation\\">,</span> next <span class=\\"token keyword\\">in</span>\\n        <span class=\\"token keyword\\">guard</span> <span class=\\"token keyword\\">let</span> session <span class=\\"token operator\\">=</span> request<span class=\\"token punctuation\\">.</span>session <span class=\\"token keyword\\">else</span> <span class=\\"token punctuation\\">{</span>\\n            <span class=\\"token keyword\\">return</span> <span class=\\"token keyword\\">try</span> response<span class=\\"token punctuation\\">.</span><span class=\\"token function\\">status</span><span class=\\"token punctuation\\">(</span><span class=\\"token punctuation\\">.</span>internalServerError<span class=\\"token punctuation\\">)</span><span class=\\"token punctuation\\">.</span><span class=\\"token function\\">end</span><span class=\\"token punctuation\\">(</span><span class=\\"token punctuation\\">)</span>\\n        <span class=\\"token punctuation\\">}</span>\\n        <span class=\\"token keyword\\">let</span> inputBook <span class=\\"token operator\\">=</span> <span class=\\"token keyword\\">try</span> request<span class=\\"token punctuation\\">.</span><span class=\\"token function\\">read</span><span class=\\"token punctuation\\">(</span><span class=\\"token keyword\\">as</span><span class=\\"token punctuation\\">:</span> <span class=\\"token builtin\\">Book</span><span class=\\"token punctuation\\">.</span><span class=\\"token keyword\\">self</span><span class=\\"token punctuation\\">)</span>\\n        <span class=\\"token keyword\\">var</span> books<span class=\\"token punctuation\\">:</span> <span class=\\"token punctuation\\">[</span><span class=\\"token builtin\\">Book</span><span class=\\"token punctuation\\">]</span> <span class=\\"token operator\\">=</span> session<span class=\\"token punctuation\\">[</span><span class=\\"token string\\">\\"books\\"</span><span class=\\"token punctuation\\">]</span> <span class=\\"token operator\\">?</span><span class=\\"token operator\\">?</span> <span class=\\"token punctuation\\">[</span><span class=\\"token punctuation\\">]</span>\\n        books<span class=\\"token punctuation\\">.</span><span class=\\"token function\\">append</span><span class=\\"token punctuation\\">(</span>inputBook<span class=\\"token punctuation\\">)</span>\\n        session<span class=\\"token punctuation\\">[</span><span class=\\"token string\\">\\"books\\"</span><span class=\\"token punctuation\\">]</span> <span class=\\"token operator\\">=</span> books\\n        response<span class=\\"token punctuation\\">.</span><span class=\\"token function\\">status</span><span class=\\"token punctuation\\">(</span><span class=\\"token punctuation\\">.</span>created<span class=\\"token punctuation\\">)</span>\\n        response<span class=\\"token punctuation\\">.</span><span class=\\"token function\\">send</span><span class=\\"token punctuation\\">(</span>inputBook<span class=\\"token punctuation\\">)</span>\\n        <span class=\\"token function\\">next</span><span class=\\"token punctuation\\">(</span><span class=\\"token punctuation\\">)</span>\\n    <span class=\\"token punctuation\\">}</span>\\n<span class=\\"token punctuation\\">}</span></code></pre></div>\\n<p>To test our POST route, we will send a request using curl, with cookies enabled.</p>\\n<p>Open Terminal and enter the following:</p>\\n<div class=\\"gatsby-highlight\\" data-language=\\"text\\"><pre class=\\"language-text\\"><code class=\\"language-text\\">curl -X POST \\\\\\nhttp://localhost:8080/session \\\\\\n-b cookies.txt -c cookies.txt \\\\\\n-H &#39;content-type: application/json&#39; \\\\\\n-d &#39;{\\n    &quot;id&quot;: 1,\\n    &quot;title&quot;: &quot;War and Peace&quot;,\\n    &quot;price&quot;: 10.99,\\n    &quot;genre&quot;: &quot;Historical drama&quot;\\n}&#39;</code></pre></div>\\n<p>If our request was successful, our book will be returned to us:</p>\\n<div class=\\"gatsby-highlight\\" data-language=\\"text\\"><pre class=\\"language-text\\"><code class=\\"language-text\\">{&quot;id&quot;:1,&quot;title&quot;:&quot;War and Peace&quot;,&quot;price&quot;:10.99,&quot;genre&quot;:&quot;Historical drama&quot;}</code></pre></div>\\n<p>We will also have a cookie that curl has stored in the <code class=\\"language-text\\">cookies.txt</code> file.</p>\\n<p>To retrieve our book, we make another curl request to our server:</p>\\n<div class=\\"gatsby-highlight\\" data-language=\\"text\\"><pre class=\\"language-text\\"><code class=\\"language-text\\">curl -X GET \\\\\\nhttp://localhost:8080/session \\\\\\n-b cookies.txt -c cookies.txt</code></pre></div>\\n<p>If the request is successful, it will return the book we just sent to the server.</p>\\n<div class=\\"gatsby-highlight\\" data-language=\\"text\\"><pre class=\\"language-text\\"><code class=\\"language-text\\">[{&quot;id&quot;:1,&quot;title&quot;:&quot;War and Peace&quot;,&quot;price&quot;:10.99,&quot;genre&quot;:&quot;Historical drama&quot;}]</code></pre></div>\\n<p>The cookie we sent with our request has identifed our session, so that our saved book can be returned.</p>\\n<p>Each user making requests to these routes will create their own basket of books.</p>\\n<p>We can demonstrate this by deleting our cookie:</p>\\n<div class=\\"gatsby-highlight\\" data-language=\\"text\\"><pre class=\\"language-text\\"><code class=\\"language-text\\">rm cookies.txt</code></pre></div>\\n<p>Followed by making a new GET request:</p>\\n<div class=\\"gatsby-highlight\\" data-language=\\"text\\"><pre class=\\"language-text\\"><code class=\\"language-text\\">curl -X GET \\\\\\nhttp://localhost:8080/session \\\\\\n-b cookies.txt -c cookies.txt</code></pre></div>\\n<p>This represents a user without a session so we are returned an empty array:</p>\\n<div class=\\"gatsby-highlight\\" data-language=\\"text\\"><pre class=\\"language-text\\"><code class=\\"language-text\\">[]</code></pre></div>\\n<hr>\\n<h2 id=\\"next-steps\\"><a href=\\"#next-steps\\" aria-label=\\"next steps permalink\\" class=\\"anchor\\"><svg aria-hidden=\\"true\\" focusable=\\"false\\" height=\\"16\\" version=\\"1.1\\" viewBox=\\"0 0 16 16\\" width=\\"16\\"><path fill-rule=\\"evenodd\\" d=\\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\\"></path></svg></a>Next steps</h2>\\n<p><a href=\\"../authentication/what-is-authentication\\">Authentication</a>: Learn about authentication and what Kitura provides.</p>","frontmatter":{"path":"/docs/sessions/raw-session","title":"Raw Routing Session"}}},{"node":{"html":"<h1 id=\\"signing-and-verifying-jwts-with-rsa\\"><a href=\\"#signing-and-verifying-jwts-with-rsa\\" aria-label=\\"signing and verifying jwts with rsa permalink\\" class=\\"anchor\\"><svg aria-hidden=\\"true\\" focusable=\\"false\\" height=\\"16\\" version=\\"1.1\\" viewBox=\\"0 0 16 16\\" width=\\"16\\"><path fill-rule=\\"evenodd\\" d=\\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\\"></path></svg></a>Signing and verifying JWTs with RSA</h1>\\n<p>You can process JWTs using RSA cryptography. This uses asymmetric keys with a private key for signing and a public key for verifying. The public key allows anyone to verify a JWT but only the provider can create them. ECDSA is recommended over RSA since it uses smaller keys, requires less processing power and produces smaller signatures.</p>\\n<hr>\\n<h2 id=\\"step-1-create-your-rsa-keys\\"><a href=\\"#step-1-create-your-rsa-keys\\" aria-label=\\"step 1 create your rsa keys permalink\\" class=\\"anchor\\"><svg aria-hidden=\\"true\\" focusable=\\"false\\" height=\\"16\\" version=\\"1.1\\" viewBox=\\"0 0 16 16\\" width=\\"16\\"><path fill-rule=\\"evenodd\\" d=\\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\\"></path></svg></a>Step 1: Create your RSA keys</h2>\\n<p>You can generate RSA keys in terminal using the following OpenSSL commands:</p>\\n<div class=\\"gatsby-highlight\\" data-language=\\"text\\"><pre class=\\"language-text\\"><code class=\\"language-text\\">openssl genrsa -out privateKey.pem 2048</code></pre></div>\\n<div class=\\"gatsby-highlight\\" data-language=\\"text\\"><pre class=\\"language-text\\"><code class=\\"language-text\\">openssl rsa -in privateKey.pem -pubout -outform PEM -out publicKey.pem</code></pre></div>\\n<p>For simplicity you can use the following pre-generated keys.</p>\\n<p>Add the following RSA PEM strings (Or the ones you generated) to your <code class=\\"language-text\\">App</code> extension:</p>\\n<div class=\\"gatsby-highlight\\" data-language=\\"swift\\"><pre class=\\"language-swift\\"><code class=\\"language-swift\\"><span class=\\"token keyword\\">static</span> <span class=\\"token keyword\\">let</span> privateKey <span class=\\"token operator\\">=</span> <span class=\\"token string\\">\\"\\"</span>\\"\\n<span class=\\"token operator\\">--</span><span class=\\"token operator\\">--</span><span class=\\"token operator\\">-</span><span class=\\"token constant\\">BEGIN</span> <span class=\\"token constant\\">RSA</span> <span class=\\"token constant\\">PRIVATE</span> <span class=\\"token constant\\">KEY</span><span class=\\"token operator\\">--</span><span class=\\"token operator\\">--</span><span class=\\"token operator\\">-</span>\\n<span class=\\"token builtin\\">MIIEpQIBAAKCAQEAxyebvXKgG7VHTUArwIPLL6uruJuaYTuspaI793JQK</span><span class=\\"token operator\\">/</span>3XIJ1O\\n8KRXqWvy2Awo<span class=\\"token operator\\">+</span>po1IeKIGioCwD7mVbN2oX9yC8K<span class=\\"token operator\\">+</span><span class=\\"token builtin\\">VDUJrpxz1Bve</span><span class=\\"token operator\\">+</span>zLZ59x81TO0\\n<span class=\\"token builtin\\">IlgbugjduGBmnKTElL</span><span class=\\"token operator\\">/</span><span class=\\"token builtin\\">Y7MbI2SIJheBfxqcvopc5U</span><span class=\\"token operator\\">+</span>j3eVLvl3mTPx5T9i<span class=\\"token operator\\">/</span>qutmw\\n<span class=\\"token builtin\\">L7qfk</span><span class=\\"token operator\\">/</span>bOOgV3sMVa<span class=\\"token operator\\">/</span><span class=\\"token builtin\\">Q9SXE4ZE1737UHUgcBJFp5okqSKBQw6kxZ7HsDSLDIZJRKH</span>\\nvW3NiCIrK83JvQp4tYWi4Sb3rDl3TyRlqDM4Ly0YQ6be5IsPfmut8NENDoviyZRd\\nihnN6TuBk3zUfb4MkcO<span class=\\"token operator\\">/</span><span class=\\"token builtin\\">KUGub37zRQbgB5KQmwIDAQABAoIBAQCal</span><span class=\\"token operator\\">/</span><span class=\\"token builtin\\">N8HxOMDq8X</span>\\nl12fJm8<span class=\\"token operator\\">+</span><span class=\\"token builtin\\">RPua5Sb0nXcKaCI2lgUH8RbimVoi0N</span><span class=\\"token operator\\">+</span><span class=\\"token operator\\">/</span>gy1SajYROk1OTWOrM7tI8kqo\\nchP<span class=\\"token operator\\">/</span>j0e<span class=\\"token operator\\">/</span><span class=\\"token builtin\\">O1</span><span class=\\"token operator\\">+</span>1TCqE4avEFhKEWlfudSht86G8GzsCsUkzi5l7tSdn9Hh2bGSSsKpF\\nwwN12GfQxaTZrvkTs76KjfQwReGVMwPf5D67968Eani<span class=\\"token operator\\">+</span>sj02ODYT99sQd0Zs9Jkd\\nnqjIkDCeAQYgUUpsut<span class=\\"token operator\\">/</span>0mtodwrJlQXGS1DjOSfbUbdXTzQOR6a5uHMCdqNG2Dqrv\\n<span class=\\"token builtin\\">GkzdViwzAfwNz3ntdqn2YVnCPQwdOArrP6iKIPukMC5zckMCdcvoeEOLY</span><span class=\\"token operator\\">+</span>7SwGvB\\nsrWM7Xj5AoGBAO7OhOOAWoI9RJ2onfrB4xi84cdcnAq<span class=\\"token operator\\">+</span>lQij<span class=\\"token comment\\">//yC+rTNC4fu7eJp</span>\\n<span class=\\"token builtin\\">MbF9C7P7XicD2xTJgfjddYW7H6yc5t2BChmICXbEv0K0</span><span class=\\"token operator\\">/</span>kebc5MzaZK264u9fxk6\\n<span class=\\"token builtin\\">MToLWReCFYQ5pmqgqeKJ2CV86byDFYVf0cSt4PcpOXfdHQzjA</span><span class=\\"token operator\\">/</span><span class=\\"token builtin\\">S5qMslAoGBANV</span><span class=\\"token operator\\">+</span>\\n<span class=\\"token builtin\\">QfTBQe</span><span class=\\"token operator\\">/</span>bkTVRRlY1YcghPZr6sR7cUbyXX0ou8dDdAdSZ1VOwDmIZhnq0<span class=\\"token operator\\">/</span>w<span class=\\"token operator\\">/</span><span class=\\"token builtin\\">HzJQm</span>\\n<span class=\\"token builtin\\">UMw2zjs37y9Mf60xLlvY8bbhU1rlZ8vZr</span><span class=\\"token operator\\">+</span>0xm8K4fYlnt<span class=\\"token operator\\">+</span><span class=\\"token builtin\\">ONNjv6puYvF5IPKad3</span>\\n<span class=\\"token builtin\\">KvafIOelY8liLqo9gXJYUZGZcxRikiKtZotQJwC</span><span class=\\"token operator\\">/</span><span class=\\"token builtin\\">AoGBAN3rz3S3p</span><span class=\\"token operator\\">+</span><span class=\\"token builtin\\">SWWTiGJOGN</span>\\n4qPvi4XAG0ak20yfU1luwtrYHdoiALFB<span class=\\"token operator\\">/</span>qspQIHunA13uNU1efIyo282ePXpDWZU\\n73TQhbL4naC5IACdhqcJxRdRo81FuWJRQMPnHdEJ00MAbBV03ssmPFaCIZhM3OgI\\n<span class=\\"token builtin\\">JqE20PP</span><span class=\\"token operator\\">/</span><span class=\\"token builtin\\">PGeWdNOv99Ip4qF9AoGAGeGxi0N2g</span><span class=\\"token operator\\">+</span>aBZw5QUZktHn7xIf2sRUp<span class=\\"token operator\\">+</span><span class=\\"token builtin\\">Wjeb</span>\\npLmmNSTl2OlBVGDujXP8upmApmAZbAhtGSS3wbQZOgmzHMLulNHrE7mjSkyvVaYx\\n<span class=\\"token builtin\\">TrcJ5ARLq8G4KEzxOzo6y4L</span><span class=\\"token comment\\">//4P5D8VBnx5RdeO2Ai7160uDiuIsGVOaAOmmP6/3</span>\\n04HHCK8CgYEAuS4wfgKWL9nRInjOjrKd9SSnHFWbmD4PfrbjtNY69R3FqryTmT1e\\n9GUyAQTpdIn46LYDczkQJpg8TIN<span class=\\"token operator\\">/</span>3yDHb9TErmspsAEDnFHD7Dsxi0LlbPkSdhls\\ncQGNrHxp2xvM<span class=\\"token operator\\">+</span><span class=\\"token builtin\\">LKFW1y3K6XUJhZZSKEVQvR3v4QVxCUxglbGJ5BTNXY</span><span class=\\"token operator\\">=</span>\\n<span class=\\"token operator\\">--</span><span class=\\"token operator\\">--</span><span class=\\"token operator\\">-</span><span class=\\"token constant\\">END</span> <span class=\\"token constant\\">RSA</span> <span class=\\"token constant\\">PRIVATE</span> <span class=\\"token constant\\">KEY</span><span class=\\"token operator\\">--</span><span class=\\"token operator\\">--</span><span class=\\"token operator\\">-</span>\\n<span class=\\"token string\\">\\"\\"</span>\\"\\n<span class=\\"token keyword\\">static</span> <span class=\\"token keyword\\">let</span> publicKey <span class=\\"token operator\\">=</span> <span class=\\"token string\\">\\"\\"</span>\\"\\n<span class=\\"token operator\\">--</span><span class=\\"token operator\\">--</span><span class=\\"token operator\\">-</span><span class=\\"token constant\\">BEGIN</span> <span class=\\"token constant\\">PUBLIC</span> <span class=\\"token constant\\">KEY</span><span class=\\"token operator\\">--</span><span class=\\"token operator\\">--</span><span class=\\"token operator\\">-</span>\\n<span class=\\"token builtin\\">MIIBIjANBgkqhkiG9w0BAQEFAAOCAQ8AMIIBCgKCAQEAxyebvXKgG7VHTUArwIPL</span>\\n<span class=\\"token builtin\\">L6uruJuaYTuspaI793JQK</span><span class=\\"token operator\\">/</span>3XIJ1O8KRXqWvy2Awo<span class=\\"token operator\\">+</span>po1IeKIGioCwD7mVbN2oX9y\\n<span class=\\"token builtin\\">C8K</span><span class=\\"token operator\\">+</span><span class=\\"token builtin\\">VDUJrpxz1Bve</span><span class=\\"token operator\\">+</span>zLZ59x81TO0IlgbugjduGBmnKTElL<span class=\\"token operator\\">/</span><span class=\\"token builtin\\">Y7MbI2SIJheBfxqcv</span>\\nopc5U<span class=\\"token operator\\">+</span>j3eVLvl3mTPx5T9i<span class=\\"token operator\\">/</span>qutmwL7qfk<span class=\\"token operator\\">/</span>bOOgV3sMVa<span class=\\"token operator\\">/</span><span class=\\"token builtin\\">Q9SXE4ZE1737UHUgcBJ</span>\\n<span class=\\"token builtin\\">Fp5okqSKBQw6kxZ7HsDSLDIZJRKHvW3NiCIrK83JvQp4tYWi4Sb3rDl3TyRlqDM4</span>\\n<span class=\\"token builtin\\">Ly0YQ6be5IsPfmut8NENDoviyZRdihnN6TuBk3zUfb4MkcO</span><span class=\\"token operator\\">/</span><span class=\\"token builtin\\">KUGub37zRQbgB5KQ</span>\\nmwIDAQAB\\n<span class=\\"token operator\\">--</span><span class=\\"token operator\\">--</span><span class=\\"token operator\\">-</span><span class=\\"token constant\\">END</span> <span class=\\"token constant\\">PUBLIC</span> <span class=\\"token constant\\">KEY</span><span class=\\"token operator\\">--</span><span class=\\"token operator\\">--</span><span class=\\"token operator\\">-</span>\\n<span class=\\"token string\\">\\"\\"</span>\\"</code></pre></div>\\n<hr>\\n<h2 id=\\"step-2-create-your-jwtsigner\\"><a href=\\"#step-2-create-your-jwtsigner\\" aria-label=\\"step 2 create your jwtsigner permalink\\" class=\\"anchor\\"><svg aria-hidden=\\"true\\" focusable=\\"false\\" height=\\"16\\" version=\\"1.1\\" viewBox=\\"0 0 16 16\\" width=\\"16\\"><path fill-rule=\\"evenodd\\" d=\\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\\"></path></svg></a>Step 2: Create your JWTSigner</h2>\\n<p>The <code class=\\"language-text\\">JWTSigner</code> is used to sign a <code class=\\"language-text\\">JWT</code> instance and produce a signed JWT string.</p>\\n<p>Inside the <code class=\\"language-text\\">App</code> extension, create an RSA <code class=\\"language-text\\">JWTSigner</code> by providing the private key:</p>\\n<div class=\\"gatsby-highlight\\" data-language=\\"swift\\"><pre class=\\"language-swift\\"><code class=\\"language-swift\\"><span class=\\"token keyword\\">static</span> <span class=\\"token keyword\\">let</span> jwtSigner <span class=\\"token operator\\">=</span> <span class=\\"token builtin\\">JWTSigner</span><span class=\\"token punctuation\\">.</span><span class=\\"token function\\">rs256</span><span class=\\"token punctuation\\">(</span>privateKey<span class=\\"token punctuation\\">:</span> <span class=\\"token function\\">Data</span><span class=\\"token punctuation\\">(</span>privateKey<span class=\\"token punctuation\\">.</span>utf8<span class=\\"token punctuation\\">)</span><span class=\\"token punctuation\\">)</span></code></pre></div>\\n<hr>\\n<h2 id=\\"step-3-create-your-jwtverifier\\"><a href=\\"#step-3-create-your-jwtverifier\\" aria-label=\\"step 3 create your jwtverifier permalink\\" class=\\"anchor\\"><svg aria-hidden=\\"true\\" focusable=\\"false\\" height=\\"16\\" version=\\"1.1\\" viewBox=\\"0 0 16 16\\" width=\\"16\\"><path fill-rule=\\"evenodd\\" d=\\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\\"></path></svg></a>Step 3: Create your JWTVerifier</h2>\\n<p>The <code class=\\"language-text\\">JWTVerifier</code> is used to verify a signed JWT string. This ensures the signature was generated using the corresponding private key and the JWT has not been changed.</p>\\n<p>Inside the <code class=\\"language-text\\">App</code> extension, we create an RSA <code class=\\"language-text\\">JWTVerifier</code> by providing the public key:</p>\\n<div class=\\"gatsby-highlight\\" data-language=\\"swift\\"><pre class=\\"language-swift\\"><code class=\\"language-swift\\"><span class=\\"token keyword\\">static</span> <span class=\\"token keyword\\">let</span> jwtVerifier <span class=\\"token operator\\">=</span> <span class=\\"token builtin\\">JWTVerifier</span><span class=\\"token punctuation\\">.</span><span class=\\"token function\\">rs256</span><span class=\\"token punctuation\\">(</span>publicKey<span class=\\"token punctuation\\">:</span> <span class=\\"token function\\">Data</span><span class=\\"token punctuation\\">(</span>publicKey<span class=\\"token punctuation\\">.</span>utf8<span class=\\"token punctuation\\">)</span><span class=\\"token punctuation\\">)</span></code></pre></div>\\n<hr>\\n<p>Now you can return to the <a href=\\"./jwt#step-2-set-up-your-signing-and-verifying-algorithm\\">JSON Web Token Authentication</a> guide.</p>","frontmatter":{"path":"/docs/authentication/jwt-rsa","title":"Signing and verifying JWTs with RSA"}}},{"node":{"html":"<h1 id=\\"json-web-token-authentication\\"><a href=\\"#json-web-token-authentication\\" aria-label=\\"json web token authentication permalink\\" class=\\"anchor\\"><svg aria-hidden=\\"true\\" focusable=\\"false\\" height=\\"16\\" version=\\"1.1\\" viewBox=\\"0 0 16 16\\" width=\\"16\\"><path fill-rule=\\"evenodd\\" d=\\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\\"></path></svg></a>JSON Web Token Authentication</h1>\\n<p>A JSON Web Token (JWT) defines a compact and self-contained way for securely transmitting information between parties as a JSON object. You can find out more about JWTs at <a href=\\"https://jwt.io/\\">JWT.IO</a>.</p>\\n<p><a href=\\"https://github.com/IBM-Swift/Swift-JWT\\">Swift-JWT</a> is our implementation of JSON Web Token using Swift. It allows you to create, sign and verify JWTs on iOS, macOS and Linux using a range of algorithms.  <a href=\\"https://github.com/IBM-Swift/Kitura-CredentialsJWT\\">Kitura-CredentialsJWT</a> is a JWT plugin to use with the existing Kitura-Credentials package that offers both Codable and Raw routing methods for easily authenticating JWTs. This guide will demonstrate how to use Swift-JWT and Kitura-CredentialsJWT to implement Single Sign On (SSO) authentication for your Kitura routes. This will allow a user to sign in once and then to access resources from other routes without having to repeat the authentication process.</p>\\n<hr>\\n<h2 id=\\"step-1-create-the-jwt-routes\\"><a href=\\"#step-1-create-the-jwt-routes\\" aria-label=\\"step 1 create the jwt routes permalink\\" class=\\"anchor\\"><svg aria-hidden=\\"true\\" focusable=\\"false\\" height=\\"16\\" version=\\"1.1\\" viewBox=\\"0 0 16 16\\" width=\\"16\\"><path fill-rule=\\"evenodd\\" d=\\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\\"></path></svg></a>Step 1: Create the JWT routes</h2>\\n<p>To use JWTs from a server, we need to add <a href=\\"https://github.com/IBM-Swift/Kitura-CredentialsJWT#add-dependencies\\">Kitura-CredentialsJWT</a> to our dependencies.</p>\\n<blockquote>\\n<p>If you don\'t have a server, follow our <a href=\\"../getting-started/create-server-cli\\">Create a server</a> guide.</p>\\n</blockquote>\\n<p>Once we have added Kitura-CredentialsJWT, we need a file for our JWT routes.</p>\\n<p>Firstly, open your <code class=\\"language-text\\">Application.swift</code> file in your default text editor:</p>\\n<div class=\\"gatsby-highlight\\" data-language=\\"text\\"><pre class=\\"language-text\\"><code class=\\"language-text\\">open Sources/Application/Application.swift</code></pre></div>\\n<p>Inside the <code class=\\"language-text\\">postInit()</code> function add:</p>\\n<div class=\\"gatsby-highlight\\" data-language=\\"swift\\"><pre class=\\"language-swift\\"><code class=\\"language-swift\\"><span class=\\"token function\\">initializeJWTRoutes</span><span class=\\"token punctuation\\">(</span>app<span class=\\"token punctuation\\">:</span> <span class=\\"token keyword\\">self</span><span class=\\"token punctuation\\">)</span></code></pre></div>\\n<p>Create a new file, called <code class=\\"language-text\\">JWTRoutes.swift</code>:</p>\\n<div class=\\"gatsby-highlight\\" data-language=\\"text\\"><pre class=\\"language-text\\"><code class=\\"language-text\\">touch Sources/Application/Routes/JWTRoutes.swift</code></pre></div>\\n<p>Open your <code class=\\"language-text\\">JWTRoutes.swift</code> file:</p>\\n<div class=\\"gatsby-highlight\\" data-language=\\"swift\\"><pre class=\\"language-swift\\"><code class=\\"language-swift\\">open <span class=\\"token builtin\\">Sources</span><span class=\\"token operator\\">/</span><span class=\\"token builtin\\">Application</span><span class=\\"token operator\\">/</span><span class=\\"token builtin\\">Routes</span><span class=\\"token operator\\">/</span><span class=\\"token builtin\\">JWTRoutes</span><span class=\\"token punctuation\\">.</span>swift</code></pre></div>\\n<p>Inside this file, add the following code:</p>\\n<div class=\\"gatsby-highlight\\" data-language=\\"swift\\"><pre class=\\"language-swift\\"><code class=\\"language-swift\\"><span class=\\"token keyword\\">import</span> <span class=\\"token builtin\\">Foundation</span>\\n<span class=\\"token keyword\\">import</span> <span class=\\"token builtin\\">KituraContracts</span>\\n<span class=\\"token keyword\\">import</span> <span class=\\"token builtin\\">CredentialsJWT</span>\\n\\n<span class=\\"token keyword\\">func</span> <span class=\\"token function\\">initializeJWTRoutes</span><span class=\\"token punctuation\\">(</span>app<span class=\\"token punctuation\\">:</span> <span class=\\"token builtin\\">App</span><span class=\\"token punctuation\\">)</span> <span class=\\"token punctuation\\">{</span>\\n    app<span class=\\"token punctuation\\">.</span>router<span class=\\"token punctuation\\">.</span><span class=\\"token function\\">post</span><span class=\\"token punctuation\\">(</span><span class=\\"token string\\">\\"/jwtlogin\\"</span><span class=\\"token punctuation\\">)</span> <span class=\\"token punctuation\\">{</span> request<span class=\\"token punctuation\\">,</span> response<span class=\\"token punctuation\\">,</span> next <span class=\\"token keyword\\">in</span>\\n        <span class=\\"token comment\\">// Read credentials and generate JWT here</span>\\n        <span class=\\"token function\\">next</span><span class=\\"token punctuation\\">(</span><span class=\\"token punctuation\\">)</span>\\n    <span class=\\"token punctuation\\">}</span>\\n<span class=\\"token punctuation\\">}</span>\\n<span class=\\"token keyword\\">extension</span> <span class=\\"token builtin\\">App</span> <span class=\\"token punctuation\\">{</span>\\n  <span class=\\"token comment\\">// Define JWT signer and verifier here</span>\\n<span class=\\"token punctuation\\">}</span></code></pre></div>\\n<p>This code imports our required modules, sets up the framework for a routes page and defines the two raw routes that we will use in our guide.</p>\\n<hr>\\n<h2 id=\\"step-2-set-up-your-signing-and-verifying-algorithm\\"><a href=\\"#step-2-set-up-your-signing-and-verifying-algorithm\\" aria-label=\\"step 2 set up your signing and verifying algorithm permalink\\" class=\\"anchor\\"><svg aria-hidden=\\"true\\" focusable=\\"false\\" height=\\"16\\" version=\\"1.1\\" viewBox=\\"0 0 16 16\\" width=\\"16\\"><path fill-rule=\\"evenodd\\" d=\\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\\"></path></svg></a>Step 2: Set up your signing and verifying algorithm</h2>\\n<p>Swift-JWT supports multiple algorithms for signing and verifying JWTs as defined by RFC7518. This is implemented by creating a <code class=\\"language-text\\">JWTSigner</code> and <code class=\\"language-text\\">JWTVerifier</code> struct with a required credentials.</p>\\n<p>The algorithms are as follows:</p>\\n<ul>\\n<li><a href=\\"./jwt-hmac\\">HMAC</a></li>\\n<li><a href=\\"./jwt-ecdsa\\">ECDSA</a></li>\\n<li><a href=\\"./jwt-rsa\\">RSA</a></li>\\n</ul>\\n<blockquote>\\n<p>Follow one of the links above to configure your signing and verifying algorithm before continuing with the rest of this guide.</p>\\n</blockquote>\\n<hr>\\n<h2 id=\\"step-3-define-a-model-to-represent-the-users-credentials\\"><a href=\\"#step-3-define-a-model-to-represent-the-users-credentials\\" aria-label=\\"step 3 define a model to represent the users credentials permalink\\" class=\\"anchor\\"><svg aria-hidden=\\"true\\" focusable=\\"false\\" height=\\"16\\" version=\\"1.1\\" viewBox=\\"0 0 16 16\\" width=\\"16\\"><path fill-rule=\\"evenodd\\" d=\\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\\"></path></svg></a>Step 3: Define a model to represent the user\'s credentials</h2>\\n<p>For the initial authentication, the user will have to provide their username and password. This could be achieved with basic authentication, the <code class=\\"language-text\\">Authorization</code> header or in the body of a <code class=\\"language-text\\">POST</code> request. In this guide we will pass the username and password in the body of a <code class=\\"language-text\\">POST</code> request and use a model to represent this.</p>\\n<blockquote>\\n<p>Passwords and JWTs with sensitive data must be kept private and should always be exchanged over a secure layer like HTTPS.</p>\\n</blockquote>\\n<p>Create a new file, called <code class=\\"language-text\\">UserCredentials.swift</code>:</p>\\n<div class=\\"gatsby-highlight\\" data-language=\\"text\\"><pre class=\\"language-text\\"><code class=\\"language-text\\">touch Sources/Application/Models/UserCredentials.swift</code></pre></div>\\n<p>Open your <code class=\\"language-text\\">UserCredentials.swift</code> file:</p>\\n<div class=\\"gatsby-highlight\\" data-language=\\"text\\"><pre class=\\"language-text\\"><code class=\\"language-text\\">open Sources/Application/Models/UserCredentials.swift</code></pre></div>\\n<p>Inside this file we define our <code class=\\"language-text\\">UserCredentials</code> model:</p>\\n<div class=\\"gatsby-highlight\\" data-language=\\"swift\\"><pre class=\\"language-swift\\"><code class=\\"language-swift\\"><span class=\\"token keyword\\">struct</span> <span class=\\"token builtin\\">UserCredentials</span><span class=\\"token punctuation\\">:</span> <span class=\\"token builtin\\">Codable</span> <span class=\\"token punctuation\\">{</span>\\n    <span class=\\"token keyword\\">let</span> username<span class=\\"token punctuation\\">:</span> <span class=\\"token builtin\\">String</span>\\n    <span class=\\"token keyword\\">let</span> password<span class=\\"token punctuation\\">:</span> <span class=\\"token builtin\\">String</span>\\n<span class=\\"token punctuation\\">}</span></code></pre></div>\\n<hr>\\n<h2 id=\\"step-4-authenticate-the-user\\"><a href=\\"#step-4-authenticate-the-user\\" aria-label=\\"step 4 authenticate the user permalink\\" class=\\"anchor\\"><svg aria-hidden=\\"true\\" focusable=\\"false\\" height=\\"16\\" version=\\"1.1\\" viewBox=\\"0 0 16 16\\" width=\\"16\\"><path fill-rule=\\"evenodd\\" d=\\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\\"></path></svg></a>Step 4: Authenticate the User</h2>\\n<p>We need to read the user\'s credentials in our <code class=\\"language-text\\">POST</code> route so they can be authenticated.</p>\\n<p>Inside the <code class=\\"language-text\\">POST</code> route add:</p>\\n<div class=\\"gatsby-highlight\\" data-language=\\"swift\\"><pre class=\\"language-swift\\"><code class=\\"language-swift\\"><span class=\\"token keyword\\">let</span> credentials <span class=\\"token operator\\">=</span> <span class=\\"token keyword\\">try</span> request<span class=\\"token punctuation\\">.</span><span class=\\"token function\\">read</span><span class=\\"token punctuation\\">(</span><span class=\\"token keyword\\">as</span><span class=\\"token punctuation\\">:</span> <span class=\\"token builtin\\">UserCredentials</span><span class=\\"token punctuation\\">.</span><span class=\\"token keyword\\">self</span><span class=\\"token punctuation\\">)</span>\\n<span class=\\"token comment\\">// Users credentials are authenticated</span></code></pre></div>\\n<p>At this stage, you would normally hash the password and verify it against a database. However, for simplicity, we are going to assume the user successfully logged in.</p>\\n<hr>\\n<h2 id=\\"step-5-create-the-signed-jwt\\"><a href=\\"#step-5-create-the-signed-jwt\\" aria-label=\\"step 5 create the signed jwt permalink\\" class=\\"anchor\\"><svg aria-hidden=\\"true\\" focusable=\\"false\\" height=\\"16\\" version=\\"1.1\\" viewBox=\\"0 0 16 16\\" width=\\"16\\"><path fill-rule=\\"evenodd\\" d=\\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\\"></path></svg></a>Step 5: Create the signed JWT</h2>\\n<p>A JWT contains claims about the user that we want include in subsequent requests. You can specify any information as a claim, however there are \\"Registered Claims\\" which have a pre-defined meaning:</p>\\n<ul>\\n<li><code class=\\"language-text\\">iss</code>: The issuer of the token.</li>\\n<li><code class=\\"language-text\\">sub</code>: The subject of the token.</li>\\n<li><code class=\\"language-text\\">aud</code>: The audience of the token.</li>\\n<li><code class=\\"language-text\\">exp</code>: The expiration time which MUST be after the current date/time.</li>\\n<li><code class=\\"language-text\\">nbf</code>: Defines the time before which the JWT MUST NOT be accepted for processing.</li>\\n<li><code class=\\"language-text\\">iat</code>: The time the JWT was issued. Can be used to determine the age of the JWT.</li>\\n<li><code class=\\"language-text\\">jti</code>: Unique identifier for the JWT. Can be used to prevent the JWT from being replayed.</li>\\n</ul>\\n<p>Swift-JWT comes with a struct representing these Registered Claims which we will use for our example.</p>\\n<p>Inside the <code class=\\"language-text\\">POST</code> route, beneath the code where we authenticated the user, initialize the user\'s claims:</p>\\n<div class=\\"gatsby-highlight\\" data-language=\\"swift\\"><pre class=\\"language-swift\\"><code class=\\"language-swift\\"><span class=\\"token keyword\\">let</span> myClaims <span class=\\"token operator\\">=</span> <span class=\\"token function\\">ClaimsStandardJWT</span><span class=\\"token punctuation\\">(</span>iss<span class=\\"token punctuation\\">:</span> <span class=\\"token string\\">\\"Kitura\\"</span><span class=\\"token punctuation\\">,</span> sub<span class=\\"token punctuation\\">:</span> credentials<span class=\\"token punctuation\\">.</span>username<span class=\\"token punctuation\\">,</span> exp<span class=\\"token punctuation\\">:</span> <span class=\\"token function\\">Date</span><span class=\\"token punctuation\\">(</span>timeIntervalSinceNow<span class=\\"token punctuation\\">:</span> <span class=\\"token number\\">3600</span><span class=\\"token punctuation\\">)</span><span class=\\"token punctuation\\">)</span></code></pre></div>\\n<p>The claims information tells us the username which is the <code class=\\"language-text\\">subject</code> of the token, that they were authenticated by Kitura and that the token will expire in one hour.</p>\\n<p>Next, we will initialize our JWT:</p>\\n<div class=\\"gatsby-highlight\\" data-language=\\"swift\\"><pre class=\\"language-swift\\"><code class=\\"language-swift\\"><span class=\\"token keyword\\">var</span> myJWT <span class=\\"token operator\\">=</span> <span class=\\"token function\\">JWT</span><span class=\\"token punctuation\\">(</span>claims<span class=\\"token punctuation\\">:</span> myClaims<span class=\\"token punctuation\\">)</span></code></pre></div>\\n<p>We can sign this JWT using the <code class=\\"language-text\\">JWTSigner</code> we created in step 2:</p>\\n<div class=\\"gatsby-highlight\\" data-language=\\"swift\\"><pre class=\\"language-swift\\"><code class=\\"language-swift\\"><span class=\\"token keyword\\">let</span> signedJWT <span class=\\"token operator\\">=</span> <span class=\\"token keyword\\">try</span> myJWT<span class=\\"token punctuation\\">.</span><span class=\\"token function\\">sign</span><span class=\\"token punctuation\\">(</span>using<span class=\\"token punctuation\\">:</span> <span class=\\"token builtin\\">App</span><span class=\\"token punctuation\\">.</span>jwtSigner<span class=\\"token punctuation\\">)</span></code></pre></div>\\n<p>Finally we return the signed JWT string to the user:</p>\\n<div class=\\"gatsby-highlight\\" data-language=\\"swift\\"><pre class=\\"language-swift\\"><code class=\\"language-swift\\">response<span class=\\"token punctuation\\">.</span><span class=\\"token function\\">send</span><span class=\\"token punctuation\\">(</span>signedJWT<span class=\\"token punctuation\\">)</span></code></pre></div>\\n<p>Our completed login route should look as follows:</p>\\n<div class=\\"gatsby-highlight\\" data-language=\\"swift\\"><pre class=\\"language-swift\\"><code class=\\"language-swift\\">app<span class=\\"token punctuation\\">.</span>router<span class=\\"token punctuation\\">.</span><span class=\\"token function\\">post</span><span class=\\"token punctuation\\">(</span><span class=\\"token string\\">\\"/jwtlogin\\"</span><span class=\\"token punctuation\\">)</span> <span class=\\"token punctuation\\">{</span> request<span class=\\"token punctuation\\">,</span> response<span class=\\"token punctuation\\">,</span> next <span class=\\"token keyword\\">in</span>\\n    <span class=\\"token keyword\\">let</span> credentials <span class=\\"token operator\\">=</span> <span class=\\"token keyword\\">try</span> request<span class=\\"token punctuation\\">.</span><span class=\\"token function\\">read</span><span class=\\"token punctuation\\">(</span><span class=\\"token keyword\\">as</span><span class=\\"token punctuation\\">:</span> <span class=\\"token builtin\\">UserCredentials</span><span class=\\"token punctuation\\">.</span><span class=\\"token keyword\\">self</span><span class=\\"token punctuation\\">)</span>\\n    <span class=\\"token comment\\">// Users credentials are authenticated</span>\\n    <span class=\\"token keyword\\">let</span> myClaims <span class=\\"token operator\\">=</span> <span class=\\"token function\\">ClaimsStandardJWT</span><span class=\\"token punctuation\\">(</span>iss<span class=\\"token punctuation\\">:</span> <span class=\\"token string\\">\\"Kitura\\"</span><span class=\\"token punctuation\\">,</span> sub<span class=\\"token punctuation\\">:</span> credentials<span class=\\"token punctuation\\">.</span>username<span class=\\"token punctuation\\">,</span> exp<span class=\\"token punctuation\\">:</span> <span class=\\"token function\\">Date</span><span class=\\"token punctuation\\">(</span>timeIntervalSinceNow<span class=\\"token punctuation\\">:</span> <span class=\\"token number\\">3600</span><span class=\\"token punctuation\\">)</span><span class=\\"token punctuation\\">)</span>\\n    <span class=\\"token keyword\\">var</span> myJWT <span class=\\"token operator\\">=</span> <span class=\\"token function\\">JWT</span><span class=\\"token punctuation\\">(</span>claims<span class=\\"token punctuation\\">:</span> myClaims<span class=\\"token punctuation\\">)</span>\\n    <span class=\\"token keyword\\">let</span> signedJWT <span class=\\"token operator\\">=</span> <span class=\\"token keyword\\">try</span> myJWT<span class=\\"token punctuation\\">.</span><span class=\\"token function\\">sign</span><span class=\\"token punctuation\\">(</span>using<span class=\\"token punctuation\\">:</span> <span class=\\"token builtin\\">App</span><span class=\\"token punctuation\\">.</span>jwtSigner<span class=\\"token punctuation\\">)</span>\\n    response<span class=\\"token punctuation\\">.</span><span class=\\"token function\\">send</span><span class=\\"token punctuation\\">(</span>signedJWT<span class=\\"token punctuation\\">)</span>\\n    <span class=\\"token function\\">next</span><span class=\\"token punctuation\\">(</span><span class=\\"token punctuation\\">)</span>\\n<span class=\\"token punctuation\\">}</span></code></pre></div>\\n<hr>\\n<h2 id=\\"step-6-test-the-jwt-creation\\"><a href=\\"#step-6-test-the-jwt-creation\\" aria-label=\\"step 6 test the jwt creation permalink\\" class=\\"anchor\\"><svg aria-hidden=\\"true\\" focusable=\\"false\\" height=\\"16\\" version=\\"1.1\\" viewBox=\\"0 0 16 16\\" width=\\"16\\"><path fill-rule=\\"evenodd\\" d=\\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\\"></path></svg></a>Step 6: Test the JWT creation</h2>\\n<p>Compile your project and start the server.</p>\\n<p>To test the route using curl, open Terminal and enter the following:</p>\\n<div class=\\"gatsby-highlight\\" data-language=\\"text\\"><pre class=\\"language-text\\"><code class=\\"language-text\\">curl -X POST \\\\\\n    http://localhost:8080/jwtlogin \\\\\\n    -H &#39;content-type: application/json&#39; \\\\\\n    -d &#39;{\\n    &quot;username&quot;: &quot;Joe Bloggs&quot;,\\n    &quot;password&quot;: &quot;password&quot;\\n}&#39;</code></pre></div>\\n<p>You should be returned a JWT string that is structured xxxx.yyyy.zzzz where xxxx is the base64 encoded header, yyyy is the base 64 encoded claims and zzzz is the signature.</p>\\n<p>Below is an example JWT, generated using <code class=\\"language-text\\">HS256</code> with the password \\"kitura\\". The one returned by your curl request will have different values but the same structure.</p>\\n<div class=\\"gatsby-highlight\\" data-language=\\"text\\"><pre class=\\"language-text\\"><code class=\\"language-text\\">eyJ0eXAiOiJKV1QiLCJhbGciOiJIUzI1NiJ9.eyJpc3MiOiJLaXR1cmEiLCJzdWIiOiJKb2UgQmxvZ2dzIiwiZXhwIjoxNTUzMDE4Mjg0LjMyOTcwMTl9.t55WealACtYGCQGS3EQgRQuurmNSBO5fWZqzqJjEIi</code></pre></div>\\n<p>We can decode the JWT string using the debugger at <a href=\\"https://jwt.io\\">jwt.io</a> which allows us view the headers and claims.</p>\\n<hr>\\n<h2 id=\\"step-7-verify-a-jwt\\"><a href=\\"#step-7-verify-a-jwt\\" aria-label=\\"step 7 verify a jwt permalink\\" class=\\"anchor\\"><svg aria-hidden=\\"true\\" focusable=\\"false\\" height=\\"16\\" version=\\"1.1\\" viewBox=\\"0 0 16 16\\" width=\\"16\\"><path fill-rule=\\"evenodd\\" d=\\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\\"></path></svg></a>Step 7: Verify a JWT</h2>\\n<p>So far, we have created a signed JWT, which allows a user to authenticate themselves. At this stage, the user would attach the JWT string to future requests either using cookies or the <code class=\\"language-text\\">Authorization</code> header. When we receive this JWT string on other routes, we need to verify that we signed it and it hasn\'t been altered.</p>\\n<p>From here we will use the CredentialsJWT plugin for authenticating the user with the earlier received token.</p>\\n<p>After the <code class=\\"language-text\\">POST</code> function, add the following to the file:</p>\\n<div class=\\"gatsby-highlight\\" data-language=\\"swift\\"><pre class=\\"language-swift\\"><code class=\\"language-swift\\"><span class=\\"token keyword\\">let</span> jwtCredentials <span class=\\"token operator\\">=</span> <span class=\\"token builtin\\">CredentialsJWT</span><span class=\\"token operator\\">&lt;</span><span class=\\"token builtin\\">ClaimsStandardJWT</span><span class=\\"token operator\\">></span><span class=\\"token punctuation\\">(</span>verifier<span class=\\"token punctuation\\">:</span> <span class=\\"token builtin\\">App</span><span class=\\"token punctuation\\">.</span>jwtVerifier<span class=\\"token punctuation\\">)</span>\\n<span class=\\"token keyword\\">let</span> authenticationMiddleware <span class=\\"token operator\\">=</span> <span class=\\"token function\\">Credentials</span><span class=\\"token punctuation\\">(</span><span class=\\"token punctuation\\">)</span>\\nauthenticationMiddleware<span class=\\"token punctuation\\">.</span><span class=\\"token function\\">register</span><span class=\\"token punctuation\\">(</span>plugin<span class=\\"token punctuation\\">:</span> jwtCredentials<span class=\\"token punctuation\\">)</span>\\napp<span class=\\"token punctuation\\">.</span>router<span class=\\"token punctuation\\">.</span><span class=\\"token keyword\\">get</span><span class=\\"token punctuation\\">(</span><span class=\\"token string\\">\\"/jwtprotected\\"</span><span class=\\"token punctuation\\">,</span> middleware<span class=\\"token punctuation\\">:</span> authenticationMiddleware<span class=\\"token punctuation\\">)</span>\\napp<span class=\\"token punctuation\\">.</span>router<span class=\\"token punctuation\\">.</span><span class=\\"token keyword\\">get</span><span class=\\"token punctuation\\">(</span><span class=\\"token string\\">\\"/jwtprotected\\"</span><span class=\\"token punctuation\\">)</span> <span class=\\"token punctuation\\">{</span> request<span class=\\"token punctuation\\">,</span> response<span class=\\"token punctuation\\">,</span> next <span class=\\"token keyword\\">in</span>\\n        <span class=\\"token keyword\\">guard</span> <span class=\\"token keyword\\">let</span> userProfile <span class=\\"token operator\\">=</span> request<span class=\\"token punctuation\\">.</span>userProfile <span class=\\"token keyword\\">else</span> <span class=\\"token punctuation\\">{</span>\\n                <span class=\\"token builtin\\">Log</span><span class=\\"token punctuation\\">.</span><span class=\\"token function\\">verbose</span><span class=\\"token punctuation\\">(</span><span class=\\"token string\\">\\"Failed raw token authentication\\"</span><span class=\\"token punctuation\\">)</span>\\n                response<span class=\\"token punctuation\\">.</span><span class=\\"token function\\">status</span><span class=\\"token punctuation\\">(</span><span class=\\"token punctuation\\">.</span>unauthorized<span class=\\"token punctuation\\">)</span>\\n                <span class=\\"token keyword\\">try</span> response<span class=\\"token punctuation\\">.</span><span class=\\"token function\\">end</span><span class=\\"token punctuation\\">(</span><span class=\\"token punctuation\\">)</span>\\n                <span class=\\"token keyword\\">return</span>\\n            <span class=\\"token punctuation\\">}</span>\\n        response<span class=\\"token punctuation\\">.</span><span class=\\"token function\\">send</span><span class=\\"token punctuation\\">(</span><span class=\\"token string\\">\\"<span class=\\"token interpolation\\"><span class=\\"token delimiter variable\\">\\\\(</span>userProfile<span class=\\"token punctuation\\">.</span>id<span class=\\"token delimiter variable\\">)</span></span>\\\\n\\"</span><span class=\\"token punctuation\\">)</span>\\n            <span class=\\"token function\\">next</span><span class=\\"token punctuation\\">(</span><span class=\\"token punctuation\\">)</span>\\n        <span class=\\"token punctuation\\">}</span></code></pre></div>\\n<p>Let\'s break these lines down individually. The first line creates a CredentialsJWT instance with the default options using the built in <code class=\\"language-text\\">ClaimsStandardJWT</code> claims from the Swift-JWT package.  The second line creates the middleware instance using the Credentials package that we can register plugins to.  The third line registers the created CredentialsJWT instance to the created middleware instance and the line after adds a <code class=\\"language-text\\">GET</code> route to the router that allows an <code class=\\"language-text\\">authentication</code> request to take place.  The final line is the declaration of the function that will verify the JWT we send, if the request is authorized, then the response sent is the <code class=\\"language-text\\">id</code> field of your JWT.</p>\\n<hr>\\n<h2 id=\\"step-8-test-the-protected-route\\"><a href=\\"#step-8-test-the-protected-route\\" aria-label=\\"step 8 test the protected route permalink\\" class=\\"anchor\\"><svg aria-hidden=\\"true\\" focusable=\\"false\\" height=\\"16\\" version=\\"1.1\\" viewBox=\\"0 0 16 16\\" width=\\"16\\"><path fill-rule=\\"evenodd\\" d=\\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\\"></path></svg></a>Step 8: Test the protected Route</h2>\\n<p>To test this, restart your server and send the <code class=\\"language-text\\">POST</code> request from Step 6.</p>\\n<p>Copy the returned JWT string and paste it into the following curl request:</p>\\n<div class=\\"gatsby-highlight\\" data-language=\\"text\\"><pre class=\\"language-text\\"><code class=\\"language-text\\">curl -X GET \\\\\\nhttp://localhost:8080/jwtprotected \\\\\\n-H &#39;X-Token-Type: JWT&#39; \\\\\\n-H &#39;Authorization: Bearer &lt;Your JWT string here&gt;&#39;</code></pre></div>\\n<p>You should see your username returned to you. This should look something like:</p>\\n<div class=\\"gatsby-highlight\\" data-language=\\"text\\"><pre class=\\"language-text\\"><code class=\\"language-text\\">Joe Bloggs</code></pre></div>\\n<p>Congratulations! We have just created a JWT single sign on system using a Kitura Server. Your completed <code class=\\"language-text\\">JWTRoutes.swift</code> file for <code class=\\"language-text\\">HS256</code> should look as follows:</p>\\n<div class=\\"gatsby-highlight\\" data-language=\\"swift\\"><pre class=\\"language-swift\\"><code class=\\"language-swift\\"><span class=\\"token keyword\\">import</span> <span class=\\"token builtin\\">Foundation</span>\\n<span class=\\"token keyword\\">import</span> <span class=\\"token builtin\\">KituraContracts</span>\\n<span class=\\"token keyword\\">import</span> <span class=\\"token builtin\\">CredentialsJWT</span>\\n<span class=\\"token keyword\\">import</span> <span class=\\"token builtin\\">SwiftJWT</span>\\n<span class=\\"token keyword\\">import</span> <span class=\\"token builtin\\">Credentials</span>\\n<span class=\\"token keyword\\">import</span> <span class=\\"token builtin\\">LoggerAPI</span>\\n\\n<span class=\\"token keyword\\">func</span> <span class=\\"token function\\">initializeJWTRoutes</span><span class=\\"token punctuation\\">(</span>app<span class=\\"token punctuation\\">:</span> <span class=\\"token builtin\\">App</span><span class=\\"token punctuation\\">)</span> <span class=\\"token punctuation\\">{</span>\\n\\n    app<span class=\\"token punctuation\\">.</span>router<span class=\\"token punctuation\\">.</span><span class=\\"token function\\">post</span><span class=\\"token punctuation\\">(</span><span class=\\"token string\\">\\"/jwtlogin\\"</span><span class=\\"token punctuation\\">)</span> <span class=\\"token punctuation\\">{</span> request<span class=\\"token punctuation\\">,</span> response<span class=\\"token punctuation\\">,</span> next <span class=\\"token keyword\\">in</span>\\n        <span class=\\"token keyword\\">let</span> credentials <span class=\\"token operator\\">=</span> <span class=\\"token keyword\\">try</span> request<span class=\\"token punctuation\\">.</span><span class=\\"token function\\">read</span><span class=\\"token punctuation\\">(</span><span class=\\"token keyword\\">as</span><span class=\\"token punctuation\\">:</span> <span class=\\"token builtin\\">UserCredentials</span><span class=\\"token punctuation\\">.</span><span class=\\"token keyword\\">self</span><span class=\\"token punctuation\\">)</span>\\n        <span class=\\"token comment\\">// Users credentials are authenticated</span>\\n        <span class=\\"token keyword\\">let</span> myClaims <span class=\\"token operator\\">=</span> <span class=\\"token function\\">ClaimsStandardJWT</span><span class=\\"token punctuation\\">(</span>iss<span class=\\"token punctuation\\">:</span> <span class=\\"token string\\">\\"Kitura\\"</span><span class=\\"token punctuation\\">,</span> sub<span class=\\"token punctuation\\">:</span> credentials<span class=\\"token punctuation\\">.</span>username<span class=\\"token punctuation\\">,</span> exp<span class=\\"token punctuation\\">:</span> <span class=\\"token function\\">Date</span><span class=\\"token punctuation\\">(</span>timeIntervalSinceNow<span class=\\"token punctuation\\">:</span> <span class=\\"token number\\">3600</span><span class=\\"token punctuation\\">)</span><span class=\\"token punctuation\\">)</span>\\n        <span class=\\"token keyword\\">var</span> myJWT <span class=\\"token operator\\">=</span> <span class=\\"token function\\">JWT</span><span class=\\"token punctuation\\">(</span>claims<span class=\\"token punctuation\\">:</span> myClaims<span class=\\"token punctuation\\">)</span>\\n        <span class=\\"token keyword\\">let</span> signedJWT <span class=\\"token operator\\">=</span> <span class=\\"token keyword\\">try</span> myJWT<span class=\\"token punctuation\\">.</span><span class=\\"token function\\">sign</span><span class=\\"token punctuation\\">(</span>using<span class=\\"token punctuation\\">:</span> <span class=\\"token builtin\\">App</span><span class=\\"token punctuation\\">.</span>jwtSigner<span class=\\"token punctuation\\">)</span>\\n        response<span class=\\"token punctuation\\">.</span><span class=\\"token function\\">send</span><span class=\\"token punctuation\\">(</span>signedJWT <span class=\\"token operator\\">+</span> <span class=\\"token string\\">\\"\\\\n\\"</span><span class=\\"token punctuation\\">)</span>\\n        <span class=\\"token function\\">next</span><span class=\\"token punctuation\\">(</span><span class=\\"token punctuation\\">)</span>\\n    <span class=\\"token punctuation\\">}</span>\\n\\n    <span class=\\"token keyword\\">let</span> jwtCredentials <span class=\\"token operator\\">=</span> <span class=\\"token builtin\\">CredentialsJWT</span><span class=\\"token operator\\">&lt;</span><span class=\\"token builtin\\">ClaimsStandardJWT</span><span class=\\"token operator\\">></span><span class=\\"token punctuation\\">(</span>verifier<span class=\\"token punctuation\\">:</span> <span class=\\"token builtin\\">App</span><span class=\\"token punctuation\\">.</span>jwtVerifier<span class=\\"token punctuation\\">)</span>\\n    <span class=\\"token keyword\\">let</span> authenticationMiddleware <span class=\\"token operator\\">=</span> <span class=\\"token function\\">Credentials</span><span class=\\"token punctuation\\">(</span><span class=\\"token punctuation\\">)</span>\\n    authenticationMiddleware<span class=\\"token punctuation\\">.</span><span class=\\"token function\\">register</span><span class=\\"token punctuation\\">(</span>plugin<span class=\\"token punctuation\\">:</span> jwtCredentials<span class=\\"token punctuation\\">)</span>\\n    app<span class=\\"token punctuation\\">.</span>router<span class=\\"token punctuation\\">.</span><span class=\\"token keyword\\">get</span><span class=\\"token punctuation\\">(</span><span class=\\"token string\\">\\"/jwtprotected\\"</span><span class=\\"token punctuation\\">,</span> middleware<span class=\\"token punctuation\\">:</span> authenticationMiddleware<span class=\\"token punctuation\\">)</span>\\n    app<span class=\\"token punctuation\\">.</span>router<span class=\\"token punctuation\\">.</span><span class=\\"token keyword\\">get</span><span class=\\"token punctuation\\">(</span><span class=\\"token string\\">\\"/jwtprotected\\"</span><span class=\\"token punctuation\\">)</span> <span class=\\"token punctuation\\">{</span> request<span class=\\"token punctuation\\">,</span> response<span class=\\"token punctuation\\">,</span> next <span class=\\"token keyword\\">in</span>\\n        <span class=\\"token keyword\\">guard</span> <span class=\\"token keyword\\">let</span> userProfile <span class=\\"token operator\\">=</span> request<span class=\\"token punctuation\\">.</span>userProfile <span class=\\"token keyword\\">else</span> <span class=\\"token punctuation\\">{</span>\\n                <span class=\\"token builtin\\">Log</span><span class=\\"token punctuation\\">.</span><span class=\\"token function\\">verbose</span><span class=\\"token punctuation\\">(</span><span class=\\"token string\\">\\"Failed raw token authentication\\"</span><span class=\\"token punctuation\\">)</span>\\n                response<span class=\\"token punctuation\\">.</span><span class=\\"token function\\">status</span><span class=\\"token punctuation\\">(</span><span class=\\"token punctuation\\">.</span>unauthorized<span class=\\"token punctuation\\">)</span>\\n                <span class=\\"token keyword\\">try</span> response<span class=\\"token punctuation\\">.</span><span class=\\"token function\\">end</span><span class=\\"token punctuation\\">(</span><span class=\\"token punctuation\\">)</span>\\n                <span class=\\"token keyword\\">return</span>\\n            <span class=\\"token punctuation\\">}</span>\\n        response<span class=\\"token punctuation\\">.</span><span class=\\"token function\\">send</span><span class=\\"token punctuation\\">(</span><span class=\\"token string\\">\\"<span class=\\"token interpolation\\"><span class=\\"token delimiter variable\\">\\\\(</span>userProfile<span class=\\"token punctuation\\">.</span>id<span class=\\"token delimiter variable\\">)</span></span>\\\\n\\"</span><span class=\\"token punctuation\\">)</span>\\n            <span class=\\"token function\\">next</span><span class=\\"token punctuation\\">(</span><span class=\\"token punctuation\\">)</span>\\n        <span class=\\"token punctuation\\">}</span>\\n<span class=\\"token punctuation\\">}</span>\\n\\n<span class=\\"token keyword\\">extension</span> <span class=\\"token builtin\\">App</span> <span class=\\"token punctuation\\">{</span>\\n    <span class=\\"token comment\\">// Define JWT signer and verifier here</span>\\n    <span class=\\"token keyword\\">static</span> <span class=\\"token keyword\\">let</span> jwtSigner <span class=\\"token operator\\">=</span> <span class=\\"token builtin\\">JWTSigner</span><span class=\\"token punctuation\\">.</span><span class=\\"token function\\">hs256</span><span class=\\"token punctuation\\">(</span>key<span class=\\"token punctuation\\">:</span> <span class=\\"token function\\">Data</span><span class=\\"token punctuation\\">(</span><span class=\\"token string\\">\\"kitura\\"</span><span class=\\"token punctuation\\">.</span>utf8<span class=\\"token punctuation\\">)</span><span class=\\"token punctuation\\">)</span>\\n    <span class=\\"token keyword\\">static</span> <span class=\\"token keyword\\">let</span> jwtVerifier <span class=\\"token operator\\">=</span> <span class=\\"token builtin\\">JWTVerifier</span><span class=\\"token punctuation\\">.</span><span class=\\"token function\\">hs256</span><span class=\\"token punctuation\\">(</span>key<span class=\\"token punctuation\\">:</span> <span class=\\"token function\\">Data</span><span class=\\"token punctuation\\">(</span><span class=\\"token string\\">\\"kitura\\"</span><span class=\\"token punctuation\\">.</span>utf8<span class=\\"token punctuation\\">)</span><span class=\\"token punctuation\\">)</span>\\n<span class=\\"token punctuation\\">}</span></code></pre></div>\\n<hr>\\n<h2 id=\\"step-9-using-custom-claims-optional\\"><a href=\\"#step-9-using-custom-claims-optional\\" aria-label=\\"step 9 using custom claims optional permalink\\" class=\\"anchor\\"><svg aria-hidden=\\"true\\" focusable=\\"false\\" height=\\"16\\" version=\\"1.1\\" viewBox=\\"0 0 16 16\\" width=\\"16\\"><path fill-rule=\\"evenodd\\" d=\\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\\"></path></svg></a>Step 9: Using custom claims (Optional)</h2>\\n<p>You may want to use your own set of custom claims for your JWT.  For this to work, we need to specify the <code class=\\"language-text\\">subject</code> and <code class=\\"language-text\\">UserProfileDelegate</code> options.</p>\\n<p>First we will create our claims structure, in our <code class=\\"language-text\\">JWTRoutes.swift</code> file:</p>\\n<div class=\\"gatsby-highlight\\" data-language=\\"swift\\"><pre class=\\"language-swift\\"><code class=\\"language-swift\\"><span class=\\"token keyword\\">struct</span> <span class=\\"token builtin\\">MyClaims</span><span class=\\"token punctuation\\">:</span> <span class=\\"token builtin\\">Claims</span> <span class=\\"token punctuation\\">{</span>\\n  <span class=\\"token keyword\\">let</span> id<span class=\\"token punctuation\\">:</span> <span class=\\"token builtin\\">String</span>\\n  <span class=\\"token keyword\\">let</span> fullName<span class=\\"token punctuation\\">:</span> <span class=\\"token builtin\\">String</span>\\n  <span class=\\"token keyword\\">let</span> email<span class=\\"token punctuation\\">:</span> <span class=\\"token builtin\\">String</span>\\n<span class=\\"token punctuation\\">}</span></code></pre></div>\\n<p>Now we need to edit our <code class=\\"language-text\\">UserCredentials</code> model to contain these additional values, so go into your <code class=\\"language-text\\">UserCredentials.swift</code> file and add these values to your model:</p>\\n<div class=\\"gatsby-highlight\\" data-language=\\"swift\\"><pre class=\\"language-swift\\"><code class=\\"language-swift\\"><span class=\\"token keyword\\">struct</span> <span class=\\"token builtin\\">UserCredentials</span><span class=\\"token punctuation\\">:</span> <span class=\\"token builtin\\">Codable</span> <span class=\\"token punctuation\\">{</span>\\n    <span class=\\"token keyword\\">let</span> username<span class=\\"token punctuation\\">:</span> <span class=\\"token builtin\\">String</span>\\n    <span class=\\"token keyword\\">let</span> password<span class=\\"token punctuation\\">:</span> <span class=\\"token builtin\\">String</span>\\n    <span class=\\"token keyword\\">let</span> email<span class=\\"token punctuation\\">:</span> <span class=\\"token builtin\\">String</span>\\n    <span class=\\"token keyword\\">let</span> fullName<span class=\\"token punctuation\\">:</span> <span class=\\"token builtin\\">String</span>\\n<span class=\\"token punctuation\\">}</span></code></pre></div>\\n<blockquote>\\n<p>For simplicity, in this example, the id will have the same value as the username.</p>\\n</blockquote>\\n<p>We need to rewrite our JWT generation so that it creates a JWT with the correct claims:</p>\\n<div class=\\"gatsby-highlight\\" data-language=\\"swift\\"><pre class=\\"language-swift\\"><code class=\\"language-swift\\">app<span class=\\"token punctuation\\">.</span>router<span class=\\"token punctuation\\">.</span><span class=\\"token function\\">post</span><span class=\\"token punctuation\\">(</span><span class=\\"token string\\">\\"/jwtlogin\\"</span><span class=\\"token punctuation\\">)</span> <span class=\\"token punctuation\\">{</span> request<span class=\\"token punctuation\\">,</span> response<span class=\\"token punctuation\\">,</span> next <span class=\\"token keyword\\">in</span>\\n    <span class=\\"token keyword\\">let</span> credentials <span class=\\"token operator\\">=</span> <span class=\\"token keyword\\">try</span> request<span class=\\"token punctuation\\">.</span><span class=\\"token function\\">read</span><span class=\\"token punctuation\\">(</span><span class=\\"token keyword\\">as</span><span class=\\"token punctuation\\">:</span> <span class=\\"token builtin\\">UserCredentials</span><span class=\\"token punctuation\\">.</span><span class=\\"token keyword\\">self</span><span class=\\"token punctuation\\">)</span>\\n    <span class=\\"token comment\\">// Users credentials are authenticated</span>\\n    <span class=\\"token keyword\\">let</span> myClaims <span class=\\"token operator\\">=</span> <span class=\\"token function\\">MyClaims</span><span class=\\"token punctuation\\">(</span>id<span class=\\"token punctuation\\">:</span> credentials<span class=\\"token punctuation\\">.</span>username<span class=\\"token punctuation\\">,</span> fullName<span class=\\"token punctuation\\">:</span> credentials<span class=\\"token punctuation\\">.</span>fullName<span class=\\"token punctuation\\">,</span> email<span class=\\"token punctuation\\">:</span> credentials<span class=\\"token punctuation\\">.</span>email<span class=\\"token punctuation\\">)</span>\\n    <span class=\\"token keyword\\">var</span> myJWT <span class=\\"token operator\\">=</span> <span class=\\"token function\\">JWT</span><span class=\\"token punctuation\\">(</span>claims<span class=\\"token punctuation\\">:</span> myClaims<span class=\\"token punctuation\\">)</span>\\n    <span class=\\"token keyword\\">let</span> signedJWT <span class=\\"token operator\\">=</span> <span class=\\"token keyword\\">try</span> myJWT<span class=\\"token punctuation\\">.</span><span class=\\"token function\\">sign</span><span class=\\"token punctuation\\">(</span>using<span class=\\"token punctuation\\">:</span> <span class=\\"token builtin\\">App</span><span class=\\"token punctuation\\">.</span>jwtSigner<span class=\\"token punctuation\\">)</span>\\n    response<span class=\\"token punctuation\\">.</span><span class=\\"token function\\">send</span><span class=\\"token punctuation\\">(</span>signedJWT<span class=\\"token punctuation\\">)</span>\\n    <span class=\\"token function\\">next</span><span class=\\"token punctuation\\">(</span><span class=\\"token punctuation\\">)</span>\\n<span class=\\"token punctuation\\">}</span></code></pre></div>\\n<p>Let\'s test our newly created route!</p>\\n<div class=\\"gatsby-highlight\\" data-language=\\"text\\"><pre class=\\"language-text\\"><code class=\\"language-text\\">curl -X POST \\\\\\n    http://localhost:8080/jwtlogin \\\\\\n    -H &#39;content-type: application/json&#39; \\\\\\n    -d &#39;{\\n    &quot;username&quot;: &quot;JoeBloggs312&quot;,\\n    &quot;password&quot;: &quot;password&quot;,\\n    &quot;email&quot;: &quot;joebloggs@email.com&quot;,\\n    &quot;fullName&quot;: &quot;Joe Kitura Bloggs&quot;\\n}&#39;</code></pre></div>\\n<p>None of these claims are part of the <code class=\\"language-text\\">ClaimsStandardJWT</code> claims and the <code class=\\"language-text\\">subject</code> claim is not present, therefore we need to use the <code class=\\"language-text\\">UserProfileDelegate</code> and update it with our custom claims.</p>\\n<p>After our <code class=\\"language-text\\">POST</code> route, add:</p>\\n<div class=\\"gatsby-highlight\\" data-language=\\"swift\\"><pre class=\\"language-swift\\"><code class=\\"language-swift\\"><span class=\\"token keyword\\">struct</span> <span class=\\"token builtin\\">MyDelegate</span><span class=\\"token punctuation\\">:</span> <span class=\\"token builtin\\">UserProfileDelegate</span> <span class=\\"token punctuation\\">{</span>\\n    <span class=\\"token keyword\\">func</span> <span class=\\"token function\\">update</span><span class=\\"token punctuation\\">(</span>userProfile<span class=\\"token punctuation\\">:</span> <span class=\\"token builtin\\">UserProfile</span><span class=\\"token punctuation\\">,</span> from dictionary<span class=\\"token punctuation\\">:</span> <span class=\\"token punctuation\\">[</span><span class=\\"token builtin\\">String</span><span class=\\"token punctuation\\">:</span><span class=\\"token builtin\\">Any</span><span class=\\"token punctuation\\">]</span><span class=\\"token punctuation\\">)</span> <span class=\\"token punctuation\\">{</span>\\n        <span class=\\"token comment\\">// `userProfile.id` already contains `id`</span>\\n        userProfile<span class=\\"token punctuation\\">.</span>displayName <span class=\\"token operator\\">=</span> dictionary<span class=\\"token punctuation\\">[</span><span class=\\"token string\\">\\"fullName\\"</span><span class=\\"token punctuation\\">]</span><span class=\\"token operator\\">!</span> <span class=\\"token keyword\\">as</span><span class=\\"token operator\\">!</span> <span class=\\"token builtin\\">String</span>\\n        <span class=\\"token keyword\\">let</span> email <span class=\\"token operator\\">=</span> <span class=\\"token builtin\\">UserProfile</span><span class=\\"token punctuation\\">.</span><span class=\\"token function\\">UserProfileEmail</span><span class=\\"token punctuation\\">(</span>value<span class=\\"token punctuation\\">:</span> dictionary<span class=\\"token punctuation\\">[</span><span class=\\"token string\\">\\"email\\"</span><span class=\\"token punctuation\\">]</span><span class=\\"token operator\\">!</span> <span class=\\"token keyword\\">as</span><span class=\\"token operator\\">!</span> <span class=\\"token builtin\\">String</span><span class=\\"token punctuation\\">,</span> type<span class=\\"token punctuation\\">:</span> <span class=\\"token string\\">\\"home\\"</span><span class=\\"token punctuation\\">)</span>\\n        userProfile<span class=\\"token punctuation\\">.</span>emails <span class=\\"token operator\\">=</span> <span class=\\"token punctuation\\">[</span>email<span class=\\"token punctuation\\">]</span>\\n    <span class=\\"token punctuation\\">}</span>\\n<span class=\\"token punctuation\\">}</span></code></pre></div>\\n<p>Then we need to declare our instance of CredentialsJWT with our newly defined options, as well as setting the <code class=\\"language-text\\">subject</code> claim to <code class=\\"language-text\\">id</code>:</p>\\n<div class=\\"gatsby-highlight\\" data-language=\\"swift\\"><pre class=\\"language-swift\\"><code class=\\"language-swift\\"><span class=\\"token keyword\\">let</span> jwtCredentials <span class=\\"token operator\\">=</span> <span class=\\"token builtin\\">CredentialsJWT</span><span class=\\"token operator\\">&lt;</span><span class=\\"token builtin\\">MyClaims</span><span class=\\"token operator\\">></span><span class=\\"token punctuation\\">(</span>verifier<span class=\\"token punctuation\\">:</span> <span class=\\"token builtin\\">App</span><span class=\\"token punctuation\\">.</span>jwtVerifier<span class=\\"token punctuation\\">,</span> options<span class=\\"token punctuation\\">:</span> <span class=\\"token punctuation\\">[</span><span class=\\"token builtin\\">CredentialsJWTOptions</span><span class=\\"token punctuation\\">.</span>subject<span class=\\"token punctuation\\">:</span> <span class=\\"token string\\">\\"id\\"</span><span class=\\"token punctuation\\">,</span> <span class=\\"token builtin\\">CredentialsJWTOptions</span><span class=\\"token punctuation\\">.</span>userProfileDelegate<span class=\\"token punctuation\\">:</span> <span class=\\"token builtin\\">MyDelegate</span><span class=\\"token punctuation\\">.</span><span class=\\"token keyword\\">self</span><span class=\\"token punctuation\\">]</span><span class=\\"token punctuation\\">)</span></code></pre></div>\\n<p>Finally we create our middleware and register our plugin to it, the same as we have done earlier:</p>\\n<div class=\\"gatsby-highlight\\" data-language=\\"swift\\"><pre class=\\"language-swift\\"><code class=\\"language-swift\\"><span class=\\"token keyword\\">let</span> authenticationMiddleware <span class=\\"token operator\\">=</span> <span class=\\"token function\\">Credentials</span><span class=\\"token punctuation\\">(</span><span class=\\"token punctuation\\">)</span>\\nauthenticationMiddleware<span class=\\"token punctuation\\">.</span><span class=\\"token function\\">register</span><span class=\\"token punctuation\\">(</span>plugin<span class=\\"token punctuation\\">:</span> jwtCredentials<span class=\\"token punctuation\\">)</span>\\napp<span class=\\"token punctuation\\">.</span>router<span class=\\"token punctuation\\">.</span><span class=\\"token keyword\\">get</span><span class=\\"token punctuation\\">(</span><span class=\\"token string\\">\\"/jwtprotected\\"</span><span class=\\"token punctuation\\">,</span> middleware<span class=\\"token punctuation\\">:</span> authenticationMiddleware<span class=\\"token punctuation\\">)</span>\\napp<span class=\\"token punctuation\\">.</span>router<span class=\\"token punctuation\\">.</span><span class=\\"token keyword\\">get</span><span class=\\"token punctuation\\">(</span><span class=\\"token string\\">\\"/jwtprotected\\"</span><span class=\\"token punctuation\\">)</span> <span class=\\"token punctuation\\">{</span> request<span class=\\"token punctuation\\">,</span> response<span class=\\"token punctuation\\">,</span> next <span class=\\"token keyword\\">in</span>\\n    <span class=\\"token keyword\\">guard</span> <span class=\\"token keyword\\">let</span> userProfile <span class=\\"token operator\\">=</span> request<span class=\\"token punctuation\\">.</span>userProfile <span class=\\"token keyword\\">else</span> <span class=\\"token punctuation\\">{</span>\\n            <span class=\\"token builtin\\">Log</span><span class=\\"token punctuation\\">.</span><span class=\\"token function\\">verbose</span><span class=\\"token punctuation\\">(</span><span class=\\"token string\\">\\"Failed raw token authentication\\"</span><span class=\\"token punctuation\\">)</span>\\n            response<span class=\\"token punctuation\\">.</span><span class=\\"token function\\">status</span><span class=\\"token punctuation\\">(</span><span class=\\"token punctuation\\">.</span>unauthorized<span class=\\"token punctuation\\">)</span>\\n            <span class=\\"token keyword\\">try</span> response<span class=\\"token punctuation\\">.</span><span class=\\"token function\\">end</span><span class=\\"token punctuation\\">(</span><span class=\\"token punctuation\\">)</span>\\n            <span class=\\"token keyword\\">return</span>\\n        <span class=\\"token punctuation\\">}</span>\\n    response<span class=\\"token punctuation\\">.</span><span class=\\"token function\\">send</span><span class=\\"token punctuation\\">(</span><span class=\\"token string\\">\\"<span class=\\"token interpolation\\"><span class=\\"token delimiter variable\\">\\\\(</span>userProfile<span class=\\"token punctuation\\">.</span>id<span class=\\"token delimiter variable\\">)</span></span>\\\\n\\"</span><span class=\\"token punctuation\\">)</span>\\n        <span class=\\"token function\\">next</span><span class=\\"token punctuation\\">(</span><span class=\\"token punctuation\\">)</span>\\n    <span class=\\"token punctuation\\">}</span></code></pre></div>\\n<p>Using the same terminal commands as earlier, you can test your JWT generation and authentication:</p>\\n<div class=\\"gatsby-highlight\\" data-language=\\"text\\"><pre class=\\"language-text\\"><code class=\\"language-text\\">curl -X GET \\\\\\nhttp://localhost:8080/jwtprotected \\\\\\n-H &#39;X-Token-Type: JWT&#39; \\\\\\n-H &#39;Authorization: Bearer &lt;Your JWT string here&gt;&#39;</code></pre></div>\\n<p>Congratulations! You are now using your own set of custom claims to generate a JWT and authenticate a user!</p>\\n<h2 id=\\"step-10-jwts-on-codable-routes-optional\\"><a href=\\"#step-10-jwts-on-codable-routes-optional\\" aria-label=\\"step 10 jwts on codable routes optional permalink\\" class=\\"anchor\\"><svg aria-hidden=\\"true\\" focusable=\\"false\\" height=\\"16\\" version=\\"1.1\\" viewBox=\\"0 0 16 16\\" width=\\"16\\"><path fill-rule=\\"evenodd\\" d=\\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\\"></path></svg></a>Step 10: JWTs on Codable Routes (Optional)</h2>\\n<p>In our example we used raw routing since we chose to pass the user credentials via the request headers. If we want to use JWTs on our codable routes, we need to encapsulate the verification and creation of the users JWT in a <code class=\\"language-text\\">TypeSafeMiddleware</code>.</p>\\n<h3 id=\\"step-10a-register-typesafejwt-on-a-route\\"><a href=\\"#step-10a-register-typesafejwt-on-a-route\\" aria-label=\\"step 10a register typesafejwt on a route permalink\\" class=\\"anchor\\"><svg aria-hidden=\\"true\\" focusable=\\"false\\" height=\\"16\\" version=\\"1.1\\" viewBox=\\"0 0 16 16\\" width=\\"16\\"><path fill-rule=\\"evenodd\\" d=\\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\\"></path></svg></a>Step 10a: Register TypeSafeJWT on a route.</h3>\\n<p>In the <code class=\\"language-text\\">JWTRoutesFile.swift</code> we are going to create a new route for a <code class=\\"language-text\\">TypeSafeJWT</code>.</p>\\n<p>In the function <code class=\\"language-text\\">initializeJWTRoutes</code>, declare the verifier for the <code class=\\"language-text\\">TypeSafeJWT</code> (this example is using the <code class=\\"language-text\\">HS256</code> algorithm):</p>\\n<div class=\\"gatsby-highlight\\" data-language=\\"swift\\"><pre class=\\"language-swift\\"><code class=\\"language-swift\\"><span class=\\"token builtin\\">TypeSafeJWT</span><span class=\\"token punctuation\\">.</span>verifier <span class=\\"token operator\\">=</span> <span class=\\"token punctuation\\">.</span><span class=\\"token function\\">hs256</span><span class=\\"token punctuation\\">(</span>key<span class=\\"token punctuation\\">:</span> <span class=\\"token function\\">Data</span><span class=\\"token punctuation\\">(</span><span class=\\"token string\\">\\"kitura\\"</span><span class=\\"token punctuation\\">.</span>utf8<span class=\\"token punctuation\\">)</span><span class=\\"token punctuation\\">)</span></code></pre></div>\\n<p>We will then add the codable route handler, the handler will only be invoked if the JWT can be successfully verified, and contains the required claims.</p>\\n<div class=\\"gatsby-highlight\\" data-language=\\"swift\\"><pre class=\\"language-swift\\"><code class=\\"language-swift\\">app<span class=\\"token punctuation\\">.</span>router<span class=\\"token punctuation\\">.</span><span class=\\"token keyword\\">get</span><span class=\\"token punctuation\\">(</span><span class=\\"token string\\">\\"/jwtcodable\\"</span><span class=\\"token punctuation\\">)</span> <span class=\\"token punctuation\\">{</span>  <span class=\\"token punctuation\\">(</span>jwt<span class=\\"token punctuation\\">:</span> <span class=\\"token constant\\">JWT</span><span class=\\"token operator\\">&lt;</span><span class=\\"token builtin\\">ClaimsStandardJWT</span><span class=\\"token operator\\">></span><span class=\\"token punctuation\\">,</span> respondWith<span class=\\"token punctuation\\">:</span> <span class=\\"token punctuation\\">(</span><span class=\\"token constant\\">JWT</span><span class=\\"token operator\\">&lt;</span><span class=\\"token builtin\\">ClaimsStandardJWT</span><span class=\\"token operator\\">></span><span class=\\"token operator\\">?</span><span class=\\"token punctuation\\">,</span> <span class=\\"token builtin\\">RequestError</span><span class=\\"token operator\\">?</span><span class=\\"token punctuation\\">)</span> <span class=\\"token operator\\">-</span><span class=\\"token operator\\">></span> <span class=\\"token builtin\\">Void</span><span class=\\"token punctuation\\">)</span> <span class=\\"token keyword\\">in</span>\\n     <span class=\\"token function\\">respondWith</span><span class=\\"token punctuation\\">(</span>jwt<span class=\\"token punctuation\\">,</span> <span class=\\"token constant\\">nil</span><span class=\\"token punctuation\\">)</span>\\n<span class=\\"token punctuation\\">}</span></code></pre></div>\\n<hr>\\n<h3 id=\\"step-10b-test-the-new-codable-route\\"><a href=\\"#step-10b-test-the-new-codable-route\\" aria-label=\\"step 10b test the new codable route permalink\\" class=\\"anchor\\"><svg aria-hidden=\\"true\\" focusable=\\"false\\" height=\\"16\\" version=\\"1.1\\" viewBox=\\"0 0 16 16\\" width=\\"16\\"><path fill-rule=\\"evenodd\\" d=\\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\\"></path></svg></a>Step 10b: Test the new Codable route</h3>\\n<p>To test this route, restart your server and send the <code class=\\"language-text\\">POST</code> request from Step 6.</p>\\n<p>Copy the returned JWT string and paste it into the following curl request:</p>\\n<div class=\\"gatsby-highlight\\" data-language=\\"text\\"><pre class=\\"language-text\\"><code class=\\"language-text\\">curl -X GET \\\\\\nhttp://localhost:8080/jwtcodable \\\\\\n-H &#39;X-Token-Type: JWT&#39; \\\\\\n-H &#39;Authorization: Bearer &lt;Your JWT string here&gt;&#39;</code></pre></div>\\n<p>You should see your JWT claims returned to you. This should look something like:</p>\\n<div class=\\"gatsby-highlight\\" data-language=\\"text\\"><pre class=\\"language-text\\"><code class=\\"language-text\\">{&quot;claims&quot;:{&quot;iss&quot;:&quot;Kitura&quot;,&quot;sub&quot;:&quot;Joe Bloggs&quot;,&quot;exp&quot;:574703307.61258602},&quot;header&quot;:{&quot;typ&quot;:&quot;JWT&quot;,&quot;alg&quot;:&quot;HS256&quot;}}</code></pre></div>","frontmatter":{"path":"/docs/authentication/jwt","title":"JSON Web Token Authentication"}}}]},"blogs":{"edges":[{"node":{"html":"<p>Kitura 2.5 has recently been released – the latest update to the popular and powerful Swift web framework.</p>\\n<h2 id=\\"enhanced-openapi-support\\"><a href=\\"#enhanced-openapi-support\\" aria-label=\\"enhanced openapi support permalink\\" class=\\"anchor\\"><svg aria-hidden=\\"true\\" focusable=\\"false\\" height=\\"16\\" version=\\"1.1\\" viewBox=\\"0 0 16 16\\" width=\\"16\\"><path fill-rule=\\"evenodd\\" d=\\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\\"></path></svg></a>Enhanced OpenAPI support</h2>\\n<p>Kitura 2.4 introduced support for OpenAPI (also known as Swagger), the most popular way to document REST APIs. When you use Codable routing in Kitura you can automatically generate an OpenAPI definition of your running application, with no code changes or annotations needed.</p>\\n<p>In Kitura 2.5 we have expanded our support of the OpenAPI specification, and now also support routes which specify query parameters. In addition, a new release of <a href=\\"https://github.com/IBM-Swift/Kitura-OpenAPI/\\">Kitura-OpenAPI</a> now includes the latest version of SwaggerUI, plus some bugfixes.</p>\\n<hr>\\n<h2 id=\\"swiftnio-support\\"><a href=\\"#swiftnio-support\\" aria-label=\\"swiftnio support permalink\\" class=\\"anchor\\"><svg aria-hidden=\\"true\\" focusable=\\"false\\" height=\\"16\\" version=\\"1.1\\" viewBox=\\"0 0 16 16\\" width=\\"16\\"><path fill-rule=\\"evenodd\\" d=\\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\\"></path></svg></a>SwiftNIO support</h2>\\n<p>Kitura 2.4 introduced experimental support for running Kitura on SwiftNIO, the new asynchronous networking framework from Apple. Users could opt to in to trying SwiftNIO by using <code class=\\"language-text\\">swift package edit</code> to choose a separate branch of Kitura which we maintained.</p>\\n<p>Now, in Kitura 2.5 SwiftNIO support has been integrated into Kitura itself, and you can easily choose to opt in to using SwiftNIO if you want.</p>\\n<p>To do this, simply build your Kitura application with <code class=\\"language-text\\">swift build -DKITURA_NIO=1</code>.</p>\\n<p>We encourage all users to try building and running their applications with SwiftNIO and let us know their experiences. We are continuing to work closely with the SwiftNIO team on any issues that we find, and thank them for their quick responses, help, and fixes so far.</p>\\n<hr>\\n<h2 id=\\"swiftnio-support-in-kitura-websocket\\"><a href=\\"#swiftnio-support-in-kitura-websocket\\" aria-label=\\"swiftnio support in kitura websocket permalink\\" class=\\"anchor\\"><svg aria-hidden=\\"true\\" focusable=\\"false\\" height=\\"16\\" version=\\"1.1\\" viewBox=\\"0 0 16 16\\" width=\\"16\\"><path fill-rule=\\"evenodd\\" d=\\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\\"></path></svg></a>SwiftNIO support in Kitura-WebSocket</h2>\\n<p>If you are using Websockets in Kitura, you may be interested to know that we also now have an experimental port of Kitura-WebSocket which runs on SwiftNIO. You can find it at <a href=\\"https://github.com/IBM-Swift/Kitura-WebSocket/tree/websocket-nio\\">this branch</a> and we would welcome all users to try it out. Join our Slack and let us know how you get on!</p>\\n<hr>\\n<h2 id=\\"pluggable-jsonencoders-in-codable-routing\\"><a href=\\"#pluggable-jsonencoders-in-codable-routing\\" aria-label=\\"pluggable jsonencoders in codable routing permalink\\" class=\\"anchor\\"><svg aria-hidden=\\"true\\" focusable=\\"false\\" height=\\"16\\" version=\\"1.1\\" viewBox=\\"0 0 16 16\\" width=\\"16\\"><path fill-rule=\\"evenodd\\" d=\\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\\"></path></svg></a>Pluggable JSONEncoders in Codable routing</h2>\\n<p>Codable routing allows you to quickly build REST APIs using the Codable types that already exist in your application.</p>\\n<p>Until now, Codable routing has been limited to JSON only, and only the default JSONEncoder and JSONDecoder supplied by Foundation.</p>\\n<p>Now in Kitura 2.5 you have a flexible framework for attaching custom encoders and decoders to the Kitura router.</p>\\n<hr>\\n<h2 id=\\"performance-improvements\\"><a href=\\"#performance-improvements\\" aria-label=\\"performance improvements permalink\\" class=\\"anchor\\"><svg aria-hidden=\\"true\\" focusable=\\"false\\" height=\\"16\\" version=\\"1.1\\" viewBox=\\"0 0 16 16\\" width=\\"16\\"><path fill-rule=\\"evenodd\\" d=\\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\\"></path></svg></a>Performance improvements</h2>\\n<p>We have continued to improve the overall performance of Kitura. In certain benchmarks Kitura 2.5 is 13% faster than Kitura 2.4. The difference is even greater when running in debug mode.</p>\\n<p>We intend to continue to improve Kitura performance in future.</p>\\n<hr>\\n<h2 id=\\"new-splash-screen\\"><a href=\\"#new-splash-screen\\" aria-label=\\"new splash screen permalink\\" class=\\"anchor\\"><svg aria-hidden=\\"true\\" focusable=\\"false\\" height=\\"16\\" version=\\"1.1\\" viewBox=\\"0 0 16 16\\" width=\\"16\\"><path fill-rule=\\"evenodd\\" d=\\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\\"></path></svg></a>New splash screen</h2>\\n<p>In Kitura 2.5 the default splash screen matches the look and feel of www.kitura.io</p>\\n<hr>\\n<h2 id=\\"bugfixes\\"><a href=\\"#bugfixes\\" aria-label=\\"bugfixes permalink\\" class=\\"anchor\\"><svg aria-hidden=\\"true\\" focusable=\\"false\\" height=\\"16\\" version=\\"1.1\\" viewBox=\\"0 0 16 16\\" width=\\"16\\"><path fill-rule=\\"evenodd\\" d=\\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\\"></path></svg></a>Bugfixes</h2>\\n<p>Of course, there’s the usual selection of tweaks and fixes, resolving issues reported to us by the community.</p>\\n<p>Any questions or comments? Please join the vibrant Kitura community on <a href=\\"http://swift-at-ibm-slack.mybluemix.net/?cm_sp=dw-bluemix-_-swift-_-devcenter&#x26;_ga=2.118288265.186671014.1570626561-1743126121.1570022962\\">Slack</a>!</p>","frontmatter":{"path":"/blogs/announcing-kitura-2-5","title":"Announcing Kitura 2.5"}}},{"node":{"html":"<p>We’re very pleased to announce the release of Kitura 2.4, the latest update to the Kitura web framework. Kitura 2.4 brings full support for Swift 4.2, plus a large number of new features and enhancements.</p>\\n<h2 id=\\"type-safe-middlewares\\"><a href=\\"#type-safe-middlewares\\" aria-label=\\"type safe middlewares permalink\\" class=\\"anchor\\"><svg aria-hidden=\\"true\\" focusable=\\"false\\" height=\\"16\\" version=\\"1.1\\" viewBox=\\"0 0 16 16\\" width=\\"16\\"><path fill-rule=\\"evenodd\\" d=\\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\\"></path></svg></a>Type-safe middlewares</h2>\\n<p>Kitura 2.0 introduced Codable routing, a powerful way to quickly build REST APIs from the Swift datatypes you already have in your application. Kitura 2.1, 2.2, and 2.3 enhanced Codable routing further, bringing features like Codable support for URL query parameters and URL-encoded HTML forms.</p>\\n<p>Now in Kitura 2.4 you can write a new kind of middleware and associate it with your Codable routes. We’re providing support for type-safe Sessions and Authentication for you, but you can use type-safe middlewares for anything you want.</p>\\n<hr>\\n<h2 id=\\"swagger-support\\"><a href=\\"#swagger-support\\" aria-label=\\"swagger support permalink\\" class=\\"anchor\\"><svg aria-hidden=\\"true\\" focusable=\\"false\\" height=\\"16\\" version=\\"1.1\\" viewBox=\\"0 0 16 16\\" width=\\"16\\"><path fill-rule=\\"evenodd\\" d=\\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\\"></path></svg></a>Swagger support</h2>\\n<p><a href=\\"https://swagger.io/\\">Swagger</a>, also known as OpenAPI, is the most popular way to document RESTful web services. The Swagger ecosystem provides a broad range of tools and services for developers across the API lifecycle.</p>\\n<p>For a long time, the <a href=\\"https://github.com/IBM-Swift/generator-swiftserver\\">Kitura server generator</a> enabled developers to generate a Kitura application from a provided Swagger document.</p>\\n<p>Now, Kitura has native support for generating a Swagger document from the currently running application, and a new <a href=\\"https://github.com/IBM-Swift/Kitura-OpenAPI\\">Kitura-OpenAPI package</a> makes adding a Swagger endpoint and SwaggerUI to your application one line of code.</p>\\n<hr>\\n<h2 id=\\"kitura-on-swiftnio\\"><a href=\\"#kitura-on-swiftnio\\" aria-label=\\"kitura on swiftnio permalink\\" class=\\"anchor\\"><svg aria-hidden=\\"true\\" focusable=\\"false\\" height=\\"16\\" version=\\"1.1\\" viewBox=\\"0 0 16 16\\" width=\\"16\\"><path fill-rule=\\"evenodd\\" d=\\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\\"></path></svg></a>Kitura on SwiftNIO</h2>\\n<p><a href=\\"https://github.com/apple/swift-nio/\\">SwiftNIO</a> is a new framework for writing high-performance network applications in Swift. Kitura 2.4 brings experimental support for running Kitura on SwiftNIO, including support for both Linux and macOS. We invite the community to explore this new technology and give us feedback.</p>\\n<hr>\\n<h2 id=\\"type-safe-templating\\"><a href=\\"#type-safe-templating\\" aria-label=\\"type safe templating permalink\\" class=\\"anchor\\"><svg aria-hidden=\\"true\\" focusable=\\"false\\" height=\\"16\\" version=\\"1.1\\" viewBox=\\"0 0 16 16\\" width=\\"16\\"><path fill-rule=\\"evenodd\\" d=\\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\\"></path></svg></a>Type-safe templating</h2>\\n<p>Web applications are an important use-case for Kitura, and in Kitura 2.4 we’ve enhanced our templating APIs so they support easy rendering of <code class=\\"language-text\\">Codable</code> structures. Many thanks go to Steven van Impe from the Kitura community who contributed valuable ideas and code to this new feature.</p>\\n<hr>\\n<h2 id=\\"other-features\\"><a href=\\"#other-features\\" aria-label=\\"other features permalink\\" class=\\"anchor\\"><svg aria-hidden=\\"true\\" focusable=\\"false\\" height=\\"16\\" version=\\"1.1\\" viewBox=\\"0 0 16 16\\" width=\\"16\\"><path fill-rule=\\"evenodd\\" d=\\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\\"></path></svg></a>Other features…</h2>\\n<p>Kitura 2.4 also comes with a slew of other minor improvements and fixes, including:</p>\\n<h3 id=\\"easily-decode-query-parameters-in-raw-routes-1215\\"><a href=\\"#easily-decode-query-parameters-in-raw-routes-1215\\" aria-label=\\"easily decode query parameters in raw routes 1215 permalink\\" class=\\"anchor\\"><svg aria-hidden=\\"true\\" focusable=\\"false\\" height=\\"16\\" version=\\"1.1\\" viewBox=\\"0 0 16 16\\" width=\\"16\\"><path fill-rule=\\"evenodd\\" d=\\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\\"></path></svg></a>Easily decode query parameters in raw routes (<a href=\\"https://github.com/IBM-Swift/Kitura/pull/1215\\">#1215</a>)</h3>\\n<p>A new <code class=\\"language-text\\">request.getQueryParameters()</code> function allows Kitura users to easily decode incoming query parameters to a <code class=\\"language-text\\">Codable</code> <code class=\\"language-text\\">QueryParams</code> structure.</p>\\n<h3 id=\\"decode-comma-separated-query-parameters-1238\\"><a href=\\"#decode-comma-separated-query-parameters-1238\\" aria-label=\\"decode comma separated query parameters 1238 permalink\\" class=\\"anchor\\"><svg aria-hidden=\\"true\\" focusable=\\"false\\" height=\\"16\\" version=\\"1.1\\" viewBox=\\"0 0 16 16\\" width=\\"16\\"><path fill-rule=\\"evenodd\\" d=\\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\\"></path></svg></a>Decode comma-separated query parameters (<a href=\\"https://github.com/IBM-Swift/Kitura/pull/1238\\">#1238</a>)</h3>\\n<p>A new <code class=\\"language-text\\">request.queryParametersMultiValues</code> property for decoding comma-separated query parameters into an array of strings automatically.</p>\\n<h3 id=\\"extra-codable-routing-api-1253\\"><a href=\\"#extra-codable-routing-api-1253\\" aria-label=\\"extra codable routing api 1253 permalink\\" class=\\"anchor\\"><svg aria-hidden=\\"true\\" focusable=\\"false\\" height=\\"16\\" version=\\"1.1\\" viewBox=\\"0 0 16 16\\" width=\\"16\\"><path fill-rule=\\"evenodd\\" d=\\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\\"></path></svg></a>Extra Codable routing API (<a href=\\"https://github.com/IBM-Swift/Kitura/pull/1253\\">#1253</a>)</h3>\\n<p>Previously it was not possible to return a single <code class=\\"language-text\\">Codable</code> object from a Codable GET route with query parameters. We’ve added this extra API so it’s now possible, as this pattern was observed in some existing REST APIs.</p>\\n<h3 id=\\"userinfo-in-routerresponse-1259\\"><a href=\\"#userinfo-in-routerresponse-1259\\" aria-label=\\"userinfo in routerresponse 1259 permalink\\" class=\\"anchor\\"><svg aria-hidden=\\"true\\" focusable=\\"false\\" height=\\"16\\" version=\\"1.1\\" viewBox=\\"0 0 16 16\\" width=\\"16\\"><path fill-rule=\\"evenodd\\" d=\\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\\"></path></svg></a><code class=\\"language-text\\">userInfo</code> in <code class=\\"language-text\\">RouterResponse</code> (<a href=\\"https://github.com/IBM-Swift/Kitura/pull/1259\\">#1259</a>)</h3>\\n<p>For a long time we’ve provided a public dictionary in <code class=\\"language-text\\">RouterRequest</code> to allow Kitura users to stash arbitrary user data. Now we also provide this on <code class=\\"language-text\\">RouterResponse</code>, to provide API symmetry and help those users who write extensions on <code class=\\"language-text\\">RouterResponse</code>.</p>\\n<h3 id=\\"asraw-property-on-parsedbody-1258\\"><a href=\\"#asraw-property-on-parsedbody-1258\\" aria-label=\\"asraw property on parsedbody 1258 permalink\\" class=\\"anchor\\"><svg aria-hidden=\\"true\\" focusable=\\"false\\" height=\\"16\\" version=\\"1.1\\" viewBox=\\"0 0 16 16\\" width=\\"16\\"><path fill-rule=\\"evenodd\\" d=\\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\\"></path></svg></a><code class=\\"language-text\\">asRaw</code> property on <code class=\\"language-text\\">ParsedBody</code> (<a href=\\"https://github.com/IBM-Swift/Kitura/pull/1258\\">#1258</a>)</h3>\\n<p>Now you can decode body data as a <code class=\\"language-text\\">Data?</code> easily via a new <code class=\\"language-text\\">asRaw</code> property. This provides nice symmetry with the existing <code class=\\"language-text\\">asJSON</code> and <code class=\\"language-text\\">asURLEncoded</code> properties.</p>\\n<h2 id=\\"whats-next\\"><a href=\\"#whats-next\\" aria-label=\\"whats next permalink\\" class=\\"anchor\\"><svg aria-hidden=\\"true\\" focusable=\\"false\\" height=\\"16\\" version=\\"1.1\\" viewBox=\\"0 0 16 16\\" width=\\"16\\"><path fill-rule=\\"evenodd\\" d=\\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\\"></path></svg></a>What’s Next</h2>\\n<p>The Kitura team has lots of ideas about where to go next, including more integration of SwiftNIO, enhancements to our Swagger support, and much more. <a href=\\"https://slack.kitura.io/\\">Join our Slack</a> to talk server-side Swift with the community and help shape the future of Kitura!</p>","frontmatter":{"path":"/blogs/announcing-kitura-2-4","title":"Announcing Kitura 2.4"}}},{"node":{"html":"<p>We are delighted to announce the release of Kitura 2.6, the latest release of the popular open source Swift web framework.</p>\\n<p>Alongside this release are a number of exciting announcements about the Kitura and Swift@IBM ecosystem, including a new KituraStudio IDE, a new partnership with Realm, and a major new release of our Swift-Kuery database system.</p>\\n<p>Learn more below and click through to the detailed blog posts on each topic.</p>\\n<h2 id=\\"kitura-26\\"><a href=\\"#kitura-26\\" aria-label=\\"kitura 26 permalink\\" class=\\"anchor\\"><svg aria-hidden=\\"true\\" focusable=\\"false\\" height=\\"16\\" version=\\"1.1\\" viewBox=\\"0 0 16 16\\" width=\\"16\\"><path fill-rule=\\"evenodd\\" d=\\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\\"></path></svg></a>Kitura 2.6</h2>\\n<p>Kitura 2.6 includes several functional enhancements, plus improvements to the performance of Kitura when running on SwiftNIO.</p>\\n<p>Kitura 2.6 contains the following enhancements:</p>\\n<ul>\\n<li>Consistent handling of parameters for Codable routes <a href=\\"https://github.com/IBM-Swift/Kitura/pull/1310\\">#1310</a></li>\\n<li>Initialize TypesafeMiddleware first <a href=\\"https://github.com/IBM-Swift/Kitura/pull/1350\\">#1350</a></li>\\n<li>Allow Kitura welcome page to be disabled <a href=\\"https://github.com/IBM-Swift/Kitura/pull/1344\\">#1344</a></li>\\n<li>Performance improvement when sending Strings <a href=\\"https://github.com/IBM-Swift/Kitura/pull/1369\\">#1369</a></li>\\n<li>Conditional GET using etags <a href=\\"https://github.com/IBM-Swift/Kitura/pull/1333\\">#1333</a></li>\\n</ul>\\n<p>Thank you to everyone in the community who contributed to this release.</p>\\n<h3 id=\\"kituranio\\"><a href=\\"#kituranio\\" aria-label=\\"kituranio permalink\\" class=\\"anchor\\"><svg aria-hidden=\\"true\\" focusable=\\"false\\" height=\\"16\\" version=\\"1.1\\" viewBox=\\"0 0 16 16\\" width=\\"16\\"><path fill-rule=\\"evenodd\\" d=\\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\\"></path></svg></a>KituraNIO</h3>\\n<p>A couple of obvious bottlenecks have been resolved – PR <a href=\\"https://github.com/IBM-Swift/Kitura-NIO/pull/112\\">#112</a> and PR <a href=\\"https://github.com/IBM-Swift/Kitura-NIO/pull/113\\">#113</a>. These led to performance improvements of up to 30% on some benchmarks. A few more obvious bottlenecks do still exist and their solutions are in progress (e.g PR <a href=\\"https://github.com/IBM-Swift/Kitura-NIO/pull/117\\">#117</a>). KituraNIO now performs better than KituraNet on the <code class=\\"language-text\\">plaintext</code> benchmark. Longstanding stress tests were also run to make sure Kitura-NIO is stable over time. We feel that Kitura-NIO is ready for real-world usage and encourage users to try it out.</p>\\n<hr>\\n<h2 id=\\"announcing-kiturastudio\\"><a href=\\"#announcing-kiturastudio\\" aria-label=\\"announcing kiturastudio permalink\\" class=\\"anchor\\"><svg aria-hidden=\\"true\\" focusable=\\"false\\" height=\\"16\\" version=\\"1.1\\" viewBox=\\"0 0 16 16\\" width=\\"16\\"><path fill-rule=\\"evenodd\\" d=\\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\\"></path></svg></a>Announcing KituraStudio</h2>\\n<p>We are pleased to announce the release of KituraStudio, a new IDE for Server-side Swift from the <a href=\\"https://www.scade.io\\">SCADE</a> team.</p>\\n<p>KituraStudio has built-in integration with Docker, allowing you to code, build, and run your Kitura application on Linux in one environment, on macOS. It also provides a modern editing experience with quick feedback loop, and support for SPM.</p>\\n<p>We are excited to invite you to try out KituraStudio and the SCADE team are looking forward to receiving your feedback.</p>\\n<hr>\\n<h2 id=\\"realm-and-ibm-cloud-functions\\"><a href=\\"#realm-and-ibm-cloud-functions\\" aria-label=\\"realm and ibm cloud functions permalink\\" class=\\"anchor\\"><svg aria-hidden=\\"true\\" focusable=\\"false\\" height=\\"16\\" version=\\"1.1\\" viewBox=\\"0 0 16 16\\" width=\\"16\\"><path fill-rule=\\"evenodd\\" d=\\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\\"></path></svg></a>Realm and IBM Cloud Functions</h2>\\n<p>We are pleased to announce a collaboration between Realm and IBM to bring the power of <a href=\\"https://realm.io\\">Realm</a> to the flexibility and extensibility of IBM Cloud. This collaboration combines Realm’s capabilities for offline-first and zero-latency mobile applications with IBM’s Cloud and IBM Cloud Functions, enabling server-side triggers written in any language (including Swift!), for the real-time facilitation of arbitrary functions and application extensions. We have open-sourced a demo application and recorded a video of it, but this is just the beginning – this is purely an example demo, and the possibilities are endless.</p>\\n<p><a href=\\"https://realm.io/blog/realm-and-ibm-cloud-functions/\\">Click here</a> for more information, and visit <a href=\\"https://github.com/realm/realm-cloud-functions-demo\\">https://github.com/realm/realm-cloud-functions-demo</a> to try the code out.</p>\\n<hr>\\n<h2 id=\\"announcing-swift-kuery-30\\"><a href=\\"#announcing-swift-kuery-30\\" aria-label=\\"announcing swift kuery 30 permalink\\" class=\\"anchor\\"><svg aria-hidden=\\"true\\" focusable=\\"false\\" height=\\"16\\" version=\\"1.1\\" viewBox=\\"0 0 16 16\\" width=\\"16\\"><path fill-rule=\\"evenodd\\" d=\\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\\"></path></svg></a>Announcing Swift-Kuery 3.0</h2>\\n<p>We have recently released version 3.0 of Swift-Kuery along with version 2.0 of Swift-Kuery-PostgreSQL, SwiftKueryMySQL and Swift-Kuery-SQLite.</p>\\n<p>The SwiftKuery API has had an overhaul and has been updated to be entirely asynchronous. You now pass callbacks to the API for establishing your connections and preparing statements in the same way as you do currently when executing your queries and transactions.</p>\\n<p>Now that Swift-Kuery is entirely asynchronous we are ready for the future of Swift. The new APIs should transition seamlessly to async/await, and it should also be possible to take advantage of the new database drivers being discussed in the Swift Server Working Group.</p>\\n<p><a href=\\"/blogs/announcing-swiftkuery-3-0\\">Click here</a> for full information and how to migrate to the new version.</p>\\n<hr>\\n<h2 id=\\"swift-jwt-30\\"><a href=\\"#swift-jwt-30\\" aria-label=\\"swift jwt 30 permalink\\" class=\\"anchor\\"><svg aria-hidden=\\"true\\" focusable=\\"false\\" height=\\"16\\" version=\\"1.1\\" viewBox=\\"0 0 16 16\\" width=\\"16\\"><path fill-rule=\\"evenodd\\" d=\\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\\"></path></svg></a>Swift-JWT 3.0</h2>\\n<p>We have just released version 3.0 of <a href=\\"https://github.com/IBM-Swift/Swift-JWT\\">Swift-JWT</a>, our library for creating, signing, and verifying JSON Web Tokens. This release adds Codable conformance to the JWTs for easy encoding and decoding. As a result, you can now use JWTs with Kitura’s Codable Routing feature. Furthermore, this release adds support for signing and verifying JWTs using the HMAC hash function.</p>\\n<p><a href=\\"/blogs/swift-jwt-3-0-codable-json-web-tokens\\">Click here</a> for full information and how to migrate to the new version.</p>\\n<hr>\\n<h2 id=\\"kitura-session-33\\"><a href=\\"#kitura-session-33\\" aria-label=\\"kitura session 33 permalink\\" class=\\"anchor\\"><svg aria-hidden=\\"true\\" focusable=\\"false\\" height=\\"16\\" version=\\"1.1\\" viewBox=\\"0 0 16 16\\" width=\\"16\\"><path fill-rule=\\"evenodd\\" d=\\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\\"></path></svg></a>Kitura-Session 3.3</h2>\\n<p>Web application servers are generally “stateless” and handle HTTP requests independently. However, it’s common for a developer to want to link requests from the same user together in a session. A simple way to achieve this is by using a cookie to identify the user and associating data to that cookie. <a href=\\"https://github.com/IBM-Swift/Kitura-Session\\">Kitura-Session</a> allows you to implement this flow and, as of version 3.3, you can now directly store and retrieve Codable objects in users’ sessions.</p>\\n<p><a href=\\"/blogs/codable-kitura-session\\">Click here</a> for full information on this new feature.</p>","frontmatter":{"path":"/blogs/announcing-kitura-2-6","title":"Announcing Kitura 2.6 and more!"}}},{"node":{"html":"<p>We’re delighted to announce the release of Kitura 2.7, alongside a range of other releases and improvements to the Kitura ecosystem.</p>\\n<h2 id=\\"kitura-27\\"><a href=\\"#kitura-27\\" aria-label=\\"kitura 27 permalink\\" class=\\"anchor\\"><svg aria-hidden=\\"true\\" focusable=\\"false\\" height=\\"16\\" version=\\"1.1\\" viewBox=\\"0 0 16 16\\" width=\\"16\\"><path fill-rule=\\"evenodd\\" d=\\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\\"></path></svg></a>Kitura 2.7</h2>\\n<p>Kitura 2.7 is fully compatible with Swift 5, and comes with a range of improvements, bug fixes and performance work. You can find full information in the <a href=\\"https://github.com/IBM-Swift/Kitura/releases/tag/2.7.0\\">GitHub release notes</a>.</p>\\n<p>One user-facing feature is support for UNIX domain sockets, both client and server. This gives Kitura the ability to listen on a UNIX domain socket instead of an INET (TCP) socket and was requested in our <a href=\\"http://swift-at-ibm-slack.mybluemix.net\\">Slack channel</a>.</p>\\n<p>There is a new <code class=\\"language-text\\">Kitura.addHTTPServer(onUnixDomainSocket:)</code> API to allow you to listen on a UNIX domain socket. Additionally, you can make outbound (client) HTTP requests over a UNIX domain socket (for example, to the Docker daemon) using KituraNet’s new <code class=\\"language-text\\">HTTP.request(unixDomainSocketPath:)</code> API. This is also available when running on KituraNIO.</p>\\n<p>There are also major improvements to Kitura’s generation of OpenAPI documents, which are now more compliant with the specification and support a wider variety of types of endpoints.</p>\\n<p>Finally, there is the usual array of bug fixes and performance improvements. The performance improvements should be especially noticeable when running on Swift 5.</p>\\n<hr>\\n<h2 id=\\"kitura-nio-20\\"><a href=\\"#kitura-nio-20\\" aria-label=\\"kitura nio 20 permalink\\" class=\\"anchor\\"><svg aria-hidden=\\"true\\" focusable=\\"false\\" height=\\"16\\" version=\\"1.1\\" viewBox=\\"0 0 16 16\\" width=\\"16\\"><path fill-rule=\\"evenodd\\" d=\\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\\"></path></svg></a>Kitura-NIO 2.0</h2>\\n<p>We are also announcing support for SwiftNIO 2.0 on Swift 5. SwiftNIO is a high performance networking framework from Apple, and Kitura gained the ability to use it last year following the release of SwiftNIO 1.0.</p>\\n<p>Now that SwiftNIO 2.0 has been released, Kitura will use it when you build in KITURA_NIO mode on Swift 5.</p>\\n<p>We would like to thank the SwiftNIO team for their continuing help and advice during this migration.</p>\\n<p>Note: If you are not ready to move to Swift 5, but do wish to use KituraNIO, you should make sure your Package.swift specifies <code class=\\"language-text\\">.upToNextMinor(from: &quot;2.6.0&quot;)</code> for Kitura so that your app continues to use SwiftNIO 1.0. This is because SwiftNIO 2.0 requires Swift 5.</p>\\n<hr>\\n<h2 id=\\"kitura-websocket-nio\\"><a href=\\"#kitura-websocket-nio\\" aria-label=\\"kitura websocket nio permalink\\" class=\\"anchor\\"><svg aria-hidden=\\"true\\" focusable=\\"false\\" height=\\"16\\" version=\\"1.1\\" viewBox=\\"0 0 16 16\\" width=\\"16\\"><path fill-rule=\\"evenodd\\" d=\\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\\"></path></svg></a>Kitura-WebSocket-NIO</h2>\\n<p>Kitura’s WebSocket implementation has also been ported to SwiftNIO 2.0 and we now offer 3 different implementations according to your need:</p>\\n<p>Kitura-WebSocket: traditional implementation\\nKitura-WebSocket-NIO 1.0: implementation on SwiftNIO 1.0, for Swift 4\\nKitura-WebSocket-NIO 2.0: implementation on SwiftNIO 2.0, for Swift 5</p>\\n<p>This transition should be seamless for users. If you do experience any problems, just let us know!</p>\\n<h2 id=\\"bluersa\\"><a href=\\"#bluersa\\" aria-label=\\"bluersa permalink\\" class=\\"anchor\\"><svg aria-hidden=\\"true\\" focusable=\\"false\\" height=\\"16\\" version=\\"1.1\\" viewBox=\\"0 0 16 16\\" width=\\"16\\"><path fill-rule=\\"evenodd\\" d=\\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\\"></path></svg></a>BlueRSA</h2>\\n<p>BlueRSA, our package providing support for RSA encryption, decryption and signing, has been enhanced to provide easy APIs for making RSA keypairs. <code class=\\"language-text\\">RSAKey.makeKeyPair()</code> returns a tuple containing an RSA private and public key, and <code class=\\"language-text\\">RSAKey.pemString</code> returns an RSA key in PEM format.</p>\\n<p>Previously this functionality was only available through the <code class=\\"language-text\\">openssl</code> command-line interface, and making this available on BlueRSA means we have consistent functionality between BlueRSA and BlueECC, which already offered this for elliptic-curve keys.</p>\\n<h2 id=\\"documentation\\"><a href=\\"#documentation\\" aria-label=\\"documentation permalink\\" class=\\"anchor\\"><svg aria-hidden=\\"true\\" focusable=\\"false\\" height=\\"16\\" version=\\"1.1\\" viewBox=\\"0 0 16 16\\" width=\\"16\\"><path fill-rule=\\"evenodd\\" d=\\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\\"></path></svg></a>Documentation</h2>\\n<p>We continue to improve the Kitura documentation.</p>\\n<p>The “Learn” section of kitura.io has been completely written, and now features much more detailed information on Kitura, including information on logging, routing, databases, sessions, authentication, building web applications, and deploying to the cloud.</p>\\n<p>The “Learn” section uses the example of building a book store application. You can either follow the documentation from the beginning to build a complete application, or dip into the section that particularly interests you.</p>","frontmatter":{"path":"/blogs/announcing-kitura-2-7-and-more","title":"Announcing Kitura 2.7 and more"}}},{"node":{"html":"<p>We’re excited to announce the release of Kitura 2.8, alongside a number of other releases and improvements to the Kitura ecosystem.</p>\\n<h2 id=\\"kitura-28\\"><a href=\\"#kitura-28\\" aria-label=\\"kitura 28 permalink\\" class=\\"anchor\\"><svg aria-hidden=\\"true\\" focusable=\\"false\\" height=\\"16\\" version=\\"1.1\\" viewBox=\\"0 0 16 16\\" width=\\"16\\"><path fill-rule=\\"evenodd\\" d=\\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\\"></path></svg></a>Kitura 2.8</h2>\\n<p>Kitura 2.8 adds compatibility with Swift 5.1, and comes with a range of improvements and bug fixes, many of which are community requests and contributions. You can find full information in the <a href=\\"https://github.com/IBM-Swift/Kitura/releases/tag/2.8.0\\">GitHub release notes</a>.</p>\\n<h3 id=\\"logging-with-swift-log\\"><a href=\\"#logging-with-swift-log\\" aria-label=\\"logging with swift log permalink\\" class=\\"anchor\\"><svg aria-hidden=\\"true\\" focusable=\\"false\\" height=\\"16\\" version=\\"1.1\\" viewBox=\\"0 0 16 16\\" width=\\"16\\"><path fill-rule=\\"evenodd\\" d=\\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\\"></path></svg></a>Logging with swift-log</h3>\\n<p><a href=\\"/blogs/using-swift-log-with-kitura\\">In a previous article</a>, we described how LoggerAPI can be set up to direct Kitura’s logging output to swift-log. With Kitura 2.8, a new convenience function <code class=\\"language-text\\">Kitura.logTo(myLogger)</code> makes it easy to direct all of Kitura’s log output to swift-log, without needing to import (or declare a dependency on) the LoggerAPI package in your code.</p>\\n<p>HeliumLogger can now be used as a <a href=\\"https://github.com/IBM-Swift/HeliumLogger/pull/73\\"><code class=\\"language-text\\">LogHandler</code> logging backend for swift-log</a>.</p>\\n<h3 id=\\"improvements-to-server-startup-and-listening\\"><a href=\\"#improvements-to-server-startup-and-listening\\" aria-label=\\"improvements to server startup and listening permalink\\" class=\\"anchor\\"><svg aria-hidden=\\"true\\" focusable=\\"false\\" height=\\"16\\" version=\\"1.1\\" viewBox=\\"0 0 16 16\\" width=\\"16\\"><path fill-rule=\\"evenodd\\" d=\\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\\"></path></svg></a>Improvements to server startup and listening</h3>\\n<p>You can now <a href=\\"https://github.com/IBM-Swift/Kitura/pull/1430\\">detect failure when starting a Kitura server</a> through the process exit code – for example, when the server’s port is already in use. By default, <code class=\\"language-text\\">Kitura.run()</code> will now terminate the process with a non-zero status in the event that a server fails to start. To handle failure yourself, a new API <code class=\\"language-text\\">Kitura.startWithStatus() -&gt; Int</code> has been introduced, which returns the number of servers that failed to start.</p>\\n<p><a href=\\"https://github.com/IBM-Swift/Kitura/pull/1453\\">Listening on a specific address</a> is now possible – an optional <code class=\\"language-text\\">onAddress: String</code> parameter has been added to <code class=\\"language-text\\">Kitura.addHTTPServer</code>. This allows a Kitura server to be exposed only on a specific network – for example, localhost – rather than listening on all adapters.</p>\\n<h3 id=\\"easy-cookies\\"><a href=\\"#easy-cookies\\" aria-label=\\"easy cookies permalink\\" class=\\"anchor\\"><svg aria-hidden=\\"true\\" focusable=\\"false\\" height=\\"16\\" version=\\"1.1\\" viewBox=\\"0 0 16 16\\" width=\\"16\\"><path fill-rule=\\"evenodd\\" d=\\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\\"></path></svg></a>Easy cookies</h3>\\n<p>We’ve also made it <a href=\\"https://github.com/IBM-Swift/Kitura/pull/1468\\">easier to add cookies to a response</a>, by including a convenience response.addCookie() function. This removes a lot of the boilerplate code otherwise required to work with Foundation’s HTTPCookie type:</p>\\n<div class=\\"gatsby-highlight\\" data-language=\\"swift\\"><pre class=\\"language-swift\\"><code class=\\"language-swift\\">router<span class=\\"token punctuation\\">.</span><span class=\\"token keyword\\">get</span><span class=\\"token punctuation\\">(</span><span class=\\"token string\\">\\"/bakery\\"</span><span class=\\"token punctuation\\">)</span> <span class=\\"token punctuation\\">{</span>request<span class=\\"token punctuation\\">,</span> response<span class=\\"token punctuation\\">,</span> next <span class=\\"token keyword\\">in</span>\\n    response<span class=\\"token punctuation\\">.</span><span class=\\"token function\\">status</span><span class=\\"token punctuation\\">(</span><span class=\\"token builtin\\">HTTPStatusCode</span><span class=\\"token punctuation\\">.</span><span class=\\"token constant\\">OK</span><span class=\\"token punctuation\\">)</span>\\n    response<span class=\\"token punctuation\\">.</span><span class=\\"token function\\">addCookie</span><span class=\\"token punctuation\\">(</span>name<span class=\\"token punctuation\\">:</span> <span class=\\"token string\\">\\"variant\\"</span><span class=\\"token punctuation\\">,</span> value<span class=\\"token punctuation\\">:</span> <span class=\\"token string\\">\\"gluten-free\\"</span><span class=\\"token punctuation\\">,</span> domain<span class=\\"token punctuation\\">:</span> <span class=\\"token string\\">\\"my.biz\\"</span><span class=\\"token punctuation\\">,</span> path<span class=\\"token punctuation\\">:</span> <span class=\\"token string\\">\\"/\\"</span><span class=\\"token punctuation\\">,</span> otherAttributes<span class=\\"token punctuation\\">:</span> <span class=\\"token punctuation\\">[</span><span class=\\"token punctuation\\">.</span><span class=\\"token function\\">isSecure</span><span class=\\"token punctuation\\">(</span><span class=\\"token boolean\\">true</span><span class=\\"token punctuation\\">)</span><span class=\\"token punctuation\\">]</span><span class=\\"token punctuation\\">)</span>\\n    <span class=\\"token function\\">next</span><span class=\\"token punctuation\\">(</span><span class=\\"token punctuation\\">)</span>\\n<span class=\\"token punctuation\\">}</span></code></pre></div>\\n<h3 id=\\"single-page-applications\\"><a href=\\"#single-page-applications\\" aria-label=\\"single page applications permalink\\" class=\\"anchor\\"><svg aria-hidden=\\"true\\" focusable=\\"false\\" height=\\"16\\" version=\\"1.1\\" viewBox=\\"0 0 16 16\\" width=\\"16\\"><path fill-rule=\\"evenodd\\" d=\\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\\"></path></svg></a>Single-page applications</h3>\\n<p><a href=\\"https://github.com/IBM-Swift/Kitura/pull/1464\\">Support for single-page applications</a> has been added. <code class=\\"language-text\\">StaticFileServer</code> can now be configured to serve a default file (for example, /<code class=\\"language-text\\">index.html</code>) if the requested path is not found.</p>\\n<hr>\\n<h2 id=\\"new-features-in-the-kitura-ecosystem\\"><a href=\\"#new-features-in-the-kitura-ecosystem\\" aria-label=\\"new features in the kitura ecosystem permalink\\" class=\\"anchor\\"><svg aria-hidden=\\"true\\" focusable=\\"false\\" height=\\"16\\" version=\\"1.1\\" viewBox=\\"0 0 16 16\\" width=\\"16\\"><path fill-rule=\\"evenodd\\" d=\\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\\"></path></svg></a>New features in the Kitura ecosystem</h2>\\n<p>Beyond these core Kitura improvements, we’d like to highlight some other new features we’ve been working on:</p>\\n<h3 id=\\"jwt-authentication\\"><a href=\\"#jwt-authentication\\" aria-label=\\"jwt authentication permalink\\" class=\\"anchor\\"><svg aria-hidden=\\"true\\" focusable=\\"false\\" height=\\"16\\" version=\\"1.1\\" viewBox=\\"0 0 16 16\\" width=\\"16\\"><path fill-rule=\\"evenodd\\" d=\\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\\"></path></svg></a>JWT Authentication</h3>\\n<p>Use of JSON web tokens for authentication has become increasingly popular – we recently released <code class=\\"language-text\\">Kitura-CredentialsJWT</code> which enables JWT authentication for Codable routes, and have added support for supplying JWT authentication tokens in <code class=\\"language-text\\">KituraKit</code>.</p>\\n<p>Read more in: <a href=\\"/blogs/jwt-authentication-using-kiturakit\\">JWT authentication using KituraKit</a>.</p>\\n<h3 id=\\"event-streams-support-with-swiftkafka\\"><a href=\\"#event-streams-support-with-swiftkafka\\" aria-label=\\"event streams support with swiftkafka permalink\\" class=\\"anchor\\"><svg aria-hidden=\\"true\\" focusable=\\"false\\" height=\\"16\\" version=\\"1.1\\" viewBox=\\"0 0 16 16\\" width=\\"16\\"><path fill-rule=\\"evenodd\\" d=\\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\\"></path></svg></a>Event Streams support with SwiftKafka</h3>\\n<p>We recently released SwiftKafka, a Swift package for producing and consuming events from an Apache Kafka platform. SwiftKafka is a standalone library and does not require Kitura, but they work well together!</p>\\n<p>Read more in: <a href=\\"/blogs/swift-kafka-event-streams\\">Introducing SwiftKafka: Accessing Event Streams in Swift</a></p>\\n<h3 id=\\"documentation\\"><a href=\\"#documentation\\" aria-label=\\"documentation permalink\\" class=\\"anchor\\"><svg aria-hidden=\\"true\\" focusable=\\"false\\" height=\\"16\\" version=\\"1.1\\" viewBox=\\"0 0 16 16\\" width=\\"16\\"><path fill-rule=\\"evenodd\\" d=\\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\\"></path></svg></a>Documentation</h3>\\n<p>The “Learn” section of <a href=\\"http://kitura.io\\">kitura.io</a> has been updated with:</p>\\n<ul>\\n<li>Improved walkthrough of building your project using Docker(<a href=\\"https://github.com/IBM-Swift/kitura.io/pull/388\\">kitura.io#388</a>)</li>\\n<li>Improved guides for deploying to Kubernetes or CloudFoundry (<a href=\\"https://github.com/IBM-Swift/kitura.io/pull/386\\">kitura.io#386</a>, <a href=\\"https://github.com/IBM-Swift/kitura.io/pull/392\\">kitura.io#392</a>)</li>\\n<li>New guide for building your Kitura project with Swift-NIO (<a href=\\"https://github.com/IBM-Swift/kitura.io/pull/400\\">kitura.io#400</a>)</li>\\n</ul>","frontmatter":{"path":"/blogs/announcing-kitura-2-8-and-more","title":"Announcing Kitura 2.8 and more"}}},{"node":{"html":"<p>We\'re pleased to announce the latest release of Kitura, as well as a new major version of the SwiftyRequest HTTP client. KituraKit, which is built on top of SwiftyRequest, has now been released at version 1.0.  Read on for some highlights for each of these releases:</p>\\n<h2 id=\\"kitura-29\\"><a href=\\"#kitura-29\\" aria-label=\\"kitura 29 permalink\\" class=\\"anchor\\"><svg aria-hidden=\\"true\\" focusable=\\"false\\" height=\\"16\\" version=\\"1.1\\" viewBox=\\"0 0 16 16\\" width=\\"16\\"><path fill-rule=\\"evenodd\\" d=\\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\\"></path></svg></a>Kitura 2.9</h2>\\n<p>You can check out the <a href=\\"https://github.com/IBM-Swift/Kitura/releases/tag/2.9.0\\">release notes for Kitura 2.9</a> on GitHub. Features of this release are:</p>\\n<h3 id=\\"allow-customization-of-the-swaggerdocument-1483\\"><a href=\\"#allow-customization-of-the-swaggerdocument-1483\\" aria-label=\\"allow customization of the swaggerdocument 1483 permalink\\" class=\\"anchor\\"><svg aria-hidden=\\"true\\" focusable=\\"false\\" height=\\"16\\" version=\\"1.1\\" viewBox=\\"0 0 16 16\\" width=\\"16\\"><path fill-rule=\\"evenodd\\" d=\\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\\"></path></svg></a>Allow customization of the SwaggerDocument (<a href=\\"https://github.com/IBM-Swift/Kitura/pull/1483\\">#1483</a>)</h3>\\n<p>The OpenAPI document\'s title, description and version properties can now be specified:</p>\\n<div class=\\"gatsby-highlight\\" data-language=\\"swift\\"><pre class=\\"language-swift\\"><code class=\\"language-swift\\"><span class=\\"token keyword\\">let</span> customDocument <span class=\\"token operator\\">=</span> <span class=\\"token function\\">SwaggerDocument</span><span class=\\"token punctuation\\">(</span>title<span class=\\"token punctuation\\">:</span> <span class=\\"token string\\">\\"My Service\\"</span><span class=\\"token punctuation\\">,</span> description<span class=\\"token punctuation\\">:</span> <span class=\\"token string\\">\\"A description\\"</span><span class=\\"token punctuation\\">,</span> version<span class=\\"token punctuation\\">:</span> <span class=\\"token string\\">\\"1.0\\"</span><span class=\\"token punctuation\\">)</span>\\n<span class=\\"token keyword\\">let</span> router <span class=\\"token operator\\">=</span> <span class=\\"token function\\">Router</span><span class=\\"token punctuation\\">(</span>apiDocument<span class=\\"token punctuation\\">:</span> customDocument<span class=\\"token punctuation\\">)</span></code></pre></div>\\n<h3 id=\\"ability-to-limit-request-size-and-connection-count-1481\\"><a href=\\"#ability-to-limit-request-size-and-connection-count-1481\\" aria-label=\\"ability to limit request size and connection count 1481 permalink\\" class=\\"anchor\\"><svg aria-hidden=\\"true\\" focusable=\\"false\\" height=\\"16\\" version=\\"1.1\\" viewBox=\\"0 0 16 16\\" width=\\"16\\"><path fill-rule=\\"evenodd\\" d=\\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\\"></path></svg></a>Ability to limit request size and connection count (<a href=\\"https://github.com/IBM-Swift/Kitura/pull/1481\\">#1481</a>)</h3>\\n<p>A Kitura server can now be configured to limit the number of concurrent connections it will accept, and to reject requests whose request body exceeds a certain size.  By default, 10,000 connections are permitted and a request body size of 100mb.  These values can be adjusted upon registering a server:</p>\\n<div class=\\"gatsby-highlight\\" data-language=\\"swift\\"><pre class=\\"language-swift\\"><code class=\\"language-swift\\"><span class=\\"token keyword\\">let</span> options <span class=\\"token operator\\">=</span> <span class=\\"token function\\">ServerOptions</span><span class=\\"token punctuation\\">(</span>requestSizeLimit<span class=\\"token punctuation\\">:</span> <span class=\\"token number\\">1024</span><span class=\\"token punctuation\\">,</span> connectionLimit<span class=\\"token punctuation\\">:</span> <span class=\\"token number\\">10</span><span class=\\"token punctuation\\">)</span>\\n<span class=\\"token builtin\\">Kitura</span><span class=\\"token punctuation\\">.</span><span class=\\"token function\\">addHTTPServer</span><span class=\\"token punctuation\\">(</span>onPort<span class=\\"token punctuation\\">:</span> port<span class=\\"token punctuation\\">,</span> with<span class=\\"token punctuation\\">:</span> router<span class=\\"token punctuation\\">,</span> options<span class=\\"token punctuation\\">:</span> options<span class=\\"token punctuation\\">)</span></code></pre></div>\\n<p>See the <a href=\\"http://ibm-swift.github.io/Kitura-net/Structs/ServerOptions.html\\"><code class=\\"language-text\\">ServerOptions</code></a> documentation for more information.</p>\\n<h2 id=\\"swiftyrequest-30\\"><a href=\\"#swiftyrequest-30\\" aria-label=\\"swiftyrequest 30 permalink\\" class=\\"anchor\\"><svg aria-hidden=\\"true\\" focusable=\\"false\\" height=\\"16\\" version=\\"1.1\\" viewBox=\\"0 0 16 16\\" width=\\"16\\"><path fill-rule=\\"evenodd\\" d=\\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\\"></path></svg></a>SwiftyRequest 3.0</h2>\\n<p>SwiftyRequest provides a high-level HTTP client for making requests from your Swift application. This release represents a major re-working of the library to use swift-nio, via the async-http-client project currently under development by the Swift Server Working Group.</p>\\n<p>An advantage of adopting swift-nio is that SwiftyRequest can now support client certificates (2-way SSL). To learn more about this feature, check out the <a href=\\"https://github.com/IBM-Swift/SwiftyRequest/\\">SwiftyRequest README</a> and the documentation for <a href=\\"https://ibm-swift.github.io/SwiftyRequest/Structs/ClientCertificate.html\\"><code class=\\"language-text\\">ClientCertificate</code></a>.</p>\\n<p>Although there are a number of API changes in this release, much of the previous SwiftyRequest API has been preserved, to reduce the work required to migrate.</p>\\n<h2 id=\\"kiturakit-10\\"><a href=\\"#kiturakit-10\\" aria-label=\\"kiturakit 10 permalink\\" class=\\"anchor\\"><svg aria-hidden=\\"true\\" focusable=\\"false\\" height=\\"16\\" version=\\"1.1\\" viewBox=\\"0 0 16 16\\" width=\\"16\\"><path fill-rule=\\"evenodd\\" d=\\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\\"></path></svg></a>KituraKit 1.0</h2>\\n<p>KituraKit is a client-side library designed to mirror Kitura\'s Codable Routing API. KituraKit uses SwiftyRequest under the covers, and the 1.0 release provides some improvements such as better error reporting for cases where the server\'s response does not match the expected structure (a decoding error).</p>\\n<p>A <a href=\\"/docs/client/iOSClient\\">new KituraKit guide</a> has been added to the kitura.io website demonstrating how KituraKit can be used to talk to a Kitura service.</p>","frontmatter":{"path":"/blogs/announcing-kitura-2-9","title":"Announcing Kitura 2.9, SwiftyRequest 3.0 and KituraKit 1.0"}}},{"node":{"html":"<p>We have just released <a href=\\"https://github.com/IBM-Swift/BlueECC\\">BlueECC</a>, a new Swift package for cross-platform elliptic curve cryptography. This enables you to encrypt, decrypt, sign and verify data using elliptic curve asymmetric keys. This blog post will explain what elliptic curves are, why you would use them over RSA and provides examples of the BlueECC API.</p>\\n<h2 id=\\"what-is-elliptic-curve-cryptography\\"><a href=\\"#what-is-elliptic-curve-cryptography\\" aria-label=\\"what is elliptic curve cryptography permalink\\" class=\\"anchor\\"><svg aria-hidden=\\"true\\" focusable=\\"false\\" height=\\"16\\" version=\\"1.1\\" viewBox=\\"0 0 16 16\\" width=\\"16\\"><path fill-rule=\\"evenodd\\" d=\\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\\"></path></svg></a>What is Elliptic Curve Cryptography?</h2>\\n<p>In RSA cryptography, the security of the public/private key pair relies on the complexity of factorizing a large integer. In Elliptic Curve Cryptography, the security relies on the complexity of finding the discrete logarithm of a random elliptic curve element.</p>\\n<p>BlueECC uses the Elliptic Curve Integrated Encryption Scheme (<a href=\\"https://www.cryptopp.com/wiki/Elliptic_Curve_Integrated_Encryption_Scheme\\">ECIES</a>) and Elliptic Curve Digital Signature Algorithm (<a href=\\"https://en.wikipedia.org/wiki/Elliptic_Curve_Digital_Signature_Algorithm\\">ECDSA</a>) for its cryptography. Fortunately, you do not need to know the mathematics behind the algorithms to use them. They work just like RSA with a public key for encryption/verifying and a private key for decryption/signing.</p>\\n<hr>\\n<h2 id=\\"why-use-elliptic-curve-over-rsa\\"><a href=\\"#why-use-elliptic-curve-over-rsa\\" aria-label=\\"why use elliptic curve over rsa permalink\\" class=\\"anchor\\"><svg aria-hidden=\\"true\\" focusable=\\"false\\" height=\\"16\\" version=\\"1.1\\" viewBox=\\"0 0 16 16\\" width=\\"16\\"><path fill-rule=\\"evenodd\\" d=\\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\\"></path></svg></a>Why use Elliptic Curve over RSA?</h2>\\n<p>Elliptic curve (EC) keys allow you to perform the same asymmetric public key cryptography as RSA keys. However, they have gained popularity due to the following advantages:</p>\\n<ul>\\n<li>Smaller key sizes (a 256 bit EC private key is considered equivalent to a 3072 bit RSA private key)</li>\\n<li>Faster key generation</li>\\n<li>Faster signing/verifying</li>\\n<li>Smaller signatures (approximately 1/6th the size of an equivalent RSA signature)</li>\\n<li>Smaller encryption payloads (EC adds 81 bytes per message vs 528 bytes for RSA)</li>\\n</ul>\\n<hr>\\n<h2 id=\\"blueecc-example\\"><a href=\\"#blueecc-example\\" aria-label=\\"blueecc example permalink\\" class=\\"anchor\\"><svg aria-hidden=\\"true\\" focusable=\\"false\\" height=\\"16\\" version=\\"1.1\\" viewBox=\\"0 0 16 16\\" width=\\"16\\"><path fill-rule=\\"evenodd\\" d=\\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\\"></path></svg></a>BlueECC Example</h2>\\n<p>Under the covers, BlueECC uses the Apple Security framework on macOS/iOS and OpenSSL on Linux. This means you can use it on both platforms without installing additional dependencies. BlueECC is available to import through Swift Package Manager or CocoaPods.</p>\\n<h3 id=\\"generating-ec-keys\\"><a href=\\"#generating-ec-keys\\" aria-label=\\"generating ec keys permalink\\" class=\\"anchor\\"><svg aria-hidden=\\"true\\" focusable=\\"false\\" height=\\"16\\" version=\\"1.1\\" viewBox=\\"0 0 16 16\\" width=\\"16\\"><path fill-rule=\\"evenodd\\" d=\\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\\"></path></svg></a>Generating EC keys</h3>\\n<p>We will use the OpenSSL command line to generate our EC private and public keys.</p>\\n<ol>\\n<li>On macOS you can install OpenSSL using <code class=\\"language-text\\">brew</code>:</li>\\n</ol>\\n<div class=\\"gatsby-highlight\\" data-language=\\"text\\"><pre class=\\"language-text\\"><code class=\\"language-text\\">$ brew install openssl</code></pre></div>\\n<ol start=\\"2\\">\\n<li>Once you have installed OpenSSL, create your private key:</li>\\n</ol>\\n<div class=\\"gatsby-highlight\\" data-language=\\"text\\"><pre class=\\"language-text\\"><code class=\\"language-text\\">$ openssl ecparam -name prime256v1 -genkey -noout -out ec256priv.pem</code></pre></div>\\n<ol start=\\"3\\">\\n<li>Using the private key, create your public key:</li>\\n</ol>\\n<div class=\\"gatsby-highlight\\" data-language=\\"text\\"><pre class=\\"language-text\\"><code class=\\"language-text\\">$ openssl ec -in ec256priv.pem -pubout -out ec256pub.pem</code></pre></div>\\n<p>This will have created two files called <code class=\\"language-text\\">ec256priv.pem</code> and <code class=\\"language-text\\">ec256pub.pem</code>. Open them in a text editor and you will see EC keys for the prime256v1 curve in PEM format. These can then be passed to BlueECC to create your keys:</p>\\n<div class=\\"gatsby-highlight\\" data-language=\\"swift\\"><pre class=\\"language-swift\\"><code class=\\"language-swift\\"><span class=\\"token keyword\\">let</span> ecPubKey <span class=\\"token operator\\">=</span> <span class=\\"token keyword\\">try</span> <span class=\\"token function\\">ECPublicKey</span><span class=\\"token punctuation\\">(</span>key<span class=\\"token punctuation\\">:</span> <span class=\\"token string\\">\\"&lt;publicPEM>\\"</span><span class=\\"token punctuation\\">)</span>\\n<span class=\\"token keyword\\">let</span> ecPrivKey <span class=\\"token operator\\">=</span> <span class=\\"token keyword\\">try</span> <span class=\\"token function\\">ECPrivateKey</span><span class=\\"token punctuation\\">(</span>key<span class=\\"token punctuation\\">:</span> <span class=\\"token string\\">\\"&lt;privatePEM>\\"</span><span class=\\"token punctuation\\">)</span></code></pre></div>\\n<p>Alternatively, you can generate the EC Keys directly using the BlueECC:</p>\\n<div class=\\"gatsby-highlight\\" data-language=\\"swift\\"><pre class=\\"language-swift\\"><code class=\\"language-swift\\"><span class=\\"token keyword\\">let</span> ecPubKey <span class=\\"token operator\\">=</span> <span class=\\"token keyword\\">try</span> ecPrivKey<span class=\\"token punctuation\\">.</span><span class=\\"token function\\">extractPublicKey</span><span class=\\"token punctuation\\">(</span><span class=\\"token punctuation\\">)</span>\\n<span class=\\"token function\\">print</span><span class=\\"token punctuation\\">(</span>ecPrivKey<span class=\\"token punctuation\\">.</span>pemString<span class=\\"token punctuation\\">)</span>\\n<span class=\\"token function\\">print</span><span class=\\"token punctuation\\">(</span>ecPubKey<span class=\\"token punctuation\\">.</span>pemString<span class=\\"token punctuation\\">)</span></code></pre></div>\\n<h3 id=\\"signing-and-verifying\\"><a href=\\"#signing-and-verifying\\" aria-label=\\"signing and verifying permalink\\" class=\\"anchor\\"><svg aria-hidden=\\"true\\" focusable=\\"false\\" height=\\"16\\" version=\\"1.1\\" viewBox=\\"0 0 16 16\\" width=\\"16\\"><path fill-rule=\\"evenodd\\" d=\\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\\"></path></svg></a>Signing and Verifying</h3>\\n<p>One use of asymmetric keys is in signing data. In this case, you produce a signature by signing the data with the private key. If the signature is successfully verified using the public key, you can be sure it was produced using the private key and that the data hasn’t been changed. This ensures the authenticity and integrity of the data.</p>\\n<p>With BlueECC you sign the plaintext as follows:</p>\\n<div class=\\"gatsby-highlight\\" data-language=\\"swift\\"><pre class=\\"language-swift\\"><code class=\\"language-swift\\"><span class=\\"token keyword\\">let</span> signature <span class=\\"token operator\\">=</span> <span class=\\"token keyword\\">try</span> <span class=\\"token string\\">\\"hello world\\"</span><span class=\\"token punctuation\\">.</span><span class=\\"token function\\">sign</span><span class=\\"token punctuation\\">(</span>with<span class=\\"token punctuation\\">:</span> ecPrivKey<span class=\\"token punctuation\\">)</span></code></pre></div>\\n<p>This will take your message and use the private key to create an <a href=\\"https://ibm-swift.github.io/BlueECC/Structs/ECSignature.html\\">ECSignature</a>. This struct can then be verified with the corresponding public key:</p>\\n<div class=\\"gatsby-highlight\\" data-language=\\"swift\\"><pre class=\\"language-swift\\"><code class=\\"language-swift\\"><span class=\\"token keyword\\">let</span> verified <span class=\\"token operator\\">=</span> signature<span class=\\"token punctuation\\">.</span><span class=\\"token function\\">verify</span><span class=\\"token punctuation\\">(</span>plaintext<span class=\\"token punctuation\\">:</span> <span class=\\"token string\\">\\"hello world\\"</span><span class=\\"token punctuation\\">,</span> using<span class=\\"token punctuation\\">:</span> ecPubKey<span class=\\"token punctuation\\">)</span></code></pre></div>\\n<p>To produce either <code class=\\"language-text\\">true</code> or <code class=\\"language-text\\">false</code> depending on whether the signature is valid for the provided plaintext and public key.</p>\\n<h3 id=\\"encrypting-and-decrypting\\"><a href=\\"#encrypting-and-decrypting\\" aria-label=\\"encrypting and decrypting permalink\\" class=\\"anchor\\"><svg aria-hidden=\\"true\\" focusable=\\"false\\" height=\\"16\\" version=\\"1.1\\" viewBox=\\"0 0 16 16\\" width=\\"16\\"><path fill-rule=\\"evenodd\\" d=\\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\\"></path></svg></a>Encrypting and Decrypting</h3>\\n<p>The other use of asymmetric keys is in encryption and decryption. In this case you provide the private key to the person who you want to communicate securely with and they use it to encrypt the plaintext. The message can only be decrypted using the private key.</p>\\n<p>Since asymmetric encryption can only be used on a small plaintext, BlueECC uses Elliptic Curve Integrated Encryption Scheme (ECIES). This consists of encrypting the message using <a href=\\"https://en.wikipedia.org/wiki/Galois/Counter_Mode\\">AES-GCM</a> with a symmetric key, followed by encrypting that symmetric key using Elliptic-curve Diffie–Hellman (<a href=\\"https://en.wikipedia.org/wiki/Elliptic-curve_Diffie%E2%80%93Hellman\\">ECDH</a>). The encrypted symmetric key and encrypted message are both sent in an envelope. The receiver of the envelope then decrypts the symmetric key and uses that to decrypt the original message.</p>\\n<p>BlueECC handles this process for you, so encryption becomes:</p>\\n<div class=\\"gatsby-highlight\\" data-language=\\"swift\\"><pre class=\\"language-swift\\"><code class=\\"language-swift\\"><span class=\\"token keyword\\">let</span> encrypted <span class=\\"token operator\\">=</span> <span class=\\"token keyword\\">try</span> <span class=\\"token string\\">\\"Hello World\\"</span><span class=\\"token punctuation\\">.</span><span class=\\"token function\\">encrypt</span><span class=\\"token punctuation\\">(</span>with<span class=\\"token punctuation\\">:</span> ecPubKey<span class=\\"token punctuation\\">)</span></code></pre></div>\\n<p>This will produce the encrypted data envelope that is structured as follows:</p>\\n<ul>\\n<li>Ephemeral public key (65/97/133 bytes depending on curve)</li>\\n<li>Encrypted ciphertext (length of the plaintext)</li>\\n<li>GCM tag (16 bytes)</li>\\n</ul>\\n<p>To decrypt this data, pass it to BlueECC with the private key:</p>\\n<div class=\\"gatsby-highlight\\" data-language=\\"swift\\"><pre class=\\"language-swift\\"><code class=\\"language-swift\\"><span class=\\"token keyword\\">let</span> decrypted <span class=\\"token operator\\">=</span> <span class=\\"token keyword\\">try</span> encrypted<span class=\\"token punctuation\\">.</span><span class=\\"token function\\">decrypt</span><span class=\\"token punctuation\\">(</span>with<span class=\\"token punctuation\\">:</span> ecPrivKey<span class=\\"token punctuation\\">)</span>\\n<span class=\\"token function\\">print</span><span class=\\"token punctuation\\">(</span><span class=\\"token function\\">String</span><span class=\\"token punctuation\\">(</span>data<span class=\\"token punctuation\\">:</span> decryptedData<span class=\\"token punctuation\\">,</span> encoding<span class=\\"token punctuation\\">:</span> <span class=\\"token punctuation\\">.</span>utf8<span class=\\"token punctuation\\">)</span><span class=\\"token punctuation\\">)</span> <span class=\\"token comment\\">// \\"Hello World\\"</span></code></pre></div>\\n<p>The encrypted data has been decrypted back to the original plaintext.</p>\\n<hr>\\n<p>Congratulations! You have just learned how to use elliptic curve cryptography to sign, verify, encrypt and decrypt data in Swift.</p>\\n<p>If you would like to run this example, or learn more about BlueECC, <a href=\\"https://github.com/IBM-Swift/BlueECC\\">check it out on GitHub</a>.</p>\\n<p>If you would like to learn more about using the BlueECC API, <a href=\\"https://ibm-swift.github.io/BlueECC/index.html\\">visit our API reference</a>.</p>\\n<p>Any questions or comments? Please join the Kitura community on <a href=\\"http://swift-at-ibm-slack.mybluemix.net/?cm_sp=dw-bluemix-_-swift-_-devcenter&#x26;_ga=2.122522507.186671014.1570626561-1743126121.1570022962&#x26;cm_mc_uid=83263075142115698398229&#x26;cm_mc_sid_50200000=53695431570707266328\\">Slack</a>!</p>","frontmatter":{"path":"/blogs/blueecc-elliptic-curve-cryptography","title":"BlueECC: Encrypt, Decrypt, Sign and Verify with Elliptic Curve"}}},{"node":{"html":"<p>We have recently released version 3.0 of <a href=\\"https://github.com/IBM-Swift/Swift-Kuery\\">Swift-Kuery</a> along with version 2.0 of <a href=\\"https://github.com/IBM-Swift/Swift-Kuery-PostgreSQL\\">Swift-Kuery-PostgreSQL</a>, <a href=\\"https://github.com/IBM-Swift/SwiftKueryMySQL\\">SwiftKueryMySQL</a> and <a href=\\"https://github.com/IBM-Swift/Swift-Kuery-SQLite\\">Swift-Kuery-SQLite</a>. You can find a summary of the major changes below, for more detail on the changes please refer to the <a href=\\"https://github.com/IBM-Swift/Swift-Kuery/blob/master/MigrationGuide.md\\">Swift-Kuery migration guide</a>.</p>\\n<h2 id=\\"api-changes\\"><a href=\\"#api-changes\\" aria-label=\\"api changes permalink\\" class=\\"anchor\\"><svg aria-hidden=\\"true\\" focusable=\\"false\\" height=\\"16\\" version=\\"1.1\\" viewBox=\\"0 0 16 16\\" width=\\"16\\"><path fill-rule=\\"evenodd\\" d=\\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\\"></path></svg></a>API changes</h2>\\n<p>The SwiftKuery API has had an overhaul and has been updated to be entirely asynchronous.</p>\\n<p>You now pass callbacks to the API for establishing your connections and preparing statements in the same way as you do currently when executing your queries and transactions.</p>\\n<p>The API for retrieving results from the databases has also been updated to be asynchronous in style and you now pass a callback into the asRows function. A new API forEach has been added to allow iteration of the result set.</p>\\n<hr>\\n<p>Asynchronous API behaviour</p>\\n<p>Previously the SwiftKuery API, while largely asynchronous in style, had underlying behaviour which was synchronous. In the SwiftKuery 3.0 and plugin updates the behaviour of the API has been reimplemented to be fully asynchronous.</p>\\n<p>With this change all code using the SwiftKuery API needs to be written in an asynchronous style. For example if you previously had code that did not nest API calls within the previous calls completion handler, such as the example below, you would now see undefined behaviour as both execute calls could run in parallel:</p>\\n<div class=\\"gatsby-highlight\\" data-language=\\"swift\\"><pre class=\\"language-swift\\"><code class=\\"language-swift\\"><span class=\\"token comment\\">// BAD CODE</span>\\n<span class=\\"token keyword\\">let</span> query <span class=\\"token operator\\">=</span> <span class=\\"token function\\">Select</span><span class=\\"token punctuation\\">(</span>from<span class=\\"token punctuation\\">:</span> myTable<span class=\\"token punctuation\\">)</span>\\nconnection<span class=\\"token punctuation\\">.</span><span class=\\"token function\\">execute</span><span class=\\"token punctuation\\">(</span>query<span class=\\"token punctuation\\">:</span> query<span class=\\"token punctuation\\">)</span> <span class=\\"token punctuation\\">{</span> result <span class=\\"token keyword\\">in</span>\\n    <span class=\\"token comment\\">//Handle result</span>\\n<span class=\\"token punctuation\\">}</span>\\n<span class=\\"token keyword\\">let</span> newQuery <span class=\\"token operator\\">=</span> <span class=\\"token function\\">Select</span><span class=\\"token punctuation\\">(</span>from<span class=\\"token punctuation\\">:</span> otherTable<span class=\\"token punctuation\\">)</span>\\nconnection<span class=\\"token punctuation\\">.</span><span class=\\"token function\\">execute</span><span class=\\"token punctuation\\">(</span>query<span class=\\"token punctuation\\">:</span> newQuery<span class=\\"token punctuation\\">)</span> <span class=\\"token punctuation\\">{</span> result <span class=\\"token keyword\\">in</span>\\n    <span class=\\"token comment\\">//Handle result</span>\\n<span class=\\"token punctuation\\">}</span></code></pre></div>\\n<p>For this to work in an asynchronous environment subsequent tasks must be chained in the preceding task’s completion handler, for example:</p>\\n<div class=\\"gatsby-highlight\\" data-language=\\"swift\\"><pre class=\\"language-swift\\"><code class=\\"language-swift\\"><span class=\\"token comment\\">// CORRECT CODE</span>\\n<span class=\\"token keyword\\">let</span> query <span class=\\"token operator\\">=</span> <span class=\\"token function\\">Select</span><span class=\\"token punctuation\\">(</span>from<span class=\\"token punctuation\\">:</span> myTable<span class=\\"token punctuation\\">)</span>\\nconnection<span class=\\"token punctuation\\">.</span><span class=\\"token function\\">execute</span><span class=\\"token punctuation\\">(</span>query<span class=\\"token punctuation\\">:</span> query<span class=\\"token punctuation\\">)</span> <span class=\\"token punctuation\\">{</span> result <span class=\\"token keyword\\">in</span>\\n    <span class=\\"token comment\\">//Handle result</span>\\n    <span class=\\"token keyword\\">let</span> newQuery <span class=\\"token operator\\">=</span> <span class=\\"token function\\">Select</span><span class=\\"token punctuation\\">(</span>from<span class=\\"token punctuation\\">:</span> otherTable<span class=\\"token punctuation\\">)</span>\\n    connection<span class=\\"token punctuation\\">.</span><span class=\\"token function\\">execute</span><span class=\\"token punctuation\\">(</span>query<span class=\\"token punctuation\\">:</span> newQuery<span class=\\"token punctuation\\">)</span> <span class=\\"token punctuation\\">{</span> result <span class=\\"token keyword\\">in</span>\\n        <span class=\\"token comment\\">//Handle result</span>\\n    <span class=\\"token punctuation\\">}</span>\\n<span class=\\"token punctuation\\">}</span></code></pre></div>\\n<hr>\\n<h2 id=\\"reuse-table-definitions\\"><a href=\\"#reuse-table-definitions\\" aria-label=\\"reuse table definitions permalink\\" class=\\"anchor\\"><svg aria-hidden=\\"true\\" focusable=\\"false\\" height=\\"16\\" version=\\"1.1\\" viewBox=\\"0 0 16 16\\" width=\\"16\\"><path fill-rule=\\"evenodd\\" d=\\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\\"></path></svg></a>Reuse table definitions</h2>\\n<p>We have added the ability to specify a name for the table created from your structs. This will minimise duplication of code when wanting to use several tables with the same definition. For example the following could be used to represent both a Customer and an Employeee:</p>\\n<div class=\\"gatsby-highlight\\" data-language=\\"swift\\"><pre class=\\"language-swift\\"><code class=\\"language-swift\\"><span class=\\"token keyword\\">class</span> <span class=\\"token class-name\\">Person</span><span class=\\"token punctuation\\">:</span> <span class=\\"token builtin\\">Table</span> <span class=\\"token punctuation\\">{</span>\\n    <span class=\\"token keyword\\">let</span> forename <span class=\\"token operator\\">=</span> <span class=\\"token function\\">Column</span><span class=\\"token punctuation\\">(</span><span class=\\"token string\\">\\"forename\\"</span><span class=\\"token punctuation\\">,</span> <span class=\\"token builtin\\">String</span><span class=\\"token punctuation\\">.</span><span class=\\"token keyword\\">self</span><span class=\\"token punctuation\\">)</span>\\n    <span class=\\"token keyword\\">let</span> surname <span class=\\"token operator\\">=</span> <span class=\\"token function\\">Column</span><span class=\\"token punctuation\\">(</span><span class=\\"token string\\">\\"surname\\"</span><span class=\\"token punctuation\\">,</span> <span class=\\"token builtin\\">String</span><span class=\\"token punctuation\\">.</span><span class=\\"token keyword\\">self</span><span class=\\"token punctuation\\">)</span>\\n    <span class=\\"token keyword\\">let</span> address <span class=\\"token operator\\">=</span> <span class=\\"token function\\">Column</span><span class=\\"token punctuation\\">(</span><span class=\\"token string\\">\\"address\\"</span><span class=\\"token punctuation\\">,</span> <span class=\\"token builtin\\">String</span><span class=\\"token punctuation\\">.</span><span class=\\"token keyword\\">self</span><span class=\\"token punctuation\\">)</span>\\n<span class=\\"token punctuation\\">}</span></code></pre></div>\\n<p>With the prior release you would need to define the same class twice naming it differently. Now you can simply name the table when you create it for example:</p>\\n<div class=\\"gatsby-highlight\\" data-language=\\"swift\\"><pre class=\\"language-swift\\"><code class=\\"language-swift\\"><span class=\\"token keyword\\">let</span> customers <span class=\\"token operator\\">=</span> <span class=\\"token function\\">Person</span><span class=\\"token punctuation\\">(</span>name<span class=\\"token punctuation\\">:</span> <span class=\\"token string\\">\\"customers\\"</span><span class=\\"token punctuation\\">)</span>\\n<span class=\\"token keyword\\">let</span> employees <span class=\\"token operator\\">=</span> <span class=\\"token function\\">Person</span><span class=\\"token punctuation\\">(</span>name<span class=\\"token punctuation\\">:</span> <span class=\\"token string\\">\\"employees\\"</span><span class=\\"token punctuation\\">)</span></code></pre></div>\\n<hr>\\n<h2 id=\\"mysql-8-support-and-linker-improvements\\"><a href=\\"#mysql-8-support-and-linker-improvements\\" aria-label=\\"mysql 8 support and linker improvements permalink\\" class=\\"anchor\\"><svg aria-hidden=\\"true\\" focusable=\\"false\\" height=\\"16\\" version=\\"1.1\\" viewBox=\\"0 0 16 16\\" width=\\"16\\"><path fill-rule=\\"evenodd\\" d=\\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\\"></path></svg></a>MySQL 8 support and linker improvements</h2>\\n<p>The update also adds support for MySQL version 8 and removes the requirements for specifying additional flags at build, test and run time on newer Swift releases.</p>\\n<p>MySQL version 8 includes some changes in the databases header files that were incompatible with version 5. We have updated the SwiftMySQL plugin to abstract these differences meaning the code you write will work on MySQL versions prior to and post 8.</p>\\n<p>We have also added pkg-config support so you no longer have to specify additional flags on your swift commands so long as you are running a MySQL release later than 5.5.</p>\\n<hr>\\n<h2 id=\\"example-usage\\"><a href=\\"#example-usage\\" aria-label=\\"example usage permalink\\" class=\\"anchor\\"><svg aria-hidden=\\"true\\" focusable=\\"false\\" height=\\"16\\" version=\\"1.1\\" viewBox=\\"0 0 16 16\\" width=\\"16\\"><path fill-rule=\\"evenodd\\" d=\\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\\"></path></svg></a>Example usage</h2>\\n<p>Below is a sample function that can be used in a Kitura route to retrieve data from a database:</p>\\n<div class=\\"gatsby-highlight\\" data-language=\\"swift\\"><pre class=\\"language-swift\\"><code class=\\"language-swift\\"><span class=\\"token keyword\\">func</span> <span class=\\"token function\\">grades</span><span class=\\"token punctuation\\">(</span><span class=\\"token number\\">_</span> callback<span class=\\"token punctuation\\">:</span> @escaping <span class=\\"token punctuation\\">(</span><span class=\\"token builtin\\">String</span><span class=\\"token punctuation\\">)</span> <span class=\\"token operator\\">-</span><span class=\\"token operator\\">></span> <span class=\\"token builtin\\">Void</span><span class=\\"token punctuation\\">)</span> <span class=\\"token operator\\">-</span><span class=\\"token operator\\">></span> <span class=\\"token builtin\\">Void</span> <span class=\\"token punctuation\\">{</span>\\n    connection<span class=\\"token punctuation\\">.</span><span class=\\"token function\\">connect</span><span class=\\"token punctuation\\">(</span><span class=\\"token punctuation\\">)</span> <span class=\\"token punctuation\\">{</span> result <span class=\\"token keyword\\">in</span>\\n        <span class=\\"token keyword\\">guard</span> result<span class=\\"token punctuation\\">.</span>success <span class=\\"token keyword\\">else</span> <span class=\\"token punctuation\\">{</span>\\n            <span class=\\"token keyword\\">guard</span> <span class=\\"token keyword\\">let</span> error <span class=\\"token operator\\">=</span> result<span class=\\"token punctuation\\">.</span>asError <span class=\\"token keyword\\">else</span> <span class=\\"token punctuation\\">{</span>\\n                <span class=\\"token keyword\\">return</span> <span class=\\"token function\\">callback</span><span class=\\"token punctuation\\">(</span><span class=\\"token string\\">\\"Error connecting: Unknown Error\\"</span><span class=\\"token punctuation\\">)</span>\\n            <span class=\\"token punctuation\\">}</span>\\n            <span class=\\"token keyword\\">return</span> <span class=\\"token function\\">callback</span><span class=\\"token punctuation\\">(</span><span class=\\"token string\\">\\"Error connecting: <span class=\\"token interpolation\\"><span class=\\"token delimiter variable\\">\\\\(</span>error<span class=\\"token delimiter variable\\">)</span></span>\\"</span><span class=\\"token punctuation\\">)</span>\\n        <span class=\\"token punctuation\\">}</span>\\n        <span class=\\"token comment\\">// Build and execute your query here.</span>\\n\\n        <span class=\\"token comment\\">// First build query</span>\\n        <span class=\\"token keyword\\">let</span> query <span class=\\"token operator\\">=</span> <span class=\\"token function\\">Select</span><span class=\\"token punctuation\\">(</span>grades<span class=\\"token punctuation\\">.</span>course<span class=\\"token punctuation\\">,</span> grades<span class=\\"token punctuation\\">.</span>grade<span class=\\"token punctuation\\">,</span> from<span class=\\"token punctuation\\">:</span> grades<span class=\\"token punctuation\\">)</span>\\n\\n        <span class=\\"token comment\\">// Execute query</span>\\n        connection<span class=\\"token punctuation\\">.</span><span class=\\"token function\\">execute</span><span class=\\"token punctuation\\">(</span>query<span class=\\"token punctuation\\">:</span> query<span class=\\"token punctuation\\">)</span> <span class=\\"token punctuation\\">{</span> result <span class=\\"token keyword\\">in</span>\\n            <span class=\\"token keyword\\">guard</span> <span class=\\"token keyword\\">let</span> resultSet <span class=\\"token operator\\">=</span> result<span class=\\"token punctuation\\">.</span>asResultSet <span class=\\"token keyword\\">else</span> <span class=\\"token punctuation\\">{</span>\\n                <span class=\\"token keyword\\">guard</span> <span class=\\"token keyword\\">let</span> error <span class=\\"token operator\\">=</span> result<span class=\\"token punctuation\\">.</span>asError <span class=\\"token keyword\\">else</span> <span class=\\"token punctuation\\">{</span>\\n                    <span class=\\"token keyword\\">return</span> <span class=\\"token function\\">callback</span><span class=\\"token punctuation\\">(</span><span class=\\"token string\\">\\"Error executing query: Unknown Error\\"</span><span class=\\"token punctuation\\">)</span>\\n                <span class=\\"token punctuation\\">}</span>\\n                <span class=\\"token keyword\\">return</span> <span class=\\"token function\\">callback</span><span class=\\"token punctuation\\">(</span><span class=\\"token string\\">\\"Error executing query: <span class=\\"token interpolation\\"><span class=\\"token delimiter variable\\">\\\\(</span>error<span class=\\"token delimiter variable\\">)</span></span>\\"</span><span class=\\"token punctuation\\">)</span>\\n            <span class=\\"token punctuation\\">}</span>\\n            <span class=\\"token keyword\\">var</span> retString <span class=\\"token operator\\">=</span> <span class=\\"token string\\">\\"\\"</span>\\n            resultSet<span class=\\"token punctuation\\">.</span><span class=\\"token function\\">getColumnTitles</span><span class=\\"token punctuation\\">(</span><span class=\\"token punctuation\\">)</span> <span class=\\"token punctuation\\">{</span> titles<span class=\\"token punctuation\\">,</span> error <span class=\\"token keyword\\">in</span>\\n                <span class=\\"token keyword\\">guard</span> <span class=\\"token keyword\\">let</span> titles <span class=\\"token operator\\">=</span> titles <span class=\\"token keyword\\">else</span> <span class=\\"token punctuation\\">{</span>\\n                    <span class=\\"token keyword\\">guard</span> <span class=\\"token keyword\\">let</span> error <span class=\\"token operator\\">=</span> error <span class=\\"token keyword\\">else</span> <span class=\\"token punctuation\\">{</span>\\n                        <span class=\\"token keyword\\">return</span> <span class=\\"token function\\">callback</span><span class=\\"token punctuation\\">(</span><span class=\\"token string\\">\\"Error fetching column titles: Unknown Error\\"</span><span class=\\"token punctuation\\">)</span>\\n                    <span class=\\"token punctuation\\">}</span>\\n                    <span class=\\"token keyword\\">return</span> <span class=\\"token function\\">callback</span><span class=\\"token punctuation\\">(</span><span class=\\"token string\\">\\"Error fetching column titles: <span class=\\"token interpolation\\"><span class=\\"token delimiter variable\\">\\\\(</span>error<span class=\\"token delimiter variable\\">)</span></span>\\"</span><span class=\\"token punctuation\\">)</span>\\n                <span class=\\"token punctuation\\">}</span>\\n                <span class=\\"token keyword\\">for</span> title <span class=\\"token keyword\\">in</span> titles <span class=\\"token punctuation\\">{</span>\\n                    <span class=\\"token comment\\">//The column names of the result.</span>\\n                    retString<span class=\\"token punctuation\\">.</span><span class=\\"token function\\">append</span><span class=\\"token punctuation\\">(</span><span class=\\"token string\\">\\"<span class=\\"token interpolation\\"><span class=\\"token delimiter variable\\">\\\\(</span>title<span class=\\"token punctuation\\">.</span><span class=\\"token function\\">padding</span><span class=\\"token punctuation\\">(</span>toLength<span class=\\"token punctuation\\">:</span> <span class=\\"token number\\">35</span><span class=\\"token punctuation\\">,</span> withPad<span class=\\"token punctuation\\">:</span> <span class=\\"token string\\">\\" \\"</span><span class=\\"token punctuation\\">,</span> startingAt<span class=\\"token punctuation\\">:</span> <span class=\\"token number\\">0</span><span class=\\"token punctuation\\">)</span><span class=\\"token delimiter variable\\">)</span></span>\\"</span><span class=\\"token punctuation\\">)</span>\\n                <span class=\\"token punctuation\\">}</span>\\n                retString<span class=\\"token punctuation\\">.</span><span class=\\"token function\\">append</span><span class=\\"token punctuation\\">(</span><span class=\\"token string\\">\\"\\\\n\\"</span><span class=\\"token punctuation\\">)</span>\\n\\n                resultSet<span class=\\"token punctuation\\">.</span><span class=\\"token function\\">forEach</span><span class=\\"token punctuation\\">(</span><span class=\\"token punctuation\\">)</span> <span class=\\"token punctuation\\">{</span> row<span class=\\"token punctuation\\">,</span> error <span class=\\"token keyword\\">in</span>\\n                    <span class=\\"token keyword\\">guard</span> <span class=\\"token keyword\\">let</span> row <span class=\\"token operator\\">=</span> row <span class=\\"token keyword\\">else</span> <span class=\\"token punctuation\\">{</span>\\n                        <span class=\\"token comment\\">// A null row means we have run out of results unless we encountered an error</span>\\n                        <span class=\\"token keyword\\">if</span> <span class=\\"token keyword\\">let</span> error <span class=\\"token operator\\">=</span> error <span class=\\"token punctuation\\">{</span>\\n                            <span class=\\"token keyword\\">return</span> <span class=\\"token function\\">callback</span><span class=\\"token punctuation\\">(</span><span class=\\"token string\\">\\"Error fetching row: <span class=\\"token interpolation\\"><span class=\\"token delimiter variable\\">\\\\(</span>error<span class=\\"token delimiter variable\\">)</span></span>\\"</span><span class=\\"token punctuation\\">)</span>\\n                        <span class=\\"token punctuation\\">}</span>\\n                        <span class=\\"token comment\\">// No error so all rows are processed, make final callback passing result.</span>\\n                        <span class=\\"token keyword\\">return</span> <span class=\\"token function\\">callback</span><span class=\\"token punctuation\\">(</span>retString<span class=\\"token punctuation\\">)</span>\\n                    <span class=\\"token punctuation\\">}</span>\\n                    <span class=\\"token keyword\\">for</span> value <span class=\\"token keyword\\">in</span> row <span class=\\"token punctuation\\">{</span>\\n                        <span class=\\"token keyword\\">if</span> <span class=\\"token keyword\\">let</span> value <span class=\\"token operator\\">=</span> value <span class=\\"token punctuation\\">{</span>\\n                            <span class=\\"token keyword\\">let</span> valueStr <span class=\\"token operator\\">=</span> <span class=\\"token function\\">String</span><span class=\\"token punctuation\\">(</span>describing<span class=\\"token punctuation\\">:</span> value<span class=\\"token punctuation\\">)</span>\\n                            <span class=\\"token keyword\\">let</span> padStr <span class=\\"token operator\\">=</span> valueStr<span class=\\"token punctuation\\">.</span><span class=\\"token function\\">padding</span><span class=\\"token punctuation\\">(</span>toLength<span class=\\"token punctuation\\">:</span> <span class=\\"token number\\">35</span><span class=\\"token punctuation\\">,</span> withPad<span class=\\"token punctuation\\">:</span> <span class=\\"token string\\">\\" \\"</span><span class=\\"token punctuation\\">,</span> startingAt<span class=\\"token punctuation\\">:</span> <span class=\\"token number\\">0</span><span class=\\"token punctuation\\">)</span>\\n                            retString<span class=\\"token punctuation\\">.</span><span class=\\"token function\\">append</span><span class=\\"token punctuation\\">(</span>padStr<span class=\\"token punctuation\\">)</span>\\n                        <span class=\\"token punctuation\\">}</span>\\n                    <span class=\\"token punctuation\\">}</span>\\n                    retString<span class=\\"token punctuation\\">.</span><span class=\\"token function\\">append</span><span class=\\"token punctuation\\">(</span><span class=\\"token string\\">\\"\\\\n\\"</span><span class=\\"token punctuation\\">)</span>\\n                <span class=\\"token punctuation\\">}</span>\\n            <span class=\\"token punctuation\\">}</span>\\n        <span class=\\"token punctuation\\">}</span>\\n    <span class=\\"token punctuation\\">}</span>\\n<span class=\\"token punctuation\\">}</span></code></pre></div>\\n<p>When called you will see results that look similar to this:</p>\\n<div class=\\"gatsby-highlight\\" data-language=\\"text\\"><pre class=\\"language-text\\"><code class=\\"language-text\\">course                             grade                              \\nHow to build your first computer   99                                 \\nHow to work at a rock quarry       71</code></pre></div>\\n<p>The full example can be found in the <a href=\\"https://github.com/IBM-Swift/Swift-Kuery-PostgreSQL\\">Swift-Kuery-PostgreSQL</a> GitHub repository within the Readme.md file.</p>\\n<hr>\\n<h2 id=\\"future\\"><a href=\\"#future\\" aria-label=\\"future permalink\\" class=\\"anchor\\"><svg aria-hidden=\\"true\\" focusable=\\"false\\" height=\\"16\\" version=\\"1.1\\" viewBox=\\"0 0 16 16\\" width=\\"16\\"><path fill-rule=\\"evenodd\\" d=\\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\\"></path></svg></a>Future</h2>\\n<p>Now that Swift-Kuery is entirely asynchronous we are ready for the future of Swift. The new APIs should transition seamlessly to async/await, and it should also be possible to take advantage of the new database drivers being discussed in the Swift Server Working Group.</p>","frontmatter":{"path":"/blogs/announcing-swiftkuery-3-0","title":"Announcing SwiftKuery 3.0"}}},{"node":{"html":"<p>Web application servers are generally “stateless” and handle HTTP requests independently. However, it’s common for a developer to want to link requests from the same user together in a session. A simple way to achieve this is by using a cookie to identify the user and associating data to that cookie. <a href=\\"https://github.com/IBM-Swift/Kitura-Session\\">Kitura-Session</a> allows you to implement this flow and, as of version 3.3, you can now directly store and retrieve Codable objects. This blog will describe Kitura-Session’s new capabilities and provide an example of using sessions with a Kitura server.</p>\\n<h2 id=\\"codable-kitura-session\\"><a href=\\"#codable-kitura-session\\" aria-label=\\"codable kitura session permalink\\" class=\\"anchor\\"><svg aria-hidden=\\"true\\" focusable=\\"false\\" height=\\"16\\" version=\\"1.1\\" viewBox=\\"0 0 16 16\\" width=\\"16\\"><path fill-rule=\\"evenodd\\" d=\\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\\"></path></svg></a>Codable Kitura-Session</h2>\\n<p>Previously, if you wanted to save something in a Raw routing session, you would store it as an Any. This is not type safe since you could try and save objects the would fail to be serialized as JSON. Furthermore, when you retrieve the item you have to cast it to the type you expect. With the 3.3 release of Kitura-Session, you can store and retrieve Codable objects adding type safety and removing the need for explicit casting. To demonstrate how this improves usability, we will apply these changes to the sessions example from `Kitura-Sample:</p>\\n<h3 id=\\"an-online-bookstore\\"><a href=\\"#an-online-bookstore\\" aria-label=\\"an online bookstore permalink\\" class=\\"anchor\\"><svg aria-hidden=\\"true\\" focusable=\\"false\\" height=\\"16\\" version=\\"1.1\\" viewBox=\\"0 0 16 16\\" width=\\"16\\"><path fill-rule=\\"evenodd\\" d=\\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\\"></path></svg></a>An online Bookstore</h3>\\n<p>This example simulates a website where users buy books. The user doesn’t want to have to select all their book at once so they add the book they are interested in to their shopping cart. This cart is shared between requests until the checkout. In server terms, the cart is our session, where we store the users selected Book models.</p>\\n<div class=\\"gatsby-highlight\\" data-language=\\"swift\\"><pre class=\\"language-swift\\"><code class=\\"language-swift\\"><span class=\\"token keyword\\">public</span> <span class=\\"token keyword\\">struct</span> <span class=\\"token builtin\\">Book</span><span class=\\"token punctuation\\">:</span> <span class=\\"token builtin\\">Codable</span> <span class=\\"token punctuation\\">{</span>\\n    <span class=\\"token keyword\\">var</span> name<span class=\\"token punctuation\\">:</span> <span class=\\"token builtin\\">String</span>\\n    <span class=\\"token keyword\\">var</span> author<span class=\\"token punctuation\\">:</span> <span class=\\"token builtin\\">String</span>\\n    <span class=\\"token keyword\\">var</span> rating<span class=\\"token punctuation\\">:</span> <span class=\\"token builtin\\">Int</span>  \\n<span class=\\"token punctuation\\">}</span></code></pre></div>\\n<h3 id=\\"adding-a-book-to-the-shopping-cart\\"><a href=\\"#adding-a-book-to-the-shopping-cart\\" aria-label=\\"adding a book to the shopping cart permalink\\" class=\\"anchor\\"><svg aria-hidden=\\"true\\" focusable=\\"false\\" height=\\"16\\" version=\\"1.1\\" viewBox=\\"0 0 16 16\\" width=\\"16\\"><path fill-rule=\\"evenodd\\" d=\\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\\"></path></svg></a>Adding a book to the shopping cart</h3>\\n<p>The user wants to add a book to their cart. They do this by sending a POST request with the book’s data to the server. The server receives the request, uses cookies to identify the user and adds the book to their session.</p>\\n<p>In Kitura-Session 3.2 this would be done as follows:</p>\\n<div class=\\"gatsby-highlight\\" data-language=\\"swift\\"><pre class=\\"language-swift\\"><code class=\\"language-swift\\">router<span class=\\"token punctuation\\">.</span><span class=\\"token function\\">post</span><span class=\\"token punctuation\\">(</span><span class=\\"token string\\">\\"/session\\"</span><span class=\\"token punctuation\\">)</span> <span class=\\"token punctuation\\">{</span> request<span class=\\"token punctuation\\">,</span> response<span class=\\"token punctuation\\">,</span> next <span class=\\"token keyword\\">in</span>\\n    <span class=\\"token keyword\\">let</span> inputBook <span class=\\"token operator\\">=</span> <span class=\\"token keyword\\">try</span> request<span class=\\"token punctuation\\">.</span><span class=\\"token function\\">read</span><span class=\\"token punctuation\\">(</span><span class=\\"token keyword\\">as</span><span class=\\"token punctuation\\">:</span> <span class=\\"token builtin\\">Book</span><span class=\\"token punctuation\\">.</span><span class=\\"token keyword\\">self</span><span class=\\"token punctuation\\">)</span>\\n    <span class=\\"token keyword\\">var</span> books <span class=\\"token operator\\">=</span> request<span class=\\"token punctuation\\">.</span>session<span class=\\"token operator\\">?</span><span class=\\"token punctuation\\">[</span><span class=\\"token string\\">\\"books\\"</span><span class=\\"token punctuation\\">]</span> <span class=\\"token keyword\\">as</span><span class=\\"token operator\\">?</span> <span class=\\"token punctuation\\">[</span><span class=\\"token punctuation\\">[</span><span class=\\"token builtin\\">String</span><span class=\\"token punctuation\\">:</span> <span class=\\"token builtin\\">String</span><span class=\\"token punctuation\\">]</span><span class=\\"token punctuation\\">]</span> <span class=\\"token operator\\">?</span><span class=\\"token operator\\">?</span> <span class=\\"token punctuation\\">[</span><span class=\\"token punctuation\\">]</span>\\n    <span class=\\"token keyword\\">let</span> newBook<span class=\\"token punctuation\\">:</span> <span class=\\"token punctuation\\">[</span><span class=\\"token builtin\\">String</span><span class=\\"token punctuation\\">:</span> <span class=\\"token builtin\\">String</span><span class=\\"token punctuation\\">]</span> <span class=\\"token operator\\">=</span> <span class=\\"token punctuation\\">[</span><span class=\\"token string\\">\\"name\\"</span><span class=\\"token punctuation\\">:</span> inputBook<span class=\\"token punctuation\\">.</span>name<span class=\\"token punctuation\\">,</span> <span class=\\"token string\\">\\"author\\"</span><span class=\\"token punctuation\\">:</span> inputBook<span class=\\"token punctuation\\">.</span>author<span class=\\"token punctuation\\">,</span> <span class=\\"token string\\">\\"rating\\"</span><span class=\\"token punctuation\\">:</span> <span class=\\"token function\\">String</span><span class=\\"token punctuation\\">(</span>inputBook<span class=\\"token punctuation\\">.</span>rating<span class=\\"token punctuation\\">)</span><span class=\\"token punctuation\\">]</span>\\n    books<span class=\\"token punctuation\\">.</span><span class=\\"token function\\">append</span><span class=\\"token punctuation\\">(</span>newBook<span class=\\"token punctuation\\">)</span>\\n    session<span class=\\"token punctuation\\">[</span><span class=\\"token string\\">\\"books\\"</span><span class=\\"token punctuation\\">]</span> <span class=\\"token operator\\">=</span> books\\n    response<span class=\\"token punctuation\\">.</span><span class=\\"token function\\">send</span><span class=\\"token punctuation\\">(</span>inputBook<span class=\\"token punctuation\\">)</span>\\n    <span class=\\"token function\\">next</span><span class=\\"token punctuation\\">(</span><span class=\\"token punctuation\\">)</span>\\n<span class=\\"token punctuation\\">}</span></code></pre></div>\\n<p>In Kitura-Session 3.3, we can pass the book from the request body straight into the session:</p>\\n<div class=\\"gatsby-highlight\\" data-language=\\"swift\\"><pre class=\\"language-swift\\"><code class=\\"language-swift\\">router<span class=\\"token punctuation\\">.</span><span class=\\"token function\\">post</span><span class=\\"token punctuation\\">(</span><span class=\\"token string\\">\\"/session\\"</span><span class=\\"token punctuation\\">)</span> <span class=\\"token punctuation\\">{</span> request<span class=\\"token punctuation\\">,</span> response<span class=\\"token punctuation\\">,</span> next <span class=\\"token keyword\\">in</span>\\n    <span class=\\"token keyword\\">let</span> inputBook <span class=\\"token operator\\">=</span> <span class=\\"token keyword\\">try</span> request<span class=\\"token punctuation\\">.</span><span class=\\"token function\\">read</span><span class=\\"token punctuation\\">(</span><span class=\\"token keyword\\">as</span><span class=\\"token punctuation\\">:</span> <span class=\\"token builtin\\">Book</span><span class=\\"token punctuation\\">.</span><span class=\\"token keyword\\">self</span><span class=\\"token punctuation\\">)</span>\\n    <span class=\\"token keyword\\">var</span> books<span class=\\"token punctuation\\">:</span> <span class=\\"token punctuation\\">[</span><span class=\\"token builtin\\">Book</span><span class=\\"token punctuation\\">]</span> <span class=\\"token operator\\">=</span> request<span class=\\"token punctuation\\">.</span>session<span class=\\"token operator\\">?</span><span class=\\"token punctuation\\">[</span><span class=\\"token string\\">\\"books\\"</span><span class=\\"token punctuation\\">]</span> <span class=\\"token operator\\">?</span><span class=\\"token operator\\">?</span> <span class=\\"token punctuation\\">[</span><span class=\\"token punctuation\\">]</span>\\n    books<span class=\\"token punctuation\\">.</span><span class=\\"token function\\">append</span><span class=\\"token punctuation\\">(</span>inputBook<span class=\\"token punctuation\\">)</span>\\n    session<span class=\\"token punctuation\\">[</span><span class=\\"token string\\">\\"books\\"</span><span class=\\"token punctuation\\">]</span> <span class=\\"token operator\\">=</span> books\\n    response<span class=\\"token punctuation\\">.</span><span class=\\"token function\\">send</span><span class=\\"token punctuation\\">(</span>inputBook<span class=\\"token punctuation\\">)</span>\\n    <span class=\\"token function\\">next</span><span class=\\"token punctuation\\">(</span><span class=\\"token punctuation\\">)</span>\\n<span class=\\"token punctuation\\">}</span></code></pre></div>\\n<p>This has removed the need to convert our model into a JSON dictionary, saving us from clunky boilerplate code.</p>\\n<h3 id=\\"viewing-your-shopping-cart\\"><a href=\\"#viewing-your-shopping-cart\\" aria-label=\\"viewing your shopping cart permalink\\" class=\\"anchor\\"><svg aria-hidden=\\"true\\" focusable=\\"false\\" height=\\"16\\" version=\\"1.1\\" viewBox=\\"0 0 16 16\\" width=\\"16\\"><path fill-rule=\\"evenodd\\" d=\\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\\"></path></svg></a>Viewing your shopping cart</h3>\\n<p>Once the user has added a few books to their cart, they want to view all their books. The do this by sending a GET request to the server. Cookies identify the user again and all the books they previously saved in the session are returned to them.</p>\\n<p>In Kitura-Session 3.2 this would be done as follows:</p>\\n<div class=\\"gatsby-highlight\\" data-language=\\"swift\\"><pre class=\\"language-swift\\"><code class=\\"language-swift\\">router<span class=\\"token punctuation\\">.</span><span class=\\"token keyword\\">get</span><span class=\\"token punctuation\\">(</span><span class=\\"token string\\">\\"/session\\"</span><span class=\\"token punctuation\\">)</span> <span class=\\"token punctuation\\">{</span> request<span class=\\"token punctuation\\">,</span> response<span class=\\"token punctuation\\">,</span> next <span class=\\"token keyword\\">in</span>\\n    <span class=\\"token keyword\\">let</span> bookData <span class=\\"token operator\\">=</span> request<span class=\\"token punctuation\\">.</span>session<span class=\\"token operator\\">?</span><span class=\\"token punctuation\\">[</span><span class=\\"token string\\">\\"books\\"</span><span class=\\"token punctuation\\">]</span> <span class=\\"token keyword\\">as</span><span class=\\"token operator\\">?</span> <span class=\\"token punctuation\\">[</span><span class=\\"token punctuation\\">[</span><span class=\\"token builtin\\">String</span><span class=\\"token punctuation\\">:</span> <span class=\\"token builtin\\">String</span><span class=\\"token punctuation\\">]</span><span class=\\"token punctuation\\">]</span> <span class=\\"token operator\\">?</span><span class=\\"token operator\\">?</span> <span class=\\"token punctuation\\">[</span><span class=\\"token punctuation\\">]</span>\\n    <span class=\\"token keyword\\">var</span> books<span class=\\"token punctuation\\">:</span> <span class=\\"token punctuation\\">[</span><span class=\\"token builtin\\">Book</span><span class=\\"token punctuation\\">]</span> <span class=\\"token operator\\">=</span> <span class=\\"token punctuation\\">[</span><span class=\\"token punctuation\\">]</span>\\n    <span class=\\"token keyword\\">for</span> book <span class=\\"token keyword\\">in</span> bookData <span class=\\"token punctuation\\">{</span>\\n        <span class=\\"token keyword\\">guard</span> <span class=\\"token keyword\\">let</span> bookName <span class=\\"token operator\\">=</span> book<span class=\\"token punctuation\\">[</span><span class=\\"token string\\">\\"name\\"</span><span class=\\"token punctuation\\">]</span><span class=\\"token punctuation\\">,</span>\\n              <span class=\\"token keyword\\">let</span> bookAuthor <span class=\\"token operator\\">=</span> book<span class=\\"token punctuation\\">[</span><span class=\\"token string\\">\\"author\\"</span><span class=\\"token punctuation\\">]</span><span class=\\"token punctuation\\">,</span>\\n              <span class=\\"token keyword\\">let</span> ratingString <span class=\\"token operator\\">=</span> book<span class=\\"token punctuation\\">[</span><span class=\\"token string\\">\\"rating\\"</span><span class=\\"token punctuation\\">]</span><span class=\\"token punctuation\\">,</span>\\n              <span class=\\"token keyword\\">let</span> bookRating <span class=\\"token operator\\">=</span> <span class=\\"token function\\">Int</span><span class=\\"token punctuation\\">(</span>ratingString<span class=\\"token punctuation\\">)</span>\\n        <span class=\\"token keyword\\">else</span> <span class=\\"token punctuation\\">{</span> <span class=\\"token keyword\\">continue</span> <span class=\\"token punctuation\\">}</span>\\n        <span class=\\"token keyword\\">let</span> newBook <span class=\\"token operator\\">=</span> <span class=\\"token function\\">Book</span><span class=\\"token punctuation\\">(</span>name<span class=\\"token punctuation\\">:</span> bookName<span class=\\"token punctuation\\">,</span> author<span class=\\"token punctuation\\">:</span> bookAuthor<span class=\\"token punctuation\\">,</span> rating<span class=\\"token punctuation\\">:</span> bookRating<span class=\\"token punctuation\\">)</span>\\n        books<span class=\\"token punctuation\\">.</span><span class=\\"token function\\">append</span><span class=\\"token punctuation\\">(</span>newBook<span class=\\"token punctuation\\">)</span>\\n    <span class=\\"token punctuation\\">}</span>\\n    response<span class=\\"token punctuation\\">.</span><span class=\\"token function\\">send</span><span class=\\"token punctuation\\">(</span>books<span class=\\"token punctuation\\">)</span>\\n    <span class=\\"token function\\">next</span><span class=\\"token punctuation\\">(</span><span class=\\"token punctuation\\">)</span>\\n<span class=\\"token punctuation\\">}</span></code></pre></div>\\n<p>In Kitura-Session 3.3, by defining the type we expect from the session, we get our Codable model straight out of the session:</p>\\n<div class=\\"gatsby-highlight\\" data-language=\\"swift\\"><pre class=\\"language-swift\\"><code class=\\"language-swift\\">router<span class=\\"token punctuation\\">.</span><span class=\\"token keyword\\">get</span><span class=\\"token punctuation\\">(</span><span class=\\"token string\\">\\"/session\\"</span><span class=\\"token punctuation\\">)</span> <span class=\\"token punctuation\\">{</span> request<span class=\\"token punctuation\\">,</span> response<span class=\\"token punctuation\\">,</span> next <span class=\\"token keyword\\">in</span>\\n    <span class=\\"token keyword\\">let</span> books<span class=\\"token punctuation\\">:</span> <span class=\\"token punctuation\\">[</span><span class=\\"token builtin\\">Book</span><span class=\\"token punctuation\\">]</span> <span class=\\"token operator\\">=</span> request<span class=\\"token punctuation\\">.</span>session<span class=\\"token operator\\">?</span><span class=\\"token punctuation\\">[</span><span class=\\"token string\\">\\"books\\"</span><span class=\\"token punctuation\\">]</span> <span class=\\"token operator\\">?</span><span class=\\"token operator\\">?</span> <span class=\\"token punctuation\\">[</span><span class=\\"token punctuation\\">]</span>\\n    response<span class=\\"token punctuation\\">.</span><span class=\\"token function\\">send</span><span class=\\"token punctuation\\">(</span>books<span class=\\"token punctuation\\">)</span>\\n    <span class=\\"token function\\">next</span><span class=\\"token punctuation\\">(</span><span class=\\"token punctuation\\">)</span>\\n<span class=\\"token punctuation\\">}</span></code></pre></div>\\n<p>Even with a simple model, this has vastly reduced the amount of code required, added compile time safety and made our code easier to read!</p>","frontmatter":{"path":"/blogs/codable-kitura-session","title":"Kitura-Session 3.3: Sharing Codable objects between a user’s requests"}}},{"node":{"html":"<h2 id=\\"introduction\\"><a href=\\"#introduction\\" aria-label=\\"introduction permalink\\" class=\\"anchor\\"><svg aria-hidden=\\"true\\" focusable=\\"false\\" height=\\"16\\" version=\\"1.1\\" viewBox=\\"0 0 16 16\\" width=\\"16\\"><path fill-rule=\\"evenodd\\" d=\\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\\"></path></svg></a>Introduction</h2>\\n<p>In Kitura 2.4 we have made enhancements to Codable Query Parameters to support extra filtering. This includes the ability to filter using operators such as greater than, inclusive ranges and pagination through Codable Routing. We then took a further step and incorporated these capabilities into <a href=\\"https://github.com/IBM-Swift/Swift-Kuery-ORM\\">Swift-Kuery-ORM</a> in order to filter results from database queries.</p>\\n<hr>\\n<h2 id=\\"setting-up-swift-kuery-orm\\"><a href=\\"#setting-up-swift-kuery-orm\\" aria-label=\\"setting up swift kuery orm permalink\\" class=\\"anchor\\"><svg aria-hidden=\\"true\\" focusable=\\"false\\" height=\\"16\\" version=\\"1.1\\" viewBox=\\"0 0 16 16\\" width=\\"16\\"><path fill-rule=\\"evenodd\\" d=\\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\\"></path></svg></a>Setting Up Swift-Kuery-ORM</h2>\\n<p>In your Kitura application, follow the <a href=\\"https://github.com/IBM-Swift/Swift-Kuery-ORM/blob/master/README.md\\">README</a> to set up Swift-Kuery-ORM using PostgreSQL, MySQL or SQLite.</p>\\n<ol>\\n<li>\\n<p>Create a Student type that implements Model:</p>\\n<div class=\\"gatsby-highlight\\" data-language=\\"swift\\"><pre class=\\"language-swift\\"><code class=\\"language-swift\\"><span class=\\"token keyword\\">struct</span> <span class=\\"token builtin\\">Student</span><span class=\\"token punctuation\\">:</span> <span class=\\"token builtin\\">Model</span> <span class=\\"token punctuation\\">{</span>\\n<span class=\\"token keyword\\">let</span> name<span class=\\"token punctuation\\">:</span> <span class=\\"token builtin\\">String</span>\\n<span class=\\"token keyword\\">let</span> age<span class=\\"token punctuation\\">:</span> <span class=\\"token builtin\\">Int</span>\\n<span class=\\"token keyword\\">let</span> grade<span class=\\"token punctuation\\">:</span> <span class=\\"token builtin\\">Double</span>\\n<span class=\\"token punctuation\\">}</span></code></pre></div>\\n</li>\\n<li>\\n<p>Create the table in the database:</p>\\n<div class=\\"gatsby-highlight\\" data-language=\\"swift\\"><pre class=\\"language-swift\\"><code class=\\"language-swift\\"><span class=\\"token keyword\\">do</span> <span class=\\"token punctuation\\">{</span>\\n<span class=\\"token keyword\\">try</span> <span class=\\"token builtin\\">Student</span><span class=\\"token punctuation\\">.</span><span class=\\"token function\\">createTableSync</span><span class=\\"token punctuation\\">(</span><span class=\\"token punctuation\\">)</span>\\n<span class=\\"token punctuation\\">}</span> <span class=\\"token keyword\\">catch</span> <span class=\\"token keyword\\">let</span> error <span class=\\"token punctuation\\">{</span>\\n<span class=\\"token function\\">print</span><span class=\\"token punctuation\\">(</span><span class=\\"token string\\">\\"Error:\\"</span><span class=\\"token punctuation\\">,</span> error<span class=\\"token punctuation\\">)</span>\\n<span class=\\"token punctuation\\">}</span></code></pre></div>\\n</li>\\n<li>\\n<p>Save a list of students:</p>\\n<div class=\\"gatsby-highlight\\" data-language=\\"swift\\"><pre class=\\"language-swift\\"><code class=\\"language-swift\\"><span class=\\"token keyword\\">let</span> students <span class=\\"token operator\\">=</span> <span class=\\"token punctuation\\">[</span><span class=\\"token function\\">Student</span><span class=\\"token punctuation\\">(</span>name<span class=\\"token punctuation\\">:</span> <span class=\\"token string\\">\\"Mark\\"</span><span class=\\"token punctuation\\">,</span> age<span class=\\"token punctuation\\">:</span> <span class=\\"token number\\">26</span><span class=\\"token punctuation\\">,</span> grade<span class=\\"token punctuation\\">:</span> <span class=\\"token number\\">78.5</span><span class=\\"token punctuation\\">)</span><span class=\\"token punctuation\\">,</span>\\n            <span class=\\"token function\\">Student</span><span class=\\"token punctuation\\">(</span>name<span class=\\"token punctuation\\">:</span> <span class=\\"token string\\">\\"David\\"</span><span class=\\"token punctuation\\">,</span> age<span class=\\"token punctuation\\">:</span> <span class=\\"token number\\">20</span><span class=\\"token punctuation\\">,</span> grade<span class=\\"token punctuation\\">:</span> <span class=\\"token number\\">65.3</span><span class=\\"token punctuation\\">)</span><span class=\\"token punctuation\\">,</span>\\n            <span class=\\"token function\\">Student</span><span class=\\"token punctuation\\">(</span>name<span class=\\"token punctuation\\">:</span> <span class=\\"token string\\">\\"Alex\\"</span><span class=\\"token punctuation\\">,</span> age<span class=\\"token punctuation\\">:</span> <span class=\\"token number\\">23</span><span class=\\"token punctuation\\">,</span> grade<span class=\\"token punctuation\\">:</span> <span class=\\"token number\\">82.7</span><span class=\\"token punctuation\\">)</span><span class=\\"token punctuation\\">,</span>\\n            <span class=\\"token function\\">Student</span><span class=\\"token punctuation\\">(</span>name<span class=\\"token punctuation\\">:</span> <span class=\\"token string\\">\\"Mark\\"</span><span class=\\"token punctuation\\">,</span> age<span class=\\"token punctuation\\">:</span> <span class=\\"token number\\">24</span><span class=\\"token punctuation\\">,</span> grade<span class=\\"token punctuation\\">:</span> <span class=\\"token number\\">94.6</span><span class=\\"token punctuation\\">)</span><span class=\\"token punctuation\\">]</span></code></pre></div>\\n</li>\\n</ol>\\n<p>for student in students {\\nstudent.save { student, error in\\nif let error = error {\\nprint(\\"Error:\\", error)\\n}\\n}\\n}</p>\\n<div class=\\"gatsby-highlight\\" data-language=\\"text\\"><pre class=\\"language-text\\"><code class=\\"language-text\\">4. Find a list of students and print them:\\n\\n```swift\\nStudent.findAll { students, error in\\n  if let error = error {\\n    print(&quot;Error:&quot;, error)    \\n  }\\n\\n  if let students = students {\\n    students.forEach { print($0) }</code></pre></div>\\n<p>Output:</p>\\n<div class=\\"gatsby-highlight\\" data-language=\\"swift\\"><pre class=\\"language-swift\\"><code class=\\"language-swift\\"><span class=\\"token function\\">Student</span><span class=\\"token punctuation\\">(</span>name<span class=\\"token punctuation\\">:</span> <span class=\\"token string\\">\\"Mark\\"</span><span class=\\"token punctuation\\">,</span> age<span class=\\"token punctuation\\">:</span> <span class=\\"token number\\">26</span><span class=\\"token punctuation\\">,</span> grade<span class=\\"token punctuation\\">:</span> <span class=\\"token number\\">78</span><span class=\\"token punctuation\\">)</span>\\n<span class=\\"token function\\">Student</span><span class=\\"token punctuation\\">(</span>name<span class=\\"token punctuation\\">:</span> <span class=\\"token string\\">\\"David\\"</span><span class=\\"token punctuation\\">,</span> age<span class=\\"token punctuation\\">:</span> <span class=\\"token number\\">20</span><span class=\\"token punctuation\\">,</span> grade<span class=\\"token punctuation\\">:</span> <span class=\\"token number\\">65</span><span class=\\"token punctuation\\">)</span>\\n<span class=\\"token function\\">Student</span><span class=\\"token punctuation\\">(</span>name<span class=\\"token punctuation\\">:</span> <span class=\\"token string\\">\\"Alex\\"</span><span class=\\"token punctuation\\">,</span> age<span class=\\"token punctuation\\">:</span> <span class=\\"token number\\">23</span><span class=\\"token punctuation\\">,</span> grade<span class=\\"token punctuation\\">:</span> <span class=\\"token number\\">82</span><span class=\\"token punctuation\\">)</span>\\n<span class=\\"token function\\">Student</span><span class=\\"token punctuation\\">(</span>name<span class=\\"token punctuation\\">:</span> <span class=\\"token string\\">\\"Mark\\"</span><span class=\\"token punctuation\\">,</span> age<span class=\\"token punctuation\\">:</span> <span class=\\"token number\\">24</span><span class=\\"token punctuation\\">,</span> grade<span class=\\"token punctuation\\">:</span> <span class=\\"token number\\">94</span><span class=\\"token punctuation\\">)</span></code></pre></div>\\n<p>This would translate in Raw SQL to:</p>\\n<div class=\\"gatsby-highlight\\" data-language=\\"text\\"><pre class=\\"language-text\\"><code class=\\"language-text\\">SELECT * FROM Students;</code></pre></div>\\n<hr>\\n<h2 id=\\"using-query-parameters-with-swift-kuery-orm\\"><a href=\\"#using-query-parameters-with-swift-kuery-orm\\" aria-label=\\"using query parameters with swift kuery orm permalink\\" class=\\"anchor\\"><svg aria-hidden=\\"true\\" focusable=\\"false\\" height=\\"16\\" version=\\"1.1\\" viewBox=\\"0 0 16 16\\" width=\\"16\\"><path fill-rule=\\"evenodd\\" d=\\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\\"></path></svg></a>Using Query Parameters with Swift-Kuery-ORM</h2>\\n<p>The following types have been added to Kitura 2.4 to enhance filtering:</p>\\n<ul>\\n<li>GreaterThan &#x26; LowerThan</li>\\n<li>GreaterThanOrEqual &#x26; LowerThanOrEqual</li>\\n<li>InclusiveRange &#x26; ExclusiveRange</li>\\n<li>Pagination</li>\\n<li>Ordering</li>\\n</ul>\\n<p>Let’s suppose we want to filter over the name of the Student, the age being greater than a value and the grade being inside a range.</p>\\n<ol>\\n<li>\\n<p>Let’s define our Query type that implements QueryParams:</p>\\n<div class=\\"gatsby-highlight\\" data-language=\\"swift\\"><pre class=\\"language-swift\\"><code class=\\"language-swift\\"><span class=\\"token keyword\\">struct</span> <span class=\\"token builtin\\">Query</span><span class=\\"token punctuation\\">:</span> <span class=\\"token builtin\\">QueryParams</span> <span class=\\"token punctuation\\">{</span>\\n<span class=\\"token keyword\\">let</span> name<span class=\\"token punctuation\\">:</span> <span class=\\"token builtin\\">String</span>\\n<span class=\\"token keyword\\">let</span> age<span class=\\"token punctuation\\">:</span> <span class=\\"token builtin\\">GreaterThan</span><span class=\\"token operator\\">&lt;</span><span class=\\"token builtin\\">Int</span><span class=\\"token operator\\">></span><span class=\\"token punctuation\\">;</span>\\n<span class=\\"token keyword\\">let</span> grade<span class=\\"token punctuation\\">:</span> <span class=\\"token builtin\\">InclusiveRange</span><span class=\\"token operator\\">&lt;</span><span class=\\"token builtin\\">Double</span><span class=\\"token operator\\">></span><span class=\\"token punctuation\\">;</span>\\n<span class=\\"token punctuation\\">}</span></code></pre></div>\\n</li>\\n<li>\\n<p>Create an instance of Query:</p>\\n<div class=\\"gatsby-highlight\\" data-language=\\"swift\\"><pre class=\\"language-swift\\"><code class=\\"language-swift\\"><span class=\\"token keyword\\">let</span> query <span class=\\"token operator\\">=</span> <span class=\\"token function\\">Query</span><span class=\\"token punctuation\\">(</span>name<span class=\\"token punctuation\\">:</span> <span class=\\"token string\\">\\"Mark\\"</span><span class=\\"token punctuation\\">,</span> age<span class=\\"token punctuation\\">:</span> <span class=\\"token function\\">GreaterThan</span><span class=\\"token punctuation\\">(</span>value<span class=\\"token punctuation\\">:</span> <span class=\\"token number\\">23</span><span class=\\"token punctuation\\">)</span><span class=\\"token punctuation\\">,</span> grade<span class=\\"token punctuation\\">:</span> <span class=\\"token function\\">InclusiveRange</span><span class=\\"token punctuation\\">(</span>start<span class=\\"token punctuation\\">:</span> <span class=\\"token number\\">76</span><span class=\\"token punctuation\\">,</span> end<span class=\\"token punctuation\\">:</span> <span class=\\"token number\\">88</span><span class=\\"token punctuation\\">)</span><span class=\\"token punctuation\\">)</span></code></pre></div>\\n</li>\\n<li>Find the students matching the query and print them:</li>\\n</ol>\\n<div class=\\"gatsby-highlight\\" data-language=\\"swift\\"><pre class=\\"language-swift\\"><code class=\\"language-swift\\"><span class=\\"token builtin\\">Student</span><span class=\\"token punctuation\\">.</span><span class=\\"token function\\">findAll</span><span class=\\"token punctuation\\">(</span>matching<span class=\\"token punctuation\\">:</span> query<span class=\\"token punctuation\\">)</span> <span class=\\"token punctuation\\">{</span> students<span class=\\"token punctuation\\">,</span> error <span class=\\"token keyword\\">in</span>\\n  <span class=\\"token keyword\\">if</span> <span class=\\"token keyword\\">let</span> error <span class=\\"token operator\\">=</span> error <span class=\\"token punctuation\\">{</span>\\n    <span class=\\"token function\\">print</span><span class=\\"token punctuation\\">(</span><span class=\\"token string\\">\\"Error:\\"</span><span class=\\"token punctuation\\">,</span> error<span class=\\"token punctuation\\">)</span>    \\n  <span class=\\"token punctuation\\">}</span>\\n\\n  <span class=\\"token keyword\\">if</span> <span class=\\"token keyword\\">let</span> students <span class=\\"token operator\\">=</span> students <span class=\\"token punctuation\\">{</span>\\n    students<span class=\\"token punctuation\\">.</span>forEach <span class=\\"token punctuation\\">{</span> <span class=\\"token function\\">print</span><span class=\\"token punctuation\\">(</span>$<span class=\\"token number\\">0</span><span class=\\"token punctuation\\">)</span> <span class=\\"token punctuation\\">}</span>\\n  <span class=\\"token punctuation\\">}</span>\\n<span class=\\"token punctuation\\">}</span></code></pre></div>\\n<p>Output:</p>\\n<div class=\\"gatsby-highlight\\" data-language=\\"swift\\"><pre class=\\"language-swift\\"><code class=\\"language-swift\\"><span class=\\"token function\\">Student</span><span class=\\"token punctuation\\">(</span>name<span class=\\"token punctuation\\">:</span> <span class=\\"token string\\">\\"Mark\\"</span><span class=\\"token punctuation\\">,</span> age<span class=\\"token punctuation\\">:</span> <span class=\\"token number\\">26</span><span class=\\"token punctuation\\">,</span> grade<span class=\\"token punctuation\\">:</span> <span class=\\"token number\\">78</span><span class=\\"token punctuation\\">)</span></code></pre></div>\\n<p>This would translate in Raw SQL to:</p>\\n<div class=\\"gatsby-highlight\\" data-language=\\"text\\"><pre class=\\"language-text\\"><code class=\\"language-text\\">SELECT * FROM Students WHERE ((Students.name = &quot;Mark&quot;) AND (Students.age &gt; 23)) AND ((Students.grade &gt;= 76) AND (Students.grade &lt;= 88));</code></pre></div>\\n<p>The URL would look like:</p>\\n<div class=\\"gatsby-highlight\\" data-language=\\"text\\"><pre class=\\"language-text\\"><code class=\\"language-text\\">?name=Mark&amp;age=23&amp;grade=76,88</code></pre></div>\\n<p>Now, we want only the first 3 values and they have to be ordered descending by grade:</p>\\n<ol>\\n<li>\\n<p>Let’s define our MyQuery type that implements QueryParams:</p>\\n<div class=\\"gatsby-highlight\\" data-language=\\"swift\\"><pre class=\\"language-swift\\"><code class=\\"language-swift\\"><span class=\\"token keyword\\">struct</span> <span class=\\"token builtin\\">MyQuery</span><span class=\\"token punctuation\\">:</span> <span class=\\"token builtin\\">QueryParams</span> <span class=\\"token punctuation\\">{</span>\\n<span class=\\"token keyword\\">let</span> pagination<span class=\\"token punctuation\\">:</span> <span class=\\"token builtin\\">Pagination</span>\\n<span class=\\"token keyword\\">let</span> order<span class=\\"token punctuation\\">:</span> <span class=\\"token builtin\\">Ordering</span>\\n<span class=\\"token punctuation\\">}</span></code></pre></div>\\n</li>\\n<li>\\n<p>Create an instance of MyQuery:</p>\\n<div class=\\"gatsby-highlight\\" data-language=\\"swift\\"><pre class=\\"language-swift\\"><code class=\\"language-swift\\"><span class=\\"token keyword\\">let</span> myQuery <span class=\\"token operator\\">=</span> <span class=\\"token function\\">MyQuery</span><span class=\\"token punctuation\\">(</span>pagination<span class=\\"token punctuation\\">:</span> <span class=\\"token function\\">Pagination</span><span class=\\"token punctuation\\">(</span>start<span class=\\"token punctuation\\">:</span> <span class=\\"token number\\">0</span><span class=\\"token punctuation\\">,</span> size<span class=\\"token punctuation\\">:</span> <span class=\\"token number\\">3</span><span class=\\"token punctuation\\">)</span><span class=\\"token punctuation\\">,</span> order<span class=\\"token punctuation\\">:</span> <span class=\\"token function\\">Ordering</span><span class=\\"token punctuation\\">(</span>by<span class=\\"token punctuation\\">:</span> <span class=\\"token punctuation\\">.</span><span class=\\"token function\\">desc</span><span class=\\"token punctuation\\">(</span><span class=\\"token string\\">\\"grade\\"</span><span class=\\"token punctuation\\">)</span><span class=\\"token punctuation\\">)</span><span class=\\"token punctuation\\">)</span></code></pre></div>\\n</li>\\n<li>\\n<p>Find the students matching the query and print them:</p>\\n<div class=\\"gatsby-highlight\\" data-language=\\"swift\\"><pre class=\\"language-swift\\"><code class=\\"language-swift\\"><span class=\\"token builtin\\">Student</span><span class=\\"token punctuation\\">.</span><span class=\\"token function\\">findAll</span><span class=\\"token punctuation\\">(</span>matching<span class=\\"token punctuation\\">:</span> myQuery<span class=\\"token punctuation\\">)</span> <span class=\\"token punctuation\\">{</span> students<span class=\\"token punctuation\\">,</span> error <span class=\\"token keyword\\">in</span>\\n<span class=\\"token keyword\\">if</span> <span class=\\"token keyword\\">let</span> error <span class=\\"token operator\\">=</span> error <span class=\\"token punctuation\\">{</span>\\n<span class=\\"token function\\">print</span><span class=\\"token punctuation\\">(</span><span class=\\"token string\\">\\"Error:\\"</span><span class=\\"token punctuation\\">,</span> error<span class=\\"token punctuation\\">)</span>    \\n<span class=\\"token punctuation\\">}</span></code></pre></div>\\n</li>\\n</ol>\\n<p>  if let students = students {\\nstudents.forEach { print($0) }\\n}\\n}</p>\\n<div class=\\"gatsby-highlight\\" data-language=\\"text\\"><pre class=\\"language-text\\"><code class=\\"language-text\\">Output:\\n\\n```swift\\nStudent(name: &quot;Mark&quot;, age: 24, grade: 94)\\nStudent(name: &quot;Alex&quot;, age: 23, grade: 82)\\nStudent(name: &quot;Mark&quot;, age: 26, grade: 78)</code></pre></div>\\n<p>This would translate in Raw SQL to :</p>\\n<div class=\\"gatsby-highlight\\" data-language=\\"text\\"><pre class=\\"language-text\\"><code class=\\"language-text\\">SELECT * FROM Students ORDER BY Students.grade DESC LIMIT 3 OFFSET 0;</code></pre></div>\\n<p>The URL would look like:</p>\\n<div class=\\"gatsby-highlight\\" data-language=\\"text\\"><pre class=\\"language-text\\"><code class=\\"language-text\\">?pagination=0,3&amp;order=desc(grade)</code></pre></div>\\n<hr>\\n<h2 id=\\"working-with-codable-routing-in-kitura\\"><a href=\\"#working-with-codable-routing-in-kitura\\" aria-label=\\"working with codable routing in kitura permalink\\" class=\\"anchor\\"><svg aria-hidden=\\"true\\" focusable=\\"false\\" height=\\"16\\" version=\\"1.1\\" viewBox=\\"0 0 16 16\\" width=\\"16\\"><path fill-rule=\\"evenodd\\" d=\\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\\"></path></svg></a>Working with Codable Routing in Kitura</h2>\\n<p>Swift-Kuery-ORM really shines when used with Kitura, in particular because the ORM API has been aligned with Kitura’s Codable Routing APIs, allowing the completion handlers from the Codable Routes to be passed directly into the ORM calls. This means that no additional code needs to be written.</p>\\n<ol>\\n<li>Create a handler that retrieves the students and register it with the Router for GET requests on <code class=\\"language-text\\">/students</code>:</li>\\n</ol>\\n<div class=\\"gatsby-highlight\\" data-language=\\"swift\\"><pre class=\\"language-swift\\"><code class=\\"language-swift\\"><span class=\\"token keyword\\">func</span> <span class=\\"token function\\">getStudents</span><span class=\\"token punctuation\\">(</span>completion<span class=\\"token punctuation\\">:</span> @<span class=\\"token function\\">escaping</span><span class=\\"token punctuation\\">(</span><span class=\\"token punctuation\\">[</span><span class=\\"token builtin\\">Student</span><span class=\\"token punctuation\\">]</span><span class=\\"token operator\\">?</span><span class=\\"token punctuation\\">,</span> <span class=\\"token builtin\\">RequestError</span><span class=\\"token operator\\">?</span><span class=\\"token punctuation\\">)</span> <span class=\\"token operator\\">-</span><span class=\\"token operator\\">></span> <span class=\\"token builtin\\">Void</span><span class=\\"token punctuation\\">)</span> <span class=\\"token operator\\">-</span><span class=\\"token operator\\">></span> <span class=\\"token builtin\\">Void</span> <span class=\\"token punctuation\\">{</span>\\n    <span class=\\"token builtin\\">Student</span><span class=\\"token punctuation\\">.</span><span class=\\"token function\\">findAll</span><span class=\\"token punctuation\\">(</span>completion<span class=\\"token punctuation\\">)</span>\\n<span class=\\"token punctuation\\">}</span>\\n\\nrouter<span class=\\"token punctuation\\">.</span><span class=\\"token keyword\\">get</span><span class=\\"token punctuation\\">(</span><span class=\\"token string\\">\\"/students\\"</span><span class=\\"token punctuation\\">,</span> handler<span class=\\"token punctuation\\">:</span> getStudents<span class=\\"token punctuation\\">)</span></code></pre></div>\\n<p>This has implemented the following <code class=\\"language-text\\">URI: GET: /students</code>.</p>\\n<ol start=\\"2\\">\\n<li>Create a handler that saves the students, and register it with the Router for POST requests on <code class=\\"language-text\\">/students</code>:</li>\\n</ol>\\n<div class=\\"gatsby-highlight\\" data-language=\\"swift\\"><pre class=\\"language-swift\\"><code class=\\"language-swift\\"><span class=\\"token keyword\\">func</span> <span class=\\"token function\\">saveStudents</span><span class=\\"token punctuation\\">(</span>student<span class=\\"token punctuation\\">:</span> <span class=\\"token builtin\\">Student</span><span class=\\"token punctuation\\">,</span> completion<span class=\\"token punctuation\\">:</span> @escaping <span class=\\"token punctuation\\">(</span><span class=\\"token builtin\\">Student</span><span class=\\"token operator\\">?</span><span class=\\"token punctuation\\">,</span> <span class=\\"token builtin\\">RequestError</span><span class=\\"token operator\\">?</span><span class=\\"token punctuation\\">)</span> <span class=\\"token operator\\">-</span><span class=\\"token operator\\">></span> <span class=\\"token builtin\\">Void</span><span class=\\"token punctuation\\">)</span> <span class=\\"token operator\\">-</span><span class=\\"token operator\\">></span> <span class=\\"token builtin\\">Void</span> <span class=\\"token punctuation\\">{</span>\\n    student<span class=\\"token punctuation\\">.</span><span class=\\"token function\\">save</span><span class=\\"token punctuation\\">(</span>completion<span class=\\"token punctuation\\">)</span>\\n<span class=\\"token punctuation\\">}</span>\\n\\nrouter<span class=\\"token punctuation\\">.</span><span class=\\"token function\\">post</span><span class=\\"token punctuation\\">(</span><span class=\\"token string\\">\\"/students\\"</span><span class=\\"token punctuation\\">,</span> handler<span class=\\"token punctuation\\">:</span> saveStudents<span class=\\"token punctuation\\">)</span></code></pre></div>\\n<p>This has implemented the following <code class=\\"language-text\\">URI: POST: /students</code>.</p>\\n<ol start=\\"3\\">\\n<li>Now let’s add filtering to the GET route by updating the getStudents handler to also accept your type that implements QueryParams as an additional parameter:\\nNote: This is using the Query struct from earlier:</li>\\n</ol>\\n<div class=\\"gatsby-highlight\\" data-language=\\"swift\\"><pre class=\\"language-swift\\"><code class=\\"language-swift\\"><span class=\\"token keyword\\">func</span> <span class=\\"token function\\">getStudents</span><span class=\\"token punctuation\\">(</span>query<span class=\\"token punctuation\\">:</span> <span class=\\"token builtin\\">Query</span><span class=\\"token operator\\">?</span><span class=\\"token punctuation\\">,</span> completion<span class=\\"token punctuation\\">:</span> @<span class=\\"token function\\">escaping</span><span class=\\"token punctuation\\">(</span><span class=\\"token punctuation\\">[</span><span class=\\"token builtin\\">Student</span><span class=\\"token punctuation\\">]</span><span class=\\"token operator\\">?</span><span class=\\"token punctuation\\">,</span> <span class=\\"token builtin\\">RequestError</span><span class=\\"token operator\\">?</span><span class=\\"token punctuation\\">)</span> <span class=\\"token operator\\">-</span><span class=\\"token operator\\">></span> <span class=\\"token builtin\\">Void</span><span class=\\"token punctuation\\">)</span> <span class=\\"token operator\\">-</span><span class=\\"token operator\\">></span> <span class=\\"token builtin\\">Void</span> <span class=\\"token punctuation\\">{</span>\\n    <span class=\\"token builtin\\">Student</span><span class=\\"token punctuation\\">.</span><span class=\\"token function\\">findAll</span><span class=\\"token punctuation\\">(</span>matching<span class=\\"token punctuation\\">:</span> query<span class=\\"token punctuation\\">,</span> completion<span class=\\"token punctuation\\">)</span>\\n<span class=\\"token punctuation\\">}</span></code></pre></div>\\n<p>This now implements a completely type-safe implementation of both the data handling, and the URL encoded query parameters for the following URI:</p>\\n<div class=\\"gatsby-highlight\\" data-language=\\"text\\"><pre class=\\"language-text\\"><code class=\\"language-text\\">GET:  /users?name=&lt;String&gt;&amp;age=&lt;Int&gt;&amp;grade=&lt;Int&gt;,&lt;Int&gt;</code></pre></div>\\n<p>Note: that the type Query is set to optional. This means that the following URI is also supported:</p>\\n<div class=\\"gatsby-highlight\\" data-language=\\"text\\"><pre class=\\"language-text\\"><code class=\\"language-text\\">GET:  /users</code></pre></div>\\n<p>If you want to include support for optional (non-required) query parameters, you just need to mark them as optional in your declared Swift type, eg: <code class=\\"language-text\\">InclusiveRange?</code></p>\\n<p>We have increased the capabilities of Swift-Kuery-ORM and carefully aligned it with Kitura to make persistence as easy as possible whilst maintaining type safety.</p>\\n<hr>\\n<h2 id=\\"future\\"><a href=\\"#future\\" aria-label=\\"future permalink\\" class=\\"anchor\\"><svg aria-hidden=\\"true\\" focusable=\\"false\\" height=\\"16\\" version=\\"1.1\\" viewBox=\\"0 0 16 16\\" width=\\"16\\"><path fill-rule=\\"evenodd\\" d=\\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\\"></path></svg></a>Future</h2>\\n<p>The next features we are looking to integrate in Swift-Kuery-ORM, we believe will truly enhance its usage and provide essential functionalities. The following are just some of them:</p>\\n<ul>\\n<li>Migrations – the ability to apply incremental and reversible schema changes to the database.</li>\\n<li>Relations between models – such as nested Models:</li>\\n</ul>\\n<div class=\\"gatsby-highlight\\" data-language=\\"swift\\"><pre class=\\"language-swift\\"><code class=\\"language-swift\\"><span class=\\"token keyword\\">struct</span> <span class=\\"token builtin\\">School</span><span class=\\"token punctuation\\">:</span> <span class=\\"token builtin\\">Model</span> <span class=\\"token punctuation\\">{</span>\\n  <span class=\\"token keyword\\">let</span> name<span class=\\"token punctuation\\">:</span> <span class=\\"token builtin\\">String</span>\\n<span class=\\"token punctuation\\">}</span>\\n\\n<span class=\\"token keyword\\">struct</span> <span class=\\"token builtin\\">Student</span><span class=\\"token punctuation\\">:</span> <span class=\\"token builtin\\">Model</span> <span class=\\"token punctuation\\">{</span>\\n  <span class=\\"token keyword\\">let</span> name<span class=\\"token punctuation\\">:</span> <span class=\\"token builtin\\">String</span>\\n  <span class=\\"token keyword\\">let</span> age<span class=\\"token punctuation\\">:</span> <span class=\\"token builtin\\">Int</span>\\n  <span class=\\"token keyword\\">let</span> grade<span class=\\"token punctuation\\">:</span> <span class=\\"token builtin\\">Double</span>\\n  <span class=\\"token keyword\\">let</span> school<span class=\\"token punctuation\\">:</span> <span class=\\"token builtin\\">School</span>\\n<span class=\\"token punctuation\\">}</span></code></pre></div>\\n<ul>\\n<li>Support for NoSQL Databases such as Redis, MongoDB and CouchDB.</li>\\n<li>Control over data types and sizes</li>\\n</ul>","frontmatter":{"path":"/blogs/filtering-swift-kuery-orm","title":"Filtering in Swift-Kuery-ORM"}}},{"node":{"html":"<p>In February 2018, at the try! Swift Tokyo conference, <a href=\\"https://www.youtube.com/watch?v=QJ3WG9kRLMo\\">Apple announced SwiftNIO</a> — a new cross-platform, asynchronous, event-driven networking framework for building servers and clients in Swift. <a href=\\"https://github.com/apple/swift-nio\\">SwiftNIO</a> has the potential to provide all the low-level socket-handling and HTTP protocol support in Kitura, and hence could be a replacement for the current Kitura-net and BlueSocket libraries which underpin Kitura today. The Kitura team have been working on <a href=\\"https://github.com/IBM-Swift/Kitura-NIO\\">Kitura-NIO</a>, a Kitura interface to SwiftNIO and we think now is a good time to release it for wider experimentation, testing and feedback.</p>\\n<p>Kitura-NIO has been designed to be API-compatible with current Kitura-net API, though the underlying implementation uses SwiftNIO. As a consequence, Kitura itself needs very few changes to run on top of Kitura-NIO. These changes are available in the new <a href=\\"https://github.com/IBM-Swift/Kitura/tree/kitura-nio\\">kitura-nio</a> and <a href=\\"https://github.com/IBM-Swift/Kitura/tree/kitura-2.4-nio\\">kitura-2.4-nio</a> branches. To use Kitura with Kitura-NIO, users just need to point to one of these branches from their application’s Package.swift and rebuild their Kitura application:</p>\\n<div class=\\"gatsby-highlight\\" data-language=\\"swift\\"><pre class=\\"language-swift\\"><code class=\\"language-swift\\">dependencies<span class=\\"token punctuation\\">:</span> <span class=\\"token punctuation\\">[</span>\\n   <span class=\\"token comment\\">//other dependencies</span>\\n   <span class=\\"token punctuation\\">.</span><span class=\\"token function\\">package</span><span class=\\"token punctuation\\">(</span>url<span class=\\"token punctuation\\">:</span> <span class=\\"token string\\">\\"https://github.com/IBM-Swift/Kitura\\"</span><span class=\\"token punctuation\\">)</span><span class=\\"token punctuation\\">,</span> <span class=\\"token punctuation\\">.</span><span class=\\"token function\\">branch</span><span class=\\"token punctuation\\">(</span><span class=\\"token string\\">\\"kitura-nio\\"</span><span class=\\"token punctuation\\">)</span><span class=\\"token punctuation\\">)</span><span class=\\"token punctuation\\">,</span>\\n<span class=\\"token punctuation\\">]</span></code></pre></div>\\n<p>These new branches will be updated and rebased regularly. If you have existing Kitura applications, Kitura-NIO is likely to provide all that your application needs, barring the FastCGI protocol implementation which we believe is not widely used. We urge you to test your applications’ functionality and performance and we will be happy to receive feedback — pull requests, bug reports, performance comparison reports, enhancement requests or anything else. We’re available on <a href=\\"http://swift-at-ibm-slack.mybluemix.net/?cm_sp=dw-bluemix-_-swift-_-devcenter&#x26;_ga=2.151948217.186671014.1570626561-1743126121.1570022962\\">Slack</a> or you can open an issue at the <a href=\\"https://github.com/IBM-Swift/Kitura-NIO\\">Kitura-NIO</a> GitHub repository.</p>\\n<p>Kitura-NIO fully supports HTTP and HTTPS, both servers and clients. It also has IPv6 support. A NIO based implementation of Kitura-WebSocket is also on its way. Kitura-NIO is currently supported with Swift 4.1 and 4.2 on Ubuntu 14.04, Ubuntu 16.04 and macOS.</p>\\n<p>The major reason behind the decision to keep the API compatible with Kitura-net was API stability. We wanted Kitura users to experiment with Kitura-NIO, with zero code changes to their Kitura applications.</p>\\n<p>Performance analysis of Kitura-NIO is work-in-progress. We’ve identified a few bottlenecks and implemented some performance improvements already. Translating between the Kitura-net types and the SwiftNIO types does incur a cost. In future, we may want to eliminate this cost by exposing NIO types (or opaque wrappers of them) directly to Kitura users. This may require API changes, but it could be the path to better performance. However, we also know that Kitura users strongly value API stability, backward compatibility and ease of migration. So, we have an interesting trade-off problem at hand and we’d like to solve it in a way that best suits Kitura’s users. We would love to hear your opinion on this.</p>\\n<p>This blog post would be incomplete without thanking the SwiftNIO team — especially <a href=\\"https://twitter.com/johannesweiss\\">@johannesweiss</a> and <a href=\\"https://twitter.com/Lukasaoz\\">@Lukasaoz</a>. The team has been approachable, extremely helpful and amazingly quick with our questions and bug reports!</p>","frontmatter":{"path":"/blogs/introducing-kitura-nio","title":"Introducing Kitura-NIO"}}},{"node":{"html":"<p>With the release of <a href=\\"https://github.com/IBM-Swift/KituraKit/releases/tag/0.0.24\\">KituraKit 0.0.24</a>, it is now possible to make type-safe requests to a Kitura server using a JWT for authentication. In addition, we’d like to introduce <a href=\\"https://github.com/IBM-Swift/Kitura-CredentialsJWT\\">Kitura-CredentialsJWT</a>, which provides a convenient way to add JWT authentication to Codable routes.</p>\\n<p>In a previous blog post <a href=\\"/blogs/swift-jwt-3-0-codable-json-web-tokens\\">Swift JWT 3.0: Codable JSON web tokens</a>, we outlined the code for implementing JWT authentication in Kitura for Codable routes. In this post, we’ll show how KituraKit makes it easy to perform type-safe requests to APIs requiring JWT authentication, and how Kitura-CredentialsJWT reduces the boilerplate required on the server side.</p>\\n<h2 id=\\"what-is-a-json-web-token\\"><a href=\\"#what-is-a-json-web-token\\" aria-label=\\"what is a json web token permalink\\" class=\\"anchor\\"><svg aria-hidden=\\"true\\" focusable=\\"false\\" height=\\"16\\" version=\\"1.1\\" viewBox=\\"0 0 16 16\\" width=\\"16\\"><path fill-rule=\\"evenodd\\" d=\\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\\"></path></svg></a>What is a JSON Web Token?</h2>\\n<p>In short, a JWT is a small JSON payload consisting of a Header object, a Claims object and a signature. They are a self-contained way for securely transmitting information between parties. If you would like to know more about JWTs, check out <a href=\\"https://jwt.io\\">jwt.io</a>.</p>\\n<hr>\\n<h2 id=\\"setting-up-jwt-authentication-using-kiturakit\\"><a href=\\"#setting-up-jwt-authentication-using-kiturakit\\" aria-label=\\"setting up jwt authentication using kiturakit permalink\\" class=\\"anchor\\"><svg aria-hidden=\\"true\\" focusable=\\"false\\" height=\\"16\\" version=\\"1.1\\" viewBox=\\"0 0 16 16\\" width=\\"16\\"><path fill-rule=\\"evenodd\\" d=\\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\\"></path></svg></a>Setting up JWT authentication using KituraKit</h2>\\n<p>Sending a JWT for authentication is simple: attach a <code class=\\"language-text\\">JWTCredentials</code> to your request, as in this example:</p>\\n<div class=\\"gatsby-highlight\\" data-language=\\"swift\\"><pre class=\\"language-swift\\"><code class=\\"language-swift\\"><span class=\\"token comment\\">// Replace with a valid JWT string: three base64-encoded values separated by full stops.</span>\\n<span class=\\"token keyword\\">let</span> jwtString <span class=\\"token operator\\">=</span> <span class=\\"token string\\">\\"&lt;my_jwt_token_string>\\"</span>\\n\\nclient<span class=\\"token punctuation\\">.</span><span class=\\"token keyword\\">get</span><span class=\\"token punctuation\\">(</span><span class=\\"token string\\">\\"/protected\\"</span><span class=\\"token punctuation\\">,</span> credentials<span class=\\"token punctuation\\">:</span> <span class=\\"token function\\">JWTCredentials</span><span class=\\"token punctuation\\">(</span>token<span class=\\"token punctuation\\">:</span> jwtString<span class=\\"token punctuation\\">)</span><span class=\\"token punctuation\\">)</span> <span class=\\"token punctuation\\">{</span> <span class=\\"token punctuation\\">(</span>user<span class=\\"token punctuation\\">:</span> <span class=\\"token builtin\\">User</span><span class=\\"token operator\\">?</span><span class=\\"token punctuation\\">,</span> error<span class=\\"token punctuation\\">:</span> <span class=\\"token builtin\\">RequestError</span><span class=\\"token operator\\">?</span><span class=\\"token punctuation\\">)</span> <span class=\\"token keyword\\">in</span>\\n    <span class=\\"token keyword\\">guard</span> <span class=\\"token keyword\\">let</span> user <span class=\\"token operator\\">=</span> user <span class=\\"token keyword\\">else</span> <span class=\\"token punctuation\\">{</span>\\n        <span class=\\"token keyword\\">return</span> <span class=\\"token function\\">print</span><span class=\\"token punctuation\\">(</span><span class=\\"token string\\">\\"Failed to access protected resource\\"</span><span class=\\"token punctuation\\">)</span>\\n    <span class=\\"token punctuation\\">}</span>\\n    <span class=\\"token function\\">print</span><span class=\\"token punctuation\\">(</span><span class=\\"token string\\">\\"User obtained: <span class=\\"token interpolation\\"><span class=\\"token delimiter variable\\">\\\\(</span>user<span class=\\"token delimiter variable\\">)</span></span>\\"</span><span class=\\"token punctuation\\">)</span>\\n<span class=\\"token punctuation\\">}</span></code></pre></div>\\n<p>Under the covers, KituraKit will send your token in an <code class=\\"language-text\\">Authorization: Bearer &lt;token&gt;</code> header. When Kitura receives a request to the protected route, it will verify the token’s signature, and can then choose whether the JWT permits access to that resource based on its claims.</p>\\n<h2 id=\\"server-side-authentication-using-kitura-credentialsjwt\\"><a href=\\"#server-side-authentication-using-kitura-credentialsjwt\\" aria-label=\\"server side authentication using kitura credentialsjwt permalink\\" class=\\"anchor\\"><svg aria-hidden=\\"true\\" focusable=\\"false\\" height=\\"16\\" version=\\"1.1\\" viewBox=\\"0 0 16 16\\" width=\\"16\\"><path fill-rule=\\"evenodd\\" d=\\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\\"></path></svg></a>Server-side authentication using Kitura-CredentialsJWT</h2>\\n<p>In a previous blog post <a href=\\"/blogs/type-safe-authentication-using-oauth-tokens\\">Type-Safe Authentication using OAuth tokens</a>, we introduced the TypeSafeCredentials protocol as part of Kitura-Credentials, and with it a number of initial implementations: <code class=\\"language-text\\">TypeSafeGoogleToken</code>, <code class=\\"language-text\\">TypeSafeFacebookToken</code> and <code class=\\"language-text\\">TypeSafeHTTPBasic</code>.</p>\\n<p>We’ve released 0.0.1 of <a href=\\"https://github.com/IBM-Swift/Kitura-CredentialsJWT\\">Kitura-CredentialsJWT</a>, which extends the <code class=\\"language-text\\">JWT</code> type to conform to TypeSafeMiddleware. This means that you can include it in your Codable route handler as follows:</p>\\n<div class=\\"gatsby-highlight\\" data-language=\\"swift\\"><pre class=\\"language-swift\\"><code class=\\"language-swift\\"><span class=\\"token keyword\\">import</span> <span class=\\"token builtin\\">SwiftJWT</span>\\n<span class=\\"token keyword\\">import</span> <span class=\\"token builtin\\">CredentialsJWT</span>\\n\\n<span class=\\"token comment\\">// Define the claims that must appear in the JWT</span>\\n<span class=\\"token keyword\\">struct</span> <span class=\\"token builtin\\">MyClaims</span><span class=\\"token punctuation\\">:</span> <span class=\\"token builtin\\">Claims</span> <span class=\\"token punctuation\\">{</span>\\n    <span class=\\"token comment\\">// Subject\'s id (e.g. name)</span>\\n    <span class=\\"token keyword\\">let</span> sub<span class=\\"token punctuation\\">:</span> <span class=\\"token builtin\\">String</span>\\n<span class=\\"token punctuation\\">}</span>\\n\\n<span class=\\"token comment\\">// Set up TypeSafeJWT by specifying the method for verifying a JWT signature</span>\\n<span class=\\"token keyword\\">let</span> key <span class=\\"token operator\\">=</span> <span class=\\"token string\\">\\"&lt;PrivateKey>\\"</span><span class=\\"token punctuation\\">.</span><span class=\\"token function\\">data</span><span class=\\"token punctuation\\">(</span>using<span class=\\"token punctuation\\">:</span> <span class=\\"token punctuation\\">.</span>utf8<span class=\\"token punctuation\\">)</span><span class=\\"token operator\\">!</span>\\n<span class=\\"token builtin\\">TypeSafeJWT</span><span class=\\"token punctuation\\">.</span>verifier <span class=\\"token operator\\">=</span> <span class=\\"token punctuation\\">.</span><span class=\\"token function\\">hs256</span><span class=\\"token punctuation\\">(</span>key<span class=\\"token punctuation\\">:</span> key<span class=\\"token punctuation\\">)</span>\\n\\n<span class=\\"token comment\\">// Use the JWT type as a Type-Safe Middleware to protect a route. The handler</span>\\n<span class=\\"token comment\\">// will only be invoked if the JWT can be successfully verified, and contains</span>\\n<span class=\\"token comment\\">// the required claims.</span>\\nrouter<span class=\\"token punctuation\\">.</span><span class=\\"token keyword\\">get</span><span class=\\"token punctuation\\">(</span><span class=\\"token string\\">\\"/protected\\"</span><span class=\\"token punctuation\\">)</span> <span class=\\"token punctuation\\">{</span>  <span class=\\"token punctuation\\">(</span>jwt<span class=\\"token punctuation\\">:</span> <span class=\\"token constant\\">JWT</span><span class=\\"token operator\\">&lt;</span><span class=\\"token builtin\\">MyClaims</span><span class=\\"token operator\\">></span><span class=\\"token punctuation\\">,</span> respondWith<span class=\\"token punctuation\\">:</span> <span class=\\"token punctuation\\">(</span><span class=\\"token builtin\\">User</span><span class=\\"token operator\\">?</span><span class=\\"token punctuation\\">,</span> <span class=\\"token builtin\\">RequestError</span><span class=\\"token operator\\">?</span><span class=\\"token punctuation\\">)</span> <span class=\\"token operator\\">-</span><span class=\\"token operator\\">></span> <span class=\\"token builtin\\">Void</span><span class=\\"token punctuation\\">)</span> <span class=\\"token keyword\\">in</span>\\n    <span class=\\"token comment\\">// (Decide whether to permit the user access to this resource, based on the JWT claims)</span>\\n    <span class=\\"token comment\\">// Send the requested resource:</span>\\n    <span class=\\"token keyword\\">let</span> user <span class=\\"token operator\\">=</span> <span class=\\"token function\\">User</span><span class=\\"token punctuation\\">(</span>name<span class=\\"token punctuation\\">:</span> jwt<span class=\\"token punctuation\\">.</span>claims<span class=\\"token punctuation\\">.</span>sub<span class=\\"token punctuation\\">)</span>\\n    <span class=\\"token function\\">respondWith</span><span class=\\"token punctuation\\">(</span>user<span class=\\"token punctuation\\">,</span> <span class=\\"token constant\\">nil</span><span class=\\"token punctuation\\">)</span>\\n<span class=\\"token punctuation\\">}</span></code></pre></div>\\n<p>Notice that, compared to the example in our previous post, there is no longer a requirement to implement the TypeSafeMiddleware protocol yourself. We just need to bootstrap the TypeSafeJWT configuration with a method (and key) for validating incoming JWTs.</p>\\n<p>The TypeSafeJWT type also provides a basic token cache facility, which can remember previously validated JWTs to reduce the computational overhead of verifying the same JWT repeatedly.</p>\\n<hr>\\n<h2 id=\\"using-jwts-alongside-other-authentication-methods\\"><a href=\\"#using-jwts-alongside-other-authentication-methods\\" aria-label=\\"using jwts alongside other authentication methods permalink\\" class=\\"anchor\\"><svg aria-hidden=\\"true\\" focusable=\\"false\\" height=\\"16\\" version=\\"1.1\\" viewBox=\\"0 0 16 16\\" width=\\"16\\"><path fill-rule=\\"evenodd\\" d=\\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\\"></path></svg></a>Using JWTs alongside other authentication methods</h2>\\n<p>In addition, you can use JWT authentication as part of Kitura-Credentials’ <code class=\\"language-text\\">TypeSafeMultiCredentials</code>, which allows a single route handler to accept multiple types of authentication. For example:</p>\\n<div class=\\"gatsby-highlight\\" data-language=\\"swift\\"><pre class=\\"language-swift\\"><code class=\\"language-swift\\"><span class=\\"token keyword\\">import</span> <span class=\\"token builtin\\">Credentials</span>\\n<span class=\\"token keyword\\">import</span> <span class=\\"token builtin\\">CredentialsJWT</span>\\n<span class=\\"token keyword\\">import</span> <span class=\\"token builtin\\">SwiftJWT</span>\\n\\n<span class=\\"token keyword\\">struct</span> <span class=\\"token builtin\\">MyMultiAuthedUser</span><span class=\\"token punctuation\\">:</span> <span class=\\"token builtin\\">TypeSafeMultiCredentials</span> <span class=\\"token punctuation\\">{</span>\\n    <span class=\\"token keyword\\">let</span> id<span class=\\"token punctuation\\">:</span> <span class=\\"token builtin\\">String</span>            <span class=\\"token comment\\">// Protocol requirement</span>\\n    <span class=\\"token keyword\\">let</span> provider<span class=\\"token punctuation\\">:</span> <span class=\\"token builtin\\">String</span>      <span class=\\"token comment\\">// Protocol requirement</span>\\n    <span class=\\"token keyword\\">let</span> name<span class=\\"token punctuation\\">:</span> <span class=\\"token builtin\\">String</span>          <span class=\\"token comment\\">// Custom property</span>\\n\\n    <span class=\\"token comment\\">// Acceptable methods of authentication: Google token, JWT and HTTP Basic</span>\\n    <span class=\\"token keyword\\">static</span> <span class=\\"token keyword\\">var</span> authenticationMethods<span class=\\"token punctuation\\">:</span> <span class=\\"token punctuation\\">[</span><span class=\\"token builtin\\">TypeSafeCredentials</span><span class=\\"token punctuation\\">.</span><span class=\\"token keyword\\">Type</span><span class=\\"token punctuation\\">]</span> <span class=\\"token operator\\">=</span> <span class=\\"token punctuation\\">[</span><span class=\\"token builtin\\">MyGoogleUser</span><span class=\\"token punctuation\\">.</span><span class=\\"token keyword\\">self</span><span class=\\"token punctuation\\">,</span> <span class=\\"token builtin\\">MyBasicAuth</span><span class=\\"token punctuation\\">.</span><span class=\\"token keyword\\">self</span><span class=\\"token punctuation\\">,</span> <span class=\\"token constant\\">JWT</span><span class=\\"token operator\\">&lt;</span><span class=\\"token builtin\\">MyClaims</span><span class=\\"token operator\\">></span><span class=\\"token punctuation\\">.</span><span class=\\"token keyword\\">self</span><span class=\\"token punctuation\\">]</span>\\n\\n    <span class=\\"token keyword\\">init</span><span class=\\"token punctuation\\">(</span>successfulAuth<span class=\\"token punctuation\\">:</span> <span class=\\"token builtin\\">TypeSafeCredentials</span><span class=\\"token punctuation\\">)</span> <span class=\\"token punctuation\\">{</span>\\n        <span class=\\"token keyword\\">self</span><span class=\\"token punctuation\\">.</span>id <span class=\\"token operator\\">=</span> successfulAuth<span class=\\"token punctuation\\">.</span>id\\n        <span class=\\"token keyword\\">self</span><span class=\\"token punctuation\\">.</span>provider <span class=\\"token operator\\">=</span> successfulAuth<span class=\\"token punctuation\\">.</span>provider\\n\\n        <span class=\\"token comment\\">// Initialize additional properties based on authentication type.</span>\\n        <span class=\\"token keyword\\">switch</span> successfulAuth <span class=\\"token punctuation\\">{</span>\\n        <span class=\\"token keyword\\">case</span> <span class=\\"token keyword\\">let</span> googleToken <span class=\\"token keyword\\">as</span> <span class=\\"token builtin\\">GoogleTokenProfile</span><span class=\\"token punctuation\\">:</span>\\n            <span class=\\"token keyword\\">self</span><span class=\\"token punctuation\\">.</span>name <span class=\\"token operator\\">=</span> googleToken<span class=\\"token punctuation\\">.</span>name\\n        <span class=\\"token keyword\\">case</span> <span class=\\"token keyword\\">let</span> jwt <span class=\\"token keyword\\">as</span> <span class=\\"token constant\\">JWT</span><span class=\\"token operator\\">&lt;</span><span class=\\"token builtin\\">MyClaims</span><span class=\\"token operator\\">></span><span class=\\"token punctuation\\">:</span>\\n            <span class=\\"token keyword\\">self</span><span class=\\"token punctuation\\">.</span>name <span class=\\"token operator\\">=</span> jwt<span class=\\"token punctuation\\">.</span>claims<span class=\\"token punctuation\\">.</span>sub\\n        <span class=\\"token keyword\\">default</span><span class=\\"token punctuation\\">:</span>  <span class=\\"token comment\\">// HTTP Basic</span>\\n            <span class=\\"token keyword\\">self</span><span class=\\"token punctuation\\">.</span>name <span class=\\"token operator\\">=</span> successfulAuth<span class=\\"token punctuation\\">.</span>id\\n        <span class=\\"token punctuation\\">}</span>\\n    <span class=\\"token punctuation\\">}</span>\\n<span class=\\"token punctuation\\">}</span></code></pre></div>\\n<p>The <code class=\\"language-text\\">MyMultiAuthedUser</code> type can then be used in place of <code class=\\"language-text\\">JWT</code> in your handler. (Note: the implementation of MyGoogleUser and MyBasicAuth is omitted here for brevity but more details can be found in the Multiple authentication methods section of <a href=\\"/blogs/type-safe-authentication-using-oauth-tokens\\">Type-Safe Authentication using OAuth tokens</a>.</p>\\n<p>For more details, you can check out the code at the <a href=\\"https://github.com/IBM-Swift/Kitura-CredentialsJWT\\">IBM-Swift/Kitura-CredentialsJWT project</a> on GitHub, and the API documentation on <a href=\\"http://kitura.io\\">Kitura.io</a>, and you are welcome to discuss the project by <a href=\\"http://swift-at-ibm-slack.mybluemix.net/?cm_sp=dw-bluemix-_-swift-_-devcenter&#x26;cm_sp=dw-bluemix-_-swift-_-devcenter&#x26;cm_mc_uid=83263075142115698398229&#x26;cm_mc_sid_50200000=53695431570707266328&#x26;_ga=2.114805639.186671014.1570626561-1743126121.1570022962\\">joining our Slack community</a>. As always, feedback and contributions are welcomed!</p>","frontmatter":{"path":"/blogs/jwt-authentication-using-kiturakit","title":"JWT authentication using KituraKit"}}},{"node":{"html":"<p>OpenAPI is the most popular way to document RESTful APIs. It allows developers to define interface specifications in a structured machine readable format. These specifications can be both generated and consumed by tools that help in the building of verifiable interfaces. It can make development faster too!</p>\\n<p>Kitura 2.4 now includes a feature that allows you to view the OpenAPI specification of your Kitura application. Kitura can expose an OpenAPI document that describes the application interfaces that are defined in your application as Codable routes. Change your application, recompile, and the OpenAPI document will reflect those changes!</p>\\n<p>At first this might not seem that exciting, however, integrate it with some extra tooling and this can turn into a powerful development tool.</p>\\n<p>So how do you see this OpenAPI document? First, there are a few steps needed to integrate OpenAPI tooling into your application…</p>\\n<ul>\\n<li>import KituraOpenAPI into your application:</li>\\n</ul>\\n<div class=\\"gatsby-highlight\\" data-language=\\"swift\\"><pre class=\\"language-swift\\"><code class=\\"language-swift\\"><span class=\\"token keyword\\">import</span> <span class=\\"token builtin\\">KituraOpenAPI</span></code></pre></div>\\n<ul>\\n<li>Add a call to add API endpoints from the router into KituraOpenAPI. The call should go in your application startup code – perhaps your init() method:</li>\\n</ul>\\n<div class=\\"gatsby-highlight\\" data-language=\\"swift\\"><pre class=\\"language-swift\\"><code class=\\"language-swift\\"><span class=\\"token keyword\\">public</span> <span class=\\"token keyword\\">init</span><span class=\\"token punctuation\\">(</span><span class=\\"token punctuation\\">)</span> <span class=\\"token keyword\\">throws</span> <span class=\\"token punctuation\\">{</span>\\n    <span class=\\"token builtin\\">KituraOpenAPI</span><span class=\\"token punctuation\\">.</span><span class=\\"token function\\">addEndpoints</span><span class=\\"token punctuation\\">(</span>to<span class=\\"token punctuation\\">:</span> router<span class=\\"token punctuation\\">)</span>\\n<span class=\\"token punctuation\\">}</span></code></pre></div>\\n<ul>\\n<li>Add Kitura-OpenAPI.git as a dependency in your Package.swift:</li>\\n</ul>\\n<div class=\\"gatsby-highlight\\" data-language=\\"swift\\"><pre class=\\"language-swift\\"><code class=\\"language-swift\\"><span class=\\"token punctuation\\">.</span><span class=\\"token function\\">package</span><span class=\\"token punctuation\\">(</span>url<span class=\\"token punctuation\\">:</span> <span class=\\"token string\\">\\"https://github.com/IBM-Swift/Kitura-OpenAPI.git\\"</span><span class=\\"token punctuation\\">,</span> from<span class=\\"token punctuation\\">:</span> <span class=\\"token string\\">\\"1.0.0\\"</span><span class=\\"token punctuation\\">)</span><span class=\\"token punctuation\\">,</span></code></pre></div>\\n<ul>\\n<li>Then update your dependencies by running <code class=\\"language-text\\">swift package update</code>.</li>\\n</ul>\\n<p>Now go ahead, recompile and restart the application and you should be able to view the SwaggerUI page: <a href=\\"http://localhost:8080/openapi/ui\\">http://localhost:8080/openapi/ui</a> as this will present an API Explorer that is populated from the OpenAPI document, so it shows the routes you have configured in the currently running application.</p>\\n<p><span\\n      class=\\"gatsby-resp-image-wrapper\\"\\n      style=\\"position: relative; display: block; margin-left: auto; margin-right: auto;  max-width: 1200px;\\"\\n    >\\n      <a\\n    class=\\"gatsby-resp-image-link\\"\\n    href=\\"/static/32b9df89411884595ab5f1216f911f17/034de/blogopenapi1.png\\"\\n    style=\\"display: block\\"\\n    target=\\"_blank\\"\\n    rel=\\"noopener\\"\\n  >\\n    <span\\n    class=\\"gatsby-resp-image-background-image\\"\\n    style=\\"padding-bottom: 48.45360824742268%; position: relative; bottom: 0; left: 0; background-image: url(\'data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAAKCAYAAAC0VX7mAAAACXBIWXMAABYlAAAWJQFJUiTwAAABXklEQVQoz6WRXUsCQRSG91f0cdEfCLwM+iX9m66CCKqbFMqEuuiq7gQNhLpTsiALIw0rWVHXz/2a/Wh1d/bt7EQhBoI1w8PLOWfemcMZKZlfQ7q6gbPSOuL5JSQKKzjILyJ1E8P10w6uytvIPWwJvZMTuG8eotRMoijv47i4inhhAXuXMexmYuRdhqR0G+j122gpMlzPgM9djAObcOAHniDgox+dJDojzvqRuiKWKpUXVIn3tzp4EOK/Swq5P5UKJ/i9wpCD828CQRAEIg5pS6nsIxrtHjTmwnRGM/CEqqaDoWGT2hjoloj7GiO/Q4/RhZnkOSrlZ/SVLizNgKnqM2GqAaZNQTlLN0WX0slpFrXXOgYDDYZhQdfZ3GjUYeTlnDq8OEpDaXbAKGGoJkwqzg35mLiQOty8zaHWaWHo0SxcC705+fIwDD9s8GiGDU2GQwGzGSwq+nxM+H8i+pRPcEfqtQJLFLAAAAAASUVORK5CYII=\'); background-size: cover; display: block;\\"\\n  ></span>\\n  <img\\n        class=\\"gatsby-resp-image-image\\"\\n        alt=\\"Blog pic 1\\"\\n        title=\\"Blog pic 1\\"\\n        src=\\"/static/32b9df89411884595ab5f1216f911f17/6ff5e/blogopenapi1.png\\"\\n        srcset=\\"/static/32b9df89411884595ab5f1216f911f17/135ae/blogopenapi1.png 300w,\\n/static/32b9df89411884595ab5f1216f911f17/34e8a/blogopenapi1.png 600w,\\n/static/32b9df89411884595ab5f1216f911f17/6ff5e/blogopenapi1.png 1200w,\\n/static/32b9df89411884595ab5f1216f911f17/034de/blogopenapi1.png 1552w\\"\\n        sizes=\\"(max-width: 1200px) 100vw, 1200px\\"\\n        loading=\\"lazy\\"\\n      />\\n  </a>\\n    </span></p>\\n<p>One click on a route will expand it so you can see what arguments it takes, what results it can return and a status code, but better still, you can click the “Try it out!” button to exercise that API immediately:</p>\\n<p><span\\n      class=\\"gatsby-resp-image-wrapper\\"\\n      style=\\"position: relative; display: block; margin-left: auto; margin-right: auto;  max-width: 1200px;\\"\\n    >\\n      <a\\n    class=\\"gatsby-resp-image-link\\"\\n    href=\\"/static/d7c9a2333a740a8fb94f844cf47996ee/08be5/blogopenapi2.png\\"\\n    style=\\"display: block\\"\\n    target=\\"_blank\\"\\n    rel=\\"noopener\\"\\n  >\\n    <span\\n    class=\\"gatsby-resp-image-background-image\\"\\n    style=\\"padding-bottom: 98.55072463768117%; position: relative; bottom: 0; left: 0; background-image: url(\'data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAAUCAYAAACNiR0NAAAACXBIWXMAABYlAAAWJQFJUiTwAAACwklEQVQ4y6WU2W7TQBSG/SZISEhwVfEGPAKP0DfhEagEolW54AJx0YJYBQJVlE1tWorSfUnS7LHj3WM7nvGW/hw7TjckaMRYX87ic2aOJ2dGevhlCs+37+JDdRpPft3GXOkG5tdu4dHqNbzamsbKwWN83Z3B8vZ9rFZmsdd/hh3lKQ7URXyr38Ns6TrmVm9i5v0dPPg8BUnTZcj9FlqdOjRDRjoMkRRkenpyjqFAkvJziNPYuLAlRemjWj1GtVKDadr43yElSYyM8TihZ/Q7kn+OE6o0xXA4RJpmMs3tXD8ZQnpTquP1j0MYVJ3th3AyBn/HcAYw2QC64+d6hmp58IIQ0vrLT/i+8BadZgOBZSOwHQysf2CPCGx2Jskf+gNI78oKXqw10ZANtMwAHZNWY3xi+g6HE0SQVCp346iHn8R200TDENC8GLpPjOUVyHIYTyAx34eidvO2UQ2F9sGlfXQmxvZseJxD4tyCZ2yBmzuI2D5SXkUaVIjq1clzDiGEBSkUDvqddejNEnxtE6k4RhLUJoNnsjKaMKuQ6WW4ahmc7earJeMK+QQER6MJRcgwFA2qrEUrNXOZEfMGoqCOmIgK4kv2mZ9iBzUE3KZ/2XKxd9xGrS2j2u7hsFYnjiHrFqysiT0O0xcFvEDQO3HBr1Mc49Q2iuWjXFPR1j3IpouuztDRaF9tOgkutRDRM1zIFKd7Idkh2R665Mv8ShZHfpXiGI8hGVRFh46N6lBTa1ZekUXHzyRpFPRMWowSNUrsUxPXenq+wFFLoUIY9WFE/mJCIXfhttvgIkLIQ0IUkC7CXEZirBfvROYbx48Q5I8jmnBpcRkfF5bgOgzMcMBMdgH3ku6e853a1ig38AJI8/sbmN9coZvGhSZoP7gPbUKyHDXwwCK6YLusi67dged7cDy6RfgAURohSsIJoM9Psls7xm9zMd+QLGG5aQAAAABJRU5ErkJggg==\'); background-size: cover; display: block;\\"\\n  ></span>\\n  <img\\n        class=\\"gatsby-resp-image-image\\"\\n        alt=\\"Blog pic 2\\"\\n        title=\\"Blog pic 2\\"\\n        src=\\"/static/d7c9a2333a740a8fb94f844cf47996ee/6ff5e/blogopenapi2.png\\"\\n        srcset=\\"/static/d7c9a2333a740a8fb94f844cf47996ee/135ae/blogopenapi2.png 300w,\\n/static/d7c9a2333a740a8fb94f844cf47996ee/34e8a/blogopenapi2.png 600w,\\n/static/d7c9a2333a740a8fb94f844cf47996ee/6ff5e/blogopenapi2.png 1200w,\\n/static/d7c9a2333a740a8fb94f844cf47996ee/08be5/blogopenapi2.png 1518w\\"\\n        sizes=\\"(max-width: 1200px) 100vw, 1200px\\"\\n        loading=\\"lazy\\"\\n      />\\n  </a>\\n    </span></p>\\n<p>Now add a new route to your code (in this example I’m adding the patch route at the end):</p>\\n<p><span\\n      class=\\"gatsby-resp-image-wrapper\\"\\n      style=\\"position: relative; display: block; margin-left: auto; margin-right: auto;  max-width: 1024px;\\"\\n    >\\n      <a\\n    class=\\"gatsby-resp-image-link\\"\\n    href=\\"/static/862a508d0db49b3a87661f1e09a09bb1/3b243/blogopenapi3.png\\"\\n    style=\\"display: block\\"\\n    target=\\"_blank\\"\\n    rel=\\"noopener\\"\\n  >\\n    <span\\n    class=\\"gatsby-resp-image-background-image\\"\\n    style=\\"padding-bottom: 49.12109375000001%; position: relative; bottom: 0; left: 0; background-image: url(\'data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAAKCAYAAAC0VX7mAAAACXBIWXMAAAsSAAALEgHS3X78AAABZUlEQVQoz6WSW0sCQRiG979FCOFtd/6Ruus/BJUhgUIHqqugQgK7EDOKCsk8Yixm7WmcdfYw7sF9m9S2ukiSBh6+Obzzzvcxn5QuJpArp5BvreDgIYXt0iIyV0tIlxZwcr+KYjWLQmVrzE1nF5XeESovx7iVs9gpJ4U+gfXTZWwUkshcJyDZDkO98YRGs452u4kg9BGOvhhFQcznXjD6qQlCL55LgR/AUFUoigKTmvjXiADJC0J0qYOPKNbi9ehXwiga69yhB+75cXQ4hx+K++Jc0jSKXPYcrdYzCBmAUmsm/T4TDL7BQAwTjsPHSUq6MNzLnaH6WIOuEVE2AxXCWZjCJGaqjw1tauDu7BByowZbV8H7BjjRRfwrBlyiwbetiaGpGLjY3MdrR4ZNKCy9D8uYD6YTDC1nYthlJtYu82i99UCGLlTHmhvFZmDDack84JBNkR23wURPup4LX/TTvISjyS+/A5dl7I88v0qyAAAAAElFTkSuQmCC\'); background-size: cover; display: block;\\"\\n  ></span>\\n  <img\\n        class=\\"gatsby-resp-image-image\\"\\n        alt=\\"Blog pic 3\\"\\n        title=\\"Blog pic 3\\"\\n        src=\\"/static/862a508d0db49b3a87661f1e09a09bb1/3b243/blogopenapi3.png\\"\\n        srcset=\\"/static/862a508d0db49b3a87661f1e09a09bb1/135ae/blogopenapi3.png 300w,\\n/static/862a508d0db49b3a87661f1e09a09bb1/34e8a/blogopenapi3.png 600w,\\n/static/862a508d0db49b3a87661f1e09a09bb1/3b243/blogopenapi3.png 1024w\\"\\n        sizes=\\"(max-width: 1024px) 100vw, 1024px\\"\\n        loading=\\"lazy\\"\\n      />\\n  </a>\\n    </span></p>\\n<p>You add a new API or add business logic? All you need do is recompile, run the application, visit SwaggerUI, and test your API immediately.</p>\\n<p>So there you have it. A rapid development lifecycle that allows a quick deploy/test cycle for your APIs.</p>","frontmatter":{"path":"/blogs/kitura-openapi","title":"End-to-end Kitura testing with OpenAPI"}}},{"node":{"html":"<p>Codable routing allows you to quickly build REST APIs that work directly with concrete Swift types. Kitura achieves this by using the <a href=\\"https://developer.apple.com/documentation/swift/codable\\">Codable</a> protocol to encode and decode the body of HTTP requests. In Kitura 2.5, we have added the ability to customize the <a href=\\"https://www.json.org/\\">JSON</a> encoders and decoders used by your router. Furthermore, you can add your own custom encoders and decoders. This allows your routes to handle other data serializations if you want, such as <a href=\\"http://yaml.org/\\">YAML</a>, <a href=\\"https://www.w3.org/standards/xml/core\\">XML</a> and <a href=\\"https://msgpack.org/\\">MessagePack</a>.</p>\\n<h2 id=\\"bodyencoder-and-bodydecoder\\"><a href=\\"#bodyencoder-and-bodydecoder\\" aria-label=\\"bodyencoder and bodydecoder permalink\\" class=\\"anchor\\"><svg aria-hidden=\\"true\\" focusable=\\"false\\" height=\\"16\\" version=\\"1.1\\" viewBox=\\"0 0 16 16\\" width=\\"16\\"><path fill-rule=\\"evenodd\\" d=\\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\\"></path></svg></a>BodyEncoder and BodyDecoder</h2>\\n<p>We’ve added two new protocols called BodyEncoder and BodyDecoder that encapsulate the ability to change Codable types to and from Data.</p>\\n<p>A class that conforms to BodyEncoder must be able to encode an Encodable type into Data:</p>\\n<div class=\\"gatsby-highlight\\" data-language=\\"swift\\"><pre class=\\"language-swift\\"><code class=\\"language-swift\\"><span class=\\"token keyword\\">public</span> <span class=\\"token keyword\\">protocol</span> <span class=\\"token builtin\\">BodyEncoder</span><span class=\\"token punctuation\\">:</span> <span class=\\"token builtin\\">AnyObject</span> <span class=\\"token punctuation\\">{</span>\\n    <span class=\\"token keyword\\">func</span> encode<span class=\\"token operator\\">&lt;</span>T <span class=\\"token punctuation\\">:</span> <span class=\\"token builtin\\">Encodable</span><span class=\\"token operator\\">></span><span class=\\"token punctuation\\">(</span><span class=\\"token number\\">_</span> value<span class=\\"token punctuation\\">:</span> T<span class=\\"token punctuation\\">)</span> <span class=\\"token keyword\\">throws</span> <span class=\\"token operator\\">-</span><span class=\\"token operator\\">></span> <span class=\\"token builtin\\">Data</span>\\n<span class=\\"token punctuation\\">}</span></code></pre></div>\\n<p>A class that conforms to BodyDecoder must be able to decode data into a Decodable type:</p>\\n<div class=\\"gatsby-highlight\\" data-language=\\"swift\\"><pre class=\\"language-swift\\"><code class=\\"language-swift\\"><span class=\\"token keyword\\">public</span> <span class=\\"token keyword\\">protocol</span> <span class=\\"token builtin\\">BodyDecoder</span><span class=\\"token punctuation\\">:</span> <span class=\\"token builtin\\">AnyObject</span> <span class=\\"token punctuation\\">{</span>\\n    <span class=\\"token keyword\\">func</span> decode<span class=\\"token operator\\">&lt;</span>T <span class=\\"token punctuation\\">:</span> <span class=\\"token builtin\\">Decodable</span><span class=\\"token operator\\">></span><span class=\\"token punctuation\\">(</span><span class=\\"token number\\">_</span> type<span class=\\"token punctuation\\">:</span> T<span class=\\"token punctuation\\">.</span><span class=\\"token keyword\\">Type</span><span class=\\"token punctuation\\">,</span> from data<span class=\\"token punctuation\\">:</span> <span class=\\"token builtin\\">Data</span><span class=\\"token punctuation\\">)</span> <span class=\\"token keyword\\">throws</span> <span class=\\"token operator\\">-</span><span class=\\"token operator\\">></span> T\\n<span class=\\"token punctuation\\">}</span></code></pre></div>\\n<p>Kitura extends JSONEncoder/JSONDecoder as well as QueryEncoder/QueryDecoder to conform to BodyEncoder/BodyDecoder. As a result, these coders are usable out of the box. Other encoders/decoders can be made to conform to this protocol so that the Kitura router can use them.</p>\\n<hr>\\n<h2 id=\\"mediatype\\"><a href=\\"#mediatype\\" aria-label=\\"mediatype permalink\\" class=\\"anchor\\"><svg aria-hidden=\\"true\\" focusable=\\"false\\" height=\\"16\\" version=\\"1.1\\" viewBox=\\"0 0 16 16\\" width=\\"16\\"><path fill-rule=\\"evenodd\\" d=\\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\\"></path></svg></a>MediaType</h2>\\n<p>The media type (formerly known as MIME type) is a two-part identifier that is separated by a forwards slash (e.g. “text/plain”). We have added a <code class=\\"language-text\\">MediaType</code> struct to Kitura that represents media type. This is used for selecting an encoder or decoder based on the media type identified in the Accepts or Content-Type HTTP headers. You can initialize a MediaType in three ways:</p>\\n<ul>\\n<li>\\n<p>From a raw media type string</p>\\n<div class=\\"gatsby-highlight\\" data-language=\\"swift\\"><pre class=\\"language-swift\\"><code class=\\"language-swift\\"><span class=\\"token keyword\\">let</span> json <span class=\\"token operator\\">=</span> <span class=\\"token function\\">MediaType</span><span class=\\"token punctuation\\">(</span><span class=\\"token string\\">\\"application/json\\"</span><span class=\\"token punctuation\\">)</span></code></pre></div>\\n</li>\\n<li>\\n<p>By providing the type and sub type</p>\\n<div class=\\"gatsby-highlight\\" data-language=\\"swift\\"><pre class=\\"language-swift\\"><code class=\\"language-swift\\"><span class=\\"token keyword\\">let</span> json <span class=\\"token operator\\">=</span> <span class=\\"token function\\">MediaType</span><span class=\\"token punctuation\\">(</span>type<span class=\\"token punctuation\\">:</span> <span class=\\"token punctuation\\">.</span>application<span class=\\"token punctuation\\">,</span> subtype<span class=\\"token punctuation\\">:</span> <span class=\\"token string\\">\\"json\\"</span><span class=\\"token punctuation\\">)</span></code></pre></div>\\n</li>\\n<li>\\n<p>Using a static helper initializer for certain popular media types</p>\\n<div class=\\"gatsby-highlight\\" data-language=\\"swift\\"><pre class=\\"language-swift\\"><code class=\\"language-swift\\"><span class=\\"token keyword\\">let</span> json <span class=\\"token operator\\">=</span> <span class=\\"token builtin\\">MediaType</span><span class=\\"token punctuation\\">.</span>json</code></pre></div>\\n</li>\\n</ul>\\n<hr>\\n<h2 id=\\"custom-encoders-and-decoders-on-the-router\\"><a href=\\"#custom-encoders-and-decoders-on-the-router\\" aria-label=\\"custom encoders and decoders on the router permalink\\" class=\\"anchor\\"><svg aria-hidden=\\"true\\" focusable=\\"false\\" height=\\"16\\" version=\\"1.1\\" viewBox=\\"0 0 16 16\\" width=\\"16\\"><path fill-rule=\\"evenodd\\" d=\\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\\"></path></svg></a>Custom Encoders and Decoders on the Router</h2>\\n<p>From Kitura 2.5, the Router class has two extra properties: dictionaries called <code class=\\"language-text\\">encoders</code> and <code class=\\"language-text\\">decoders</code>.</p>\\n<p>The encoders dictionary maps MediaType keys to closures for generating a <code class=\\"language-text\\">BodyEncoder</code>. On initialization, the dictionary includes a <code class=\\"language-text\\">JSONEncoder()</code> generator for “application/json”.</p>\\n<div class=\\"gatsby-highlight\\" data-language=\\"swift\\"><pre class=\\"language-swift\\"><code class=\\"language-swift\\"><span class=\\"token keyword\\">public</span> <span class=\\"token keyword\\">var</span> encoders<span class=\\"token punctuation\\">:</span> <span class=\\"token punctuation\\">[</span><span class=\\"token builtin\\">MediaType</span><span class=\\"token punctuation\\">:</span> <span class=\\"token punctuation\\">(</span><span class=\\"token punctuation\\">)</span> <span class=\\"token operator\\">-</span><span class=\\"token operator\\">></span> <span class=\\"token builtin\\">BodyEncoder</span><span class=\\"token punctuation\\">]</span> <span class=\\"token operator\\">=</span> <span class=\\"token punctuation\\">[</span><span class=\\"token punctuation\\">.</span>json<span class=\\"token punctuation\\">:</span> <span class=\\"token punctuation\\">{</span> <span class=\\"token keyword\\">return</span> <span class=\\"token function\\">JSONEncoder</span><span class=\\"token punctuation\\">(</span><span class=\\"token punctuation\\">)</span> <span class=\\"token punctuation\\">}</span><span class=\\"token punctuation\\">]</span></code></pre></div>\\n<p>You can send a Codable object from a route either by calling <code class=\\"language-text\\">send(_ obj: T)</code> from a <code class=\\"language-text\\">RouterResponse</code> or by using a Codable route. When this happens the Router will select the correct encoder based on the Accepts header of the Request. If the request doesn’t have an <a href=\\"https://developer.mozilla.org/en-US/docs/Web/HTTP/Headers/Accept\\">Accepts</a> header or it doesn’t include any <code class=\\"language-text\\">MediaTypes</code> from your dictionary, the router’s <code class=\\"language-text\\">defaultResponseMediaType</code> will determine the encoder.</p>\\n<div class=\\"gatsby-highlight\\" data-language=\\"swift\\"><pre class=\\"language-swift\\"><code class=\\"language-swift\\"><span class=\\"token keyword\\">public</span> <span class=\\"token keyword\\">var</span> defaultResponseMediaType<span class=\\"token punctuation\\">:</span> <span class=\\"token builtin\\">MediaType</span> <span class=\\"token operator\\">=</span> <span class=\\"token punctuation\\">.</span>json</code></pre></div>\\n<p>The <code class=\\"language-text\\">decoders</code> dictionary maps <code class=\\"language-text\\">MediaType</code> keys to closures for generating a <code class=\\"language-text\\">BodyDecoder</code>. On initialization, the dictionary includes a <code class=\\"language-text\\">JSONDecoder()</code> generator for “application/json” and a QueryDecoder() generator for “application/x-www-form-urlencoded”.</p>\\n<div class=\\"gatsby-highlight\\" data-language=\\"swift\\"><pre class=\\"language-swift\\"><code class=\\"language-swift\\"><span class=\\"token keyword\\">public</span> <span class=\\"token keyword\\">var</span> decoders<span class=\\"token punctuation\\">:</span> <span class=\\"token punctuation\\">[</span><span class=\\"token builtin\\">MediaType</span><span class=\\"token punctuation\\">:</span> <span class=\\"token punctuation\\">(</span><span class=\\"token punctuation\\">)</span> <span class=\\"token operator\\">-</span><span class=\\"token operator\\">></span> <span class=\\"token builtin\\">BodyDecoder</span><span class=\\"token punctuation\\">]</span> <span class=\\"token operator\\">=</span> <span class=\\"token punctuation\\">[</span><span class=\\"token punctuation\\">.</span>json<span class=\\"token punctuation\\">:</span> <span class=\\"token punctuation\\">{</span><span class=\\"token keyword\\">return</span> <span class=\\"token function\\">JSONDecoder</span><span class=\\"token punctuation\\">(</span><span class=\\"token punctuation\\">)</span><span class=\\"token punctuation\\">}</span><span class=\\"token punctuation\\">,</span> <span class=\\"token punctuation\\">.</span>urlEncoded<span class=\\"token punctuation\\">:</span> <span class=\\"token punctuation\\">{</span><span class=\\"token keyword\\">return</span> <span class=\\"token function\\">QueryDecoder</span><span class=\\"token punctuation\\">(</span><span class=\\"token punctuation\\">)</span><span class=\\"token punctuation\\">}</span><span class=\\"token punctuation\\">]</span></code></pre></div>\\n<p>You can read a Codable object in a route either by calling <code class=\\"language-text\\">read(as type: T.Type)</code> from a <code class=\\"language-text\\">RouterRequest</code> or by using a Codable route. When this happens the Router will select the correct decoder based on the <a href=\\"https://developer.mozilla.org/en-US/docs/Web/HTTP/Headers/Content-Type\\">Content-Type</a> header of the request.</p>\\n<p>You can add custom encoders and decoders to your router by adding BodyEncoders/BodyDecoders to these dictionary with the MediaType you would like them to encode/decode. You can also replace the existing JSONEncoder and JSONDecoder generators to customize how your Kitura router handles JSON.</p>\\n<hr>\\n<h2 id=\\"adding-other-data-serializations\\"><a href=\\"#adding-other-data-serializations\\" aria-label=\\"adding other data serializations permalink\\" class=\\"anchor\\"><svg aria-hidden=\\"true\\" focusable=\\"false\\" height=\\"16\\" version=\\"1.1\\" viewBox=\\"0 0 16 16\\" width=\\"16\\"><path fill-rule=\\"evenodd\\" d=\\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\\"></path></svg></a>Adding other data serializations</h2>\\n<p>The following data serialization formats already have existing Swift packages which implement them using Codable:</p>\\n<ul>\\n<li><a href=\\"https://github.com/jpsim/Yams\\">YAML</a></li>\\n<li><a href=\\"https://github.com/ShawnMoore/XMLParsing\\">XML</a></li>\\n<li><a href=\\"https://github.com/OpenKitten/BSON\\">BSON</a></li>\\n<li><a href=\\"https://useyourloaf.com/blog/using-swift-codable-with-property-lists/\\">Property Lists</a></li>\\n<li><a href=\\"https://github.com/Flight-School/MessagePack\\">MessagePack</a></li>\\n</ul>\\n<p>To use one of these custom encoders and decoders:</p>\\n<ol>\\n<li>Follow the corresponding link above.</li>\\n<li>Import the repository to your Kitura project.</li>\\n<li>Extend their Encoder/Decoder Class to conform to BodyEncoder/Decoder.</li>\\n<li>Add the encoder/decoder and its MediaType to your encoder and decoder dictionary</li>\\n</ol>\\n<hr>\\n<h2 id=\\"example-customizing-the-json-encoder\\"><a href=\\"#example-customizing-the-json-encoder\\" aria-label=\\"example customizing the json encoder permalink\\" class=\\"anchor\\"><svg aria-hidden=\\"true\\" focusable=\\"false\\" height=\\"16\\" version=\\"1.1\\" viewBox=\\"0 0 16 16\\" width=\\"16\\"><path fill-rule=\\"evenodd\\" d=\\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\\"></path></svg></a>Example: Customizing the JSON encoder</h2>\\n<p>JSON is the most common data serialization technique and Kitura uses it by default for its Codable routes. The JSONEncoder class includes options to customize its encoding strategy. In this example we will show you how to set your Kitura router to send pretty printed JSON from a Codable route.</p>\\n<ol>\\n<li>In the terminal, using the <a href=\\"/docs/getting-started/create-server-cli\\">Kitura command-line interface</a>, generate a basic Kitura server:</li>\\n</ol>\\n<div class=\\"gatsby-highlight\\" data-language=\\"text\\"><pre class=\\"language-text\\"><code class=\\"language-text\\">mkdir ~/customCoders\\ncd ~/customCoders\\nkitura init\\nopen customCoders.xcodeproj/</code></pre></div>\\n<ol start=\\"2\\">\\n<li>Open Sources > Application > Application.swift</li>\\n<li>Add a <code class=\\"language-text\\">Hello</code> struct after the App class:</li>\\n</ol>\\n<div class=\\"gatsby-highlight\\" data-language=\\"swift\\"><pre class=\\"language-swift\\"><code class=\\"language-swift\\"><span class=\\"token keyword\\">struct</span> <span class=\\"token builtin\\">Hello</span><span class=\\"token punctuation\\">:</span> <span class=\\"token builtin\\">Codable</span> <span class=\\"token punctuation\\">{</span>\\n    <span class=\\"token keyword\\">let</span> hello<span class=\\"token punctuation\\">:</span> <span class=\\"token builtin\\">String</span>\\n    <span class=\\"token keyword\\">let</span> from<span class=\\"token punctuation\\">:</span> <span class=\\"token builtin\\">String</span>\\n<span class=\\"token punctuation\\">}</span></code></pre></div>\\n<ol start=\\"4\\">\\n<li>Construct a Codable route:</li>\\n</ol>\\n<div class=\\"gatsby-highlight\\" data-language=\\"swift\\"><pre class=\\"language-swift\\"><code class=\\"language-swift\\">router<span class=\\"token punctuation\\">.</span><span class=\\"token keyword\\">get</span><span class=\\"token punctuation\\">(</span><span class=\\"token string\\">\\"/hello\\"</span><span class=\\"token punctuation\\">)</span> <span class=\\"token punctuation\\">{</span> <span class=\\"token punctuation\\">(</span>respondWith<span class=\\"token punctuation\\">:</span> <span class=\\"token punctuation\\">(</span><span class=\\"token builtin\\">Hello</span><span class=\\"token operator\\">?</span><span class=\\"token punctuation\\">,</span> <span class=\\"token builtin\\">RequestError</span><span class=\\"token operator\\">?</span><span class=\\"token punctuation\\">)</span> <span class=\\"token operator\\">-</span><span class=\\"token operator\\">></span> <span class=\\"token builtin\\">Void</span><span class=\\"token punctuation\\">)</span> <span class=\\"token keyword\\">in</span>\\n    <span class=\\"token keyword\\">let</span> hello <span class=\\"token operator\\">=</span> <span class=\\"token function\\">Hello</span><span class=\\"token punctuation\\">(</span>hello<span class=\\"token punctuation\\">:</span> <span class=\\"token string\\">\\"world\\"</span><span class=\\"token punctuation\\">,</span> from<span class=\\"token punctuation\\">:</span> <span class=\\"token string\\">\\"Kitura\\"</span><span class=\\"token punctuation\\">)</span>\\n    <span class=\\"token function\\">respondWith</span><span class=\\"token punctuation\\">(</span>hello<span class=\\"token punctuation\\">,</span> <span class=\\"token constant\\">nil</span><span class=\\"token punctuation\\">)</span>\\n<span class=\\"token punctuation\\">}</span></code></pre></div>\\n<ol start=\\"5\\">\\n<li>In the top left corner of Xcode you should see a small toolbox icon with the text “customCoders-Package” next to it. Click this icon and then click “customCoders” from the dropdown menu.</li>\\n<li>Go to <a href=\\"http://localhost:8080/hello\\">http://localhost:8080/hello</a></li>\\n</ol>\\n<p>You will see the hello message printed as standard JSON.</p>\\n<ol start=\\"7\\">\\n<li>After <code class=\\"language-text\\">initializeMetrics(router: router)</code> create your custom JSONEncoder() generator:</li>\\n</ol>\\n<div class=\\"gatsby-highlight\\" data-language=\\"swift\\"><pre class=\\"language-swift\\"><code class=\\"language-swift\\"><span class=\\"token keyword\\">let</span> jsonEncoderGenerator<span class=\\"token punctuation\\">:</span> <span class=\\"token punctuation\\">(</span><span class=\\"token punctuation\\">)</span> <span class=\\"token operator\\">-</span><span class=\\"token operator\\">></span> <span class=\\"token builtin\\">BodyEncoder</span> <span class=\\"token operator\\">=</span> <span class=\\"token punctuation\\">{</span>\\n    <span class=\\"token keyword\\">let</span> encoder <span class=\\"token operator\\">=</span> <span class=\\"token function\\">JSONEncoder</span><span class=\\"token punctuation\\">(</span><span class=\\"token punctuation\\">)</span>\\n    encoder<span class=\\"token punctuation\\">.</span>outputFormatting <span class=\\"token operator\\">=</span> <span class=\\"token punctuation\\">.</span>prettyPrinted\\n    <span class=\\"token keyword\\">return</span> encoder\\n<span class=\\"token punctuation\\">}</span></code></pre></div>\\n<ol start=\\"8\\">\\n<li>replace the router’s JSONEncoder with your new one:</li>\\n</ol>\\n<div class=\\"gatsby-highlight\\" data-language=\\"swift\\"><pre class=\\"language-swift\\"><code class=\\"language-swift\\">router<span class=\\"token punctuation\\">.</span>encoders<span class=\\"token punctuation\\">[</span><span class=\\"token punctuation\\">.</span>json<span class=\\"token punctuation\\">]</span> <span class=\\"token operator\\">=</span> jsonEncoderGenerator</code></pre></div>\\n<ol start=\\"9\\">\\n<li>Restart your project and go to <a href=\\"http://localhost:8080/hello\\">http://localhost:8080/hello</a></li>\\n</ol>\\n<p>The hello message will now be pretty printed JSON.</p>\\n<p>Congratulations! You have just created a custom JSON encoder generator and assigned it to a Kitura Server.</p>\\n<p>Any questions or comments? Please join the vibrant Kitura community on <a href=\\"http://swift-at-ibm-slack.mybluemix.net/?cm_sp=dw-bluemix-_-swift-_-devcenter&#x26;_ga=2.15514933.2052919715.1571393501-1533615335.1571393501\\">Slack</a>!</p>","frontmatter":{"path":"/blogs/kitura-custom-encoders-and-decoders","title":"Pluggable JSON encoders in Kitura 2.5"}}},{"node":{"html":"<p>We have rewritten the <a href=\\"https://github.com/IBM-Swift/Kitura-Sample\\">Kitura Sample</a> demo application to better showcase the capabilities of Kitura. This update adds interactive webpages so you can try out the features live. You can also easily view the code for each feature by clicking on the embedded links.</p>\\n<p>Furthermore, we have added new demos for popular features such as databases, sessions and authentication. Altogether, these changes produce an example app which is a great resource for learning to develop using <a href=\\"https://www.kitura.io/\\">Kitura</a>.</p>\\n<p><span\\n      class=\\"gatsby-resp-image-wrapper\\"\\n      style=\\"position: relative; display: block; margin-left: auto; margin-right: auto;  max-width: 1024px;\\"\\n    >\\n      <a\\n    class=\\"gatsby-resp-image-link\\"\\n    href=\\"/static/a45fe82d8898339ac3190738e8447471/3b243/blogsample1.png\\"\\n    style=\\"display: block\\"\\n    target=\\"_blank\\"\\n    rel=\\"noopener\\"\\n  >\\n    <span\\n    class=\\"gatsby-resp-image-background-image\\"\\n    style=\\"padding-bottom: 58.30078125%; position: relative; bottom: 0; left: 0; background-image: url(\'data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAAMCAYAAABiDJ37AAAACXBIWXMAAAsSAAALEgHS3X78AAABe0lEQVQoz52T6W6DMBCEef93i6KcpDkgB8QEgg8Om0ippt5NaZU2rdL++OSVWYaZtQmEECjyAkoqj4RWCrZt4axj2qbhZ63fa5uWV6MNZCm5n57leY4sy5AmCYKmsbhcLrheX+HcBVXdoCwVI6X2qwb1WNfB2hvOddzbU/t3jKn9xxwCVflm78S2FkoZ7PdHDIcTjMdzTCYhBoMRFosVNpsd1uuY2Wy2H3UU7XA4HBkhcgSlaaErH8WLal3jmJ4wny8xm714obWPUiBNM26m+iun0xlFIZnzWd0EpceyYMUvr1YRttsD4njPUE3Rlar8GAzXj7gTbHx+Qw6PJx874fjUkOclQ27IJdW0/xOBNBamtjxocihEgek0xGg045UIwyV/qBfs3TwUpEPpD4YcJknGQ09TwU5p6Eki7qL+6pDEKHLtr0ZVNSwQRTFfB7oKz4jcR34X1LW9m9vt5NTTQp8Oa8diruv4FGnzL46+CRay4mh02+nP+K9Qzxu1sYbJj8OpswAAAABJRU5ErkJggg==\'); background-size: cover; display: block;\\"\\n  ></span>\\n  <img\\n        class=\\"gatsby-resp-image-image\\"\\n        alt=\\"Blog pic 1\\"\\n        title=\\"Blog pic 1\\"\\n        src=\\"/static/a45fe82d8898339ac3190738e8447471/3b243/blogsample1.png\\"\\n        srcset=\\"/static/a45fe82d8898339ac3190738e8447471/135ae/blogsample1.png 300w,\\n/static/a45fe82d8898339ac3190738e8447471/34e8a/blogsample1.png 600w,\\n/static/a45fe82d8898339ac3190738e8447471/3b243/blogsample1.png 1024w\\"\\n        sizes=\\"(max-width: 1024px) 100vw, 1024px\\"\\n        loading=\\"lazy\\"\\n      />\\n  </a>\\n    </span></p>\\n<blockquote>\\n<p>Kitura Sample demonstration of rendering dynamic webpages using Stencil</p>\\n</blockquote>\\n<h2 id=\\"swift-server-example\\"><a href=\\"#swift-server-example\\" aria-label=\\"swift server example permalink\\" class=\\"anchor\\"><svg aria-hidden=\\"true\\" focusable=\\"false\\" height=\\"16\\" version=\\"1.1\\" viewBox=\\"0 0 16 16\\" width=\\"16\\"><path fill-rule=\\"evenodd\\" d=\\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\\"></path></svg></a>Swift Server example</h2>\\n<p>Our sample server shows off the following features available in Kitura:</p>\\n<ul>\\n<li>Hello World example with Raw routing</li>\\n<li>Building REST APIs with Codable routing</li>\\n<li>Persisting objects to a session store using <a href=\\"https://github.com/IBM-Swift/Kitura-Session\\">Kitura-Session</a></li>\\n<li>Rendering HTML web pages from <a href=\\"https://github.com/IBM-Swift/Kitura-Markdown\\">Markdown</a> and <a href=\\"https://github.com/IBM-Swift/Kitura-StencilTemplateEngine\\">Stencil templates</a></li>\\n<li>HTTP Basic authentication with <a href=\\"https://github.com/IBM-Swift/Kitura-Credentials\\">Kitura-Credentials</a></li>\\n<li>OAuth2 authentication with <a href=\\"https://github.com/ibm-cloud-security/appid-serversdk-swift\\">AppID</a>, <a href=\\"https://github.com/IBM-Swift/Kitura-CredentialsFacebook\\">Facebook</a> and <a href=\\"https://github.com/IBM-Swift/Kitura-CredentialsGoogle\\">Google</a></li>\\n</ul>\\n<hr>\\n<h2 id=\\"running-kitura-sample\\"><a href=\\"#running-kitura-sample\\" aria-label=\\"running kitura sample permalink\\" class=\\"anchor\\"><svg aria-hidden=\\"true\\" focusable=\\"false\\" height=\\"16\\" version=\\"1.1\\" viewBox=\\"0 0 16 16\\" width=\\"16\\"><path fill-rule=\\"evenodd\\" d=\\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\\"></path></svg></a>Running Kitura Sample</h2>\\n<p>To start the Swift server example locally, follow the steps below:</p>\\n<ol>\\n<li>Open your terminal window</li>\\n<li>\\n<p>Clone the Kitura Sample project:</p>\\n<div class=\\"gatsby-highlight\\" data-language=\\"text\\"><pre class=\\"language-text\\"><code class=\\"language-text\\">git clone https://github.com/IBM-Swift/Kitura-Sample.git</code></pre></div>\\n</li>\\n<li>\\n<p>Move into the Kitura-Sample directory:</p>\\n<div class=\\"gatsby-highlight\\" data-language=\\"text\\"><pre class=\\"language-text\\"><code class=\\"language-text\\">cd Kitura-Sample</code></pre></div>\\n</li>\\n<li>\\n<p>Run the example server and wait while the code compiles:</p>\\n<div class=\\"gatsby-highlight\\" data-language=\\"text\\"><pre class=\\"language-text\\"><code class=\\"language-text\\">swift run</code></pre></div>\\n</li>\\n<li>Open your browser at <a href=\\"http://localhost:8080\\">http://localhost:8080</a>.</li>\\n</ol>\\n<p>You should see the Kitura-Sample website being run by the server.</p>\\n<p><span\\n      class=\\"gatsby-resp-image-wrapper\\"\\n      style=\\"position: relative; display: block; margin-left: auto; margin-right: auto;  max-width: 1200px;\\"\\n    >\\n      <a\\n    class=\\"gatsby-resp-image-link\\"\\n    href=\\"/static/9c6963d936b443ca90bf3f826c1c85f3/1667d/blogsample2.png\\"\\n    style=\\"display: block\\"\\n    target=\\"_blank\\"\\n    rel=\\"noopener\\"\\n  >\\n    <span\\n    class=\\"gatsby-resp-image-background-image\\"\\n    style=\\"padding-bottom: 60.520607375271155%; position: relative; bottom: 0; left: 0; background-image: url(\'data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAAMCAYAAABiDJ37AAAACXBIWXMAABYlAAAWJQFJUiTwAAABiUlEQVQoz32T227bMBBE9f+flgJ5StEEjuvY0V0ULyK5coIU09116TZC3IfB8rI6miGlqmsO6PseZjJw1qmC9yAiUM4qz3MRZUJOGSkmeHfplWpni77rlVNlekOMGefzGz4+fmFdL3PnF6REvP5+1bqedb+I6KxK/CJrPT+XUBm7wC3EDSsybzi3YL9/wbe7e3x/eMRu9xNPT3utsr7bHfD8/ILTqUXXTZgmx7Iwxum4sj5iDlmhmVaOtuC1nfBj3+JwbPB6anA81mjbAeM4c6xJJWOBzLP/pMr5BMswH0kjORswGY+6HdF24xUgEqhAJEUBbKHsMLG7VR2mzNUF3nAMGBjQYxiMwkoVZyViAf4L1cjiMKT14pCB8kBdy62NqqbpVeKwjAV8w2FUdyLiM7QcWZrG0SCEyGcadW2rr2CfgJYvJiZSh9IoLuq6uzoqc5HE/yru38iB/tx0vr79EnfQ+OXcpJbxf4FzIIXKpZTI2yhb3eqpZv4EDN/0ErP+WltgcbHVLYe/AVNWivjR3/StAAAAAElFTkSuQmCC\'); background-size: cover; display: block;\\"\\n  ></span>\\n  <img\\n        class=\\"gatsby-resp-image-image\\"\\n        alt=\\"Blog pic 2\\"\\n        title=\\"Blog pic 2\\"\\n        src=\\"/static/9c6963d936b443ca90bf3f826c1c85f3/6ff5e/blogsample2.png\\"\\n        srcset=\\"/static/9c6963d936b443ca90bf3f826c1c85f3/135ae/blogsample2.png 300w,\\n/static/9c6963d936b443ca90bf3f826c1c85f3/34e8a/blogsample2.png 600w,\\n/static/9c6963d936b443ca90bf3f826c1c85f3/6ff5e/blogsample2.png 1200w,\\n/static/9c6963d936b443ca90bf3f826c1c85f3/79a4a/blogsample2.png 1800w,\\n/static/9c6963d936b443ca90bf3f826c1c85f3/2fb56/blogsample2.png 2400w,\\n/static/9c6963d936b443ca90bf3f826c1c85f3/1667d/blogsample2.png 2766w\\"\\n        sizes=\\"(max-width: 1200px) 100vw, 1200px\\"\\n        loading=\\"lazy\\"\\n      />\\n  </a>\\n    </span></p>\\n<blockquote>\\n<p>The landing page for Kitura-Sample displaying a Hello World example</p>\\n</blockquote>\\n<hr>\\n<h2 id=\\"interacting-with-the-app\\"><a href=\\"#interacting-with-the-app\\" aria-label=\\"interacting with the app permalink\\" class=\\"anchor\\"><svg aria-hidden=\\"true\\" focusable=\\"false\\" height=\\"16\\" version=\\"1.1\\" viewBox=\\"0 0 16 16\\" width=\\"16\\"><path fill-rule=\\"evenodd\\" d=\\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\\"></path></svg></a>Interacting with the app</h2>\\n<p>You can access all the Kitura-Sample demos via the menu on the left hand side. The inner page will provide you with a demonstration description, any further set-up required, and the method of interacting with the server. We then encourage you to view the relevant code on Github or within your local Kitura-Sample project. This sample also includes example tests for the routes and has used <a href=\\"https://github.com/IBM-Swift/Kitura-OpenAPI\\">Kitura-OpenAPI</a> to auto-generate an OpenAPI (AKA Swagger) file as well as an OpenAPI user interface.</p>\\n<p><span\\n      class=\\"gatsby-resp-image-wrapper\\"\\n      style=\\"position: relative; display: block; margin-left: auto; margin-right: auto;  max-width: 1024px;\\"\\n    >\\n      <a\\n    class=\\"gatsby-resp-image-link\\"\\n    href=\\"/static/e0ad2706ace1418cb4c6e880fc0c9280/3b243/blogsample3.png\\"\\n    style=\\"display: block\\"\\n    target=\\"_blank\\"\\n    rel=\\"noopener\\"\\n  >\\n    <span\\n    class=\\"gatsby-resp-image-background-image\\"\\n    style=\\"padding-bottom: 57.421875%; position: relative; bottom: 0; left: 0; background-image: url(\'data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAALCAYAAAB/Ca1DAAAACXBIWXMAAAsSAAALEgHS3X78AAABUUlEQVQoz53SS2/UMBSG4fz/P8MCiUXVIoFAIDYIRDdt50Kmk0ycm+M4zcSXvBym2TNh8egklvPF9nFyq0Zu0pp3O8WbjeLtvuK+tuz0wLYTl/qyWMaW970ZeWgt77cZN4eaWzWQMHtetEY9P9PmGZNuIXiim5j/4TLHO5gjRC/fORLnA11vqRrN5Dw+RqkOJ8/XmC7cwpPMQG86mqokhiA/i/8hEKX+lQQ/kekz99mAtiPtMNHa8/VkftOfseMkK57kDCX1MUu5+/6VVM5Q6YZTW1OscGoqOtvjZdtJmAPlLufp00/qY4EpGrpTfTVTSM0rhq6XFUpglA4dt3t+fPjM/mlHlRfosqJVKxQl1pjXwBBnVPrA47c7skNKW57WU7kEdq+Bc3Rsfhs+fjmwkQtaVoOwq6jSYvpx2bJ0+Wg8v5SXbo00g6Ox69TCju7S5T8f6UcITYC0mAAAAABJRU5ErkJggg==\'); background-size: cover; display: block;\\"\\n  ></span>\\n  <img\\n        class=\\"gatsby-resp-image-image\\"\\n        alt=\\"Blog pic 3\\"\\n        title=\\"Blog pic 3\\"\\n        src=\\"/static/e0ad2706ace1418cb4c6e880fc0c9280/3b243/blogsample3.png\\"\\n        srcset=\\"/static/e0ad2706ace1418cb4c6e880fc0c9280/135ae/blogsample3.png 300w,\\n/static/e0ad2706ace1418cb4c6e880fc0c9280/34e8a/blogsample3.png 600w,\\n/static/e0ad2706ace1418cb4c6e880fc0c9280/3b243/blogsample3.png 1024w\\"\\n        sizes=\\"(max-width: 1024px) 100vw, 1024px\\"\\n        loading=\\"lazy\\"\\n      />\\n  </a>\\n    </span></p>\\n<blockquote>\\n<p>View the OpenAPI user interface at <a href=\\"http://localhost:8080/openapi/ui\\">http://localhost:8080/openapi/ui</a></p>\\n</blockquote>\\n<p>We hope you enjoy trying out our new Swift server example and it helps you to understand and use the features of Kitura. If you have any questions or comments, Please join the vibrant Kitura community on <a href=\\"http://swift-at-ibm-slack.mybluemix.net/?cm_sp=dw-bluemix-_-swift-_-devcenter&#x26;_ga=2.108551425.2052919715.1571393501-1533615335.1571393501\\">Slack</a>!</p>","frontmatter":{"path":"/blogs/kitura-swift-server-example","title":"Kitura Sample: A Swift Server example demonstrating the features of Kitura."}}},{"node":{"html":"<p>We have just released version 3.0 of <a href=\\"https://github.com/IBM-Swift/Swift-JWT\\">Swift-JWT</a>, our library for creating, signing, and verifying JSON Web Tokens. This release adds Codable conformance to the JWTs for easy encoding and decoding. As a result, you can now use JWTs with Kitura’s Codable Routing feature. Furthermore, this release adds support for signing and verifying JWTs using the HMAC hash function. This blog post will explain the new APIs by demonstrating JWT authentication in Codable routes.</p>\\n<h2 id=\\"what-is-a-json-web-token\\"><a href=\\"#what-is-a-json-web-token\\" aria-label=\\"what is a json web token permalink\\" class=\\"anchor\\"><svg aria-hidden=\\"true\\" focusable=\\"false\\" height=\\"16\\" version=\\"1.1\\" viewBox=\\"0 0 16 16\\" width=\\"16\\"><path fill-rule=\\"evenodd\\" d=\\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\\"></path></svg></a>What is a JSON Web Token?</h2>\\n<p>In short, a JWT is a small JSON payload consisting of a Header object, a Claims object and a signature. They are a self-contained way for securely transmitting information between parties. If you would like to know more about JWTs, please read our last <a href=\\"/blogs/swift-jwt\\">blog post</a> announcing the release of our Swift-JWT library or check out <a href=\\"https://jwt.io\\">jwt.io</a>.</p>\\n<hr>\\n<h2 id=\\"importing-swift-jwt\\"><a href=\\"#importing-swift-jwt\\" aria-label=\\"importing swift jwt permalink\\" class=\\"anchor\\"><svg aria-hidden=\\"true\\" focusable=\\"false\\" height=\\"16\\" version=\\"1.1\\" viewBox=\\"0 0 16 16\\" width=\\"16\\"><path fill-rule=\\"evenodd\\" d=\\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\\"></path></svg></a>Importing Swift-JWT</h2>\\n<p>Let’s start by adding Swift-JWT to the dependencies of a Kitura Server. If you don’t have a project set up, please follow the <a href=\\"/docs/getting-started/create-server-cli\\">getting started</a> guide to create one.</p>\\n<ol>\\n<li>In your Package.swift, add Swift-JWT 3.1.0 to the dependencies and targets:</li>\\n</ol>\\n<div class=\\"gatsby-highlight\\" data-language=\\"swift\\"><pre class=\\"language-swift\\"><code class=\\"language-swift\\"><span class=\\"token comment\\">// dependencies</span>\\n<span class=\\"token punctuation\\">.</span><span class=\\"token function\\">package</span><span class=\\"token punctuation\\">(</span>url<span class=\\"token punctuation\\">:</span> <span class=\\"token string\\">\\"https://github.com/IBM-Swift/Swift-JWT.git\\"</span><span class=\\"token punctuation\\">,</span> from<span class=\\"token punctuation\\">:</span> <span class=\\"token string\\">\\"3.1.0\\"</span><span class=\\"token punctuation\\">)</span>\\n<span class=\\"token comment\\">// targets</span>\\n<span class=\\"token punctuation\\">.</span><span class=\\"token function\\">target</span><span class=\\"token punctuation\\">(</span>name<span class=\\"token punctuation\\">:</span> <span class=\\"token string\\">\\"Application\\"</span><span class=\\"token punctuation\\">,</span> dependencies<span class=\\"token punctuation\\">:</span> <span class=\\"token punctuation\\">[</span><span class=\\"token string\\">\\"SwiftJWT\\"</span><span class=\\"token punctuation\\">]</span><span class=\\"token punctuation\\">)</span><span class=\\"token punctuation\\">,</span></code></pre></div>\\n<ol start=\\"2\\">\\n<li>Import the SwiftJWT library:</li>\\n</ol>\\n<div class=\\"gatsby-highlight\\" data-language=\\"swift\\"><pre class=\\"language-swift\\"><code class=\\"language-swift\\"><span class=\\"token comment\\">// Inside Application.swift</span>\\n<span class=\\"token keyword\\">import</span> <span class=\\"token builtin\\">SwiftJWT</span></code></pre></div>\\n<hr>\\n<h2 id=\\"returning-a-jwt-from-a-codable-route\\"><a href=\\"#returning-a-jwt-from-a-codable-route\\" aria-label=\\"returning a jwt from a codable route permalink\\" class=\\"anchor\\"><svg aria-hidden=\\"true\\" focusable=\\"false\\" height=\\"16\\" version=\\"1.1\\" viewBox=\\"0 0 16 16\\" width=\\"16\\"><path fill-rule=\\"evenodd\\" d=\\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\\"></path></svg></a>Returning a JWT from a Codable route</h2>\\n<p>We are going to write a Codable route will received a user’s name and returns a signed JWT String.</p>\\n<ol>\\n<li>We begin by defining the User and Access token structs:</li>\\n</ol>\\n<div class=\\"gatsby-highlight\\" data-language=\\"swift\\"><pre class=\\"language-swift\\"><code class=\\"language-swift\\"><span class=\\"token keyword\\">struct</span> <span class=\\"token builtin\\">User</span><span class=\\"token punctuation\\">:</span> <span class=\\"token builtin\\">Codable</span> <span class=\\"token punctuation\\">{</span>\\n    <span class=\\"token keyword\\">let</span> name<span class=\\"token punctuation\\">:</span> <span class=\\"token builtin\\">String</span>\\n<span class=\\"token punctuation\\">}</span>\\n\\n<span class=\\"token keyword\\">struct</span> <span class=\\"token builtin\\">AccessToken</span><span class=\\"token punctuation\\">:</span> <span class=\\"token builtin\\">Codable</span> <span class=\\"token punctuation\\">{</span>\\n    <span class=\\"token keyword\\">let</span> accessToken<span class=\\"token punctuation\\">:</span> <span class=\\"token builtin\\">String</span>\\n<span class=\\"token punctuation\\">}</span></code></pre></div>\\n<ol start=\\"2\\">\\n<li>Next, we write a Codable route that receives the user’s query and returns a JWT:</li>\\n</ol>\\n<div class=\\"gatsby-highlight\\" data-language=\\"swift\\"><pre class=\\"language-swift\\"><code class=\\"language-swift\\"><span class=\\"token comment\\">// Inside app.postInit()</span>\\nrouter<span class=\\"token punctuation\\">.</span><span class=\\"token function\\">post</span><span class=\\"token punctuation\\">(</span><span class=\\"token string\\">\\"/generateJWT\\"</span><span class=\\"token punctuation\\">,</span> handler<span class=\\"token punctuation\\">:</span> loginHandler<span class=\\"token punctuation\\">)</span>\\n\\n<span class=\\"token comment\\">// Inside App</span>\\n<span class=\\"token keyword\\">func</span> <span class=\\"token function\\">loginHandler</span><span class=\\"token punctuation\\">(</span>user<span class=\\"token punctuation\\">:</span> <span class=\\"token builtin\\">User</span><span class=\\"token punctuation\\">,</span> respondWith<span class=\\"token punctuation\\">:</span> <span class=\\"token punctuation\\">(</span><span class=\\"token builtin\\">AccessToken</span><span class=\\"token operator\\">?</span><span class=\\"token punctuation\\">,</span> <span class=\\"token builtin\\">RequestError</span><span class=\\"token operator\\">?</span><span class=\\"token punctuation\\">)</span> <span class=\\"token operator\\">-</span><span class=\\"token operator\\">></span> <span class=\\"token builtin\\">Void</span><span class=\\"token punctuation\\">)</span> <span class=\\"token punctuation\\">{</span>\\n    <span class=\\"token keyword\\">var</span> jwt <span class=\\"token operator\\">=</span> <span class=\\"token function\\">JWT</span><span class=\\"token punctuation\\">(</span>claims<span class=\\"token punctuation\\">:</span> <span class=\\"token function\\">ClaimsStandardJWT</span><span class=\\"token punctuation\\">(</span>iss<span class=\\"token punctuation\\">:</span> <span class=\\"token string\\">\\"Kitura\\"</span><span class=\\"token punctuation\\">,</span> sub<span class=\\"token punctuation\\">:</span> user<span class=\\"token punctuation\\">.</span>name<span class=\\"token punctuation\\">)</span><span class=\\"token punctuation\\">)</span>\\n    <span class=\\"token keyword\\">guard</span> <span class=\\"token keyword\\">let</span> key <span class=\\"token operator\\">=</span> <span class=\\"token string\\">\\"&lt;PrivateKey>\\"</span><span class=\\"token punctuation\\">.</span><span class=\\"token function\\">data</span><span class=\\"token punctuation\\">(</span>using<span class=\\"token punctuation\\">:</span> <span class=\\"token punctuation\\">.</span>utf8<span class=\\"token punctuation\\">)</span><span class=\\"token punctuation\\">,</span>\\n          <span class=\\"token keyword\\">let</span> signedJWT <span class=\\"token operator\\">=</span> <span class=\\"token keyword\\">try</span><span class=\\"token operator\\">?</span> jwt<span class=\\"token punctuation\\">.</span><span class=\\"token function\\">sign</span><span class=\\"token punctuation\\">(</span>using<span class=\\"token punctuation\\">:</span> <span class=\\"token punctuation\\">.</span><span class=\\"token function\\">hs256</span><span class=\\"token punctuation\\">(</span>key<span class=\\"token punctuation\\">:</span> key<span class=\\"token punctuation\\">)</span><span class=\\"token punctuation\\">)</span>\\n    <span class=\\"token keyword\\">else</span> <span class=\\"token punctuation\\">{</span>\\n        <span class=\\"token keyword\\">return</span> <span class=\\"token function\\">respondWith</span><span class=\\"token punctuation\\">(</span><span class=\\"token constant\\">nil</span><span class=\\"token punctuation\\">,</span> <span class=\\"token punctuation\\">.</span>internalServerError<span class=\\"token punctuation\\">)</span>\\n    <span class=\\"token punctuation\\">}</span>\\n    <span class=\\"token function\\">respondWith</span><span class=\\"token punctuation\\">(</span><span class=\\"token function\\">AccessToken</span><span class=\\"token punctuation\\">(</span>accessToken<span class=\\"token punctuation\\">:</span> signedJWT<span class=\\"token punctuation\\">)</span><span class=\\"token punctuation\\">,</span> <span class=\\"token constant\\">nil</span><span class=\\"token punctuation\\">)</span>\\n<span class=\\"token punctuation\\">}</span></code></pre></div>\\n<p>This route represents the “Login” route when using JWT authentication.\\n– The user provides their name (at which point the server would usually authenticate them).\\n– The server takes the user’s information and creates the JWT with their claims.\\n– The server signs and encodes the JWT using a private key.\\n– The server sends the signed JWT String back to the user</p>\\n<ol start=\\"3\\">\\n<li>Run your Kitura server and send a POST request to your route.</li>\\n</ol>\\n<p>There are many utilities for testing REST APIs, such as Postman. Here we’ll use “curl”, which is a simple command line utility:</p>\\n<div class=\\"gatsby-highlight\\" data-language=\\"text\\"><pre class=\\"language-text\\"><code class=\\"language-text\\">curl -X POST \\\\\\n  http://localhost:8080/generateJWT \\\\\\n  -d &#39;{&quot;name&quot;:&quot;Joe Bloggs&quot;}&#39; \\\\\\n  -H &#39;content-type: application/json&#39;</code></pre></div>\\n<p>You should be sent back an access token which looks something like this:</p>\\n<div class=\\"gatsby-highlight\\" data-language=\\"text\\"><pre class=\\"language-text\\"><code class=\\"language-text\\">eyJ0eXAiOiJKV1QiLCJhbGciOiJIUzI1NiJ9.eyJpc3MiOiJLaXR1cmEiLCJzdWIiOiJKb2UgQmxvZ2dzIn0.Q2UbWSsU-AecEBBNBWr2NiqJdeV2OQF43yQZhXF0LB4</code></pre></div>\\n<p>This is a signed JSON Web Token. If you would like to view its headers and claims, you can decode it at <a href=\\"https://jwt.io\\">jwt.io</a>.</p>\\n<hr>\\n<h2 id=\\"authenticating-a-user-using-a-jwt-in-a-codable-route\\"><a href=\\"#authenticating-a-user-using-a-jwt-in-a-codable-route\\" aria-label=\\"authenticating a user using a jwt in a codable route permalink\\" class=\\"anchor\\"><svg aria-hidden=\\"true\\" focusable=\\"false\\" height=\\"16\\" version=\\"1.1\\" viewBox=\\"0 0 16 16\\" width=\\"16\\"><path fill-rule=\\"evenodd\\" d=\\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\\"></path></svg></a>Authenticating a User using a JWT in a Codable route</h2>\\n<p>The signed JWT is the user’s credentials and should be protected in the same way as a password. The user can then send the JWT in their Authentication header so the server knows who is making the request. We will now write a protected route that will only respond to an authenticated user.</p>\\n<ol>\\n<li>Create a <a href=\\"/blogs/type-safe-middleware\\">TypeSafeMiddleware</a> to extract the JWT:</li>\\n</ol>\\n<div class=\\"gatsby-highlight\\" data-language=\\"swift\\"><pre class=\\"language-swift\\"><code class=\\"language-swift\\"><span class=\\"token keyword\\">struct</span> <span class=\\"token builtin\\">TypeSafeJWT</span><span class=\\"token operator\\">&lt;</span>C<span class=\\"token punctuation\\">:</span> <span class=\\"token builtin\\">Claims</span><span class=\\"token operator\\">></span><span class=\\"token punctuation\\">:</span> <span class=\\"token builtin\\">TypeSafeMiddleware</span> <span class=\\"token punctuation\\">{</span>\\n    <span class=\\"token keyword\\">let</span> jwt<span class=\\"token punctuation\\">:</span> <span class=\\"token constant\\">JWT</span><span class=\\"token operator\\">&lt;</span>C<span class=\\"token operator\\">></span>\\n\\n    <span class=\\"token keyword\\">static</span> <span class=\\"token keyword\\">func</span> <span class=\\"token function\\">handle</span><span class=\\"token punctuation\\">(</span>request<span class=\\"token punctuation\\">:</span> <span class=\\"token builtin\\">RouterRequest</span><span class=\\"token punctuation\\">,</span> response<span class=\\"token punctuation\\">:</span> <span class=\\"token builtin\\">RouterResponse</span><span class=\\"token punctuation\\">,</span> completion<span class=\\"token punctuation\\">:</span> @escaping <span class=\\"token punctuation\\">(</span><span class=\\"token builtin\\">TypeSafeJWT</span><span class=\\"token operator\\">?</span><span class=\\"token punctuation\\">,</span> <span class=\\"token builtin\\">RequestError</span><span class=\\"token operator\\">?</span><span class=\\"token punctuation\\">)</span> <span class=\\"token operator\\">-</span><span class=\\"token operator\\">></span> <span class=\\"token builtin\\">Void</span><span class=\\"token punctuation\\">)</span> <span class=\\"token punctuation\\">{</span>\\n        <span class=\\"token keyword\\">let</span> auth <span class=\\"token operator\\">=</span> request<span class=\\"token punctuation\\">.</span>headers<span class=\\"token punctuation\\">[</span><span class=\\"token string\\">\\"Authorization\\"</span><span class=\\"token punctuation\\">]</span>\\n        <span class=\\"token keyword\\">guard</span> <span class=\\"token keyword\\">let</span> authParts <span class=\\"token operator\\">=</span> auth<span class=\\"token operator\\">?</span><span class=\\"token punctuation\\">.</span><span class=\\"token function\\">split</span><span class=\\"token punctuation\\">(</span>separator<span class=\\"token punctuation\\">:</span> <span class=\\"token string\\">\\" \\"</span><span class=\\"token punctuation\\">,</span> maxSplits<span class=\\"token punctuation\\">:</span> <span class=\\"token number\\">2</span><span class=\\"token punctuation\\">)</span><span class=\\"token punctuation\\">,</span>\\n            authParts<span class=\\"token punctuation\\">.</span><span class=\\"token builtin\\">count</span> <span class=\\"token operator\\">==</span> <span class=\\"token number\\">2</span><span class=\\"token punctuation\\">,</span>\\n            authParts<span class=\\"token punctuation\\">[</span><span class=\\"token number\\">0</span><span class=\\"token punctuation\\">]</span> <span class=\\"token operator\\">==</span> <span class=\\"token string\\">\\"Bearer\\"</span><span class=\\"token punctuation\\">,</span>\\n            <span class=\\"token keyword\\">let</span> key <span class=\\"token operator\\">=</span> <span class=\\"token string\\">\\"&lt;PrivateKey>\\"</span><span class=\\"token punctuation\\">.</span><span class=\\"token function\\">data</span><span class=\\"token punctuation\\">(</span>using<span class=\\"token punctuation\\">:</span> <span class=\\"token punctuation\\">.</span>utf8<span class=\\"token punctuation\\">)</span><span class=\\"token punctuation\\">,</span>\\n            <span class=\\"token keyword\\">let</span> jwt <span class=\\"token operator\\">=</span> <span class=\\"token keyword\\">try</span><span class=\\"token operator\\">?</span> <span class=\\"token constant\\">JWT</span><span class=\\"token operator\\">&lt;</span>C<span class=\\"token operator\\">></span><span class=\\"token punctuation\\">(</span>jwtString<span class=\\"token punctuation\\">:</span> <span class=\\"token function\\">String</span><span class=\\"token punctuation\\">(</span>authParts<span class=\\"token punctuation\\">[</span><span class=\\"token number\\">1</span><span class=\\"token punctuation\\">]</span><span class=\\"token punctuation\\">)</span><span class=\\"token punctuation\\">,</span> verifier<span class=\\"token punctuation\\">:</span> <span class=\\"token punctuation\\">.</span><span class=\\"token function\\">hs256</span><span class=\\"token punctuation\\">(</span>key<span class=\\"token punctuation\\">:</span> key<span class=\\"token punctuation\\">)</span><span class=\\"token punctuation\\">)</span>\\n            <span class=\\"token keyword\\">else</span> <span class=\\"token punctuation\\">{</span>\\n                <span class=\\"token keyword\\">return</span> <span class=\\"token function\\">completion</span><span class=\\"token punctuation\\">(</span><span class=\\"token constant\\">nil</span><span class=\\"token punctuation\\">,</span> <span class=\\"token punctuation\\">.</span>unauthorized<span class=\\"token punctuation\\">)</span>\\n        <span class=\\"token punctuation\\">}</span>\\n        <span class=\\"token function\\">completion</span><span class=\\"token punctuation\\">(</span><span class=\\"token function\\">TypeSafeJWT</span><span class=\\"token punctuation\\">(</span>jwt<span class=\\"token punctuation\\">:</span> jwt<span class=\\"token punctuation\\">)</span><span class=\\"token punctuation\\">,</span> <span class=\\"token constant\\">nil</span><span class=\\"token punctuation\\">)</span>\\n    <span class=\\"token punctuation\\">}</span>\\n<span class=\\"token punctuation\\">}</span></code></pre></div>\\n<p>This middleware will:</p>\\n<ul>\\n<li>Read the JWT string from the “Authorization” header of the request.</li>\\n<li>Verify the JWT signature (Ensuring we created the JWT and it hasn’t been altered)</li>\\n<li>Decode the JWT from the string</li>\\n</ul>\\n<p>Because HMAC is a symmetric algorithm, the JWT is verified using the same key that it was signed with.</p>\\n<ol start=\\"2\\">\\n<li>Create a Codable route, protected by JWT authentication:</li>\\n</ol>\\n<div class=\\"gatsby-highlight\\" data-language=\\"swift\\"><pre class=\\"language-swift\\"><code class=\\"language-swift\\"><span class=\\"token comment\\">// Inside App.PostInit</span>\\nrouter<span class=\\"token punctuation\\">.</span><span class=\\"token keyword\\">get</span><span class=\\"token punctuation\\">(</span><span class=\\"token string\\">\\"/protected\\"</span><span class=\\"token punctuation\\">,</span> handler<span class=\\"token punctuation\\">:</span> protected<span class=\\"token punctuation\\">)</span>\\n\\n<span class=\\"token comment\\">// Inside App</span>\\n<span class=\\"token keyword\\">func</span> <span class=\\"token function\\">protected</span><span class=\\"token punctuation\\">(</span>typeSafeJWT<span class=\\"token punctuation\\">:</span> <span class=\\"token builtin\\">TypeSafeJWT</span><span class=\\"token operator\\">&lt;</span><span class=\\"token builtin\\">ClaimsStandardJWT</span><span class=\\"token operator\\">></span><span class=\\"token punctuation\\">,</span> respondWith<span class=\\"token punctuation\\">:</span> <span class=\\"token punctuation\\">(</span><span class=\\"token builtin\\">User</span><span class=\\"token operator\\">?</span><span class=\\"token punctuation\\">,</span> <span class=\\"token builtin\\">RequestError</span><span class=\\"token operator\\">?</span><span class=\\"token punctuation\\">)</span> <span class=\\"token operator\\">-</span><span class=\\"token operator\\">></span> <span class=\\"token builtin\\">Void</span><span class=\\"token punctuation\\">)</span> <span class=\\"token punctuation\\">{</span>\\n    <span class=\\"token keyword\\">guard</span> <span class=\\"token keyword\\">let</span> userName <span class=\\"token operator\\">=</span> typeSafeJWT<span class=\\"token punctuation\\">.</span>jwt<span class=\\"token punctuation\\">.</span>claims<span class=\\"token punctuation\\">.</span>sub <span class=\\"token keyword\\">else</span> <span class=\\"token punctuation\\">{</span>\\n        <span class=\\"token keyword\\">return</span> <span class=\\"token function\\">respondWith</span><span class=\\"token punctuation\\">(</span><span class=\\"token constant\\">nil</span><span class=\\"token punctuation\\">,</span> <span class=\\"token punctuation\\">.</span>internalServerError<span class=\\"token punctuation\\">)</span>\\n    <span class=\\"token punctuation\\">}</span>\\n    <span class=\\"token function\\">respondWith</span><span class=\\"token punctuation\\">(</span><span class=\\"token function\\">User</span><span class=\\"token punctuation\\">(</span>name<span class=\\"token punctuation\\">:</span> userName<span class=\\"token punctuation\\">)</span><span class=\\"token punctuation\\">,</span> <span class=\\"token constant\\">nil</span><span class=\\"token punctuation\\">)</span>\\n<span class=\\"token punctuation\\">}</span></code></pre></div>\\n<ol start=\\"3\\">\\n<li>Run your Kitura server and send a GET request to the protected route.</li>\\n</ol>\\n<div class=\\"gatsby-highlight\\" data-language=\\"text\\"><pre class=\\"language-text\\"><code class=\\"language-text\\">curl -i http://localhost:8080/protected</code></pre></div>\\n<p>You should receive an 401 Unauthorized status code back.</p>\\n<p>Now send a request using a JWT from the generateJWT route:</p>\\n<div class=\\"gatsby-highlight\\" data-language=\\"text\\"><pre class=\\"language-text\\"><code class=\\"language-text\\">curl -i -H &quot;Authorization: Bearer eyJ0eXAiOiJKV1QiLCJhbGciOiJIUzI1NiJ9.eyJpc3MiOiJLaXR1cmEiLCJzdWIiOiJKb2UgQmxvZ2dzIn0.Q2UbWSsU-AecEBBNBWr2NiqJdeV2OQF43yQZhXF0LB4&quot; http://localhost:8080/protected</code></pre></div>\\n<p>The name from the JWT will be returned to you. If you change the JWT token or generate one using a different key then it will be rejected by the server.</p>\\n<p>Congratulations! You have just created a JWT single sign on system using a Kitura Server.</p>\\n<p>If you would like to see a completed example that also uses JWTs for information transfer, Please check out the JWT Example in our <a href=\\"https://github.com/IBM-Swift/Kitura-Sample\\">Kitura sample</a> app.</p>\\n<p>Any questions or comments? Please join the Kitura community on <a href=\\"http://swift-at-ibm-slack.mybluemix.net/?cm_sp=dw-bluemix-_-swift-_-devcenter&#x26;_ga=2.159686845.186671014.1570626561-1743126121.1570022962\\">Slack</a>!</p>","frontmatter":{"path":"/blogs/swift-jwt-3-0-codable-json-web-tokens","title":"Swift-JWT 3.0: Codable JSON web tokens"}}},{"node":{"html":"<p>We have just released version 3.3 of <a href=\\"https://github.com/IBM-Swift/Swift-JWT\\">Swift-JWT</a>. This utilizes our new <a href=\\"https://github.com/IBM-Swift/BlueECC\\">BlueECC</a> repository to support signing and verifying of JWTs using ES256, ES384 and ES512 algorithms. In this blog, we will explain what these algorithms are and demonstrate how to use them in Swift-JWT.</p>\\n<h2 id=\\"elliptic-curve-digital-signature-algorithm-ecdsa\\"><a href=\\"#elliptic-curve-digital-signature-algorithm-ecdsa\\" aria-label=\\"elliptic curve digital signature algorithm ecdsa permalink\\" class=\\"anchor\\"><svg aria-hidden=\\"true\\" focusable=\\"false\\" height=\\"16\\" version=\\"1.1\\" viewBox=\\"0 0 16 16\\" width=\\"16\\"><path fill-rule=\\"evenodd\\" d=\\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\\"></path></svg></a>Elliptic Curve Digital Signature Algorithm (ECDSA)</h2>\\n<p>To explain why you should use these algorithms, I’ll quote the JSON Web Algorithms specification:</p>\\n<blockquote>\\n<p>The Elliptic Curve Digital Signature Algorithm (ECDSA) provides for the use of Elliptic Curve Cryptography, which is able to provide equivalent security to RSA cryptography but using shorter key sizes and with greater processing speed for many operations. This means that ECDSA digital signatures will be substantially smaller in terms of length than equivalently strong RSA digital signatures.</p>\\n</blockquote>\\n<p>In short they are faster, use smaller keys and produce shorter signatures. For these reasons, the specification recommends elliptic curve above RSA and states that the requirement for ECDSA support will be increased in future releases.</p>\\n<p>Finally, Apple requires you use ES256 as an authentication method for lots of their services, including <a href=\\"https://developer.apple.com/library/archive/documentation/NetworkingInternet/Conceptual/RemoteNotificationsPG/CommunicatingwithAPNs.html#//apple_ref/doc/uid/TP40008194-CH11-SW1\\">Apple Push Notification service</a> (APNs), <a href=\\"https://help.apple.com/developer-account/#/devce5522674\\">MusicKit</a>, <a href=\\"https://help.apple.com/developer-account/#/devc3cc013b7\\">DeviceCheck</a> and <a href=\\"https://developer.apple.com/videos/play/wwdc2018/303/\\">App Store Connect API</a>.</p>\\n<hr>\\n<h2 id=\\"the-es256-es384-and-es512-algorithms\\"><a href=\\"#the-es256-es384-and-es512-algorithms\\" aria-label=\\"the es256 es384 and es512 algorithms permalink\\" class=\\"anchor\\"><svg aria-hidden=\\"true\\" focusable=\\"false\\" height=\\"16\\" version=\\"1.1\\" viewBox=\\"0 0 16 16\\" width=\\"16\\"><path fill-rule=\\"evenodd\\" d=\\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\\"></path></svg></a>The ES256, ES384 and ES512 Algorithms</h2>\\n<p>There are currently three recognized implementations of ECDSA for JSON Web Tokens (JWT):</p>\\n<ul>\\n<li>ES256 – ECDSA using P-256 and SHA-256</li>\\n<li>ES384 – ECDSA using P-384 and SHA-384</li>\\n<li>ES512 – ECDSA using P-521 and SHA-512</li>\\n</ul>\\n<p>The P-XXX refers to the prime256v1, secp384r1, and secp521r1 elliptic curves. These curves generate a key pair with XXX number of private key data bits. The SHA-XXX refers to the SHA algorithm that is used to hash the plaintext prior to it being signed. Using larger keys provides more security but requires longer signatures and more processing power. We recommend ES256 for most users since it provides the same security as 3072 bit RSA key, which is considered secure beyond 2030.</p>\\n<p>If you would like to know more about elliptic curve cryptography, check out our <a href=\\"/blogs/blueecc-elliptic-curve-cryptography\\">BlueECC blog post</a>.</p>\\n<hr>\\n<h2 id=\\"elliptic-curve-key-pair\\"><a href=\\"#elliptic-curve-key-pair\\" aria-label=\\"elliptic curve key pair permalink\\" class=\\"anchor\\"><svg aria-hidden=\\"true\\" focusable=\\"false\\" height=\\"16\\" version=\\"1.1\\" viewBox=\\"0 0 16 16\\" width=\\"16\\"><path fill-rule=\\"evenodd\\" d=\\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\\"></path></svg></a>Elliptic curve key pair</h2>\\n<p>ECDSA uses asymmetric elliptic curve keys. These can be generated through <a href=\\"https://idmsa.apple.com/IDMSWebAuth/signin?appIdKey=891bd3417a7776362562d2197f89480a8547b108fd934911bcbea0110d07f757&#x26;path=%2Faccount%2Fresources%2F&#x26;rv=1\\">Apple</a>, <a href=\\"https://wiki.openssl.org/index.php/Command_Line_Elliptic_Curve_Operations#Generating_EC_Keys_and_Parameters\\">OpenSSL</a> or using <a href=\\"https://github.com/IBM-Swift/BlueECC#elliptic-curve-private-key\\">BlueECC</a>. For a p-256 curve, these keys should look something like this:</p>\\n<div class=\\"gatsby-highlight\\" data-language=\\"swift\\"><pre class=\\"language-swift\\"><code class=\\"language-swift\\"><span class=\\"token keyword\\">let</span> privateKey <span class=\\"token operator\\">=</span> <span class=\\"token string\\">\\"\\"</span>\\"\\n<span class=\\"token operator\\">--</span><span class=\\"token operator\\">--</span><span class=\\"token operator\\">-</span><span class=\\"token constant\\">BEGIN</span> <span class=\\"token constant\\">EC</span> <span class=\\"token constant\\">PRIVATE</span> <span class=\\"token constant\\">KEY</span><span class=\\"token operator\\">--</span><span class=\\"token operator\\">--</span><span class=\\"token operator\\">-</span>\\n<span class=\\"token builtin\\">MHcCAQEEIJX</span><span class=\\"token operator\\">+</span>87WJ7Gh19sohyZnhxZeXYNOcuGv4Q<span class=\\"token operator\\">+</span>8MLge4UkaZoAoGCCqGSM49\\n<span class=\\"token builtin\\">AwEHoUQDQgAEikc5m6C2xtDWeeAeT18WElO37zvFOz8p4kAlhvgIHN23XIClNESg</span>\\n<span class=\\"token builtin\\">KVmLgSSq2asqiwdrU5YHbcHFkgdABM1SPA</span><span class=\\"token operator\\">==</span>\\n<span class=\\"token operator\\">--</span><span class=\\"token operator\\">--</span><span class=\\"token operator\\">-</span><span class=\\"token constant\\">END</span> <span class=\\"token constant\\">EC</span> <span class=\\"token constant\\">PRIVATE</span> <span class=\\"token constant\\">KEY</span><span class=\\"token operator\\">--</span><span class=\\"token operator\\">--</span><span class=\\"token operator\\">-</span>\\n<span class=\\"token string\\">\\"\\"</span>\\"\\n<span class=\\"token keyword\\">let</span> publicKey <span class=\\"token operator\\">=</span> <span class=\\"token string\\">\\"\\"</span>\\"\\n<span class=\\"token operator\\">--</span><span class=\\"token operator\\">--</span><span class=\\"token operator\\">-</span><span class=\\"token constant\\">BEGIN</span> <span class=\\"token constant\\">PUBLIC</span> <span class=\\"token constant\\">KEY</span><span class=\\"token operator\\">--</span><span class=\\"token operator\\">--</span><span class=\\"token operator\\">-</span>\\n<span class=\\"token builtin\\">MFkwEwYHKoZIzj0CAQYIKoZIzj0DAQcDQgAEikc5m6C2xtDWeeAeT18WElO37zvF</span>\\n<span class=\\"token builtin\\">Oz8p4kAlhvgIHN23XIClNESgKVmLgSSq2asqiwdrU5YHbcHFkgdABM1SPA</span><span class=\\"token operator\\">==</span>\\n<span class=\\"token operator\\">--</span><span class=\\"token operator\\">--</span><span class=\\"token operator\\">-</span><span class=\\"token constant\\">END</span> <span class=\\"token constant\\">PUBLIC</span> <span class=\\"token constant\\">KEY</span><span class=\\"token operator\\">--</span><span class=\\"token operator\\">--</span><span class=\\"token operator\\">-</span>\\n<span class=\\"token string\\">\\"\\"</span>\\"</code></pre></div>\\n<p>The PEM format, refers to the “BEGIN”/”END” headers with some base64Encoded ASN1 data between them. If you decode the p-256 private key’s ASN1 data (e.g. <a href=\\"https://lapo.it/asn1js/\\">using this online decoder</a>) there are three main components of the key:</p>\\n<ul>\\n<li>32 bytes of private data</li>\\n<li>an object identifier that specifies the elliptic curve</li>\\n<li>65 bytes of public key data</li>\\n</ul>\\n<p>When you create a ES256/ES384/ES512 JWTSigner or JWTVerifier in Swift-JWT, it will extract the required components from the PEM string.</p>\\n<div class=\\"gatsby-highlight\\" data-language=\\"swift\\"><pre class=\\"language-swift\\"><code class=\\"language-swift\\"><span class=\\"token keyword\\">let</span> signer <span class=\\"token operator\\">=</span> <span class=\\"token builtin\\">JWTSigner</span><span class=\\"token punctuation\\">.</span><span class=\\"token function\\">es256</span><span class=\\"token punctuation\\">(</span>privateKey<span class=\\"token punctuation\\">:</span> <span class=\\"token function\\">Data</span><span class=\\"token punctuation\\">(</span>privateKey<span class=\\"token punctuation\\">.</span>utf8<span class=\\"token punctuation\\">)</span><span class=\\"token punctuation\\">)</span>\\n<span class=\\"token keyword\\">let</span> verifier <span class=\\"token operator\\">=</span> <span class=\\"token builtin\\">JWTVerifier</span><span class=\\"token punctuation\\">.</span><span class=\\"token function\\">es256</span><span class=\\"token punctuation\\">(</span>publicKey<span class=\\"token punctuation\\">:</span> <span class=\\"token function\\">Data</span><span class=\\"token punctuation\\">(</span>publicKey<span class=\\"token punctuation\\">.</span>utf8<span class=\\"token punctuation\\">)</span><span class=\\"token punctuation\\">)</span></code></pre></div>\\n<hr>\\n<h2 id=\\"ecdsa-signing-and-verifying\\"><a href=\\"#ecdsa-signing-and-verifying\\" aria-label=\\"ecdsa signing and verifying permalink\\" class=\\"anchor\\"><svg aria-hidden=\\"true\\" focusable=\\"false\\" height=\\"16\\" version=\\"1.1\\" viewBox=\\"0 0 16 16\\" width=\\"16\\"><path fill-rule=\\"evenodd\\" d=\\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\\"></path></svg></a>ECDSA signing and verifying</h2>\\n<p>Once you have your signer and verifier, the process is exactly the same as RSA. To demonstrate this we will sign a JWT using ES256:</p>\\n<div class=\\"gatsby-highlight\\" data-language=\\"swift\\"><pre class=\\"language-swift\\"><code class=\\"language-swift\\"><span class=\\"token keyword\\">let</span> claims <span class=\\"token operator\\">=</span> <span class=\\"token function\\">ClaimsStandardJWT</span><span class=\\"token punctuation\\">(</span>iss<span class=\\"token punctuation\\">:</span> <span class=\\"token string\\">\\"Kitura\\"</span><span class=\\"token punctuation\\">,</span> sub<span class=\\"token punctuation\\">:</span> <span class=\\"token string\\">\\"Joe Bloggs\\"</span><span class=\\"token punctuation\\">)</span>\\n<span class=\\"token keyword\\">var</span> myJWT <span class=\\"token operator\\">=</span> <span class=\\"token function\\">JWT</span><span class=\\"token punctuation\\">(</span>claims<span class=\\"token punctuation\\">:</span> claims<span class=\\"token punctuation\\">)</span>\\n<span class=\\"token keyword\\">do</span> <span class=\\"token punctuation\\">{</span>\\n    <span class=\\"token keyword\\">let</span> signedJWT <span class=\\"token operator\\">=</span> <span class=\\"token keyword\\">try</span> myJWT<span class=\\"token punctuation\\">.</span><span class=\\"token function\\">sign</span><span class=\\"token punctuation\\">(</span>using<span class=\\"token punctuation\\">:</span> signer<span class=\\"token punctuation\\">)</span>\\n    <span class=\\"token keyword\\">let</span> verified <span class=\\"token operator\\">=</span> <span class=\\"token constant\\">JWT</span><span class=\\"token operator\\">&lt;</span><span class=\\"token builtin\\">ClaimsStandardJWT</span><span class=\\"token operator\\">></span><span class=\\"token punctuation\\">.</span><span class=\\"token function\\">verify</span><span class=\\"token punctuation\\">(</span>signedJWT<span class=\\"token punctuation\\">,</span> using<span class=\\"token punctuation\\">:</span> verifier<span class=\\"token punctuation\\">)</span>\\n<span class=\\"token punctuation\\">}</span> <span class=\\"token keyword\\">catch</span> <span class=\\"token punctuation\\">{</span>\\n    <span class=\\"token function\\">print</span><span class=\\"token punctuation\\">(</span><span class=\\"token string\\">\\"JWT error: <span class=\\"token interpolation\\"><span class=\\"token delimiter variable\\">\\\\(</span>error<span class=\\"token delimiter variable\\">)</span></span>\\"</span><span class=\\"token punctuation\\">)</span>\\n<span class=\\"token punctuation\\">}</span></code></pre></div>\\n<p>This will produce a boolean value of <code class=\\"language-text\\">verified</code> and a signed JWT String that is formatted:\\n<code class=\\"language-text\\">&lt;encoded header&gt;.&lt;encoded claims&gt;.&lt;signature&gt;.</code>\\nAn example signed JWT using the keys from above would be:</p>\\n<div class=\\"gatsby-highlight\\" data-language=\\"text\\"><pre class=\\"language-text\\"><code class=\\"language-text\\">eyJ0eXAiOiJKV1QiLCJhbGciOiJFUzI1NiJ9.eyJpc3MiOiJraXR1cmEiLCJzdWIiOiJKb2UgQmxvZ2dzIn0._RcOxoU-3IYwFA7W81FmMEA5ON7QDB0mQ6w3HfMg9aOxKaT6ewb6WJcFdMjKggCTjBvlX5Mjr2icKkfrqTUl9A</code></pre></div>\\n<p>You can inspect this JWT String using the <a href=\\"http://jwt.io\\">jwt.io</a> debugger. Select ES256, copy across the private key, public key and JWT string. The debugger will decode your header and claims, as well as verifying the signature.</p>\\n<hr>\\n<h2 id=\\"next-steps\\"><a href=\\"#next-steps\\" aria-label=\\"next steps permalink\\" class=\\"anchor\\"><svg aria-hidden=\\"true\\" focusable=\\"false\\" height=\\"16\\" version=\\"1.1\\" viewBox=\\"0 0 16 16\\" width=\\"16\\"><path fill-rule=\\"evenodd\\" d=\\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\\"></path></svg></a>Next Steps</h2>\\n<p>Congratulations, you have just used an Elliptic Curve Digital Signature Algorithm with a JWT! Your ES256 signature will be 86 characters versus 171 characters for RS256, in addition to being faster and more secure.</p>\\n<p>If you would like include Swift-JWT in your project, <a href=\\"https://github.com/IBM-Swift/Swift-JWT\\">check it out on GitHub</a>.</p>\\n<p>If you would like to learn more about the Swift-JWT API, <a href=\\"https://ibm-swift.github.io/Swift-JWT/index.html\\">visit our API reference</a>.</p>\\n<p>Any questions or comments? Please join the Kitura community on <a href=\\"http://swift-at-ibm-slack.mybluemix.net/?cm_sp=dw-bluemix-_-swift-_-devcenter&#x26;_ga=2.58648362.186671014.1570626561-1743126121.1570022962&#x26;cm_mc_uid=83263075142115698398229&#x26;cm_mc_sid_50200000=53695431570707266328\\">Slack</a>!</p>","frontmatter":{"path":"/blogs/swift-jwt-es256-es384-es512","title":"Swift-JWT 3.3: Adding ES256, ES384, and ES512 Support"}}},{"node":{"html":"<p>Kitura has provided support for rendering templated content ever since version 1.0 but now Kitura 2.4 introduces a new type-safe API for rendering Codable structures.</p>\\n<h2 id=\\"what-is-it\\"><a href=\\"#what-is-it\\" aria-label=\\"what is it permalink\\" class=\\"anchor\\"><svg aria-hidden=\\"true\\" focusable=\\"false\\" height=\\"16\\" version=\\"1.1\\" viewBox=\\"0 0 16 16\\" width=\\"16\\"><path fill-rule=\\"evenodd\\" d=\\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\\"></path></svg></a>What is it?</h2>\\n<p>With the release of Kitura 2.4 you can now use Codable structs to render content using templating.</p>\\n<h2 id=\\"how-do-i-get-started\\"><a href=\\"#how-do-i-get-started\\" aria-label=\\"how do i get started permalink\\" class=\\"anchor\\"><svg aria-hidden=\\"true\\" focusable=\\"false\\" height=\\"16\\" version=\\"1.1\\" viewBox=\\"0 0 16 16\\" width=\\"16\\"><path fill-rule=\\"evenodd\\" d=\\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\\"></path></svg></a>How do I get started?</h2>\\n<p>Kitura supports multiple template engines:</p>\\n<ul>\\n<li>Kitura-Stencil</li>\\n<li>Kitura-Mustache</li>\\n<li>Kitura-Markdown</li>\\n</ul>\\n<p>To use type-safe templating all you need to do is add Kitura (at 2.4 or later) and one of the above template engines to your Package.swift, like so:</p>\\n<div class=\\"gatsby-highlight\\" data-language=\\"text\\"><pre class=\\"language-text\\"><code class=\\"language-text\\">.package(url: &quot;http://github.com/IBM-Swift/Kitura&quot;, from: &quot;2.4.0&quot;),\\n.package(url: &quot;http://github.com/IBM-Swift/Kitura-StencilTemplateEngine&quot;, from: &quot;1.0.0&quot;)</code></pre></div>\\n<h2 id=\\"how-do-i-use-it\\"><a href=\\"#how-do-i-use-it\\" aria-label=\\"how do i use it permalink\\" class=\\"anchor\\"><svg aria-hidden=\\"true\\" focusable=\\"false\\" height=\\"16\\" version=\\"1.1\\" viewBox=\\"0 0 16 16\\" width=\\"16\\"><path fill-rule=\\"evenodd\\" d=\\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\\"></path></svg></a>How do I use it?</h2>\\n<p>When you\'ve added Kitura and a template engine to your project you can start rendering your template files with Codable structs. Here is a quick example of that using the popular Stencil templating engine.</p>\\n<p>All we need to do is create a stencil template file, I called mine <code class=\\"language-text\\">MyStencil.stencil</code>, and then populate that file with the following:</p>\\n<div class=\\"gatsby-highlight\\" data-language=\\"text\\"><pre class=\\"language-text\\"><code class=\\"language-text\\">{% if friends %}\\n    {% for friend in friends %}\\n        {{friend.firstName}} {{friend.lastName}}\\n    {% endfor %}\\n{% else %}\\n    You have no friends! :(\\n{% endif %}</code></pre></div>\\n<p>Next we need to create our Codable struct:</p>\\n<div class=\\"gatsby-highlight\\" data-language=\\"swift\\"><pre class=\\"language-swift\\"><code class=\\"language-swift\\"><span class=\\"token keyword\\">struct</span> <span class=\\"token builtin\\">Friend</span><span class=\\"token punctuation\\">:</span> <span class=\\"token builtin\\">Codable</span> <span class=\\"token punctuation\\">{</span>\\n    <span class=\\"token keyword\\">let</span> firstName<span class=\\"token punctuation\\">:</span> <span class=\\"token builtin\\">String</span>\\n    <span class=\\"token keyword\\">let</span> lastName<span class=\\"token punctuation\\">:</span> <span class=\\"token builtin\\">String</span>\\n<span class=\\"token punctuation\\">}</span></code></pre></div>\\n<p>Then create an instance of this struct:</p>\\n<div class=\\"gatsby-highlight\\" data-language=\\"swift\\"><pre class=\\"language-swift\\"><code class=\\"language-swift\\"><span class=\\"token keyword\\">let</span> friends <span class=\\"token operator\\">=</span> <span class=\\"token punctuation\\">[</span><span class=\\"token function\\">Friend</span><span class=\\"token punctuation\\">(</span>firstName<span class=\\"token punctuation\\">:</span> <span class=\\"token string\\">\\"Jack\\"</span><span class=\\"token punctuation\\">,</span> lastName<span class=\\"token punctuation\\">:</span> <span class=\\"token string\\">\\"Sparrow\\"</span><span class=\\"token punctuation\\">)</span><span class=\\"token punctuation\\">,</span> <span class=\\"token function\\">Friend</span><span class=\\"token punctuation\\">(</span>firstName<span class=\\"token punctuation\\">:</span> <span class=\\"token string\\">\\"Captain\\"</span><span class=\\"token punctuation\\">,</span> lastName<span class=\\"token punctuation\\">:</span> <span class=\\"token string\\">\\"America\\"</span><span class=\\"token punctuation\\">)</span><span class=\\"token punctuation\\">]</span></code></pre></div>\\n<p>And now we can render the Stencil template file using the friends value:</p>\\n<div class=\\"gatsby-highlight\\" data-language=\\"swift\\"><pre class=\\"language-swift\\"><code class=\\"language-swift\\">router<span class=\\"token punctuation\\">.</span><span class=\\"token keyword\\">get</span><span class=\\"token punctuation\\">(</span><span class=\\"token string\\">\\"/friends\\"</span><span class=\\"token punctuation\\">)</span> <span class=\\"token punctuation\\">{</span> request<span class=\\"token punctuation\\">,</span> response<span class=\\"token punctuation\\">,</span> next <span class=\\"token keyword\\">in</span>\\n    <span class=\\"token keyword\\">try</span> response<span class=\\"token punctuation\\">.</span><span class=\\"token function\\">render</span><span class=\\"token punctuation\\">(</span><span class=\\"token string\\">\\"MyStencil.stencil\\"</span><span class=\\"token punctuation\\">,</span> with<span class=\\"token punctuation\\">:</span> friends<span class=\\"token punctuation\\">,</span> forKey<span class=\\"token punctuation\\">:</span> <span class=\\"token string\\">\\"friends\\"</span><span class=\\"token punctuation\\">)</span>\\n    <span class=\\"token function\\">next</span><span class=\\"token punctuation\\">(</span><span class=\\"token punctuation\\">)</span>\\n<span class=\\"token punctuation\\">}</span></code></pre></div>\\n<p>The \'forKey\' parameter is a new addition to the rendering methods, this allows you to provide the variable name from your template file that this particular struct will populate.</p>\\n<hr>\\n<h2 id=\\"next-steps\\"><a href=\\"#next-steps\\" aria-label=\\"next steps permalink\\" class=\\"anchor\\"><svg aria-hidden=\\"true\\" focusable=\\"false\\" height=\\"16\\" version=\\"1.1\\" viewBox=\\"0 0 16 16\\" width=\\"16\\"><path fill-rule=\\"evenodd\\" d=\\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\\"></path></svg></a>Next Steps</h2>\\n<p>Because the only requirement is that the struct you want to render is Codable, type-safe templating integrates easily with our <a href=\\"https://github.com/IBM-Swift/Swift-Kuery-ORM\\">Swift-Kuery-ORM</a>. When you call Model.findAll() to retrieve data from your database you can pass the results straight through to your rendering code with type-safety from end to end.</p>\\n<hr>\\n<h2 id=\\"credits\\"><a href=\\"#credits\\" aria-label=\\"credits permalink\\" class=\\"anchor\\"><svg aria-hidden=\\"true\\" focusable=\\"false\\" height=\\"16\\" version=\\"1.1\\" viewBox=\\"0 0 16 16\\" width=\\"16\\"><path fill-rule=\\"evenodd\\" d=\\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\\"></path></svg></a>Credits</h2>\\n<p>I\'d like to thank Steven Van Impe from the Kitura community for his assistance with the development of this new API. Steven provided valuable help with the design and testing of the feature and I\'m very grateful for his support.</p>","frontmatter":{"path":"/blogs/type-safe-templating","title":"Write powerful web apps with Kitura templating"}}},{"node":{"html":"<p><a href=\\"https://github.com/apple/swift-log\\">swift-log</a> is a new logging API package for Swift, developed by the <a href=\\"https://swift.org/server/\\">Swift Server Working Group</a>. It aims to provide a consistent and standardised logging solution across the server-side Swift ecosystem.</p>\\n<p>With the release of Kitura’s <a href=\\"https://github.com/IBM-Swift/LoggerAPI/releases/tag/1.9.0\\">LoggerAPI 1.9</a>, you can now easily direct your log messages to a swift-log logging backend.</p>\\n<p>In addition, the upcoming Kitura 2.8 release will allow you to <a href=\\"https://github.com/IBM-Swift/Kitura/pull/1460\\">configure Kitura to log via swift-log</a> with a single line of code:</p>\\n<div class=\\"gatsby-highlight\\" data-language=\\"swift\\"><pre class=\\"language-swift\\"><code class=\\"language-swift\\"><span class=\\"token builtin\\">Kitura</span><span class=\\"token punctuation\\">.</span><span class=\\"token function\\">logTo</span><span class=\\"token punctuation\\">(</span>mySwiftLogger<span class=\\"token punctuation\\">)</span></code></pre></div>\\n<h2 id=\\"why-use-a-logging-api\\"><a href=\\"#why-use-a-logging-api\\" aria-label=\\"why use a logging api permalink\\" class=\\"anchor\\"><svg aria-hidden=\\"true\\" focusable=\\"false\\" height=\\"16\\" version=\\"1.1\\" viewBox=\\"0 0 16 16\\" width=\\"16\\"><path fill-rule=\\"evenodd\\" d=\\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\\"></path></svg></a>Why use a logging API?</h2>\\n<p>When writing an application, you may wish to generate messages – to aid debugging, to record normal program flow, or audit user input. Some of those messages may be relevant in different contexts – while developing, you may want as much information as possible to understand how your code behaves, whereas in production, that would be too much noise – you want only the important messages that tell you when something requires your attention. In addition, producing messages affects performance.</p>\\n<p>Logging APIs decouple the production of log messages from their output. They allow code to emit messages at different levels: warnings and errors for important messages, and debug for understanding program execution. Which messages are output and their destination (stdout, database, file) can be configured independently, by the application author or during deployment. This means that an application does not need to be recompiled to toggle logging, or change the logging level. In addition, if all code uses the same logging API, then all messages produced by the application and its dependencies can be sent to a single destination.</p>\\n<p>By configuring Kitura and your existing code that uses LoggerAPI to output to swift-log, you can take advantage of swift-log in your own code, combine with other dependencies that adopt swift-log, all logging to the same destination.</p>\\n<hr>\\n<h2 id=\\"configuring-loggerapi-with-swift-log\\"><a href=\\"#configuring-loggerapi-with-swift-log\\" aria-label=\\"configuring loggerapi with swift log permalink\\" class=\\"anchor\\"><svg aria-hidden=\\"true\\" focusable=\\"false\\" height=\\"16\\" version=\\"1.1\\" viewBox=\\"0 0 16 16\\" width=\\"16\\"><path fill-rule=\\"evenodd\\" d=\\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\\"></path></svg></a>Configuring LoggerAPI with swift-log</h2>\\n<p>To direct your existing LoggerAPI log statements to swift-log, you need only set the Log.swiftLogger property:</p>\\n<div class=\\"gatsby-highlight\\" data-language=\\"swift\\"><pre class=\\"language-swift\\"><code class=\\"language-swift\\"><span class=\\"token keyword\\">import</span> <span class=\\"token builtin\\">Logging</span>\\n<span class=\\"token keyword\\">import</span> <span class=\\"token builtin\\">LoggerAPI</span>\\n\\n<span class=\\"token keyword\\">var</span> mySwiftLogger <span class=\\"token operator\\">=</span> <span class=\\"token function\\">Logger</span><span class=\\"token punctuation\\">(</span>label<span class=\\"token punctuation\\">:</span> <span class=\\"token string\\">\\"my-swift-logger\\"</span><span class=\\"token punctuation\\">)</span>\\nmySwiftLogger<span class=\\"token punctuation\\">.</span>logLevel <span class=\\"token operator\\">=</span> <span class=\\"token punctuation\\">.</span>info\\n\\n<span class=\\"token builtin\\">Log</span><span class=\\"token punctuation\\">.</span>swiftLogger <span class=\\"token operator\\">=</span> mySwiftLogger</code></pre></div>\\n<p>Note that there are some minor differences in the hierarchy of logging levels defined by LoggerAPI and swift-log. See the <a href=\\"https://ibm-swift.github.io/LoggerAPI/index.html\\">LoggerAPI documentation</a> Log.isLogging() for details of how log levels are mapped.</p>\\n<h2 id=\\"how-does-swift-log-compare-to-loggerapi\\"><a href=\\"#how-does-swift-log-compare-to-loggerapi\\" aria-label=\\"how does swift log compare to loggerapi permalink\\" class=\\"anchor\\"><svg aria-hidden=\\"true\\" focusable=\\"false\\" height=\\"16\\" version=\\"1.1\\" viewBox=\\"0 0 16 16\\" width=\\"16\\"><path fill-rule=\\"evenodd\\" d=\\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\\"></path></svg></a>How does swift-log compare to LoggerAPI?</h2>\\n<p>Both LoggerAPI and swift-log provide a means to decouple log message production from the logging implementation (backend). In both cases, the producer (your own code, or one of your dependencies) calls a logging API function indicating the logging level and the message content. And in both cases, the application author decides what level of log messages should be logged, and where the log messages should be sent.</p>\\n<p>There are some differences in the architecture, however: LoggerAPI provides a global <code class=\\"language-text\\">Log</code> type that can be invoked from anywhere in your code, and from any thread. Swift-log provides a local <code class=\\"language-text\\">Logger</code> with instance functions for logging, and this must be passed around or stored as a property. LoggerAPI effectively allows you to store an instance globally, and internally uses locks to provide thread-safe access to these global loggers.</p>\\n<p>There are pro’s and con’s to each approach, which are nicely summarised in the <a href=\\"https://forums.swift.org/t/logging/16027/3\\">thread for the swift-log pitch on the Swift Forums</a>.</p>\\n<p>If you wish to use swift-log throughout your application, you can configure Kitura to log to it, but then use your own swift-log Logger instances to perform logging. Because the logging backend configuration is global, all log messages will be emitted to the same destination.</p>","frontmatter":{"path":"/blogs/using-swift-log-with-kitura","title":"Using swift-log with Kitura"}}},{"node":{"html":"<p><a href=\\"https://github.com/IBM-Swift/Kitura-CouchDB\\">Kitura CouchDB</a> is a pure Swift client, that allows applications to interact with a CouchDB or Cloudant NoSQL database. We have just released Kitura-CouchDB 3.0, featuring a new Codable API, which removes the JSON boilerplate and works directly with your Swift objects. This blog will describe the new API and demonstrate its benefits, using an example.</p>\\n<h2 id=\\"codable-kitura-couchdb\\"><a href=\\"#codable-kitura-couchdb\\" aria-label=\\"codable kitura couchdb permalink\\" class=\\"anchor\\"><svg aria-hidden=\\"true\\" focusable=\\"false\\" height=\\"16\\" version=\\"1.1\\" viewBox=\\"0 0 16 16\\" width=\\"16\\"><path fill-rule=\\"evenodd\\" d=\\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\\"></path></svg></a>Codable Kitura CouchDB</h2>\\n<p>Previously, in Kitura CouchDB 2.0, you would interact with the database using <a href=\\"https://github.com/IBM-Swift/SwiftyJSON\\">SwiftyJSON</a>. This involved a lot of boilerplate code to convert your Swift object to a SwiftyJSON object and vice versa. The introduction of Codable, simplifies the conversion from Swift to JSON and Kitura CouchDB 3.0 utilizes this new functionality in its new API. To demonstrate how this improves usability, we will apply these changes to our <a href=\\"https://github.com/IBM-Swift/Kitura-CouchDB/blob/master/Sources/CouchDBSample/main.swift\\">CouchDBSample</a>.</p>\\n<p>The following examples compare the code required for executing CRUD (create, retrieve, update, delete) operations on a Swift object using Kitura-CouchDB versions 2.0 and 3.0. It assumes you have <a href=\\"https://docs.couchdb.org/en/master/install/mac.html\\">installed CouchDB</a> and imported Kitura-CouchDB as a dependency in your Swift project.</p>\\n<h3 id=\\"couchdb-document\\"><a href=\\"#couchdb-document\\" aria-label=\\"couchdb document permalink\\" class=\\"anchor\\"><svg aria-hidden=\\"true\\" focusable=\\"false\\" height=\\"16\\" version=\\"1.1\\" viewBox=\\"0 0 16 16\\" width=\\"16\\"><path fill-rule=\\"evenodd\\" d=\\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\\"></path></svg></a>CouchDB Document</h3>\\n<p>CouchDB is a NoSQL database for storing documents. A document is any structure that can be represented as JSON and contains <code class=\\"language-text\\">_id</code> and <code class=\\"language-text\\">_rev</code> fields.</p>\\n<ul>\\n<li>The <code class=\\"language-text\\">_id</code> field is the unique identifier for the document. If it is not set, a random UUID will be assigned for the document.</li>\\n<li>The <code class=\\"language-text\\">_rev</code> field is the revision of the document. It is returned when you make requests and is used to prevent conflicts from multiple users updating the same document.</li>\\n</ul>\\n<p>Kitura CouchDB 3.0 introduces a new <code class=\\"language-text\\">Document</code> protocol that encapsulates the requirements of a CouchDB document:</p>\\n<div class=\\"gatsby-highlight\\" data-language=\\"swift\\"><pre class=\\"language-swift\\"><code class=\\"language-swift\\"><span class=\\"token keyword\\">public</span> <span class=\\"token keyword\\">protocol</span> <span class=\\"token builtin\\">Document</span><span class=\\"token punctuation\\">:</span> <span class=\\"token builtin\\">Codable</span> <span class=\\"token punctuation\\">{</span>\\n    <span class=\\"token keyword\\">var</span> _id<span class=\\"token punctuation\\">:</span> <span class=\\"token builtin\\">String</span><span class=\\"token operator\\">?</span> <span class=\\"token punctuation\\">{</span> <span class=\\"token keyword\\">get</span> <span class=\\"token punctuation\\">}</span>\\n    <span class=\\"token keyword\\">var</span> _rev<span class=\\"token punctuation\\">:</span> <span class=\\"token builtin\\">String</span><span class=\\"token operator\\">?</span> <span class=\\"token punctuation\\">{</span> <span class=\\"token keyword\\">get</span> <span class=\\"token punctuation\\">}</span>\\n<span class=\\"token punctuation\\">}</span></code></pre></div>\\n<p>In our example, we define a struct that represents the documents we want to store in our database:</p>\\n<div class=\\"gatsby-highlight\\" data-language=\\"swift\\"><pre class=\\"language-swift\\"><code class=\\"language-swift\\"><span class=\\"token keyword\\">struct</span> <span class=\\"token builtin\\">MyDocument</span><span class=\\"token punctuation\\">:</span> <span class=\\"token builtin\\">Document</span> <span class=\\"token punctuation\\">{</span>\\n    <span class=\\"token keyword\\">let</span> _id<span class=\\"token punctuation\\">:</span> <span class=\\"token builtin\\">String</span><span class=\\"token operator\\">?</span>\\n    <span class=\\"token keyword\\">var</span> _rev<span class=\\"token punctuation\\">:</span> <span class=\\"token builtin\\">String</span><span class=\\"token operator\\">?</span>\\n    <span class=\\"token keyword\\">var</span> value<span class=\\"token punctuation\\">:</span> <span class=\\"token builtin\\">String</span>\\n<span class=\\"token punctuation\\">}</span></code></pre></div>\\n<p>We have made this struct conform to <code class=\\"language-text\\">Document</code> so it can be used with the new API.</p>\\n<h3 id=\\"connect-to-the-database-with-couchdbclient\\"><a href=\\"#connect-to-the-database-with-couchdbclient\\" aria-label=\\"connect to the database with couchdbclient permalink\\" class=\\"anchor\\"><svg aria-hidden=\\"true\\" focusable=\\"false\\" height=\\"16\\" version=\\"1.1\\" viewBox=\\"0 0 16 16\\" width=\\"16\\"><path fill-rule=\\"evenodd\\" d=\\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\\"></path></svg></a>Connect to the database with CouchDBClient</h3>\\n<p>The <code class=\\"language-text\\">CouchDBClient</code> represents a connection to a CouchDB server. It is initialized from a <code class=\\"language-text\\">ConnectionProperties</code> struct:</p>\\n<div class=\\"gatsby-highlight\\" data-language=\\"swift\\"><pre class=\\"language-swift\\"><code class=\\"language-swift\\"><span class=\\"token keyword\\">let</span> properties <span class=\\"token operator\\">=</span> <span class=\\"token function\\">ConnectionProperties</span><span class=\\"token punctuation\\">(</span>\\n    host<span class=\\"token punctuation\\">:</span> <span class=\\"token string\\">\\"127.0.0.1\\"</span><span class=\\"token punctuation\\">,</span>              <span class=\\"token comment\\">// http address</span>\\n    port<span class=\\"token punctuation\\">:</span> <span class=\\"token number\\">5984</span><span class=\\"token punctuation\\">,</span>                     <span class=\\"token comment\\">// http port</span>\\n    secured<span class=\\"token punctuation\\">:</span> <span class=\\"token boolean\\">false</span><span class=\\"token punctuation\\">,</span>                 <span class=\\"token comment\\">// https or http</span>\\n    username<span class=\\"token punctuation\\">:</span> <span class=\\"token string\\">\\"&lt;CouchDB-username>\\"</span><span class=\\"token punctuation\\">,</span> <span class=\\"token comment\\">// admin username</span>\\n    password<span class=\\"token punctuation\\">:</span> <span class=\\"token string\\">\\"&lt;CouchDB-password>\\"</span>  <span class=\\"token comment\\">// admin password</span>\\n<span class=\\"token punctuation\\">)</span>\\n<span class=\\"token keyword\\">let</span> couchDBClient <span class=\\"token operator\\">=</span> <span class=\\"token function\\">CouchDBClient</span><span class=\\"token punctuation\\">(</span>connectionProperties<span class=\\"token punctuation\\">:</span> properties<span class=\\"token punctuation\\">)</span></code></pre></div>\\n<p>The couchDBClient can then be used to create, retrieve and delete CouchDB databases. For our example we retrieve an existing CouchDB database:</p>\\n<div class=\\"gatsby-highlight\\" data-language=\\"swift\\"><pre class=\\"language-swift\\"><code class=\\"language-swift\\"><span class=\\"token comment\\">// Kitura CouchDB 2.0</span>\\ncouchDBClient<span class=\\"token punctuation\\">.</span><span class=\\"token function\\">dbExists</span><span class=\\"token punctuation\\">(</span><span class=\\"token string\\">\\"SampleDB\\"</span><span class=\\"token punctuation\\">)</span> <span class=\\"token punctuation\\">{</span> <span class=\\"token punctuation\\">(</span>exists<span class=\\"token punctuation\\">,</span> error<span class=\\"token punctuation\\">)</span> <span class=\\"token keyword\\">in</span>\\n    <span class=\\"token keyword\\">if</span> exists <span class=\\"token punctuation\\">{</span>\\n        <span class=\\"token keyword\\">let</span> database <span class=\\"token operator\\">=</span> couchDBClient<span class=\\"token punctuation\\">.</span><span class=\\"token function\\">database</span><span class=\\"token punctuation\\">(</span><span class=\\"token string\\">\\"SampleDB\\"</span><span class=\\"token punctuation\\">)</span>\\n        <span class=\\"token comment\\">// Use database</span>\\n    <span class=\\"token punctuation\\">}</span>\\n<span class=\\"token punctuation\\">}</span>\\n\\n<span class=\\"token comment\\">// Kitura CouchDB 3.0</span>\\ncouchDBClient<span class=\\"token punctuation\\">.</span><span class=\\"token function\\">retrieveDB</span><span class=\\"token punctuation\\">(</span><span class=\\"token string\\">\\"SampleDB\\"</span><span class=\\"token punctuation\\">)</span> <span class=\\"token punctuation\\">{</span> <span class=\\"token punctuation\\">(</span>database<span class=\\"token punctuation\\">,</span> error<span class=\\"token punctuation\\">)</span> <span class=\\"token keyword\\">in</span>\\n    <span class=\\"token keyword\\">if</span> <span class=\\"token keyword\\">let</span> database <span class=\\"token operator\\">=</span> database <span class=\\"token punctuation\\">{</span>\\n        <span class=\\"token comment\\">// Use database</span>\\n    <span class=\\"token punctuation\\">}</span>\\n<span class=\\"token punctuation\\">}</span></code></pre></div>\\n<p>In Kitura CouchDB 3.0, <code class=\\"language-text\\">dbExists</code> has been replaced with <code class=\\"language-text\\">retrieveDB</code>. This will check the database exists and, if it does, initialize a database instance for you in a single function.</p>\\n<h3 id=\\"database-crud-operations\\"><a href=\\"#database-crud-operations\\" aria-label=\\"database crud operations permalink\\" class=\\"anchor\\"><svg aria-hidden=\\"true\\" focusable=\\"false\\" height=\\"16\\" version=\\"1.1\\" viewBox=\\"0 0 16 16\\" width=\\"16\\"><path fill-rule=\\"evenodd\\" d=\\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\\"></path></svg></a>Database CRUD operations</h3>\\n<p>Your database instance is used to perform asynchronous HTTP requests with your documents. In our example, the requests are nested within the previous requests callback to ensure they execute in the desired order.</p>\\n<p>We will be using the following document:</p>\\n<div class=\\"gatsby-highlight\\" data-language=\\"swift\\"><pre class=\\"language-swift\\"><code class=\\"language-swift\\"><span class=\\"token keyword\\">var</span> myDocument <span class=\\"token operator\\">=</span> <span class=\\"token function\\">MyDocument</span><span class=\\"token punctuation\\">(</span>_id<span class=\\"token punctuation\\">:</span> <span class=\\"token string\\">\\"Kitura\\"</span><span class=\\"token punctuation\\">,</span> _rev<span class=\\"token punctuation\\">:</span> <span class=\\"token constant\\">nil</span><span class=\\"token punctuation\\">,</span> value<span class=\\"token punctuation\\">:</span> <span class=\\"token string\\">\\"Hello World\\"</span><span class=\\"token punctuation\\">)</span></code></pre></div>\\n<h4 id=\\"create-a-document\\"><a href=\\"#create-a-document\\" aria-label=\\"create a document permalink\\" class=\\"anchor\\"><svg aria-hidden=\\"true\\" focusable=\\"false\\" height=\\"16\\" version=\\"1.1\\" viewBox=\\"0 0 16 16\\" width=\\"16\\"><path fill-rule=\\"evenodd\\" d=\\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\\"></path></svg></a>Create a Document</h4>\\n<p>In Kitura CouchDB 2.0 we have to convert our object using SwiftyJSON, however in Kitura CouchDB 3.0, because we marked the object as a Document, it can be created directly:</p>\\n<div class=\\"gatsby-highlight\\" data-language=\\"swift\\"><pre class=\\"language-swift\\"><code class=\\"language-swift\\"><span class=\\"token comment\\">// Kitura CouchDB 2.0</span>\\n<span class=\\"token keyword\\">let</span> jsonDict <span class=\\"token operator\\">=</span> <span class=\\"token punctuation\\">[</span>\\n    <span class=\\"token string\\">\\"_id\\"</span><span class=\\"token punctuation\\">:</span> myDocument<span class=\\"token punctuation\\">.</span>_id<span class=\\"token punctuation\\">,</span>\\n    <span class=\\"token string\\">\\"value\\"</span><span class=\\"token punctuation\\">:</span> myDocument<span class=\\"token punctuation\\">.</span>value\\n<span class=\\"token punctuation\\">]</span>\\n<span class=\\"token keyword\\">let</span> json <span class=\\"token operator\\">=</span> <span class=\\"token function\\">JSON</span><span class=\\"token punctuation\\">(</span>jsonDict<span class=\\"token punctuation\\">)</span>\\ndatabase<span class=\\"token punctuation\\">.</span><span class=\\"token function\\">create</span><span class=\\"token punctuation\\">(</span>json<span class=\\"token punctuation\\">,</span> callback<span class=\\"token punctuation\\">:</span> <span class=\\"token punctuation\\">{</span> <span class=\\"token punctuation\\">(</span>id<span class=\\"token punctuation\\">:</span> <span class=\\"token builtin\\">String</span><span class=\\"token operator\\">?</span><span class=\\"token punctuation\\">,</span> rev<span class=\\"token punctuation\\">:</span> <span class=\\"token builtin\\">String</span><span class=\\"token operator\\">?</span><span class=\\"token punctuation\\">,</span> response<span class=\\"token punctuation\\">:</span> <span class=\\"token constant\\">JSON</span><span class=\\"token operator\\">?</span><span class=\\"token punctuation\\">,</span> error<span class=\\"token punctuation\\">:</span> <span class=\\"token builtin\\">NSError</span><span class=\\"token operator\\">?</span><span class=\\"token punctuation\\">)</span> <span class=\\"token keyword\\">in</span>\\n    <span class=\\"token keyword\\">if</span> <span class=\\"token keyword\\">let</span> id <span class=\\"token operator\\">=</span> id <span class=\\"token punctuation\\">{</span>\\n        <span class=\\"token function\\">print</span><span class=\\"token punctuation\\">(</span><span class=\\"token string\\">\\"Created document with id <span class=\\"token interpolation\\"><span class=\\"token delimiter variable\\">\\\\(</span>id<span class=\\"token delimiter variable\\">)</span></span>\\"</span><span class=\\"token punctuation\\">)</span>\\n        <span class=\\"token comment\\">// Retrieve document here</span>\\n    <span class=\\"token punctuation\\">}</span>\\n<span class=\\"token punctuation\\">}</span>\\n\\n<span class=\\"token comment\\">// Kitura CouchDB 3.0</span>\\ndatabase<span class=\\"token punctuation\\">.</span><span class=\\"token function\\">create</span><span class=\\"token punctuation\\">(</span>myDocument<span class=\\"token punctuation\\">)</span> <span class=\\"token punctuation\\">{</span> <span class=\\"token punctuation\\">(</span>response<span class=\\"token punctuation\\">,</span> error<span class=\\"token punctuation\\">)</span> <span class=\\"token keyword\\">in</span>\\n    <span class=\\"token keyword\\">if</span> <span class=\\"token keyword\\">let</span> response <span class=\\"token operator\\">=</span> response <span class=\\"token punctuation\\">{</span>\\n        <span class=\\"token function\\">print</span><span class=\\"token punctuation\\">(</span><span class=\\"token string\\">\\"Created document with id <span class=\\"token interpolation\\"><span class=\\"token delimiter variable\\">\\\\(</span>response<span class=\\"token punctuation\\">.</span>id<span class=\\"token delimiter variable\\">)</span></span>\\"</span><span class=\\"token punctuation\\">)</span>\\n        <span class=\\"token comment\\">// Retrieve document here</span>\\n    <span class=\\"token punctuation\\">}</span>\\n<span class=\\"token punctuation\\">}</span></code></pre></div>\\n<h4 id=\\"retrieve-a-document\\"><a href=\\"#retrieve-a-document\\" aria-label=\\"retrieve a document permalink\\" class=\\"anchor\\"><svg aria-hidden=\\"true\\" focusable=\\"false\\" height=\\"16\\" version=\\"1.1\\" viewBox=\\"0 0 16 16\\" width=\\"16\\"><path fill-rule=\\"evenodd\\" d=\\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\\"></path></svg></a>Retrieve a Document</h4>\\n<p>When retrieving a document in Kitura CouchDB 2.0, you had to parse the JSON back into your object. In Kitura CouchDB 3.0, you define the type you expect and it will automatically parse the JSON to your type:</p>\\n<div class=\\"gatsby-highlight\\" data-language=\\"swift\\"><pre class=\\"language-swift\\"><code class=\\"language-swift\\"><span class=\\"token comment\\">// Kitura CouchDB 2.0</span>\\ndatabase<span class=\\"token punctuation\\">.</span><span class=\\"token function\\">retrieve</span><span class=\\"token punctuation\\">(</span><span class=\\"token string\\">\\"Kitura\\"</span><span class=\\"token punctuation\\">)</span> <span class=\\"token punctuation\\">{</span> <span class=\\"token punctuation\\">(</span>document<span class=\\"token punctuation\\">:</span> <span class=\\"token constant\\">JSON</span><span class=\\"token operator\\">?</span><span class=\\"token punctuation\\">,</span> error<span class=\\"token punctuation\\">:</span> <span class=\\"token builtin\\">NSError</span><span class=\\"token operator\\">?</span><span class=\\"token punctuation\\">)</span> <span class=\\"token keyword\\">in</span>\\n    <span class=\\"token keyword\\">if</span> <span class=\\"token keyword\\">let</span> document <span class=\\"token operator\\">=</span> document<span class=\\"token punctuation\\">,</span>\\n        <span class=\\"token keyword\\">let</span> id <span class=\\"token operator\\">=</span> document<span class=\\"token operator\\">?</span><span class=\\"token punctuation\\">[</span><span class=\\"token string\\">\\"_id\\"</span><span class=\\"token punctuation\\">]</span><span class=\\"token punctuation\\">.</span>string<span class=\\"token punctuation\\">,</span>\\n        <span class=\\"token keyword\\">let</span> rev <span class=\\"token operator\\">=</span> document<span class=\\"token operator\\">?</span><span class=\\"token punctuation\\">[</span><span class=\\"token string\\">\\"_rev\\"</span><span class=\\"token punctuation\\">]</span><span class=\\"token punctuation\\">.</span>string<span class=\\"token punctuation\\">,</span>\\n        <span class=\\"token keyword\\">let</span> value <span class=\\"token operator\\">=</span> document<span class=\\"token operator\\">?</span><span class=\\"token punctuation\\">[</span><span class=\\"token string\\">\\"value\\"</span><span class=\\"token punctuation\\">]</span><span class=\\"token punctuation\\">.</span>string<span class=\\"token punctuation\\">,</span>\\n    <span class=\\"token punctuation\\">{</span>\\n        <span class=\\"token keyword\\">let</span> retrievedDoc <span class=\\"token operator\\">=</span> <span class=\\"token function\\">MyDocument</span><span class=\\"token punctuation\\">(</span>_id<span class=\\"token punctuation\\">:</span> id<span class=\\"token punctuation\\">,</span> _rev<span class=\\"token punctuation\\">:</span> rev<span class=\\"token punctuation\\">,</span> value<span class=\\"token punctuation\\">:</span> value<span class=\\"token punctuation\\">)</span>\\n        <span class=\\"token function\\">print</span><span class=\\"token punctuation\\">(</span><span class=\\"token string\\">\\"Document value: <span class=\\"token interpolation\\"><span class=\\"token delimiter variable\\">\\\\(</span>retrievedDoc<span class=\\"token punctuation\\">.</span>value<span class=\\"token delimiter variable\\">)</span></span>\\"</span><span class=\\"token punctuation\\">)</span>\\n        <span class=\\"token comment\\">// Update document here</span>\\n    <span class=\\"token punctuation\\">}</span>\\n<span class=\\"token punctuation\\">}</span>\\n\\n<span class=\\"token comment\\">// Kitura CouchDB 3.0</span>\\ndatabase<span class=\\"token punctuation\\">.</span><span class=\\"token function\\">retrieve</span><span class=\\"token punctuation\\">(</span><span class=\\"token string\\">\\"Kitura\\"</span><span class=\\"token punctuation\\">)</span> <span class=\\"token punctuation\\">{</span> <span class=\\"token punctuation\\">(</span>document<span class=\\"token punctuation\\">:</span> <span class=\\"token builtin\\">MyDocument</span><span class=\\"token operator\\">?</span><span class=\\"token punctuation\\">,</span> error<span class=\\"token punctuation\\">:</span> <span class=\\"token builtin\\">CouchDBError</span><span class=\\"token operator\\">?</span><span class=\\"token punctuation\\">)</span> <span class=\\"token keyword\\">in</span>\\n    <span class=\\"token keyword\\">if</span> <span class=\\"token keyword\\">var</span> retrievedDoc <span class=\\"token operator\\">=</span> document <span class=\\"token punctuation\\">{</span>\\n        <span class=\\"token function\\">print</span><span class=\\"token punctuation\\">(</span><span class=\\"token string\\">\\"Document value: <span class=\\"token interpolation\\"><span class=\\"token delimiter variable\\">\\\\(</span>retrievedDoc<span class=\\"token punctuation\\">.</span>value<span class=\\"token delimiter variable\\">)</span></span>\\"</span><span class=\\"token punctuation\\">)</span>\\n        <span class=\\"token comment\\">// Update document here</span>\\n    <span class=\\"token punctuation\\">}</span>\\n<span class=\\"token punctuation\\">}</span></code></pre></div>\\n<h4 id=\\"update-a-document\\"><a href=\\"#update-a-document\\" aria-label=\\"update a document permalink\\" class=\\"anchor\\"><svg aria-hidden=\\"true\\" focusable=\\"false\\" height=\\"16\\" version=\\"1.1\\" viewBox=\\"0 0 16 16\\" width=\\"16\\"><path fill-rule=\\"evenodd\\" d=\\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\\"></path></svg></a>Update a Document</h4>\\n<p>When updating a document in Kitura CouchDB 2.0, you had to convert to and from SwiftyJSON. In Kitura CouchDB 3.0, you can interact and update objects directly:</p>\\n<div class=\\"gatsby-highlight\\" data-language=\\"swift\\"><pre class=\\"language-swift\\"><code class=\\"language-swift\\"><span class=\\"token comment\\">// Kitura CouchDB 2.0</span>\\n<span class=\\"token keyword\\">let</span> newDoc <span class=\\"token operator\\">=</span> <span class=\\"token punctuation\\">[</span><span class=\\"token string\\">\\"value\\"</span><span class=\\"token punctuation\\">:</span> <span class=\\"token string\\">\\"New Value\\"</span><span class=\\"token punctuation\\">]</span>\\n<span class=\\"token keyword\\">let</span> newJson <span class=\\"token operator\\">=</span> <span class=\\"token function\\">JSON</span><span class=\\"token punctuation\\">(</span>newDoc<span class=\\"token punctuation\\">)</span>\\ndatabase<span class=\\"token punctuation\\">.</span><span class=\\"token function\\">update</span><span class=\\"token punctuation\\">(</span>retrievedDoc<span class=\\"token punctuation\\">.</span>_id<span class=\\"token punctuation\\">,</span> rev<span class=\\"token punctuation\\">:</span> retrievedDoc<span class=\\"token punctuation\\">.</span>_rev<span class=\\"token punctuation\\">,</span> document<span class=\\"token punctuation\\">:</span> newJson<span class=\\"token punctuation\\">)</span> <span class=\\"token punctuation\\">{</span> <span class=\\"token punctuation\\">(</span>rev<span class=\\"token punctuation\\">:</span> <span class=\\"token builtin\\">String</span><span class=\\"token operator\\">?</span><span class=\\"token punctuation\\">,</span> response<span class=\\"token punctuation\\">:</span> <span class=\\"token constant\\">JSON</span><span class=\\"token operator\\">?</span><span class=\\"token punctuation\\">,</span> error<span class=\\"token punctuation\\">:</span> <span class=\\"token builtin\\">NSError</span><span class=\\"token operator\\">?</span><span class=\\"token punctuation\\">)</span> <span class=\\"token keyword\\">in</span>\\n    <span class=\\"token keyword\\">if</span> <span class=\\"token keyword\\">let</span> rev <span class=\\"token operator\\">=</span> rev <span class=\\"token punctuation\\">{</span>\\n        <span class=\\"token function\\">print</span><span class=\\"token punctuation\\">(</span><span class=\\"token string\\">\\"Document updated. New rev: <span class=\\"token interpolation\\"><span class=\\"token delimiter variable\\">\\\\(</span>rev<span class=\\"token delimiter variable\\">)</span></span>\\"</span><span class=\\"token punctuation\\">)</span>\\n        <span class=\\"token comment\\">// Delete document here</span>\\n    <span class=\\"token punctuation\\">}</span>\\n<span class=\\"token punctuation\\">}</span>\\n\\n<span class=\\"token comment\\">// Kitura CouchDB 3.0</span>\\nretrievedDoc<span class=\\"token punctuation\\">.</span>value <span class=\\"token operator\\">=</span> <span class=\\"token string\\">\\"New Value\\"</span>\\ndatabase<span class=\\"token punctuation\\">.</span><span class=\\"token function\\">update</span><span class=\\"token punctuation\\">(</span>retrievedDoc<span class=\\"token punctuation\\">.</span>_id<span class=\\"token punctuation\\">,</span> rev<span class=\\"token punctuation\\">:</span> retrievedDoc<span class=\\"token punctuation\\">.</span>_rev<span class=\\"token punctuation\\">,</span> document<span class=\\"token punctuation\\">:</span> retrievedDoc<span class=\\"token punctuation\\">)</span> <span class=\\"token punctuation\\">{</span> <span class=\\"token punctuation\\">(</span>response<span class=\\"token punctuation\\">,</span> error<span class=\\"token punctuation\\">)</span> <span class=\\"token keyword\\">in</span>\\n    <span class=\\"token keyword\\">if</span> <span class=\\"token keyword\\">let</span> response <span class=\\"token operator\\">=</span> response <span class=\\"token punctuation\\">{</span>\\n        <span class=\\"token function\\">print</span><span class=\\"token punctuation\\">(</span><span class=\\"token string\\">\\"Document updated. New rev: <span class=\\"token interpolation\\"><span class=\\"token delimiter variable\\">\\\\(</span>response<span class=\\"token punctuation\\">.</span>rev<span class=\\"token delimiter variable\\">)</span></span>\\"</span><span class=\\"token punctuation\\">)</span>\\n        <span class=\\"token comment\\">// Delete document here</span>\\n    <span class=\\"token punctuation\\">}</span>\\n<span class=\\"token punctuation\\">}</span></code></pre></div>\\n<h4 id=\\"delete-a-document\\"><a href=\\"#delete-a-document\\" aria-label=\\"delete a document permalink\\" class=\\"anchor\\"><svg aria-hidden=\\"true\\" focusable=\\"false\\" height=\\"16\\" version=\\"1.1\\" viewBox=\\"0 0 16 16\\" width=\\"16\\"><path fill-rule=\\"evenodd\\" d=\\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\\"></path></svg></a>Delete a Document</h4>\\n<p>Since deleting a document only requires the id and rev strings, this API hasn’t changed between versions.</p>\\n<div class=\\"gatsby-highlight\\" data-language=\\"swift\\"><pre class=\\"language-swift\\"><code class=\\"language-swift\\"><span class=\\"token comment\\">// Kitura CouchDB 2.0</span>\\ndatabase<span class=\\"token punctuation\\">.</span><span class=\\"token function\\">delete</span><span class=\\"token punctuation\\">(</span>retrievedDoc<span class=\\"token punctuation\\">.</span>_id<span class=\\"token punctuation\\">,</span> rev<span class=\\"token punctuation\\">:</span> rev<span class=\\"token punctuation\\">)</span> <span class=\\"token punctuation\\">{</span> <span class=\\"token punctuation\\">(</span>error<span class=\\"token punctuation\\">:</span> <span class=\\"token builtin\\">NSError</span><span class=\\"token operator\\">?</span><span class=\\"token punctuation\\">)</span> <span class=\\"token keyword\\">in</span>\\n    <span class=\\"token keyword\\">if</span> error <span class=\\"token operator\\">==</span> <span class=\\"token constant\\">nil</span> <span class=\\"token punctuation\\">{</span>\\n        <span class=\\"token function\\">print</span><span class=\\"token punctuation\\">(</span><span class=\\"token string\\">\\"Document successfully deleted\\"</span><span class=\\"token punctuation\\">)</span>\\n    <span class=\\"token punctuation\\">}</span>\\n<span class=\\"token punctuation\\">}</span>\\n<span class=\\"token comment\\">// Kitura CouchDB 3.0</span>\\ndatabase<span class=\\"token punctuation\\">.</span><span class=\\"token function\\">delete</span><span class=\\"token punctuation\\">(</span>response<span class=\\"token punctuation\\">.</span>id<span class=\\"token punctuation\\">,</span> rev<span class=\\"token punctuation\\">:</span> response<span class=\\"token punctuation\\">.</span>rev<span class=\\"token punctuation\\">)</span> <span class=\\"token punctuation\\">{</span> <span class=\\"token punctuation\\">(</span>error<span class=\\"token punctuation\\">)</span> <span class=\\"token keyword\\">in</span>\\n    <span class=\\"token keyword\\">if</span> error <span class=\\"token operator\\">==</span> <span class=\\"token constant\\">nil</span> <span class=\\"token punctuation\\">{</span>\\n        <span class=\\"token function\\">print</span><span class=\\"token punctuation\\">(</span><span class=\\"token string\\">\\"Document successfully deleted\\"</span><span class=\\"token punctuation\\">)</span>\\n    <span class=\\"token punctuation\\">}</span>\\n<span class=\\"token punctuation\\">}</span></code></pre></div>\\n<h3 id=\\"summary\\"><a href=\\"#summary\\" aria-label=\\"summary permalink\\" class=\\"anchor\\"><svg aria-hidden=\\"true\\" focusable=\\"false\\" height=\\"16\\" version=\\"1.1\\" viewBox=\\"0 0 16 16\\" width=\\"16\\"><path fill-rule=\\"evenodd\\" d=\\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\\"></path></svg></a>Summary</h3>\\n<p>Let’s quickly sum up what we have achieved with the above code examples. We have:</p>\\n<ul>\\n<li>Connected to a CouchDB database</li>\\n<li>Defined our document</li>\\n<li>Saved an instance of our document</li>\\n<li>Retrieved the saved document</li>\\n<li>Updated our document in the database</li>\\n<li>Deleted our document</li>\\n</ul>\\n<p>Even using the most basic model we have saved ourselves twelve lines of code. As documents get more complicated, Kitura-CouchDB 3.0 removes even more boilerplate code, thereby simplifying the code and adding compile time safety.</p>\\n<hr>\\n<h2 id=\\"next-steps\\"><a href=\\"#next-steps\\" aria-label=\\"next steps permalink\\" class=\\"anchor\\"><svg aria-hidden=\\"true\\" focusable=\\"false\\" height=\\"16\\" version=\\"1.1\\" viewBox=\\"0 0 16 16\\" width=\\"16\\"><path fill-rule=\\"evenodd\\" d=\\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\\"></path></svg></a>Next steps</h2>\\n<p>If you would like to run this example, or learn more about Kitura-CouchDB, <a href=\\"https://github.com/IBM-Swift/Kitura-CouchDB\\">check it out on GitHub</a>.</p>\\n<p>If you would like to learn about more features of Kitura-CouchDB such as bulk requests, design documents and attachments, <a href=\\"https://ibm-swift.github.io/Kitura-CouchDB/index.html\\">visit our API reference</a>.</p>\\n<p>Any questions or comments? Please join the Kitura community on <a href=\\"http://swift-at-ibm-slack.mybluemix.net/?cm_sp=dw-bluemix-_-swift-_-devcenter&#x26;_ga=2.150897590.186671014.1570626561-1743126121.1570022962&#x26;cm_mc_uid=83263075142115698398229&#x26;cm_mc_sid_50200000=53695431570707266328\\">Slack</a>!</p>","frontmatter":{"path":"/blogs/kitura-couchdb-cloudant-nosql-database","title":"Kitura CouchDB 3.0: Persisting Codable Swift objects in a CouchDB/Cloudant NoSQL Database"}}},{"node":{"html":"<p>In enterprise businesses, microservices are designed according to best architectural practice and implemented to deliver the business solution in the form of services. These services are often consumed by HTTP REST API calls. In this blog, I will explain how to approach asynchronous programming on server-side Swift using <a href=\\"https://developer.apple.com/library/content/documentation/General/Conceptual/ConcurrencyProgrammingGuide/OperationQueues/OperationQueues.html\\">Grand Central Dispatch (GCD) and OperationQueue</a>.</p>\\n<p>In general, the backend microservices execute heavy CPU intensive or I/O processes such as DB CRUD operations, component level communication, processing of media files etc. In iOS side Swift programming, it’s general practice to make use of closures and call back methods to make asynchronous calls. Server-side Swift programming allows developers to use the same closure and call back methods without any limitations for asynchronous tasks. However, when compared to iOS programming, the server-side API code can require significantly more asynchronous calls in a single module block. This leads to multiple call back closures and nested async code. An alternate native solution is to make use of GCD and OperationQueue methods. There are some open source Swift libraries, such as <a href=\\"https://github.com/mxcl/PromiseKit\\">PromiseKit</a> to handle complex functions, which use GCD and OperationQueue concepts under the hood, but this article is going to show you a native way of coding this yourself.</p>\\n<p>I explain the solution and its benefits with a simple example below using <a href=\\"https://github.com/IBM-Swift/Kitura\\">Kitura</a>.</p>\\n<hr>\\n<h2 id=\\"cpu-intensive-processes\\"><a href=\\"#cpu-intensive-processes\\" aria-label=\\"cpu intensive processes permalink\\" class=\\"anchor\\"><svg aria-hidden=\\"true\\" focusable=\\"false\\" height=\\"16\\" version=\\"1.1\\" viewBox=\\"0 0 16 16\\" width=\\"16\\"><path fill-rule=\\"evenodd\\" d=\\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\\"></path></svg></a>CPU Intensive Processes</h2>\\n<div class=\\"gatsby-highlight\\" data-language=\\"text\\"><pre class=\\"language-text\\"><code class=\\"language-text\\">Let&#39;s name these processes to refer in our example codes and add a &#39;time to execute&#39; weight in terms of seconds. P1 = 3 sec, P2 = 4 sec, P3 = 2 sec, P4 = 6 sec, P5 = 1 sec</code></pre></div>\\n<p>These functions are simulated using the sleep method to consume a few seconds of execution time and are defined as:</p>\\n<div class=\\"gatsby-highlight\\" data-language=\\"swift\\"><pre class=\\"language-swift\\"><code class=\\"language-swift\\"><span class=\\"token keyword\\">func</span> <span class=\\"token function\\">p1</span><span class=\\"token punctuation\\">(</span><span class=\\"token number\\">_</span> onCompletion<span class=\\"token punctuation\\">:</span> @escaping <span class=\\"token punctuation\\">(</span><span class=\\"token number\\">_</span> output<span class=\\"token punctuation\\">:</span><span class=\\"token builtin\\">String</span><span class=\\"token punctuation\\">)</span><span class=\\"token operator\\">-</span><span class=\\"token operator\\">></span> <span class=\\"token builtin\\">Void</span><span class=\\"token punctuation\\">)</span> <span class=\\"token punctuation\\">{</span>\\n    <span class=\\"token function\\">sleep</span><span class=\\"token punctuation\\">(</span><span class=\\"token number\\">3</span><span class=\\"token punctuation\\">)</span>\\n    <span class=\\"token function\\">onCompletion</span><span class=\\"token punctuation\\">(</span><span class=\\"token string\\">\\"p1\\"</span><span class=\\"token punctuation\\">)</span>\\n<span class=\\"token punctuation\\">}</span>\\n\\n<span class=\\"token keyword\\">func</span> <span class=\\"token function\\">p2</span><span class=\\"token punctuation\\">(</span><span class=\\"token number\\">_</span> onCompletion<span class=\\"token punctuation\\">:</span> @escaping <span class=\\"token punctuation\\">(</span><span class=\\"token number\\">_</span> output<span class=\\"token punctuation\\">:</span><span class=\\"token builtin\\">String</span><span class=\\"token punctuation\\">)</span><span class=\\"token operator\\">-</span><span class=\\"token operator\\">></span> <span class=\\"token builtin\\">Void</span><span class=\\"token punctuation\\">)</span> <span class=\\"token punctuation\\">{</span>\\n    <span class=\\"token function\\">sleep</span><span class=\\"token punctuation\\">(</span><span class=\\"token number\\">4</span><span class=\\"token punctuation\\">)</span>\\n    <span class=\\"token function\\">onCompletion</span><span class=\\"token punctuation\\">(</span><span class=\\"token string\\">\\"p2\\"</span><span class=\\"token punctuation\\">)</span>\\n<span class=\\"token punctuation\\">}</span>\\n<span class=\\"token punctuation\\">.</span><span class=\\"token punctuation\\">.</span><span class=\\"token punctuation\\">.</span></code></pre></div>\\n<hr>\\n<h2 id=\\"implementation-scenario\\"><a href=\\"#implementation-scenario\\" aria-label=\\"implementation scenario permalink\\" class=\\"anchor\\"><svg aria-hidden=\\"true\\" focusable=\\"false\\" height=\\"16\\" version=\\"1.1\\" viewBox=\\"0 0 16 16\\" width=\\"16\\"><path fill-rule=\\"evenodd\\" d=\\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\\"></path></svg></a>Implementation Scenario</h2>\\n<p>In our example, we construct a HTTP GET API, say /dataIntensiveJob, that requires all of the above processes from P1 – P5. These processes can be dependent or independent and the module can be programmed with nested asynchronous closures or using GCD. This means we have four types of implementation:</p>\\n<ul>\\n<li>“/dataIntensiveJobAsync/independent”</li>\\n<li>“/dataIntensiveJobGCD/independent”</li>\\n<li>“/dataIntensiveJobAsync/dependent”</li>\\n<li>“/dataIntensiveJobGCD/dependent”</li>\\n</ul>\\n<h2 id=\\"1-independent-task-with-traditional-nested-async-closure-blocks\\"><a href=\\"#1-independent-task-with-traditional-nested-async-closure-blocks\\" aria-label=\\"1 independent task with traditional nested async closure blocks permalink\\" class=\\"anchor\\"><svg aria-hidden=\\"true\\" focusable=\\"false\\" height=\\"16\\" version=\\"1.1\\" viewBox=\\"0 0 16 16\\" width=\\"16\\"><path fill-rule=\\"evenodd\\" d=\\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\\"></path></svg></a>1. Independent Task with Traditional Nested Async Closure Blocks</h2>\\n<p>Typically, the module here requires a set of independent tasks to be completed. To avoid blocking the main thread, they can be programmed to run in multiple async blocks irrespective of order. Also, since there is no mechanism in place to notify about completion of all the tasks, operations could be sequenced in a nested async block. Hence, the completion of all the tasks is identified by completion of the innermost block.</p>\\n<div class=\\"gatsby-highlight\\" data-language=\\"swift\\"><pre class=\\"language-swift\\"><code class=\\"language-swift\\"><span class=\\"token keyword\\">func</span> <span class=\\"token function\\">executeIndependentHeavyProcesses</span><span class=\\"token punctuation\\">(</span><span class=\\"token number\\">_</span> onCompletion<span class=\\"token punctuation\\">:</span> @escaping <span class=\\"token punctuation\\">(</span><span class=\\"token number\\">_</span> outputMessage<span class=\\"token punctuation\\">:</span><span class=\\"token punctuation\\">[</span><span class=\\"token builtin\\">String</span><span class=\\"token punctuation\\">]</span><span class=\\"token punctuation\\">)</span><span class=\\"token operator\\">-</span><span class=\\"token operator\\">></span> <span class=\\"token builtin\\">Void</span><span class=\\"token punctuation\\">)</span> <span class=\\"token punctuation\\">{</span>\\n    <span class=\\"token keyword\\">self</span><span class=\\"token punctuation\\">.</span>p1 <span class=\\"token punctuation\\">{</span> <span class=\\"token punctuation\\">(</span>output<span class=\\"token punctuation\\">)</span> <span class=\\"token keyword\\">in</span>\\n      <span class=\\"token keyword\\">self</span><span class=\\"token punctuation\\">.</span>output<span class=\\"token punctuation\\">.</span><span class=\\"token function\\">append</span><span class=\\"token punctuation\\">(</span>output<span class=\\"token punctuation\\">)</span>\\n      <span class=\\"token keyword\\">self</span><span class=\\"token punctuation\\">.</span><span class=\\"token function\\">p2</span><span class=\\"token punctuation\\">(</span><span class=\\"token punctuation\\">{</span> <span class=\\"token punctuation\\">(</span>output<span class=\\"token punctuation\\">)</span> <span class=\\"token keyword\\">in</span>\\n        <span class=\\"token keyword\\">self</span><span class=\\"token punctuation\\">.</span>output<span class=\\"token punctuation\\">.</span><span class=\\"token function\\">append</span><span class=\\"token punctuation\\">(</span>output<span class=\\"token punctuation\\">)</span>\\n        <span class=\\"token keyword\\">self</span><span class=\\"token punctuation\\">.</span><span class=\\"token function\\">p3</span><span class=\\"token punctuation\\">(</span><span class=\\"token punctuation\\">{</span> <span class=\\"token punctuation\\">(</span>output<span class=\\"token punctuation\\">)</span> <span class=\\"token keyword\\">in</span>\\n          <span class=\\"token keyword\\">self</span><span class=\\"token punctuation\\">.</span>output<span class=\\"token punctuation\\">.</span><span class=\\"token function\\">append</span><span class=\\"token punctuation\\">(</span>output<span class=\\"token punctuation\\">)</span>\\n          <span class=\\"token keyword\\">self</span><span class=\\"token punctuation\\">.</span><span class=\\"token function\\">p4</span><span class=\\"token punctuation\\">(</span><span class=\\"token punctuation\\">{</span> <span class=\\"token punctuation\\">(</span>output<span class=\\"token punctuation\\">)</span> <span class=\\"token keyword\\">in</span>\\n            <span class=\\"token keyword\\">self</span><span class=\\"token punctuation\\">.</span>output<span class=\\"token punctuation\\">.</span><span class=\\"token function\\">append</span><span class=\\"token punctuation\\">(</span>output<span class=\\"token punctuation\\">)</span>\\n            <span class=\\"token keyword\\">self</span><span class=\\"token punctuation\\">.</span><span class=\\"token function\\">p5</span><span class=\\"token punctuation\\">(</span><span class=\\"token punctuation\\">{</span> <span class=\\"token punctuation\\">(</span>output<span class=\\"token punctuation\\">)</span> <span class=\\"token keyword\\">in</span>\\n              <span class=\\"token keyword\\">self</span><span class=\\"token punctuation\\">.</span>output<span class=\\"token punctuation\\">.</span><span class=\\"token function\\">append</span><span class=\\"token punctuation\\">(</span>output<span class=\\"token punctuation\\">)</span>\\n              <span class=\\"token function\\">onCompletion</span><span class=\\"token punctuation\\">(</span><span class=\\"token keyword\\">self</span><span class=\\"token punctuation\\">.</span>output<span class=\\"token punctuation\\">)</span>\\n            <span class=\\"token punctuation\\">}</span><span class=\\"token punctuation\\">)</span> <span class=\\"token punctuation\\">}</span><span class=\\"token punctuation\\">)</span> <span class=\\"token punctuation\\">}</span><span class=\\"token punctuation\\">)</span> <span class=\\"token punctuation\\">}</span><span class=\\"token punctuation\\">)</span> <span class=\\"token punctuation\\">}</span> <span class=\\"token punctuation\\">}</span></code></pre></div>\\n<p>The only advantage of programming this way is that we could write the code quickly. However, this forms a pyramid structure when nested further and becomes complex as the number of lines of code increases. It also ends up having many open and close brackets which makes the code extremely difficult to read. Here, the processes are executed in a defined sequence. The total response time is the sum of the execution time of the individual processes.</p>\\n<div class=\\"gatsby-highlight\\" data-language=\\"text\\"><pre class=\\"language-text\\"><code class=\\"language-text\\">Execution Order:  P1 -&gt; P2 -&gt; P3 -&gt; P4 -&gt; P5\\nAPI Execution Total Response Time: 16025 ms</code></pre></div>\\n<h2 id=\\"2-independent-task-with-operation-queue\\"><a href=\\"#2-independent-task-with-operation-queue\\" aria-label=\\"2 independent task with operation queue permalink\\" class=\\"anchor\\"><svg aria-hidden=\\"true\\" focusable=\\"false\\" height=\\"16\\" version=\\"1.1\\" viewBox=\\"0 0 16 16\\" width=\\"16\\"><path fill-rule=\\"evenodd\\" d=\\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\\"></path></svg></a>2. Independent Task with Operation Queue</h2>\\n<p>The alternative approach for executing the independent tasks is to use OperationQueue. Here an instance of OperationQueue is created. Operation queues are concurrent by default. We can also sequence and serialize the queue with optional attributes. Independent tasks are added as operations to the queue in a block of code.</p>\\n<p>At the end of the module <code class=\\"language-text\\">self.operationQueue.waitUntilAllOperationsAreFinished()</code> is called – to ensure that the next line of the completion callback method is invoked only when all the submitted operations have been executed. We can create multiple operation queues if required. Below is the equivalent code using OperationQueue methods:</p>\\n<div class=\\"gatsby-highlight\\" data-language=\\"swift\\"><pre class=\\"language-swift\\"><code class=\\"language-swift\\"><span class=\\"token keyword\\">let</span> operationQueue <span class=\\"token operator\\">=</span> <span class=\\"token function\\">OperationQueue</span><span class=\\"token punctuation\\">(</span><span class=\\"token punctuation\\">)</span>\\n<span class=\\"token keyword\\">var</span> output <span class=\\"token operator\\">=</span> <span class=\\"token punctuation\\">[</span><span class=\\"token builtin\\">String</span><span class=\\"token punctuation\\">]</span><span class=\\"token punctuation\\">(</span><span class=\\"token punctuation\\">)</span>\\n\\n  <span class=\\"token keyword\\">func</span> <span class=\\"token function\\">executeIndependentHeavyProcesses</span><span class=\\"token punctuation\\">(</span><span class=\\"token number\\">_</span> onCompletion<span class=\\"token punctuation\\">:</span> @escaping <span class=\\"token punctuation\\">(</span><span class=\\"token number\\">_</span> outputMessage<span class=\\"token punctuation\\">:</span><span class=\\"token punctuation\\">[</span><span class=\\"token builtin\\">String</span><span class=\\"token punctuation\\">]</span><span class=\\"token punctuation\\">)</span><span class=\\"token operator\\">-</span><span class=\\"token operator\\">></span> <span class=\\"token builtin\\">Void</span><span class=\\"token punctuation\\">)</span> <span class=\\"token punctuation\\">{</span>\\n    <span class=\\"token keyword\\">self</span><span class=\\"token punctuation\\">.</span>operationQueue<span class=\\"token punctuation\\">.</span>addOperation<span class=\\"token punctuation\\">{</span>\\n      <span class=\\"token keyword\\">self</span><span class=\\"token punctuation\\">.</span><span class=\\"token function\\">p1</span><span class=\\"token punctuation\\">(</span><span class=\\"token punctuation\\">{</span> <span class=\\"token punctuation\\">(</span>output<span class=\\"token punctuation\\">)</span> <span class=\\"token keyword\\">in</span>\\n        <span class=\\"token keyword\\">self</span><span class=\\"token punctuation\\">.</span>output<span class=\\"token punctuation\\">.</span><span class=\\"token function\\">append</span><span class=\\"token punctuation\\">(</span>output<span class=\\"token punctuation\\">)</span>\\n      <span class=\\"token punctuation\\">}</span><span class=\\"token punctuation\\">)</span>\\n    <span class=\\"token punctuation\\">}</span>\\n    <span class=\\"token keyword\\">self</span><span class=\\"token punctuation\\">.</span>operationQueue<span class=\\"token punctuation\\">.</span>addOperation<span class=\\"token punctuation\\">{</span>\\n      <span class=\\"token keyword\\">self</span><span class=\\"token punctuation\\">.</span><span class=\\"token function\\">p2</span><span class=\\"token punctuation\\">(</span><span class=\\"token punctuation\\">{</span> <span class=\\"token punctuation\\">(</span>output<span class=\\"token punctuation\\">)</span> <span class=\\"token keyword\\">in</span>\\n        <span class=\\"token keyword\\">self</span><span class=\\"token punctuation\\">.</span>output<span class=\\"token punctuation\\">.</span><span class=\\"token function\\">append</span><span class=\\"token punctuation\\">(</span>output<span class=\\"token punctuation\\">)</span>\\n      <span class=\\"token punctuation\\">}</span><span class=\\"token punctuation\\">)</span>\\n    <span class=\\"token punctuation\\">}</span>\\n    <span class=\\"token comment\\">// Other processes</span>\\n    <span class=\\"token punctuation\\">.</span><span class=\\"token punctuation\\">.</span><span class=\\"token punctuation\\">.</span>\\n\\n    <span class=\\"token keyword\\">self</span><span class=\\"token punctuation\\">.</span>operationQueue<span class=\\"token punctuation\\">.</span><span class=\\"token function\\">waitUntilAllOperationsAreFinished</span><span class=\\"token punctuation\\">(</span><span class=\\"token punctuation\\">)</span>\\n    <span class=\\"token function\\">onCompletion</span><span class=\\"token punctuation\\">(</span><span class=\\"token keyword\\">self</span><span class=\\"token punctuation\\">.</span>output<span class=\\"token punctuation\\">)</span>\\n  <span class=\\"token punctuation\\">}</span></code></pre></div>\\n<p>Although the number of lines of code is slightly more than in the nested async approach, this is much better than the first approach for the following reasons:</p>\\n<ul>\\n<li>Independent tasks are executed concurrently in the multiple sub-threads which gives a faster response time.</li>\\n<li>This code has better readability and control. Each block is divided into sub-blocks and hence, it is easy to follow up with brackets. In fact, the above defined task can be assigned to an operation variable and added to the same or different queues for reusability.</li>\\n<li>QoS factors and thread priority can be set as attributes on these queues, unlike the async closure block which uses the system default background thread.</li>\\n</ul>\\n<p>Here the execution order depends on the submission time of each task to the queue as the tasks are executed in parallel. Hence the total response time is the maximum possible parallel execution time.</p>\\n<div class=\\"gatsby-highlight\\" data-language=\\"text\\"><pre class=\\"language-text\\"><code class=\\"language-text\\">Execution Order:  P5 -&gt; P3 -&gt; P1 -&gt; P2 -&gt; P4\\nAPI Execution Total Response Time:  6025 ms</code></pre></div>\\n<h2 id=\\"3-dependent-task-with-nested-async-closure-blocks\\"><a href=\\"#3-dependent-task-with-nested-async-closure-blocks\\" aria-label=\\"3 dependent task with nested async closure blocks permalink\\" class=\\"anchor\\"><svg aria-hidden=\\"true\\" focusable=\\"false\\" height=\\"16\\" version=\\"1.1\\" viewBox=\\"0 0 16 16\\" width=\\"16\\"><path fill-rule=\\"evenodd\\" d=\\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\\"></path></svg></a>3. Dependent Task with Nested Async Closure Blocks</h2>\\n<p>Here, the module requires a defined set of subtasks to be completed. A few or all the subtasks are dependent on other subtask(s) within the same module. Hence the module expects all the subtasks to be completed in a defined execution order. The nesting should be done carefully to preserve the execution order. Even here, to get notified on the last completed task, it is required to chain both dependent and the independent tasks together. Let’s say that the module requires four tasks – P1, P2, P3 &#x26; P4 to be completed. P1 and P2 are mutually dependent and P3 and P4 are mutually dependent. Then the code looks similar to the first use case.</p>\\n<div class=\\"gatsby-highlight\\" data-language=\\"swift\\"><pre class=\\"language-swift\\"><code class=\\"language-swift\\"><span class=\\"token keyword\\">func</span> <span class=\\"token function\\">executeDependentHeavyProcesses</span><span class=\\"token punctuation\\">(</span><span class=\\"token number\\">_</span> onCompletion<span class=\\"token punctuation\\">:</span> @escaping <span class=\\"token punctuation\\">(</span><span class=\\"token number\\">_</span> outputMessage<span class=\\"token punctuation\\">:</span><span class=\\"token punctuation\\">[</span><span class=\\"token builtin\\">String</span><span class=\\"token punctuation\\">]</span><span class=\\"token punctuation\\">)</span><span class=\\"token operator\\">-</span><span class=\\"token operator\\">></span> <span class=\\"token builtin\\">Void</span><span class=\\"token punctuation\\">)</span> <span class=\\"token punctuation\\">{</span>\\n    <span class=\\"token keyword\\">self</span><span class=\\"token punctuation\\">.</span>p1 <span class=\\"token punctuation\\">{</span> <span class=\\"token punctuation\\">(</span>output<span class=\\"token punctuation\\">)</span> <span class=\\"token keyword\\">in</span>\\n      <span class=\\"token keyword\\">self</span><span class=\\"token punctuation\\">.</span>output<span class=\\"token punctuation\\">.</span><span class=\\"token function\\">append</span><span class=\\"token punctuation\\">(</span>output<span class=\\"token punctuation\\">)</span>\\n      <span class=\\"token keyword\\">self</span><span class=\\"token punctuation\\">.</span><span class=\\"token function\\">p2</span><span class=\\"token punctuation\\">(</span><span class=\\"token punctuation\\">{</span> <span class=\\"token punctuation\\">(</span>output<span class=\\"token punctuation\\">)</span> <span class=\\"token keyword\\">in</span>\\n        <span class=\\"token keyword\\">self</span><span class=\\"token punctuation\\">.</span>output<span class=\\"token punctuation\\">.</span><span class=\\"token function\\">append</span><span class=\\"token punctuation\\">(</span>output<span class=\\"token punctuation\\">)</span>\\n        <span class=\\"token keyword\\">self</span><span class=\\"token punctuation\\">.</span><span class=\\"token function\\">p3</span><span class=\\"token punctuation\\">(</span><span class=\\"token punctuation\\">{</span> <span class=\\"token punctuation\\">(</span>output<span class=\\"token punctuation\\">)</span> <span class=\\"token keyword\\">in</span>\\n          <span class=\\"token keyword\\">self</span><span class=\\"token punctuation\\">.</span>output<span class=\\"token punctuation\\">.</span><span class=\\"token function\\">append</span><span class=\\"token punctuation\\">(</span>output<span class=\\"token punctuation\\">)</span>\\n          <span class=\\"token keyword\\">self</span><span class=\\"token punctuation\\">.</span><span class=\\"token function\\">p4</span><span class=\\"token punctuation\\">(</span><span class=\\"token punctuation\\">{</span> <span class=\\"token punctuation\\">(</span>output<span class=\\"token punctuation\\">)</span> <span class=\\"token keyword\\">in</span>\\n            <span class=\\"token keyword\\">self</span><span class=\\"token punctuation\\">.</span>output<span class=\\"token punctuation\\">.</span><span class=\\"token function\\">append</span><span class=\\"token punctuation\\">(</span>output<span class=\\"token punctuation\\">)</span>\\n            <span class=\\"token function\\">onCompletion</span><span class=\\"token punctuation\\">(</span><span class=\\"token keyword\\">self</span><span class=\\"token punctuation\\">.</span>output<span class=\\"token punctuation\\">)</span>\\n          <span class=\\"token punctuation\\">}</span><span class=\\"token punctuation\\">)</span> <span class=\\"token punctuation\\">}</span><span class=\\"token punctuation\\">)</span> <span class=\\"token punctuation\\">}</span><span class=\\"token punctuation\\">)</span>  <span class=\\"token punctuation\\">}</span>  <span class=\\"token punctuation\\">}</span></code></pre></div>\\n<p>This approach is identical to the first (Independent task with nested Async Closure), except for the fact that the execution order within dependent subtasks should be preserved. It could be P1->P2->P3->P4 or P3->P4->P1->P2. It has all the disadvantages of the first use case and the total response time is the sum of the execution of the individual processes.</p>\\n<div class=\\"gatsby-highlight\\" data-language=\\"text\\"><pre class=\\"language-text\\"><code class=\\"language-text\\">Execution Order:  P1 -&gt; P2 -&gt; P3 -&gt; P4\\nAPI Execution Total Response Time: 15029 ms</code></pre></div>\\n<h2 id=\\"4-dependent-task-with-gcd-and-operationqueue\\"><a href=\\"#4-dependent-task-with-gcd-and-operationqueue\\" aria-label=\\"4 dependent task with gcd and operationqueue permalink\\" class=\\"anchor\\"><svg aria-hidden=\\"true\\" focusable=\\"false\\" height=\\"16\\" version=\\"1.1\\" viewBox=\\"0 0 16 16\\" width=\\"16\\"><path fill-rule=\\"evenodd\\" d=\\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\\"></path></svg></a>4. Dependent Task with GCD and OperationQueue</h2>\\n<p>The alternate solution is to use GCD for complex use cases, in addition to the OperationQueue explained in scenario 2. When the subtasks are dependent, maintaining the order of execution becomes critical and OperationQueue’s concurrent execution might not work well. To address this, the implementation could be extended with GCD, Serialized OperationQueue, simple Async blocks etc. The variations are listed below:</p>\\n<h3 id=\\"a-when-the-module-contains-few-dependent-tasks-that-can-be-grouped\\"><a href=\\"#a-when-the-module-contains-few-dependent-tasks-that-can-be-grouped\\" aria-label=\\"a when the module contains few dependent tasks that can be grouped permalink\\" class=\\"anchor\\"><svg aria-hidden=\\"true\\" focusable=\\"false\\" height=\\"16\\" version=\\"1.1\\" viewBox=\\"0 0 16 16\\" width=\\"16\\"><path fill-rule=\\"evenodd\\" d=\\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\\"></path></svg></a>a. When the module contains few dependent tasks that can be grouped</h3>\\n<p>Here, we can group all the dependent tasks and run them in nested blocks. In our example, P1 and P2 make one group and P3 and P4 make another group. Since the dependency is between subtasks within a group and the groups are independent of each other, we submit the group block to the Operation Queue. Now, to obtain the completion status of each block, we create a GCD DispatchGroup object called ‘dispatchGroup’. Every subtask will have a group entry and exit code. The <code class=\\"language-text\\">dispatchGroup.wait()</code> method is called at the end of the module which blocks further execution, but not on the main queue.</p>\\n<p>Here, OperationQueue acts more like a simple background GCD Queue. So, as an alternative, we can also use a simple GCD concurrent Queue and submit the group.</p>\\n<h3 id=\\"b-when-the-module-contains-dependent-subtasks-that-cannot-be-grouped\\"><a href=\\"#b-when-the-module-contains-dependent-subtasks-that-cannot-be-grouped\\" aria-label=\\"b when the module contains dependent subtasks that cannot be grouped permalink\\" class=\\"anchor\\"><svg aria-hidden=\\"true\\" focusable=\\"false\\" height=\\"16\\" version=\\"1.1\\" viewBox=\\"0 0 16 16\\" width=\\"16\\"><path fill-rule=\\"evenodd\\" d=\\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\\"></path></svg></a>b. When the module contains dependent subtasks that cannot be grouped</h3>\\n<p>In this case, we can still use the OperationQueue execution sequence but with the ‘notification API’ to control the sequence of execution. When the number of subtasks is small, it is better to go with nested completion blocks to keep the code simple, when the subtask is complex consider sequencing the Operations.</p>\\n<p>Below is the code snippet that uses the grouping of subtask and GCD Dispatch Group.</p>\\n<div class=\\"gatsby-highlight\\" data-language=\\"swift\\"><pre class=\\"language-swift\\"><code class=\\"language-swift\\"><span class=\\"token keyword\\">let</span> dispatchGroup <span class=\\"token operator\\">=</span> <span class=\\"token function\\">DispatchGroup</span><span class=\\"token punctuation\\">(</span><span class=\\"token punctuation\\">)</span>\\n\\n<span class=\\"token keyword\\">func</span> <span class=\\"token function\\">executeDependentHeavyProcesses</span><span class=\\"token punctuation\\">(</span><span class=\\"token number\\">_</span> onCompletion<span class=\\"token punctuation\\">:</span> @escaping <span class=\\"token punctuation\\">(</span><span class=\\"token number\\">_</span> outputMessage<span class=\\"token punctuation\\">:</span><span class=\\"token punctuation\\">[</span><span class=\\"token builtin\\">String</span><span class=\\"token punctuation\\">]</span><span class=\\"token punctuation\\">)</span><span class=\\"token operator\\">-</span><span class=\\"token operator\\">></span> <span class=\\"token builtin\\">Void</span><span class=\\"token punctuation\\">)</span> <span class=\\"token punctuation\\">{</span>\\n\\n    <span class=\\"token keyword\\">self</span><span class=\\"token punctuation\\">.</span>operationQueue<span class=\\"token punctuation\\">.</span>addOperation <span class=\\"token punctuation\\">{</span>\\n      <span class=\\"token keyword\\">self</span><span class=\\"token punctuation\\">.</span>dispatchGroup<span class=\\"token punctuation\\">.</span><span class=\\"token function\\">enter</span><span class=\\"token punctuation\\">(</span><span class=\\"token punctuation\\">)</span>\\n\\n      <span class=\\"token keyword\\">self</span><span class=\\"token punctuation\\">.</span><span class=\\"token function\\">p1</span><span class=\\"token punctuation\\">(</span><span class=\\"token punctuation\\">{</span> <span class=\\"token punctuation\\">(</span>output<span class=\\"token punctuation\\">)</span> <span class=\\"token keyword\\">in</span>\\n        <span class=\\"token keyword\\">self</span><span class=\\"token punctuation\\">.</span>output<span class=\\"token punctuation\\">.</span><span class=\\"token function\\">append</span><span class=\\"token punctuation\\">(</span>output<span class=\\"token punctuation\\">)</span>\\n        <span class=\\"token keyword\\">self</span><span class=\\"token punctuation\\">.</span><span class=\\"token function\\">p2</span><span class=\\"token punctuation\\">(</span><span class=\\"token punctuation\\">{</span> <span class=\\"token punctuation\\">(</span>output<span class=\\"token punctuation\\">)</span> <span class=\\"token keyword\\">in</span>\\n          <span class=\\"token keyword\\">self</span><span class=\\"token punctuation\\">.</span>output<span class=\\"token punctuation\\">.</span><span class=\\"token function\\">append</span><span class=\\"token punctuation\\">(</span>output<span class=\\"token punctuation\\">)</span>\\n          <span class=\\"token keyword\\">self</span><span class=\\"token punctuation\\">.</span>dispatchGroup<span class=\\"token punctuation\\">.</span><span class=\\"token function\\">leave</span><span class=\\"token punctuation\\">(</span><span class=\\"token punctuation\\">)</span>\\n        <span class=\\"token punctuation\\">}</span><span class=\\"token punctuation\\">)</span> <span class=\\"token punctuation\\">}</span><span class=\\"token punctuation\\">)</span>\\n    <span class=\\"token punctuation\\">}</span>\\n\\n    <span class=\\"token keyword\\">self</span><span class=\\"token punctuation\\">.</span>operationQueue<span class=\\"token punctuation\\">.</span>addOperation <span class=\\"token punctuation\\">{</span>\\n      <span class=\\"token keyword\\">self</span><span class=\\"token punctuation\\">.</span>dispatchGroup<span class=\\"token punctuation\\">.</span><span class=\\"token function\\">enter</span><span class=\\"token punctuation\\">(</span><span class=\\"token punctuation\\">)</span>\\n\\n      <span class=\\"token keyword\\">self</span><span class=\\"token punctuation\\">.</span><span class=\\"token function\\">p3</span><span class=\\"token punctuation\\">(</span><span class=\\"token punctuation\\">{</span> <span class=\\"token punctuation\\">(</span>output<span class=\\"token punctuation\\">)</span> <span class=\\"token keyword\\">in</span>\\n        <span class=\\"token keyword\\">self</span><span class=\\"token punctuation\\">.</span>output<span class=\\"token punctuation\\">.</span><span class=\\"token function\\">append</span><span class=\\"token punctuation\\">(</span>output<span class=\\"token punctuation\\">)</span>\\n        <span class=\\"token keyword\\">self</span><span class=\\"token punctuation\\">.</span><span class=\\"token function\\">p4</span><span class=\\"token punctuation\\">(</span><span class=\\"token punctuation\\">{</span> <span class=\\"token punctuation\\">(</span>output<span class=\\"token punctuation\\">)</span> <span class=\\"token keyword\\">in</span>\\n          <span class=\\"token keyword\\">self</span><span class=\\"token punctuation\\">.</span>output<span class=\\"token punctuation\\">.</span><span class=\\"token function\\">append</span><span class=\\"token punctuation\\">(</span>output<span class=\\"token punctuation\\">)</span>\\n          <span class=\\"token keyword\\">self</span><span class=\\"token punctuation\\">.</span>dispatchGroup<span class=\\"token punctuation\\">.</span><span class=\\"token function\\">leave</span><span class=\\"token punctuation\\">(</span><span class=\\"token punctuation\\">)</span>\\n        <span class=\\"token punctuation\\">}</span><span class=\\"token punctuation\\">)</span> <span class=\\"token punctuation\\">}</span><span class=\\"token punctuation\\">)</span> <span class=\\"token punctuation\\">}</span>\\n\\n    <span class=\\"token keyword\\">self</span><span class=\\"token punctuation\\">.</span>dispatchGroup<span class=\\"token punctuation\\">.</span><span class=\\"token function\\">wait</span><span class=\\"token punctuation\\">(</span><span class=\\"token punctuation\\">)</span>\\n    <span class=\\"token function\\">onCompletion</span><span class=\\"token punctuation\\">(</span><span class=\\"token keyword\\">self</span><span class=\\"token punctuation\\">.</span>output<span class=\\"token punctuation\\">)</span>\\n  <span class=\\"token punctuation\\">}</span></code></pre></div>\\n<p>The major advantage of using this GCD Dispatch Group is that we get a simple, scalable, easy to read implementation. We also get better performance as the concurrency is achieved at the group level.</p>\\n<div class=\\"gatsby-highlight\\" data-language=\\"text\\"><pre class=\\"language-text\\"><code class=\\"language-text\\">Execution Order:  P3 -&gt; P1 -&gt; P2 -&gt; P4\\nAPI Execution Total Response Time: 8330 ms</code></pre></div>\\n<hr>\\n<h2 id=\\"edge-case-iteration-on-dependent-or-independent-module\\"><a href=\\"#edge-case-iteration-on-dependent-or-independent-module\\" aria-label=\\"edge case iteration on dependent or independent module permalink\\" class=\\"anchor\\"><svg aria-hidden=\\"true\\" focusable=\\"false\\" height=\\"16\\" version=\\"1.1\\" viewBox=\\"0 0 16 16\\" width=\\"16\\"><path fill-rule=\\"evenodd\\" d=\\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\\"></path></svg></a>Edge Case: Iteration on Dependent (or) Independent Module</h2>\\n<p>Let’s consider an edge case scenario, where we need to iterate and execute the entire dependent and independent modules several times. A good example is – ‘Deletion/Additions of bulk users’. We could achieve it using a ‘for loop’ and a counter variable to execute the modules several times. This is a really bad idea!!! A better approach would be to use a recursive callback closure. That means, on completion, call the same block repeatedly, until the count condition is satisfied. Even then, it works sequentially and becomes hard to debug when a bug arises.</p>\\n<p>OperationQueue and GCD really does the magic here by providing a clean and scalable implementation. We also get the advantage of achieving maximum concurrency. So, if five of the user records should be added, then all five ‘add user’ modules and their subtasks get executed in the best possible number of parallel threads. I am skipping the details of the example code as its pretty straightforward, but it is included in my source code (GIT) for reference.</p>\\n<hr>\\n<h2 id=\\"performance-comparison\\"><a href=\\"#performance-comparison\\" aria-label=\\"performance comparison permalink\\" class=\\"anchor\\"><svg aria-hidden=\\"true\\" focusable=\\"false\\" height=\\"16\\" version=\\"1.1\\" viewBox=\\"0 0 16 16\\" width=\\"16\\"><path fill-rule=\\"evenodd\\" d=\\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\\"></path></svg></a>Performance Comparison</h2>\\n<p>We can categorize the advantages that have been discussed so far into:</p>\\n<ol>\\n<li>Better performance</li>\\n<li>Ease of coding and maintenance</li>\\n</ol>\\n<p>While ease of coding is a concern from the development and scalability perspective, performance is something which cannot be compromised in a lightweight microservice server architecture. We want the API request calls to respond as quickly as possible. With the scenarios explained thus far, I have run the example code and measured the response times using the POSTMAN REST client tool.</p>\\n<p>It is a well-known fact that concurrency will give better turnaround times and performance, but it is interesting to see the results below as they show how drastically performance is affected when we fail to follow the right approach. This reiterates the importance of incorporating concurrent programming in a Swift based microservice API implementation.</p>\\n<p><span\\n      class=\\"gatsby-resp-image-wrapper\\"\\n      style=\\"position: relative; display: block; margin-left: auto; margin-right: auto;  max-width: 1200px;\\"\\n    >\\n      <a\\n    class=\\"gatsby-resp-image-link\\"\\n    href=\\"/static/ef539556c961ea008a44e594a9473987/2afcc/bloggcd1.png\\"\\n    style=\\"display: block\\"\\n    target=\\"_blank\\"\\n    rel=\\"noopener\\"\\n  >\\n    <span\\n    class=\\"gatsby-resp-image-background-image\\"\\n    style=\\"padding-bottom: 33.43898573692552%; position: relative; bottom: 0; left: 0; background-image: url(\'data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAAHCAYAAAAIy204AAAACXBIWXMAABYlAAAWJQFJUiTwAAABL0lEQVQoz11Sa2+DMAzk///ASX0NUFveIZBAINDu5nPbfRiSZeds39kWydz3mL3HsiwIIWBdV1jB+tMB9vCF4XKCPR8xZKnUBFhr4SU/dS0mYzD1Rn1wI3rBk60q8Awz+D0fD/yIn+cJIU8RLkeE7zOWd7x79xKtK8TihtiIr0sstxybCPhpQmKGAU3bwjmn08UYMQhmRM2Kt+P4imWyGFfFjBXceTGnsReRTYZhTdLUNWhO1ibZh7ATESOrMO5lLRZv26bvlrmu09Owzokoc0pYliWKotDmfd/xECVO2zSNNvIu7ZucTaM0M9cJITHGxNhLseSTZCMTJPsUE2MRlcf3FPT/c162+yPMsgzX61UtTVPkea7GyWm1nON+v+uU/BNIwDdzVVXpdiTn/el/AXsXEyqLcd1FAAAAAElFTkSuQmCC\'); background-size: cover; display: block;\\"\\n  ></span>\\n  <img\\n        class=\\"gatsby-resp-image-image\\"\\n        alt=\\"Blog Pic 1\\"\\n        title=\\"Blog Pic 1\\"\\n        src=\\"/static/ef539556c961ea008a44e594a9473987/6ff5e/bloggcd1.png\\"\\n        srcset=\\"/static/ef539556c961ea008a44e594a9473987/135ae/bloggcd1.png 300w,\\n/static/ef539556c961ea008a44e594a9473987/34e8a/bloggcd1.png 600w,\\n/static/ef539556c961ea008a44e594a9473987/6ff5e/bloggcd1.png 1200w,\\n/static/ef539556c961ea008a44e594a9473987/2afcc/bloggcd1.png 1262w\\"\\n        sizes=\\"(max-width: 1200px) 100vw, 1200px\\"\\n        loading=\\"lazy\\"\\n      />\\n  </a>\\n    </span></p>\\n<p>The result clearly shows the need to focus on the right implementation approach based on the use case. For instance, if we take the ‘iteration’ use case, we see a visible difference in the response time with just three loops. One may argue that we do not need to make the client wait until the operation is complete, as there are solutions like returning a 202 ‘Accepted’ HTTP status code. However, the processing and task turnaround time would still be badly impacted. When we talk about a real-time use case like user management in a production environment, we could experience a potential and significant difference in the processing time.</p>\\n<hr>\\n<h2 id=\\"conclusion\\"><a href=\\"#conclusion\\" aria-label=\\"conclusion permalink\\" class=\\"anchor\\"><svg aria-hidden=\\"true\\" focusable=\\"false\\" height=\\"16\\" version=\\"1.1\\" viewBox=\\"0 0 16 16\\" width=\\"16\\"><path fill-rule=\\"evenodd\\" d=\\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\\"></path></svg></a>Conclusion</h2>\\n<p>In a development environment, constraints such as time to deliver, can make developers use a simple approach like nested async with closures. I have personally experienced how, often proof of concept (PoC) code developed quickly, is refined and directly pushed into production due to time constraints. During the initial development stage, it is quite common to focus on the expected output and ignore performance. However, refactoring the code at a later stage to achieve performance is cumbersome. So, it is best practice to write code where performance could be improved and tuned with minimum effort. This blog is not intended to compare the performance of concurrent programming with nested async, but to highlight the significance and advantage of choosing the right approach for a given scenario.</p>\\n<p>The need to use GCD and OperationQueue is highly dependent on the requirement use case. The same approach cannot be applied everywhere as it makes the code inconsistent and almost cumbersome. While designing the code structure, developers should give thought to factors like scalability, ability to modularize the code blocks, scope of requirement changes, number of lines of code etc.</p>\\n<p>I have done the sample coding and the project source code is uploaded to my <a href=\\"https://github.com/sangy05/ServerSideSwift-GCD\\">GIT</a> repository for reference. Feel free to add comments or reach out to me for any discussions.</p>\\n<p>Happy Coding!</p>","frontmatter":{"path":"/blogs/server-side-swift-using-gcd","title":"Asynchronous Programming in Server-Side Swift using GCD and OperationQueue"}}},{"node":{"html":"<p>Authorisation is an important part of any web service, and JSON Web Tokens, or JWTs, have risen in popularity in recent years and serve as an alternative to cookies and OAuth tokens. Swift-JWT is a new, powerful Swift library for creating, signing, and verifying JWTs, and it works seamlessly with Kitura.</p>\\n<h2 id=\\"introduction-to-json-web-tokens\\"><a href=\\"#introduction-to-json-web-tokens\\" aria-label=\\"introduction to json web tokens permalink\\" class=\\"anchor\\"><svg aria-hidden=\\"true\\" focusable=\\"false\\" height=\\"16\\" version=\\"1.1\\" viewBox=\\"0 0 16 16\\" width=\\"16\\"><path fill-rule=\\"evenodd\\" d=\\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\\"></path></svg></a>Introduction to JSON Web Tokens</h2>\\n<p>As a brief introduction to JWTs for those who have never come across them before, they are a small JSON payload consisting of a Header object, a Claims object and a signature.</p>\\n<p>The Header object describes the JWT type and the algorithm used. It is then Base64 Encoded.</p>\\n<p>The Claims object has fields that are either Registered, Public or Private. A full list of the Registered claims <a href=\\"https://tools.ietf.org/html/rfc7519#section-4.1\\">can be found here</a>. Registered claims tend to be interoperable and predefined, whereas Public and Private claims are created by the developer implementing the JWT. Public claims should be used according to the IANA JWT Registry to avoid namespace collisions. Finally, Private claims would be those specific to your application, and are not always needed. An example could be a field marking JWT bearer as an administrator. This is then also Base64Encoded and appended to the Header using a single period (.).</p>\\n<p>Lastly, a signature is generated by using a combination of the encoded header, claims, a secret and is then signed using the algorithm specified in the Headers ‘alg’ field. This is appended to the end of the JWT, forming three parts separated by periods. The signature can be left blank if the JWT requires no authentication. For more on JWTs, I recommend the <a href=\\"https://jwt.io/introduction/\\">JWT.io website</a>.</p>\\n<p>Now may be a good time to point out that this blog will focus on signed JWTs, not encrypted ones. JSON Web Signature (JWS) and JSON Web Encryption (JWE) are similar but differ in their use cases and implementations. Swift-JWT supports JWS only. The JWTs created with it cannot be tampered with, because changing the Header or Claims will change the signature of the JWT, invalidating it. However, as the Claims are only Base64 Encoded, they are readable to anyone, but because the Signature can only be validated with public key associated with the private key that signed it, you can trust the token.</p>\\n<p>The main benefit of using a JWT is that they are self contained. There is no overhead required, no database lookups, and they can be sent in URLs and HTTP headers. They are also lightweight and human parsable, as they come in JSON format. This means they can be handled easily by applications dealing with JSON. Now we have some priory surrounding JWTs, we can take a look at the API for Swift-JWT.</p>\\n<hr>\\n<h2 id=\\"using-swift-jwt\\"><a href=\\"#using-swift-jwt\\" aria-label=\\"using swift jwt permalink\\" class=\\"anchor\\"><svg aria-hidden=\\"true\\" focusable=\\"false\\" height=\\"16\\" version=\\"1.1\\" viewBox=\\"0 0 16 16\\" width=\\"16\\"><path fill-rule=\\"evenodd\\" d=\\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\\"></path></svg></a>Using Swift-JWT</h2>\\n<p>First add the Swift-JWT library to your Package.swift and import it into your project. The library works on Swift 4 and later.</p>\\n<p>In my example, I will be using a public/private key pair created on the macOS command line, using OpenSSL and ssh-keygen utilities. The command I used is:</p>\\n<div class=\\"gatsby-highlight\\" data-language=\\"text\\"><pre class=\\"language-text\\"><code class=\\"language-text\\">ssh-keygen -t rsa -b 4096 -f jwtRS256.key\\n# Don&#39;t add a passphrase\\nopenssl rsa -in jwtRS256.key -pubout -outform PEM -out jwtRS256.key.pub</code></pre></div>\\n<p>The reason for not adding a passphrase is because this encrypts the key, meaning Swift-JWT can’t read its contents. I then place the files generated into a subdirectory of my Swift project, in the root directory, and call this new directory JWT.</p>\\n<p>The data from the file must be parsed into a local variable in Swift so we can use it to instantiate a new JWT object. To do this, we create a URL object pointing to the file and then then create a Data object with the contents of the URL.</p>\\n<div class=\\"gatsby-highlight\\" data-language=\\"swift\\"><pre class=\\"language-swift\\"><code class=\\"language-swift\\"><span class=\\"token keyword\\">let</span> myKeyPath <span class=\\"token operator\\">=</span> <span class=\\"token constant\\">URL</span><span class=\\"token punctuation\\">.</span><span class=\\"token keyword\\">init</span><span class=\\"token punctuation\\">(</span>fileURLWithPath<span class=\\"token punctuation\\">:</span> <span class=\\"token function\\">getAbsolutePath</span><span class=\\"token punctuation\\">(</span>relativePath<span class=\\"token punctuation\\">:</span> <span class=\\"token string\\">\\"/jwt/jwtRS256.key\\"</span><span class=\\"token punctuation\\">)</span><span class=\\"token operator\\">!</span><span class=\\"token punctuation\\">)</span>\\n<span class=\\"token keyword\\">var</span> key<span class=\\"token punctuation\\">:</span> <span class=\\"token builtin\\">Data</span> <span class=\\"token operator\\">=</span> <span class=\\"token keyword\\">try</span> <span class=\\"token function\\">Data</span><span class=\\"token punctuation\\">(</span>contentsOf<span class=\\"token punctuation\\">:</span> myKeyPath<span class=\\"token punctuation\\">,</span> options<span class=\\"token punctuation\\">:</span> <span class=\\"token punctuation\\">.</span>alwaysMapped<span class=\\"token punctuation\\">)</span></code></pre></div>\\n<p>Now the JWT is ready to be created. To do this, you can do the whole thing in one call or create the components separately and then make the JWT at the end. If you are adding a lot of claims to your JWT I would recommend the latter approach for readability.</p>\\n<div class=\\"gatsby-highlight\\" data-language=\\"swift\\"><pre class=\\"language-swift\\"><code class=\\"language-swift\\"><span class=\\"token keyword\\">var</span> jwt <span class=\\"token operator\\">=</span> <span class=\\"token function\\">JWT</span><span class=\\"token punctuation\\">(</span>header<span class=\\"token punctuation\\">:</span> <span class=\\"token function\\">Header</span><span class=\\"token punctuation\\">(</span><span class=\\"token punctuation\\">[</span><span class=\\"token punctuation\\">.</span>typ<span class=\\"token punctuation\\">:</span><span class=\\"token string\\">\\"JWT\\"</span><span class=\\"token punctuation\\">,</span> <span class=\\"token punctuation\\">.</span>alg<span class=\\"token punctuation\\">:</span><span class=\\"token string\\">\\"rsa256\\"</span><span class=\\"token punctuation\\">]</span><span class=\\"token punctuation\\">)</span><span class=\\"token punctuation\\">,</span>\\nclaims<span class=\\"token punctuation\\">:</span> <span class=\\"token function\\">Claims</span><span class=\\"token punctuation\\">(</span><span class=\\"token punctuation\\">[</span><span class=\\"token punctuation\\">.</span>name<span class=\\"token punctuation\\">:</span><span class=\\"token string\\">\\"Kitura\\"</span><span class=\\"token punctuation\\">,</span> <span class=\\"token punctuation\\">.</span>jti<span class=\\"token punctuation\\">:</span>”probableRandomString<span class=\\"token string\\">\\", .iss:”websiteName\\"</span><span class=\\"token punctuation\\">,</span>\\n<span class=\\"token punctuation\\">.</span>aud<span class=\\"token punctuation\\">:</span><span class=\\"token string\\">\\"anyone\\"</span><span class=\\"token punctuation\\">,</span> <span class=\\"token punctuation\\">.</span>sub<span class=\\"token punctuation\\">:</span>”emailOfCLIENT<span class=\\"token string\\">\\", .iat:\\"</span><span class=\\"token number\\">03</span><span class=\\"token operator\\">/</span><span class=\\"token number\\">15</span><span class=\\"token operator\\">/</span><span class=\\"token number\\">2018</span><span class=\\"token string\\">\\", .exp:\\"</span><span class=\\"token number\\">03</span><span class=\\"token operator\\">/</span><span class=\\"token number\\">15</span><span class=\\"token operator\\">/</span><span class=\\"token number\\">2019</span>\\"<span class=\\"token punctuation\\">,</span>\\n<span class=\\"token punctuation\\">.</span>nbf<span class=\\"token punctuation\\">:</span>”<span class=\\"token number\\">03</span><span class=\\"token operator\\">/</span><span class=\\"token number\\">14</span><span class=\\"token operator\\">/</span><span class=\\"token number\\">2018</span>”<span class=\\"token punctuation\\">,</span> “customClaim”<span class=\\"token punctuation\\">:</span>”admin<span class=\\"token operator\\">=</span><span class=\\"token constant\\">YES</span>”<span class=\\"token punctuation\\">]</span><span class=\\"token punctuation\\">)</span><span class=\\"token punctuation\\">)</span></code></pre></div>\\n<p>There’s quite a lot going on here so to break it up, we will look at the individual parts of the JWT. First, we create the Header, which takes a .typ parameter of JWT to tell whatever application this is passed into that the contents are a signed JWT (JWS) and not JWE. The .alg field then shows that this is JWS was signed using the RSA256 algorithm.</p>\\n<p>The Claims are then created. There are several library provided claims used here, which are defined in the RFC specification, and many are optional. Keep the JWT lightweight and only implement the ones that make sense to your application. In my example, we define a name as “Kitura”, a unique ID for this JWT as “probableRandomString” and so on. For a full list of the available registered claims included, see the file Claims.swift. You can also define your own Claims, known as private claims, which would be application specific using a String as the name of the Claim, as shown above with the customClaim claim.</p>\\n<p>We now need to sign the JWT using the private key we made in the terminal. To do this, we run:</p>\\n<div class=\\"gatsby-highlight\\" data-language=\\"swift\\"><pre class=\\"language-swift\\"><code class=\\"language-swift\\"><span class=\\"token comment\\">// Note: You can use a public/private key pair or a certificate to sign a JWT.</span>\\n<span class=\\"token keyword\\">let</span> signedJWT <span class=\\"token operator\\">=</span> <span class=\\"token keyword\\">try</span> jwt<span class=\\"token punctuation\\">.</span><span class=\\"token function\\">sign</span><span class=\\"token punctuation\\">(</span>using<span class=\\"token punctuation\\">:</span> <span class=\\"token punctuation\\">.</span><span class=\\"token function\\">rs256</span><span class=\\"token punctuation\\">(</span>key<span class=\\"token punctuation\\">,</span> <span class=\\"token punctuation\\">.</span>privateKey<span class=\\"token punctuation\\">)</span><span class=\\"token punctuation\\">)</span></code></pre></div>\\n<p>We create a new JWT that is composed of the three components: a Base64 Encoded Header, Claims object and signature made of the combined two and the key. Someone with access to the public key would then be able to reverse the encoding and verify the signature. The header and claims would be decipherable without the key, as they are only encoded, not encrypted. The signature on the end verifies the validity of the JWT object and allows it to be implicitly trusted.</p>\\n<p>A server can send this signed JWT in Kitura with:</p>\\n<div class=\\"gatsby-highlight\\" data-language=\\"swift\\"><pre class=\\"language-swift\\"><code class=\\"language-swift\\">response<span class=\\"token punctuation\\">.</span>headers<span class=\\"token punctuation\\">[</span><span class=\\"token string\\">\\"Set-Cookie\\"</span><span class=\\"token punctuation\\">]</span> <span class=\\"token operator\\">=</span> <span class=\\"token string\\">\\"jwt=<span class=\\"token interpolation\\"><span class=\\"token delimiter variable\\">\\\\(</span>signedJWT<span class=\\"token delimiter variable\\">)</span></span>\\"</span></code></pre></div>\\n<p>A common use case would have a server issuing signed JWTs that a client saves to their local storage. At sometime in the future, the client makes a request and sends the JWT in the Authorisation Header of their HTTP request. The server can use the public key that goes with it’s private key to verify it did make the token using the following syntax:</p>\\n<div class=\\"gatsby-highlight\\" data-language=\\"swift\\"><pre class=\\"language-swift\\"><code class=\\"language-swift\\"><span class=\\"token comment\\">// Inside a route handler for a raw route that requires authentication</span>\\n<span class=\\"token keyword\\">let</span> receivedJWT <span class=\\"token operator\\">=</span> request<span class=\\"token punctuation\\">.</span>headers<span class=\\"token punctuation\\">[</span><span class=\\"token string\\">\\"Cookie\\"</span><span class=\\"token punctuation\\">]</span><span class=\\"token operator\\">?</span><span class=\\"token punctuation\\">.</span><span class=\\"token function\\">split</span><span class=\\"token punctuation\\">(</span>separator<span class=\\"token punctuation\\">:</span> <span class=\\"token string\\">\\";\\"</span><span class=\\"token punctuation\\">)</span>\\n<span class=\\"token keyword\\">var</span> jwt <span class=\\"token operator\\">=</span> <span class=\\"token function\\">String</span><span class=\\"token punctuation\\">(</span><span class=\\"token punctuation\\">)</span>\\n<span class=\\"token keyword\\">for</span> item <span class=\\"token keyword\\">in</span> receivedJWT <span class=\\"token punctuation\\">{</span>\\n    <span class=\\"token keyword\\">if</span> item<span class=\\"token punctuation\\">.</span><span class=\\"token function\\">contains</span><span class=\\"token punctuation\\">(</span><span class=\\"token string\\">\\"jwt\\"</span><span class=\\"token punctuation\\">)</span> <span class=\\"token punctuation\\">{</span>\\n        <span class=\\"token keyword\\">let</span> separator <span class=\\"token operator\\">=</span> item<span class=\\"token punctuation\\">.</span><span class=\\"token function\\">split</span><span class=\\"token punctuation\\">(</span>seperator<span class=\\"token punctuation\\">:</span> <span class=\\"token string\\">\\"=\\"</span><span class=\\"token punctuation\\">)</span>\\n        jwt <span class=\\"token operator\\">=</span> <span class=\\"token function\\">String</span><span class=\\"token punctuation\\">(</span>describing<span class=\\"token punctuation\\">:</span> newArray<span class=\\"token punctuation\\">[</span><span class=\\"token number\\">1</span><span class=\\"token punctuation\\">]</span><span class=\\"token punctuation\\">)</span>\\n    <span class=\\"token punctuation\\">}</span>\\n<span class=\\"token punctuation\\">}</span></code></pre></div>\\n<p>This logic receives a full list of the cookies saved on the client’s system, but we are only interested in the the JWT so we parse it and end with <code class=\\"language-text\\">cookie</code> storing the value of the received, signed JWT. Now we can verify the JWT was signed by us, and access its Claims. To start, we need to store the public key as a variable we can access in Swift:</p>\\n<div class=\\"gatsby-highlight\\" data-language=\\"swift\\"><pre class=\\"language-swift\\"><code class=\\"language-swift\\"><span class=\\"token keyword\\">let</span> myPublicKeyPath <span class=\\"token operator\\">=</span> <span class=\\"token constant\\">URL</span><span class=\\"token punctuation\\">.</span><span class=\\"token keyword\\">init</span><span class=\\"token punctuation\\">(</span>fileURLWithPath<span class=\\"token punctuation\\">:</span> <span class=\\"token function\\">getAbsolutePath</span><span class=\\"token punctuation\\">(</span>relativePath<span class=\\"token punctuation\\">:</span> <span class=\\"token string\\">\\"/jwt/jwtRS256.key.public\\"</span><span class=\\"token punctuation\\">)</span><span class=\\"token operator\\">!</span><span class=\\"token punctuation\\">)</span>\\n<span class=\\"token keyword\\">var</span> publicKey<span class=\\"token punctuation\\">:</span> <span class=\\"token builtin\\">Data</span> <span class=\\"token operator\\">=</span> <span class=\\"token keyword\\">try</span> <span class=\\"token function\\">Data</span><span class=\\"token punctuation\\">(</span>contentsOf<span class=\\"token punctuation\\">:</span> myPublicKeyPath<span class=\\"token punctuation\\">,</span> options<span class=\\"token punctuation\\">:</span> <span class=\\"token punctuation\\">.</span>alwaysMapped<span class=\\"token punctuation\\">)</span></code></pre></div>\\n<p>Now we have it in memory, we can use it to verify the JWT was signed by us, and then use its Claims.</p>\\n<div class=\\"gatsby-highlight\\" data-language=\\"swift\\"><pre class=\\"language-swift\\"><code class=\\"language-swift\\"><span class=\\"token keyword\\">let</span> verifyJWT <span class=\\"token operator\\">=</span> <span class=\\"token keyword\\">try</span> <span class=\\"token constant\\">JWT</span><span class=\\"token punctuation\\">.</span><span class=\\"token function\\">verify</span><span class=\\"token punctuation\\">(</span>jwt<span class=\\"token punctuation\\">,</span> using<span class=\\"token punctuation\\">:</span> <span class=\\"token punctuation\\">.</span><span class=\\"token function\\">rs256</span><span class=\\"token punctuation\\">(</span>publicKey<span class=\\"token punctuation\\">,</span> <span class=\\"token punctuation\\">.</span>publicKey<span class=\\"token punctuation\\">)</span><span class=\\"token punctuation\\">)</span>\\n\\n<span class=\\"token keyword\\">if</span> verifyJWT <span class=\\"token punctuation\\">{</span>\\n    <span class=\\"token keyword\\">if</span> <span class=\\"token keyword\\">let</span> decodedJWT <span class=\\"token operator\\">=</span> <span class=\\"token keyword\\">try</span> <span class=\\"token constant\\">JWT</span><span class=\\"token punctuation\\">.</span><span class=\\"token function\\">decode</span><span class=\\"token punctuation\\">(</span>jwt<span class=\\"token punctuation\\">)</span> <span class=\\"token punctuation\\">{</span>\\n        <span class=\\"token comment\\">// Library provided method for checking expiration, audience etc.</span>\\n        <span class=\\"token keyword\\">let</span> claim <span class=\\"token operator\\">=</span> decodedJWT<span class=\\"token punctuation\\">.</span><span class=\\"token function\\">validateClaim</span><span class=\\"token punctuation\\">(</span><span class=\\"token punctuation\\">)</span>\\n        <span class=\\"token keyword\\">switch</span> claim <span class=\\"token punctuation\\">{</span>\\n        <span class=\\"token keyword\\">case</span> <span class=\\"token punctuation\\">.</span>success<span class=\\"token punctuation\\">:</span>\\n            <span class=\\"token comment\\">// Do something if the JWT is valid and trusted.</span>\\n        <span class=\\"token keyword\\">case</span> <span class=\\"token punctuation\\">.</span>failure<span class=\\"token punctuation\\">:</span>\\n            <span class=\\"token comment\\">// Do something if the JWT is invalid but trusted (i.e. expired)</span>\\n        <span class=\\"token punctuation\\">}</span>\\n    <span class=\\"token punctuation\\">}</span> <span class=\\"token keyword\\">else</span> <span class=\\"token punctuation\\">{</span>\\n        <span class=\\"token function\\">print</span><span class=\\"token punctuation\\">(</span><span class=\\"token string\\">\\"Error decoding JWT\\"</span><span class=\\"token punctuation\\">)</span>\\n    <span class=\\"token punctuation\\">}</span>\\n<span class=\\"token punctuation\\">}</span> <span class=\\"token keyword\\">else</span> <span class=\\"token punctuation\\">{</span>\\n    <span class=\\"token comment\\">// Do something as JWT was tampered with or not signed by us  </span>\\n<span class=\\"token punctuation\\">}</span></code></pre></div>\\n<p>In just a few lines of code, we have received a JWT from the client, checked that we signed it, and checked the validity of the Claims. You can pass an issuer: and audience: parameter into the validateClaims method to check against them. The other claims are only assessed if they are present, if the JWT did not contain them they are skipped.</p>\\n<p>Inside the success case is where the logic for your application would go for a successful login. The failure case let’s you deal with cases where the token may be expired or for the wrong audience or issuer and the initial verification lets you be sure you issued the original JWT and it has not been tampered with.</p>\\n<hr>\\n<h2 id=\\"conclusion\\"><a href=\\"#conclusion\\" aria-label=\\"conclusion permalink\\" class=\\"anchor\\"><svg aria-hidden=\\"true\\" focusable=\\"false\\" height=\\"16\\" version=\\"1.1\\" viewBox=\\"0 0 16 16\\" width=\\"16\\"><path fill-rule=\\"evenodd\\" d=\\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\\"></path></svg></a>Conclusion</h2>\\n<p>The Swift-JWT library will be adding new signing algorithms and use cases as time goes on, and we have added some Claims specific to certain specifications such as MicroProfile. We will also be adding a demo of Swift-JWT to <a href=\\"https://github.com/IBM-Swift/Kitura-Sample\\">Kitura-Sample</a>, with an example of a simple login and logged-in-user only route and handling on unauthorised access attempts.</p>","frontmatter":{"path":"/blogs/swift-jwt","title":"JSON Web Tokens with Swift-JWT"}}},{"node":{"html":"<p>We have just released <a href=\\"https://github.com/IBM-Swift/SwiftKafka\\">SwiftKafka</a>, a new Swift package for producing and consuming from an Apache Kafka distributed streaming platform. This blog post explains why you would use Apache Kafka, how you can use the Swift Kafka API and provides an example of producing and consuming messages.</p>\\n<h2 id=\\"what-is-apache-kafka\\"><a href=\\"#what-is-apache-kafka\\" aria-label=\\"what is apache kafka permalink\\" class=\\"anchor\\"><svg aria-hidden=\\"true\\" focusable=\\"false\\" height=\\"16\\" version=\\"1.1\\" viewBox=\\"0 0 16 16\\" width=\\"16\\"><path fill-rule=\\"evenodd\\" d=\\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\\"></path></svg></a>What is Apache Kafka?</h2>\\n<p>Apache Kafka is a distributed event streaming platform capable of handling trillions of events a day. A streaming platform has three key capabilities:</p>\\n<ul>\\n<li>Publish and subscribe to streams of records, similar to a message queue or enterprise messaging system.</li>\\n<li>Store streams of records in a fault-tolerant durable way.</li>\\n<li>Process streams of records as they occur.</li>\\n</ul>\\n<p>Instead of sending messages directly from a producer to a consumer, Kafka stores streams of records in categories called topics. Producers add messages to a topic and consumers read messages from a topic. Producing and consuming from a stream is very cheap and works with Kafka’s built in distributed architecture. The result is a messaging system that is fast, fault tolerant and can handle high volumes of data.</p>\\n<p>If you would like to learn more about Kafka, check out the <a href=\\"https://kafka.apache.org/intro.html\\">Apache Kafka website</a>.</p>\\n<hr>\\n<h2 id=\\"swift-kafka\\"><a href=\\"#swift-kafka\\" aria-label=\\"swift kafka permalink\\" class=\\"anchor\\"><svg aria-hidden=\\"true\\" focusable=\\"false\\" height=\\"16\\" version=\\"1.1\\" viewBox=\\"0 0 16 16\\" width=\\"16\\"><path fill-rule=\\"evenodd\\" d=\\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\\"></path></svg></a>Swift Kafka</h2>\\n<p>The new <a href=\\"https://github.com/IBM-Swift/SwiftKafka\\">SwiftKafka</a> library is built on top of the <a href=\\"https://github.com/edenhill/librdkafka\\">librdkafka</a> C library. This provides high performance messaging with an easy to use Swift API. Swift Kafka provides three classes that you will need to connect your application to event streams:</p>\\n<h3 id=\\"kafkaproducer\\"><a href=\\"#kafkaproducer\\" aria-label=\\"kafkaproducer permalink\\" class=\\"anchor\\"><svg aria-hidden=\\"true\\" focusable=\\"false\\" height=\\"16\\" version=\\"1.1\\" viewBox=\\"0 0 16 16\\" width=\\"16\\"><path fill-rule=\\"evenodd\\" d=\\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\\"></path></svg></a>KafkaProducer</h3>\\n<p>The <code class=\\"language-text\\">KafkaProducer</code> class produces messages to a Kafka server.</p>\\n<p>Once you have initialized a KafkaProducer, you can call <code class=\\"language-text\\">connect(brokers:)</code> to connect to one or more Kafka servers.</p>\\n<p>The producer can then call <code class=\\"language-text\\">send()</code> with a <code class=\\"language-text\\">KafkaProducerRecord</code>, which contains the following fields:</p>\\n<ul>\\n<li>Topic: The topic where the producer sends the record. If this topic doesn’t exist, the producer will try to create it.</li>\\n<li>Value: The body of the message that will be sent with the record.</li>\\n<li>Partition: The topic partition where the producer sends the record. If this is not set the server will automatically assign the partition.</li>\\n<li>Key: If the partition is not set, the server will assign records with the same key to the same partition. Since order is guaranteed within a partition, these records will be consumed in the order they were produced.</li>\\n</ul>\\n<p>The message is sent to the connected brokers and the Kafka server stores the message on a partition of the topic.</p>\\n<h3 id=\\"kafkaconsumer\\"><a href=\\"#kafkaconsumer\\" aria-label=\\"kafkaconsumer permalink\\" class=\\"anchor\\"><svg aria-hidden=\\"true\\" focusable=\\"false\\" height=\\"16\\" version=\\"1.1\\" viewBox=\\"0 0 16 16\\" width=\\"16\\"><path fill-rule=\\"evenodd\\" d=\\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\\"></path></svg></a>KafkaConsumer</h3>\\n<p>The <code class=\\"language-text\\">KafkaConsumer</code> class consumes messages from a Kafka server.</p>\\n<p>Once you have initialized a <code class=\\"language-text\\">KafkaConsumer</code>, you can call <code class=\\"language-text\\">connect(brokers:)</code> to connect to one or more Kafka servers.</p>\\n<p>You can then subscribe to topics using <code class=\\"language-text\\">subscribe()</code>. This will distribute the topic partitions evenly between consumers with the same group id. If you do not set a group id, a random UUID will be used.</p>\\n<p>Alternatively, you can use <code class=\\"language-text\\">assign()</code> to manually set the partition and offset where the consumer will consume from.</p>\\n<p>Both <code class=\\"language-text\\">subscribe()</code> and <code class=\\"language-text\\">assign()</code> are asynchronous and will return immediately, however they may take up to sessionTimeoutMs (default 10 seconds) * 2 before the consumer connects and is assigned partitions.</p>\\n<p>To consume messages from Kafka you call poll <code class=\\"language-text\\">(timeout:)</code>. This will poll Kafka, blocking for timeout seconds. When the function completes, you are returned an array of <code class=\\"language-text\\">KafkaConsumerRecord</code>, with the following fields:</p>\\n<ul>\\n<li>Value: The message value, if it can be UTF8 decoded to a String.</li>\\n<li>ValueData: The message value as raw data.</li>\\n<li>Key: The message key, if it can be UTF8 decoded to a String.</li>\\n<li>KeyData: The message key as raw data.</li>\\n<li>Offset: The message offset.</li>\\n<li>Topic: The topic that the message was consumed from.</li>\\n<li>Partition: The partition that the message was consumed from.</li>\\n</ul>\\n<p>When you have finished consuming, you can call <code class=\\"language-text\\">close()</code> to close the connection and unassign the consumer. The Kafka server then rebalances the unassigned partitions between other consumers in the group. If you don’t call <code class=\\"language-text\\">close()</code>, the consumer will be closed when the class is deallocated.</p>\\n<h3 id=\\"kafkaconfig\\"><a href=\\"#kafkaconfig\\" aria-label=\\"kafkaconfig permalink\\" class=\\"anchor\\"><svg aria-hidden=\\"true\\" focusable=\\"false\\" height=\\"16\\" version=\\"1.1\\" viewBox=\\"0 0 16 16\\" width=\\"16\\"><path fill-rule=\\"evenodd\\" d=\\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\\"></path></svg></a>KafkaConfig</h3>\\n<p>The <code class=\\"language-text\\">KafkaConfig</code> class contains your settings for a Kafka consumer or Kafka producer. You pass an instance of this class to the Kafka client initializer to set its configuration.</p>\\n<p>You initialize the class with default values, which you can change using the helper functions. For example, if you want to enable all logging, you would set the debug variable:</p>\\n<div class=\\"gatsby-highlight\\" data-language=\\"swift\\"><pre class=\\"language-swift\\"><code class=\\"language-swift\\"><span class=\\"token keyword\\">let</span> config <span class=\\"token operator\\">=</span> <span class=\\"token function\\">KafkaConfig</span><span class=\\"token punctuation\\">(</span><span class=\\"token punctuation\\">)</span>\\nconfig<span class=\\"token punctuation\\">.</span>debug <span class=\\"token operator\\">=</span> <span class=\\"token punctuation\\">[</span><span class=\\"token punctuation\\">.</span>all<span class=\\"token punctuation\\">]</span></code></pre></div>\\n<hr>\\n<h2 id=\\"swift-kafka-example\\"><a href=\\"#swift-kafka-example\\" aria-label=\\"swift kafka example permalink\\" class=\\"anchor\\"><svg aria-hidden=\\"true\\" focusable=\\"false\\" height=\\"16\\" version=\\"1.1\\" viewBox=\\"0 0 16 16\\" width=\\"16\\"><path fill-rule=\\"evenodd\\" d=\\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\\"></path></svg></a>Swift Kafka Example</h2>\\n<p>To demonstrate Swift Kafka, we are going to create a producer that reads user input and sends it to the Kafka server and a consumer that reads the message and prints it back to the user. The first thing we need is a Kafka server to connect to:</p>\\n<h3 id=\\"setting-up-a-kafka-server-mac\\"><a href=\\"#setting-up-a-kafka-server-mac\\" aria-label=\\"setting up a kafka server mac permalink\\" class=\\"anchor\\"><svg aria-hidden=\\"true\\" focusable=\\"false\\" height=\\"16\\" version=\\"1.1\\" viewBox=\\"0 0 16 16\\" width=\\"16\\"><path fill-rule=\\"evenodd\\" d=\\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\\"></path></svg></a>Setting up a Kafka Server (Mac)</h3>\\n<p>For macOS, we will use <a href=\\"https://brew.sh\\">Homebrew</a> to install and run the server:</p>\\n<ol>\\n<li>Install <code class=\\"language-text\\">librdkafka</code> (required to build SwiftKafka)</li>\\n</ol>\\n<div class=\\"gatsby-highlight\\" data-language=\\"text\\"><pre class=\\"language-text\\"><code class=\\"language-text\\">$ brew install librdkafka</code></pre></div>\\n<ol start=\\"2\\">\\n<li>Install Kafka server (and Java dependency)</li>\\n</ol>\\n<div class=\\"gatsby-highlight\\" data-language=\\"text\\"><pre class=\\"language-text\\"><code class=\\"language-text\\">$ brew cask install java\\n$ brew install kafka</code></pre></div>\\n<ol start=\\"3\\">\\n<li>Start the Zookeeper service</li>\\n</ol>\\n<div class=\\"gatsby-highlight\\" data-language=\\"text\\"><pre class=\\"language-text\\"><code class=\\"language-text\\">$ brew services start zookeeper</code></pre></div>\\n<ol start=\\"4\\">\\n<li>Start the Kafka service</li>\\n</ol>\\n<div class=\\"gatsby-highlight\\" data-language=\\"text\\"><pre class=\\"language-text\\"><code class=\\"language-text\\">$ brew services start kafka</code></pre></div>\\n<p>These commands will install and run Zookeeper and Kafka as background services. Zookeeper is a centralized service that maintains information within distributed systems and is required by Kafka.</p>\\n<hr>\\n<h3 id=\\"setting-up-a-kafka-server-linux\\"><a href=\\"#setting-up-a-kafka-server-linux\\" aria-label=\\"setting up a kafka server linux permalink\\" class=\\"anchor\\"><svg aria-hidden=\\"true\\" focusable=\\"false\\" height=\\"16\\" version=\\"1.1\\" viewBox=\\"0 0 16 16\\" width=\\"16\\"><path fill-rule=\\"evenodd\\" d=\\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\\"></path></svg></a>Setting up a Kafka Server (Linux)</h3>\\n<p>On Linux, please follow the <a href=\\"https://kafka.apache.org/quickstart\\">Kafka quick start instructions</a> and <a href=\\"https://github.com/edenhill/librdkafka#installing-prebuilt-packages\\">install librdkafka</a>.</p>\\n<hr>\\n<h3 id=\\"create-a-kafka-producer\\"><a href=\\"#create-a-kafka-producer\\" aria-label=\\"create a kafka producer permalink\\" class=\\"anchor\\"><svg aria-hidden=\\"true\\" focusable=\\"false\\" height=\\"16\\" version=\\"1.1\\" viewBox=\\"0 0 16 16\\" width=\\"16\\"><path fill-rule=\\"evenodd\\" d=\\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\\"></path></svg></a>Create a Kafka Producer</h3>\\n<p>We will create a simple producer that reads user input from the terminal and sends it to a Kafka topic using Swift Kafka.</p>\\n<ol>\\n<li>Create an executable Swift project</li>\\n</ol>\\n<div class=\\"gatsby-highlight\\" data-language=\\"text\\"><pre class=\\"language-text\\"><code class=\\"language-text\\">$ mkdir kafkaProducer\\n$ cd kafkaProducer/\\n$ swift package init --type executable</code></pre></div>\\n<ol start=\\"2\\">\\n<li>Add Swift Kafka</li>\\n</ol>\\n<p>Open your <code class=\\"language-text\\">Package.swift</code> file:</p>\\n<div class=\\"gatsby-highlight\\" data-language=\\"text\\"><pre class=\\"language-text\\"><code class=\\"language-text\\">$ open Package.swift</code></pre></div>\\n<p>Add Swift Kafka to your dependencies:</p>\\n<div class=\\"gatsby-highlight\\" data-language=\\"text\\"><pre class=\\"language-text\\"><code class=\\"language-text\\">.package(url: &quot;https://github.com/IBM-Swift/SwiftKafka.git&quot;, from: &quot;0.0.0&quot;)</code></pre></div>\\n<p>Then add <code class=\\"language-text\\">SwiftKafka</code> to your target dependencies.</p>\\n<div class=\\"gatsby-highlight\\" data-language=\\"text\\"><pre class=\\"language-text\\"><code class=\\"language-text\\">.target(\\n            name: &quot;kafkaProducer&quot;,\\n            dependencies: [&quot;SwiftKafka&quot;]),</code></pre></div>\\n<ol start=\\"3\\">\\n<li>Add the <code class=\\"language-text\\">KafkaProducer</code> code</li>\\n</ol>\\n<div class=\\"gatsby-highlight\\" data-language=\\"text\\"><pre class=\\"language-text\\"><code class=\\"language-text\\">open Sources/kafkaProducer/main.swift</code></pre></div>\\n<p>Replace the code in this file with:</p>\\n<div class=\\"gatsby-highlight\\" data-language=\\"swift\\"><pre class=\\"language-swift\\"><code class=\\"language-swift\\"><span class=\\"token keyword\\">import</span> <span class=\\"token builtin\\">SwiftKafka</span>\\n\\n<span class=\\"token keyword\\">let</span> config <span class=\\"token operator\\">=</span> <span class=\\"token function\\">KafkaConfig</span><span class=\\"token punctuation\\">(</span><span class=\\"token punctuation\\">)</span>\\nconfig<span class=\\"token punctuation\\">.</span>brokerAddressFamily <span class=\\"token operator\\">=</span> <span class=\\"token punctuation\\">.</span>v4\\n<span class=\\"token keyword\\">if</span> <span class=\\"token keyword\\">let</span> producer <span class=\\"token operator\\">=</span> <span class=\\"token keyword\\">try</span><span class=\\"token operator\\">?</span> <span class=\\"token function\\">KafkaProducer</span><span class=\\"token punctuation\\">(</span>config<span class=\\"token punctuation\\">:</span> config<span class=\\"token punctuation\\">)</span> <span class=\\"token punctuation\\">{</span>\\n<span class=\\"token keyword\\">let</span> connection <span class=\\"token operator\\">=</span> producer<span class=\\"token punctuation\\">.</span><span class=\\"token function\\">connect</span><span class=\\"token punctuation\\">(</span>brokers<span class=\\"token punctuation\\">:</span> <span class=\\"token string\\">\\"localhost:9092\\"</span><span class=\\"token punctuation\\">)</span>\\n    <span class=\\"token function\\">print</span><span class=\\"token punctuation\\">(</span><span class=\\"token string\\">\\"Connected to <span class=\\"token interpolation\\"><span class=\\"token delimiter variable\\">\\\\(</span>connection<span class=\\"token delimiter variable\\">)</span></span> brokers\\"</span><span class=\\"token punctuation\\">)</span>\\n    <span class=\\"token function\\">print</span><span class=\\"token punctuation\\">(</span><span class=\\"token string\\">\\"Enter message to produce to Kafka:\\"</span><span class=\\"token punctuation\\">)</span>\\n    <span class=\\"token keyword\\">while</span><span class=\\"token punctuation\\">(</span><span class=\\"token boolean\\">true</span><span class=\\"token punctuation\\">)</span> <span class=\\"token punctuation\\">{</span>\\n        <span class=\\"token keyword\\">if</span> <span class=\\"token keyword\\">let</span> userInput <span class=\\"token operator\\">=</span> <span class=\\"token function\\">readLine</span><span class=\\"token punctuation\\">(</span><span class=\\"token punctuation\\">)</span> <span class=\\"token punctuation\\">{</span>\\n            producer<span class=\\"token punctuation\\">.</span><span class=\\"token function\\">send</span><span class=\\"token punctuation\\">(</span>producerRecord<span class=\\"token punctuation\\">:</span> <span class=\\"token function\\">KafkaProducerRecord</span><span class=\\"token punctuation\\">(</span>topic<span class=\\"token punctuation\\">:</span> <span class=\\"token string\\">\\"example\\"</span><span class=\\"token punctuation\\">,</span> value<span class=\\"token punctuation\\">:</span> userInput<span class=\\"token punctuation\\">)</span><span class=\\"token punctuation\\">)</span> <span class=\\"token punctuation\\">{</span> result <span class=\\"token keyword\\">in</span>\\n                <span class=\\"token keyword\\">switch</span> result <span class=\\"token punctuation\\">{</span>\\n                <span class=\\"token keyword\\">case</span> <span class=\\"token punctuation\\">.</span><span class=\\"token function\\">success</span><span class=\\"token punctuation\\">(</span><span class=\\"token keyword\\">let</span> record<span class=\\"token punctuation\\">)</span><span class=\\"token punctuation\\">:</span>\\n                    <span class=\\"token function\\">print</span><span class=\\"token punctuation\\">(</span><span class=\\"token string\\">\\"Successfully produced: <span class=\\"token interpolation\\"><span class=\\"token delimiter variable\\">\\\\(</span>record<span class=\\"token punctuation\\">.</span>value <span class=\\"token keyword\\">as</span> <span class=\\"token builtin\\">Any</span><span class=\\"token delimiter variable\\">)</span></span> to offset: <span class=\\"token interpolation\\"><span class=\\"token delimiter variable\\">\\\\(</span>record<span class=\\"token punctuation\\">.</span>offset<span class=\\"token delimiter variable\\">)</span></span>\\"</span><span class=\\"token punctuation\\">)</span>\\n                <span class=\\"token keyword\\">case</span> <span class=\\"token punctuation\\">.</span><span class=\\"token function\\">failure</span><span class=\\"token punctuation\\">(</span><span class=\\"token keyword\\">let</span> error<span class=\\"token punctuation\\">)</span><span class=\\"token punctuation\\">:</span>\\n                    <span class=\\"token function\\">print</span><span class=\\"token punctuation\\">(</span><span class=\\"token string\\">\\"Failed to send message with error: <span class=\\"token interpolation\\"><span class=\\"token delimiter variable\\">\\\\(</span>error<span class=\\"token punctuation\\">.</span>description<span class=\\"token delimiter variable\\">)</span></span>\\"</span><span class=\\"token punctuation\\">)</span>\\n                <span class=\\"token punctuation\\">}</span>\\n            <span class=\\"token punctuation\\">}</span>\\n        <span class=\\"token punctuation\\">}</span>\\n    <span class=\\"token punctuation\\">}</span>\\n<span class=\\"token punctuation\\">}</span></code></pre></div>\\n<p>This code will initialize a new KafkaProducer. We have configured our producer to only connect to brokers on IPv4 since we are running on localhost. We then connect to the Kafka server we started earlier on the default port of “9092”. The program will then read user input from the terminal and send it to the broker.</p>\\n<p>You can test this out by running the program in terminal:</p>\\n<div class=\\"gatsby-highlight\\" data-language=\\"text\\"><pre class=\\"language-text\\"><code class=\\"language-text\\">$ swift run</code></pre></div>\\n<hr>\\n<h3 id=\\"create-a-kafka-consumer\\"><a href=\\"#create-a-kafka-consumer\\" aria-label=\\"create a kafka consumer permalink\\" class=\\"anchor\\"><svg aria-hidden=\\"true\\" focusable=\\"false\\" height=\\"16\\" version=\\"1.1\\" viewBox=\\"0 0 16 16\\" width=\\"16\\"><path fill-rule=\\"evenodd\\" d=\\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\\"></path></svg></a>Create a Kafka Consumer</h3>\\n<p>We will create a simple consumer that reads everything from a topic and prints it to the terminal.</p>\\n<ol>\\n<li>Create an executable Swift project</li>\\n</ol>\\n<p>We start by creating an executable Swift project using the same steps as above:</p>\\n<div class=\\"gatsby-highlight\\" data-language=\\"text\\"><pre class=\\"language-text\\"><code class=\\"language-text\\">$ mkdir kafkaConsumer\\n$ cd kafkaConsumer/\\n$ swift package init --type executable</code></pre></div>\\n<ol start=\\"2\\">\\n<li>Add Swift Kafka</li>\\n</ol>\\n<p>Open your <code class=\\"language-text\\">Package.swift</code> file:</p>\\n<div class=\\"gatsby-highlight\\" data-language=\\"text\\"><pre class=\\"language-text\\"><code class=\\"language-text\\">$ open Package.swift</code></pre></div>\\n<p>Add Swift Kafka to your dependencies:</p>\\n<div class=\\"gatsby-highlight\\" data-language=\\"text\\"><pre class=\\"language-text\\"><code class=\\"language-text\\">.package(url: &quot;https://github.com/IBM-Swift/SwiftKafka.git&quot;, from: &quot;0.0.0&quot;)</code></pre></div>\\n<p>Then add <code class=\\"language-text\\">SwiftKafka</code> to your target dependencies.</p>\\n<div class=\\"gatsby-highlight\\" data-language=\\"text\\"><pre class=\\"language-text\\"><code class=\\"language-text\\">.target(\\n            name: &quot;kafkaProducer&quot;,\\n            dependencies: [&quot;SwiftKafka&quot;]),</code></pre></div>\\n<ol start=\\"3\\">\\n<li>Add the <code class=\\"language-text\\">KafkaConsumer</code> code</li>\\n</ol>\\n<div class=\\"gatsby-highlight\\" data-language=\\"text\\"><pre class=\\"language-text\\"><code class=\\"language-text\\">open Sources/kafkaConsumer/main.swift</code></pre></div>\\n<p>Replace the code in this file with:</p>\\n<div class=\\"gatsby-highlight\\" data-language=\\"swift\\"><pre class=\\"language-swift\\"><code class=\\"language-swift\\"><span class=\\"token keyword\\">import</span> <span class=\\"token builtin\\">SwiftKafka</span>\\n\\n<span class=\\"token keyword\\">let</span> config <span class=\\"token operator\\">=</span> <span class=\\"token function\\">KafkaConfig</span><span class=\\"token punctuation\\">(</span><span class=\\"token punctuation\\">)</span>\\nconfig<span class=\\"token punctuation\\">.</span>autoOffsetReset <span class=\\"token operator\\">=</span> <span class=\\"token punctuation\\">.</span>beginning\\nconfig<span class=\\"token punctuation\\">.</span>brokerAddressFamily <span class=\\"token operator\\">=</span> <span class=\\"token punctuation\\">.</span>v4\\nconfig<span class=\\"token punctuation\\">.</span>groupId <span class=\\"token operator\\">=</span> <span class=\\"token string\\">\\"exampleGroup\\"</span>\\n<span class=\\"token keyword\\">do</span> <span class=\\"token punctuation\\">{</span>\\n    <span class=\\"token keyword\\">let</span> consumer <span class=\\"token operator\\">=</span> <span class=\\"token keyword\\">try</span> <span class=\\"token function\\">KafkaConsumer</span><span class=\\"token punctuation\\">(</span>config<span class=\\"token punctuation\\">:</span> config<span class=\\"token punctuation\\">)</span>\\n    <span class=\\"token keyword\\">let</span> connection <span class=\\"token operator\\">=</span> consumer<span class=\\"token punctuation\\">.</span><span class=\\"token function\\">connect</span><span class=\\"token punctuation\\">(</span>brokers<span class=\\"token punctuation\\">:</span> <span class=\\"token string\\">\\"localhost:9092\\"</span><span class=\\"token punctuation\\">)</span>\\n    <span class=\\"token function\\">print</span><span class=\\"token punctuation\\">(</span><span class=\\"token string\\">\\"Connected to <span class=\\"token interpolation\\"><span class=\\"token delimiter variable\\">\\\\(</span>connection<span class=\\"token delimiter variable\\">)</span></span> brokers\\"</span><span class=\\"token punctuation\\">)</span>\\n    <span class=\\"token function\\">print</span><span class=\\"token punctuation\\">(</span><span class=\\"token string\\">\\"Waiting for messages from Kafka:\\"</span><span class=\\"token punctuation\\">)</span>\\n    <span class=\\"token keyword\\">try</span> consumer<span class=\\"token punctuation\\">.</span><span class=\\"token function\\">subscribe</span><span class=\\"token punctuation\\">(</span>topics<span class=\\"token punctuation\\">:</span> <span class=\\"token punctuation\\">[</span><span class=\\"token string\\">\\"example\\"</span><span class=\\"token punctuation\\">]</span><span class=\\"token punctuation\\">)</span>\\n    <span class=\\"token keyword\\">while</span><span class=\\"token punctuation\\">(</span><span class=\\"token boolean\\">true</span><span class=\\"token punctuation\\">)</span> <span class=\\"token punctuation\\">{</span>\\n        <span class=\\"token keyword\\">let</span> records <span class=\\"token operator\\">=</span> <span class=\\"token keyword\\">try</span> consumer<span class=\\"token punctuation\\">.</span><span class=\\"token function\\">poll</span><span class=\\"token punctuation\\">(</span><span class=\\"token punctuation\\">)</span>\\n        <span class=\\"token keyword\\">for</span> record <span class=\\"token keyword\\">in</span> records <span class=\\"token punctuation\\">{</span>\\n            <span class=\\"token function\\">print</span><span class=\\"token punctuation\\">(</span><span class=\\"token string\\">\\"Consumed message: <span class=\\"token interpolation\\"><span class=\\"token delimiter variable\\">\\\\(</span>record<span class=\\"token punctuation\\">.</span>value <span class=\\"token keyword\\">as</span> <span class=\\"token builtin\\">Any</span><span class=\\"token delimiter variable\\">)</span></span> from offset <span class=\\"token interpolation\\"><span class=\\"token delimiter variable\\">\\\\(</span>record<span class=\\"token punctuation\\">.</span>offset<span class=\\"token delimiter variable\\">)</span></span>\\"</span>\\n            <span class=\\"token punctuation\\">)</span>\\n        <span class=\\"token punctuation\\">}</span>\\n    <span class=\\"token punctuation\\">}</span>\\n<span class=\\"token punctuation\\">}</span> <span class=\\"token keyword\\">catch</span> <span class=\\"token punctuation\\">{</span>\\n    <span class=\\"token function\\">print</span><span class=\\"token punctuation\\">(</span><span class=\\"token string\\">\\"Error thrown: <span class=\\"token interpolation\\"><span class=\\"token delimiter variable\\">\\\\(</span>error<span class=\\"token punctuation\\">.</span>localizedDescription<span class=\\"token delimiter variable\\">)</span></span>\\"</span><span class=\\"token punctuation\\">)</span>\\n<span class=\\"token punctuation\\">}</span></code></pre></div>\\n<p>This code will initialize a new KafkaConsumer. We have configured our producer to only connect to brokers on IPv4 since we are running on localhost, to begin consuming from the start of all messages and to consume with a group id of “exampleGroup”. We then connect to the Kafka server we started earlier on the default port of “9092”. The program will then read messages from the “example” topic and print the message.</p>\\n<p>You can test this out by running the program:</p>\\n<div class=\\"gatsby-highlight\\" data-language=\\"text\\"><pre class=\\"language-text\\"><code class=\\"language-text\\">$ swift run</code></pre></div>\\n<p>Once the consumer connects to Kafka it should consume all the messages you sent from the producer and print them to the terminal.</p>\\n<h2 id=\\"next-steps\\"><a href=\\"#next-steps\\" aria-label=\\"next steps permalink\\" class=\\"anchor\\"><svg aria-hidden=\\"true\\" focusable=\\"false\\" height=\\"16\\" version=\\"1.1\\" viewBox=\\"0 0 16 16\\" width=\\"16\\"><path fill-rule=\\"evenodd\\" d=\\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\\"></path></svg></a>Next steps</h2>\\n<p>Congratulations! You have just set up an Apache Kafka event stream platform and connected a producer and consumer in Swift.</p>\\n<p>If you would like learn more about SwiftKafka, <a href=\\"https://github.com/IBM-Swift/SwiftKafka\\">check it out on GitHub</a>.</p>\\n<p>If you would like to learn more about using the SwiftKafka API, <a href=\\"https://ibm-swift.github.io/SwiftKafka/index.html\\">visit our API reference</a>.</p>\\n<p>Any questions or comments? Please join the Kitura community on <a href=\\"http://swift-at-ibm-slack.mybluemix.net/?cm_sp=dw-bluemix-_-swift-_-devcenter&#x26;_ga=2.118803593.186671014.1570626561-1743126121.1570022962&#x26;cm_mc_uid=83263075142115698398229&#x26;cm_mc_sid_50200000=53695431570707266328\\">Slack</a>!</p>","frontmatter":{"path":"/blogs/swift-kafka-event-streams","title":"Introducing SwiftKafka: Accessing Event Streams in Swift"}}},{"node":{"html":"<h2 id=\\"introduction\\"><a href=\\"#introduction\\" aria-label=\\"introduction permalink\\" class=\\"anchor\\"><svg aria-hidden=\\"true\\" focusable=\\"false\\" height=\\"16\\" version=\\"1.1\\" viewBox=\\"0 0 16 16\\" width=\\"16\\"><path fill-rule=\\"evenodd\\" d=\\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\\"></path></svg></a>Introduction</h2>\\n<p>In the 2.4 release of Kitura, we introduced a facility called <a href=\\"type-safe-middleware\\">Type-Safe Middleware</a>, and with it two conforming implementations: Sessions and Credentials.</p>\\n<p>If you need to authenticate users of your API, you can use Credentials to specify a middleware when registering your Codable route handler. The handler is invoked only after successful authentication, and an instance of that middleware provides convenient and type-safe access to the user’s profile.</p>\\n<p>With the release of Type-Safe Credentials, we provided a type-safe implementation of HTTP Basic authentication. We’re now pleased to introduce two additional forms of authentication: Google and Facebook OAuth tokens.</p>\\n<p>In addition, a new  <a href=\\"https://ibm-swift.github.io/Kitura-Credentials/Protocols/TypeSafeMultiCredentials.html\\"><code class=\\"language-text\\">TypeSafeMultiCredentials</code></a>  protocol allows a single route handler to accept multiple forms of authentication.</p>\\n<hr>\\n<h2 id=\\"authentication-using-oauth-tokens\\"><a href=\\"#authentication-using-oauth-tokens\\" aria-label=\\"authentication using oauth tokens permalink\\" class=\\"anchor\\"><svg aria-hidden=\\"true\\" focusable=\\"false\\" height=\\"16\\" version=\\"1.1\\" viewBox=\\"0 0 16 16\\" width=\\"16\\"><path fill-rule=\\"evenodd\\" d=\\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\\"></path></svg></a>Authentication using OAuth Tokens</h2>\\n<p>A number of service providers support access delegation using <a href=\\"https://en.wikipedia.org/wiki/OAuth\\">OAuth</a> tokens: an ability for a subject to share elements of their user profile with your application, without specifying a password. The token grants the bearer limited access to the subject’s profile – such as to obtain their user id, name or e-mail address.</p>\\n<p>The token also acts as proof that the subject is who they claim to be: in order to generate the token, they must have successfully logged into that service provider, and consented to share information with your application.</p>\\n<p>Let’s take a look at how we can handle authentication using OAuth tokens from two providers: Google and Facebook.</p>\\n<h3 id=\\"google-oauth-token\\"><a href=\\"#google-oauth-token\\" aria-label=\\"google oauth token permalink\\" class=\\"anchor\\"><svg aria-hidden=\\"true\\" focusable=\\"false\\" height=\\"16\\" version=\\"1.1\\" viewBox=\\"0 0 16 16\\" width=\\"16\\"><path fill-rule=\\"evenodd\\" d=\\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\\"></path></svg></a>Google OAuth Token</h3>\\n<p><a href=\\"https://github.com/IBM-Swift/Kitura-CredentialsGoogle\\">Kitura-CredentialsGoogle</a> makes it simple to create a type-safe middleware that authenticates an incoming request against <a href=\\"https://developers.google.com/identity/protocols/googlescopes#oauth2v2\\">Google’s OAuth2 userinfo API</a>.</p>\\n<p>Start by declaring a dependency on  <code class=\\"language-text\\">Kitura-CredentialsGoogle</code>  in your  <code class=\\"language-text\\">Package.swift</code>:</p>\\n<div class=\\"gatsby-highlight\\" data-language=\\"swift\\"><pre class=\\"language-swift\\"><code class=\\"language-swift\\"><span class=\\"token keyword\\">let</span> package <span class=\\"token operator\\">=</span> <span class=\\"token function\\">Package</span><span class=\\"token punctuation\\">(</span>name<span class=\\"token punctuation\\">:</span> <span class=\\"token string\\">\\"example\\"</span><span class=\\"token punctuation\\">,</span> dependencies<span class=\\"token punctuation\\">:</span> <span class=\\"token punctuation\\">[</span>\\n    <span class=\\"token punctuation\\">.</span><span class=\\"token punctuation\\">.</span><span class=\\"token punctuation\\">.</span>\\n    <span class=\\"token punctuation\\">.</span><span class=\\"token function\\">package</span><span class=\\"token punctuation\\">(</span>url<span class=\\"token punctuation\\">:</span> <span class=\\"token string\\">\\"https://github.com/IBM-Swift/Kitura-CredentialsGoogle.git\\"</span><span class=\\"token punctuation\\">,</span> from<span class=\\"token punctuation\\">:</span> <span class=\\"token string\\">\\"2.2.0\\"</span><span class=\\"token punctuation\\">)</span><span class=\\"token punctuation\\">,</span>\\n  <span class=\\"token punctuation\\">]</span><span class=\\"token punctuation\\">,</span>\\n  targets<span class=\\"token punctuation\\">:</span> <span class=\\"token punctuation\\">[</span>\\n    <span class=\\"token punctuation\\">.</span><span class=\\"token function\\">target</span><span class=\\"token punctuation\\">(</span>name<span class=\\"token punctuation\\">:</span> <span class=\\"token string\\">\\"example\\"</span><span class=\\"token punctuation\\">,</span>\\n            dependencies<span class=\\"token punctuation\\">:</span> <span class=\\"token punctuation\\">[</span> <span class=\\"token string\\">\\"Kitura\\"</span><span class=\\"token punctuation\\">,</span> <span class=\\"token punctuation\\">.</span><span class=\\"token punctuation\\">.</span><span class=\\"token punctuation\\">.</span><span class=\\"token punctuation\\">,</span> <span class=\\"token string\\">\\"CredentialsGoogle\\"</span> <span class=\\"token punctuation\\">]</span><span class=\\"token punctuation\\">)</span><span class=\\"token punctuation\\">,</span></code></pre></div>\\n<p>and import the dependency within your application:</p>\\n<div class=\\"gatsby-highlight\\" data-language=\\"swift\\"><pre class=\\"language-swift\\"><code class=\\"language-swift\\"><span class=\\"token keyword\\">import</span> <span class=\\"token builtin\\">CredentialsGoogle</span></code></pre></div>\\n<p>To authenticate an incoming request that provides a Google OAuth token, you can use the pre-defined  <a href=\\"https://ibm-swift.github.io/Kitura-CredentialsGoogle/Structs/GoogleTokenProfile.html\\">GoogleTokenProfile</a>  type as a middleware when registering a Codable route handler:</p>\\n<div class=\\"gatsby-highlight\\" data-language=\\"swift\\"><pre class=\\"language-swift\\"><code class=\\"language-swift\\">router<span class=\\"token punctuation\\">.</span><span class=\\"token keyword\\">get</span><span class=\\"token punctuation\\">(</span><span class=\\"token string\\">\\"/protected\\"</span><span class=\\"token punctuation\\">)</span> <span class=\\"token punctuation\\">{</span> <span class=\\"token punctuation\\">(</span>user<span class=\\"token punctuation\\">:</span> <span class=\\"token builtin\\">GoogleTokenProfile</span><span class=\\"token punctuation\\">,</span>\\n        respondWith<span class=\\"token punctuation\\">:</span> <span class=\\"token punctuation\\">(</span><span class=\\"token builtin\\">GoogleTokenProfile</span><span class=\\"token operator\\">?</span><span class=\\"token punctuation\\">,</span> <span class=\\"token builtin\\">RequestError</span><span class=\\"token operator\\">?</span><span class=\\"token punctuation\\">)</span> <span class=\\"token operator\\">-</span><span class=\\"token operator\\">></span> <span class=\\"token builtin\\">Void</span><span class=\\"token punctuation\\">)</span> <span class=\\"token keyword\\">in</span>\\n\\n    <span class=\\"token function\\">respondWith</span><span class=\\"token punctuation\\">(</span>user<span class=\\"token punctuation\\">,</span> <span class=\\"token constant\\">nil</span><span class=\\"token punctuation\\">)</span>\\n<span class=\\"token punctuation\\">}</span></code></pre></div>\\n<p>Alternatively, you can customize this type by defining a conformance to the  <a href=\\"https://ibm-swift.github.io/Kitura-CredentialsGoogle/Protocols/TypeSafeGoogleToken.html\\">TypeSafeGoogleToken</a>  protocol:</p>\\n<div class=\\"gatsby-highlight\\" data-language=\\"swift\\"><pre class=\\"language-swift\\"><code class=\\"language-swift\\"><span class=\\"token keyword\\">import</span> <span class=\\"token builtin\\">CredentialsGoogle</span>\\n\\n<span class=\\"token keyword\\">struct</span> <span class=\\"token builtin\\">MyGoogleUser</span><span class=\\"token punctuation\\">:</span> <span class=\\"token builtin\\">TypeSafeGoogleToken</span> <span class=\\"token punctuation\\">{</span>\\n    <span class=\\"token keyword\\">let</span> id<span class=\\"token punctuation\\">:</span> <span class=\\"token builtin\\">String</span>\\n    <span class=\\"token keyword\\">let</span> name<span class=\\"token punctuation\\">:</span> <span class=\\"token builtin\\">String</span>\\n    <span class=\\"token keyword\\">let</span> email<span class=\\"token punctuation\\">:</span> <span class=\\"token builtin\\">String</span><span class=\\"token operator\\">?</span>\\n<span class=\\"token punctuation\\">}</span></code></pre></div>\\n<p>The <code class=\\"language-text\\">MyGoogleUser</code>  type can then be substituted for the  <code class=\\"language-text\\">GoogleTokenProfile</code>  type, and will provide access to only the three fields declared.</p>\\n<h3 id=\\"facebook-oauth-token\\"><a href=\\"#facebook-oauth-token\\" aria-label=\\"facebook oauth token permalink\\" class=\\"anchor\\"><svg aria-hidden=\\"true\\" focusable=\\"false\\" height=\\"16\\" version=\\"1.1\\" viewBox=\\"0 0 16 16\\" width=\\"16\\"><path fill-rule=\\"evenodd\\" d=\\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\\"></path></svg></a>Facebook OAuth Token</h3>\\n<p><a href=\\"https://github.com/IBM-Swift/Kitura-CredentialsFacebook\\">Kitura-CredentialsFacebook</a> defines the equivalent types for authenticating against <a href=\\"https://developers.facebook.com/docs/graph-api/\\">Facebook’s Graph API</a>.</p>\\n<p>Start by declaring a dependency on  <code class=\\"language-text\\">Kitura-CredentialsFacebook</code>  in your  <code class=\\"language-text\\">Package.swift</code>:</p>\\n<div class=\\"gatsby-highlight\\" data-language=\\"swift\\"><pre class=\\"language-swift\\"><code class=\\"language-swift\\"><span class=\\"token keyword\\">let</span> package <span class=\\"token operator\\">=</span> <span class=\\"token function\\">Package</span><span class=\\"token punctuation\\">(</span>name<span class=\\"token punctuation\\">:</span> <span class=\\"token string\\">\\"example\\"</span><span class=\\"token punctuation\\">,</span> dependencies<span class=\\"token punctuation\\">:</span> <span class=\\"token punctuation\\">[</span>\\n    <span class=\\"token punctuation\\">.</span><span class=\\"token punctuation\\">.</span><span class=\\"token punctuation\\">.</span>\\n    <span class=\\"token punctuation\\">.</span><span class=\\"token function\\">package</span><span class=\\"token punctuation\\">(</span>url<span class=\\"token punctuation\\">:</span> <span class=\\"token string\\">\\"https://github.com/IBM-Swift/Kitura-CredentialsFacebook.git\\"</span><span class=\\"token punctuation\\">,</span> from<span class=\\"token punctuation\\">:</span> <span class=\\"token string\\">\\"2.2.0\\"</span><span class=\\"token punctuation\\">)</span><span class=\\"token punctuation\\">,</span>\\n  <span class=\\"token punctuation\\">]</span><span class=\\"token punctuation\\">,</span>\\n  targets<span class=\\"token punctuation\\">:</span> <span class=\\"token punctuation\\">[</span>\\n    <span class=\\"token punctuation\\">.</span><span class=\\"token function\\">target</span><span class=\\"token punctuation\\">(</span>name<span class=\\"token punctuation\\">:</span> <span class=\\"token string\\">\\"example\\"</span><span class=\\"token punctuation\\">,</span>\\n            dependencies<span class=\\"token punctuation\\">:</span> <span class=\\"token punctuation\\">[</span> <span class=\\"token string\\">\\"Kitura\\"</span><span class=\\"token punctuation\\">,</span> <span class=\\"token punctuation\\">.</span><span class=\\"token punctuation\\">.</span><span class=\\"token punctuation\\">.</span><span class=\\"token punctuation\\">,</span> <span class=\\"token string\\">\\"CredentialsFacebook\\"</span> <span class=\\"token punctuation\\">]</span><span class=\\"token punctuation\\">)</span><span class=\\"token punctuation\\">,</span></code></pre></div>\\n<p>To authenticate an incoming request that provides a Facebook OAuth token, you can use the pre-defined <a href=\\"https://ibm-swift.github.io/Kitura-CredentialsFacebook/Structs/FacebookTokenProfile.html\\">FacebookTokenProfile</a> type as a middleware:</p>\\n<div class=\\"gatsby-highlight\\" data-language=\\"swift\\"><pre class=\\"language-swift\\"><code class=\\"language-swift\\"><span class=\\"token keyword\\">import</span> <span class=\\"token builtin\\">CredentialsFacebook</span>\\n<span class=\\"token punctuation\\">.</span><span class=\\"token punctuation\\">.</span><span class=\\"token punctuation\\">.</span>\\n<span class=\\"token comment\\">// Optionally, specify your Facebook App ID to only accept tokens that were</span>\\n<span class=\\"token comment\\">// issued to your application.</span>\\n<span class=\\"token builtin\\">FacebookTokenProfile</span><span class=\\"token punctuation\\">.</span>appID <span class=\\"token operator\\">=</span> <span class=\\"token string\\">\\"&lt;your app id>\\"</span>\\n<span class=\\"token punctuation\\">.</span><span class=\\"token punctuation\\">.</span><span class=\\"token punctuation\\">.</span>\\nrouter<span class=\\"token punctuation\\">.</span><span class=\\"token keyword\\">get</span><span class=\\"token punctuation\\">(</span><span class=\\"token string\\">\\"/protected\\"</span><span class=\\"token punctuation\\">)</span> <span class=\\"token punctuation\\">{</span> <span class=\\"token punctuation\\">(</span>user<span class=\\"token punctuation\\">:</span> <span class=\\"token builtin\\">FacebookTokenProfile</span><span class=\\"token punctuation\\">,</span>\\n         respondWith<span class=\\"token punctuation\\">:</span> <span class=\\"token punctuation\\">(</span><span class=\\"token builtin\\">FacebookTokenProfile</span><span class=\\"token operator\\">?</span><span class=\\"token punctuation\\">,</span> <span class=\\"token builtin\\">RequestError</span><span class=\\"token operator\\">?</span><span class=\\"token punctuation\\">)</span> <span class=\\"token operator\\">-</span><span class=\\"token operator\\">></span> <span class=\\"token builtin\\">Void</span><span class=\\"token punctuation\\">)</span> <span class=\\"token keyword\\">in</span>\\n\\n    <span class=\\"token function\\">respondWith</span><span class=\\"token punctuation\\">(</span>user<span class=\\"token punctuation\\">,</span> <span class=\\"token constant\\">nil</span><span class=\\"token punctuation\\">)</span>\\n<span class=\\"token punctuation\\">}</span></code></pre></div>\\n<p>Again, you can create a custom type by defining a conformance to the <a href=\\"https://ibm-swift.github.io/Kitura-CredentialsFacebook/Protocols/TypeSafeFacebookToken.html\\">TypeSafeFacebookToken</a> protocol:</p>\\n<div class=\\"gatsby-highlight\\" data-language=\\"swift\\"><pre class=\\"language-swift\\"><code class=\\"language-swift\\"><span class=\\"token keyword\\">import</span> <span class=\\"token builtin\\">CredentialsFacebook</span>\\n\\n<span class=\\"token keyword\\">struct</span> <span class=\\"token builtin\\">MyFacebookUser</span><span class=\\"token punctuation\\">:</span> <span class=\\"token builtin\\">TypeSafeFacebookToken</span> <span class=\\"token punctuation\\">{</span>\\n    <span class=\\"token keyword\\">let</span> id<span class=\\"token punctuation\\">:</span> <span class=\\"token builtin\\">String</span>\\n    <span class=\\"token keyword\\">let</span> name<span class=\\"token punctuation\\">:</span> <span class=\\"token builtin\\">String</span>\\n    <span class=\\"token keyword\\">let</span> email<span class=\\"token punctuation\\">:</span> <span class=\\"token builtin\\">String</span><span class=\\"token operator\\">?</span>\\n\\n    <span class=\\"token keyword\\">static</span> <span class=\\"token keyword\\">var</span> appID<span class=\\"token punctuation\\">:</span> <span class=\\"token builtin\\">String</span><span class=\\"token operator\\">?</span> <span class=\\"token operator\\">=</span> <span class=\\"token string\\">\\"&lt;your app id>\\"</span>\\n<span class=\\"token punctuation\\">}</span></code></pre></div>\\n<p>However, there are some key differences between the Google and Facebook methods that warrant some closer examination:</p>\\n<ol>\\n<li>Profile contents</li>\\n</ol>\\n<p>The Google userinfo API provides a fixed profile of information where the subject may optionally choose to share their e-mail address and gender. Requests to Google’s API do not specify which fields are desired: all granted fields are returned.</p>\\n<p>In contrast, the Facebook Graph API requires you to specify which fields of a subject’s profile you wish to access. The token determines what subset of these fields have been granted to you by the subject.</p>\\n<p>In order to determine which fields should be requested from Facebook, the  <a href=\\"https://ibm-swift.github.io/Kitura-CredentialsFacebook/Protocols/TypeSafeFacebook.html\\">TypeSafeFacebook</a>  protocol specifies a list of  <code class=\\"language-text\\">validFieldNames</code>  that can be requested from the API. The properties declared by your type are filtered against this list, and the resulting set requested from Facebook. The Facebook response is used to initialize those properties when a user is authenticated.</p>\\n<blockquote>\\n<p>This requires all other properties of your type to be <code class=\\"language-text\\">optional</code>.</p>\\n</blockquote>\\n<p>The built-in list of field names is likely to be sufficient for most cases but can be overridden by your type if needed.</p>\\n<ol start=\\"2\\">\\n<li>App-scoped Identifiers and OAuth AppID verification</li>\\n</ol>\\n<p>The Facebook  <code class=\\"language-text\\">id</code>  field is application-scoped. This means that for a given subject, the value of their id is dependent on the OAuth app that was granted access. The value is still globally unique – meaning that the same value will not be assigned to a different subject in a different application scope.</p>\\n<p>In order to establish the user’s identity in the context of your application, we first verify that the supplied token was issued to your App. If the App ID matches, then the token is used to retrieve the subject’s identity. However, if you do not specify a value for  <code class=\\"language-text\\">appID</code>, this verification will be skipped and any valid token will be accepted.</p>\\n<h3 id=\\"caching-of-tokens\\"><a href=\\"#caching-of-tokens\\" aria-label=\\"caching of tokens permalink\\" class=\\"anchor\\"><svg aria-hidden=\\"true\\" focusable=\\"false\\" height=\\"16\\" version=\\"1.1\\" viewBox=\\"0 0 16 16\\" width=\\"16\\"><path fill-rule=\\"evenodd\\" d=\\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\\"></path></svg></a>Caching of Tokens</h3>\\n<p>Rather than querying the service provider upon every incoming request, profiles are cached against their respective token using an in-memory cache.</p>\\n<p>Note that there is a behavioral difference between profiles that are defined as structs or classes: if you declare your profile as a struct, changes are not persistent within the cache. If the profile type is a class, then if its properties are changed, the changes will be reflected upon subsequent retrievals from the cache. You should consider using a class type if you need to be able to modify the token profile type.</p>\\n<hr>\\n<h2 id=\\"multiple-authentication-methods\\"><a href=\\"#multiple-authentication-methods\\" aria-label=\\"multiple authentication methods permalink\\" class=\\"anchor\\"><svg aria-hidden=\\"true\\" focusable=\\"false\\" height=\\"16\\" version=\\"1.1\\" viewBox=\\"0 0 16 16\\" width=\\"16\\"><path fill-rule=\\"evenodd\\" d=\\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\\"></path></svg></a>Multiple authentication methods</h2>\\n<p>The above examples show how to require a specific type of authentication to access a resource. However, it is common to accept multiple forms of authentication – such as tokens from multiple authentication providers.</p>\\n<p>The  <a href=\\"https://ibm-swift.github.io/Kitura-Credentials/Protocols/TypeSafeMultiCredentials.html\\">TypeSafeMultiCredentials</a>  protocol provides a way to define a <code class=\\"language-text\\">TypeSafeMiddleware</code> that permits authentication against a list of methods – an array of  <a href=\\"https://ibm-swift.github.io/Kitura-Credentials/Protocols/TypeSafeCredentials.html\\">TypeSafeCredentials</a>  types, such as the ones we defined above.</p>\\n<p>To use this facility, define a type that conforms to the protocol. This requires that you define an  <code class=\\"language-text\\">authenticationMethods</code>  property that lists the permitted authentication methods, and an initializer that takes a  <code class=\\"language-text\\">TypeSafeCredentials</code>  parameter. For example:</p>\\n<div class=\\"gatsby-highlight\\" data-language=\\"swift\\"><pre class=\\"language-swift\\"><code class=\\"language-swift\\"><span class=\\"token keyword\\">import</span> <span class=\\"token builtin\\">Credentials</span>\\n\\n<span class=\\"token keyword\\">struct</span> <span class=\\"token builtin\\">MyMultiAuthedUser</span><span class=\\"token punctuation\\">:</span> <span class=\\"token builtin\\">TypeSafeMultiCredentials</span> <span class=\\"token punctuation\\">{</span>\\n    <span class=\\"token keyword\\">let</span> id<span class=\\"token punctuation\\">:</span> <span class=\\"token builtin\\">String</span>                   <span class=\\"token comment\\">// Protocol requirement</span>\\n    <span class=\\"token keyword\\">let</span> provider<span class=\\"token punctuation\\">:</span> <span class=\\"token builtin\\">String</span>             <span class=\\"token comment\\">// Protocol requirement</span>\\n    <span class=\\"token keyword\\">let</span> name<span class=\\"token punctuation\\">:</span> <span class=\\"token builtin\\">String</span>                 <span class=\\"token comment\\">// Custom property</span>\\n    <span class=\\"token keyword\\">let</span> email<span class=\\"token punctuation\\">:</span> <span class=\\"token builtin\\">String</span><span class=\\"token operator\\">?</span>               <span class=\\"token comment\\">// Custom, optional property</span>\\n\\n    <span class=\\"token keyword\\">static</span> <span class=\\"token keyword\\">var</span> authenticationMethods<span class=\\"token punctuation\\">:</span> <span class=\\"token punctuation\\">[</span><span class=\\"token builtin\\">TypeSafeCredentials</span><span class=\\"token punctuation\\">.</span><span class=\\"token keyword\\">Type</span><span class=\\"token punctuation\\">]</span>\\n            <span class=\\"token operator\\">=</span> <span class=\\"token punctuation\\">[</span><span class=\\"token builtin\\">MyBasicAuth</span><span class=\\"token punctuation\\">.</span><span class=\\"token keyword\\">self</span><span class=\\"token punctuation\\">,</span> <span class=\\"token builtin\\">MyFacebookUser</span><span class=\\"token punctuation\\">.</span><span class=\\"token keyword\\">self</span><span class=\\"token punctuation\\">,</span> <span class=\\"token builtin\\">MyGoogleUser</span><span class=\\"token punctuation\\">.</span><span class=\\"token keyword\\">self</span><span class=\\"token punctuation\\">]</span>\\n\\n    <span class=\\"token keyword\\">init</span><span class=\\"token punctuation\\">(</span>successfulAuth<span class=\\"token punctuation\\">:</span> <span class=\\"token builtin\\">TypeSafeCredentials</span><span class=\\"token punctuation\\">)</span> <span class=\\"token punctuation\\">{</span>\\n        <span class=\\"token keyword\\">self</span><span class=\\"token punctuation\\">.</span>id <span class=\\"token operator\\">=</span> successfulAuth<span class=\\"token punctuation\\">.</span>id\\n        <span class=\\"token keyword\\">self</span><span class=\\"token punctuation\\">.</span>provider <span class=\\"token operator\\">=</span> successfulAuth<span class=\\"token punctuation\\">.</span>provider\\n\\n        <span class=\\"token comment\\">// Initialize additional properties based on authentication type.</span>\\n        <span class=\\"token keyword\\">switch</span> successfulAuth <span class=\\"token punctuation\\">{</span>\\n        <span class=\\"token keyword\\">case</span> <span class=\\"token keyword\\">let</span> googleToken <span class=\\"token keyword\\">as</span> <span class=\\"token builtin\\">MyGoogleUser</span><span class=\\"token punctuation\\">:</span>\\n            <span class=\\"token keyword\\">self</span><span class=\\"token punctuation\\">.</span>name <span class=\\"token operator\\">=</span> googleToken<span class=\\"token punctuation\\">.</span>name\\n            <span class=\\"token keyword\\">self</span><span class=\\"token punctuation\\">.</span>email <span class=\\"token operator\\">=</span> googleToken<span class=\\"token punctuation\\">.</span>email\\n        <span class=\\"token keyword\\">case</span> <span class=\\"token keyword\\">let</span> facebookToken <span class=\\"token keyword\\">as</span> <span class=\\"token builtin\\">MyFacebookUser</span><span class=\\"token punctuation\\">:</span>\\n            <span class=\\"token keyword\\">self</span><span class=\\"token punctuation\\">.</span>name <span class=\\"token operator\\">=</span> facebookToken<span class=\\"token punctuation\\">.</span>name\\n            <span class=\\"token keyword\\">self</span><span class=\\"token punctuation\\">.</span>email <span class=\\"token operator\\">=</span> facebookToken<span class=\\"token punctuation\\">.</span>email\\n        <span class=\\"token keyword\\">default</span><span class=\\"token punctuation\\">:</span>\\n            <span class=\\"token keyword\\">self</span><span class=\\"token punctuation\\">.</span>name <span class=\\"token operator\\">=</span> successfulAuth<span class=\\"token punctuation\\">.</span>id    <span class=\\"token comment\\">// Map id to name for HTTP Basic</span>\\n            <span class=\\"token keyword\\">self</span><span class=\\"token punctuation\\">.</span>email <span class=\\"token operator\\">=</span> <span class=\\"token constant\\">nil</span>\\n        <span class=\\"token punctuation\\">}</span>\\n    <span class=\\"token punctuation\\">}</span>\\n<span class=\\"token punctuation\\">}</span></code></pre></div>\\n<blockquote>\\n<p>The <code class=\\"language-text\\">MyBasicAuth</code> type represents HTTP Basic authentication, and the code can be found in the previous post: <a href=\\"/blogs/type-safe-middleware\\">A new kind of Kitura middleware: type-safe and easy to use</a>.</p>\\n</blockquote>\\n<p>This type can then be used in your Codable route handler, in the same way as before:</p>\\n<div class=\\"gatsby-highlight\\" data-language=\\"swift\\"><pre class=\\"language-swift\\"><code class=\\"language-swift\\">app<span class=\\"token punctuation\\">.</span>router<span class=\\"token punctuation\\">.</span><span class=\\"token keyword\\">get</span><span class=\\"token punctuation\\">(</span><span class=\\"token string\\">\\"/multiAuthProfile\\"</span><span class=\\"token punctuation\\">)</span> <span class=\\"token punctuation\\">{</span> <span class=\\"token punctuation\\">(</span>userProfile<span class=\\"token punctuation\\">:</span> <span class=\\"token builtin\\">MyMultiAuthedUser</span><span class=\\"token punctuation\\">,</span>\\n         respondWith<span class=\\"token punctuation\\">:</span> <span class=\\"token punctuation\\">(</span><span class=\\"token builtin\\">MyMultiAuthedUser</span><span class=\\"token operator\\">?</span><span class=\\"token punctuation\\">,</span> <span class=\\"token builtin\\">RequestError</span><span class=\\"token operator\\">?</span><span class=\\"token punctuation\\">)</span> <span class=\\"token operator\\">-</span><span class=\\"token operator\\">></span> <span class=\\"token builtin\\">Void</span><span class=\\"token punctuation\\">)</span> <span class=\\"token keyword\\">in</span>\\n\\n    <span class=\\"token function\\">print</span><span class=\\"token punctuation\\">(</span><span class=\\"token string\\">\\"Authenticated <span class=\\"token interpolation\\"><span class=\\"token delimiter variable\\">\\\\(</span>userProfile<span class=\\"token punctuation\\">.</span>id<span class=\\"token delimiter variable\\">)</span></span> using <span class=\\"token interpolation\\"><span class=\\"token delimiter variable\\">\\\\(</span>userProfile<span class=\\"token punctuation\\">.</span>provider<span class=\\"token delimiter variable\\">)</span></span>\\"</span><span class=\\"token punctuation\\">)</span>\\n    <span class=\\"token function\\">respondWith</span><span class=\\"token punctuation\\">(</span>userProfile<span class=\\"token punctuation\\">,</span> <span class=\\"token constant\\">nil</span><span class=\\"token punctuation\\">)</span>\\n<span class=\\"token punctuation\\">}</span></code></pre></div>\\n<h2 id=\\"client-side-support-with-kiturakit\\"><a href=\\"#client-side-support-with-kiturakit\\" aria-label=\\"client side support with kiturakit permalink\\" class=\\"anchor\\"><svg aria-hidden=\\"true\\" focusable=\\"false\\" height=\\"16\\" version=\\"1.1\\" viewBox=\\"0 0 16 16\\" width=\\"16\\"><path fill-rule=\\"evenodd\\" d=\\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\\"></path></svg></a>Client-side support with KituraKit</h2>\\n<p>Support has also been added to KituraKit for supplying token or HTTP Basic credentials. The client now has a  <code class=\\"language-text\\">defaultCredentials: ClientCredentials?</code>  property that can be used to specify the credentials that should be supplied for each request from this client.</p>\\n<p>As an example, let’s use KituraKit to retrieve the user profile corresponding to a set of credentials, using the <code class=\\"language-text\\">/multiAuthProfile</code> route we defined earlier. First we need a type to represent the profile information on the client side:</p>\\n<div class=\\"gatsby-highlight\\" data-language=\\"swift\\"><pre class=\\"language-swift\\"><code class=\\"language-swift\\"><span class=\\"token keyword\\">struct</span> <span class=\\"token builtin\\">AuthedUser</span><span class=\\"token punctuation\\">:</span> <span class=\\"token builtin\\">Codable</span> <span class=\\"token punctuation\\">{</span>\\n    <span class=\\"token keyword\\">let</span> id<span class=\\"token punctuation\\">:</span> <span class=\\"token builtin\\">String</span>\\n    <span class=\\"token keyword\\">let</span> provider<span class=\\"token punctuation\\">:</span> <span class=\\"token builtin\\">String</span>\\n    <span class=\\"token keyword\\">let</span> name<span class=\\"token punctuation\\">:</span> <span class=\\"token builtin\\">String</span>\\n    <span class=\\"token keyword\\">let</span> email<span class=\\"token punctuation\\">:</span> <span class=\\"token builtin\\">String</span><span class=\\"token operator\\">?</span>\\n<span class=\\"token punctuation\\">}</span></code></pre></div>\\n<p>Now we can define a set of default credentials – in this case, HTTP Basic – to be used when accessing the server:</p>\\n<div class=\\"gatsby-highlight\\" data-language=\\"swift\\"><pre class=\\"language-swift\\"><code class=\\"language-swift\\"><span class=\\"token keyword\\">import</span> <span class=\\"token builtin\\">KituraKit</span>\\n\\n<span class=\\"token comment\\">// Create a KituraKit client</span>\\n<span class=\\"token keyword\\">guard</span> <span class=\\"token keyword\\">let</span> client <span class=\\"token operator\\">=</span> <span class=\\"token function\\">KituraKit</span><span class=\\"token punctuation\\">(</span>baseURL<span class=\\"token punctuation\\">:</span> <span class=\\"token string\\">\\"http://localhost:8080\\"</span><span class=\\"token punctuation\\">)</span> <span class=\\"token keyword\\">else</span> <span class=\\"token punctuation\\">{</span>\\n    <span class=\\"token function\\">fatalError</span><span class=\\"token punctuation\\">(</span><span class=\\"token string\\">\\"Unable to create client\\"</span><span class=\\"token punctuation\\">)</span>\\n<span class=\\"token punctuation\\">}</span>\\n<span class=\\"token comment\\">// Assign default credentials to this client</span>\\nclient<span class=\\"token punctuation\\">.</span>defaultCredentials <span class=\\"token operator\\">=</span> <span class=\\"token function\\">HTTPBasic</span><span class=\\"token punctuation\\">(</span>username<span class=\\"token punctuation\\">:</span> <span class=\\"token string\\">\\"John\\"</span><span class=\\"token punctuation\\">,</span> password<span class=\\"token punctuation\\">:</span> <span class=\\"token string\\">\\"12345\\"</span><span class=\\"token punctuation\\">)</span>\\n\\n<span class=\\"token comment\\">// Make a request using the default credentials</span>\\nclient<span class=\\"token punctuation\\">.</span><span class=\\"token keyword\\">get</span><span class=\\"token punctuation\\">(</span><span class=\\"token string\\">\\"/multiAuthProfile\\"</span><span class=\\"token punctuation\\">)</span> <span class=\\"token punctuation\\">{</span> <span class=\\"token punctuation\\">(</span>returnedItem<span class=\\"token punctuation\\">:</span> <span class=\\"token builtin\\">AuthedUser</span><span class=\\"token operator\\">?</span><span class=\\"token punctuation\\">,</span>\\n        error<span class=\\"token punctuation\\">:</span> <span class=\\"token builtin\\">Error</span><span class=\\"token operator\\">?</span><span class=\\"token punctuation\\">)</span> <span class=\\"token operator\\">-</span><span class=\\"token operator\\">></span> <span class=\\"token builtin\\">Void</span> <span class=\\"token keyword\\">in</span>\\n\\n    <span class=\\"token keyword\\">guard</span> <span class=\\"token keyword\\">let</span> returnedItem <span class=\\"token operator\\">=</span> returnedItem <span class=\\"token keyword\\">else</span> <span class=\\"token punctuation\\">{</span>\\n        <span class=\\"token function\\">print</span><span class=\\"token punctuation\\">(</span><span class=\\"token string\\">\\"Failed to retrieve user profile with default credentials: <span class=\\"token interpolation\\"><span class=\\"token delimiter variable\\">\\\\(</span>error<span class=\\"token delimiter variable\\">)</span></span>\\"</span><span class=\\"token punctuation\\">)</span>\\n        <span class=\\"token keyword\\">return</span>\\n    <span class=\\"token punctuation\\">}</span>\\n    <span class=\\"token function\\">print</span><span class=\\"token punctuation\\">(</span><span class=\\"token string\\">\\"Response with default credentials: <span class=\\"token interpolation\\"><span class=\\"token delimiter variable\\">\\\\(</span>returnedItem<span class=\\"token delimiter variable\\">)</span></span>\\"</span><span class=\\"token punctuation\\">)</span>\\n<span class=\\"token punctuation\\">}</span></code></pre></div>\\n<p>This results in the output:</p>\\n<div class=\\"gatsby-highlight\\" data-language=\\"text\\"><pre class=\\"language-text\\"><code class=\\"language-text\\">Response with default credentials: AuthedUser(id: &quot;John&quot;, provider: &quot;HTTPBasic&quot;, name: &quot;John&quot;, email: nil)</code></pre></div>\\n<p>You can override the  <code class=\\"language-text\\">defaultCredentials</code>  for an individual request by specifying the <code class=\\"language-text\\">credentials: ClientCredentials?</code> parameter:</p>\\n<div class=\\"gatsby-highlight\\" data-language=\\"swift\\"><pre class=\\"language-swift\\"><code class=\\"language-swift\\"><span class=\\"token keyword\\">let</span> googleToken <span class=\\"token operator\\">=</span> <span class=\\"token string\\">\\"abc123\\"</span>  <span class=\\"token comment\\">// Your Google access token</span>\\n\\n<span class=\\"token comment\\">// Make a request using specific credentials</span>\\nclient<span class=\\"token punctuation\\">.</span><span class=\\"token keyword\\">get</span><span class=\\"token punctuation\\">(</span><span class=\\"token string\\">\\"/multiAuthProfile\\"</span><span class=\\"token punctuation\\">,</span> credentials<span class=\\"token punctuation\\">:</span> <span class=\\"token function\\">GoogleToken</span><span class=\\"token punctuation\\">(</span>token<span class=\\"token punctuation\\">:</span> googleToken<span class=\\"token punctuation\\">)</span><span class=\\"token punctuation\\">)</span> <span class=\\"token punctuation\\">{</span>\\n        <span class=\\"token punctuation\\">(</span>returnedItem<span class=\\"token punctuation\\">:</span> <span class=\\"token builtin\\">AuthedUser</span><span class=\\"token operator\\">?</span><span class=\\"token punctuation\\">,</span> error<span class=\\"token punctuation\\">:</span> <span class=\\"token builtin\\">Error</span><span class=\\"token operator\\">?</span><span class=\\"token punctuation\\">)</span> <span class=\\"token operator\\">-</span><span class=\\"token operator\\">></span> <span class=\\"token builtin\\">Void</span> <span class=\\"token keyword\\">in</span>\\n\\n    <span class=\\"token keyword\\">guard</span> <span class=\\"token keyword\\">let</span> returnedItem <span class=\\"token operator\\">=</span> returnedItem <span class=\\"token keyword\\">else</span> <span class=\\"token punctuation\\">{</span>\\n        <span class=\\"token function\\">print</span><span class=\\"token punctuation\\">(</span><span class=\\"token string\\">\\"Failed to retrieve user profile with Google token: <span class=\\"token interpolation\\"><span class=\\"token delimiter variable\\">\\\\(</span>error<span class=\\"token delimiter variable\\">)</span></span>\\"</span><span class=\\"token punctuation\\">)</span>\\n        <span class=\\"token keyword\\">return</span>\\n    <span class=\\"token punctuation\\">}</span>\\n    <span class=\\"token function\\">print</span><span class=\\"token punctuation\\">(</span><span class=\\"token string\\">\\"Response with Google token: <span class=\\"token interpolation\\"><span class=\\"token delimiter variable\\">\\\\(</span>returnedItem<span class=\\"token delimiter variable\\">)</span></span>\\"</span><span class=\\"token punctuation\\">)</span>\\n<span class=\\"token punctuation\\">}</span></code></pre></div>\\n<p>This results in output corresponding to the Google profile information provided via the token:</p>\\n<div class=\\"gatsby-highlight\\" data-language=\\"text\\"><pre class=\\"language-text\\"><code class=\\"language-text\\">Response with Google token: AuthedUser(id: &quot;1234567890&quot;, provider: &quot;Google&quot;, name: &quot;John Doe&quot;, email: Optional(&quot;john_doe@invalid.com&quot;))</code></pre></div>\\n<p>Finally, if you have set the default credentials but then wish to make a request from that client without supplying credentials, you can specify the <code class=\\"language-text\\">NilCredentials</code> type:</p>\\n<div class=\\"gatsby-highlight\\" data-language=\\"swift\\"><pre class=\\"language-swift\\"><code class=\\"language-swift\\"><span class=\\"token comment\\">// Make a request without providing credentials</span>\\nclient<span class=\\"token punctuation\\">.</span><span class=\\"token keyword\\">get</span><span class=\\"token punctuation\\">(</span><span class=\\"token string\\">\\"/multiAuthProfile\\"</span><span class=\\"token punctuation\\">,</span> credentials<span class=\\"token punctuation\\">:</span> <span class=\\"token function\\">NilCredentials</span><span class=\\"token punctuation\\">(</span><span class=\\"token punctuation\\">)</span><span class=\\"token punctuation\\">)</span> <span class=\\"token punctuation\\">{</span>\\n        <span class=\\"token punctuation\\">(</span>returnedItem<span class=\\"token punctuation\\">:</span> <span class=\\"token builtin\\">AuthedUser</span><span class=\\"token operator\\">?</span><span class=\\"token punctuation\\">,</span> error<span class=\\"token punctuation\\">:</span> <span class=\\"token builtin\\">Error</span><span class=\\"token operator\\">?</span><span class=\\"token punctuation\\">)</span> <span class=\\"token operator\\">-</span><span class=\\"token operator\\">></span> <span class=\\"token builtin\\">Void</span> <span class=\\"token keyword\\">in</span>\\n\\n    <span class=\\"token keyword\\">guard</span> <span class=\\"token keyword\\">let</span> error <span class=\\"token operator\\">=</span> error <span class=\\"token keyword\\">else</span> <span class=\\"token punctuation\\">{</span>\\n        <span class=\\"token function\\">print</span><span class=\\"token punctuation\\">(</span><span class=\\"token string\\">\\"Unexpected success without credentials: <span class=\\"token interpolation\\"><span class=\\"token delimiter variable\\">\\\\(</span>returnedItem<span class=\\"token delimiter variable\\">)</span></span>\\"</span><span class=\\"token punctuation\\">)</span>\\n        <span class=\\"token keyword\\">return</span>\\n    <span class=\\"token punctuation\\">}</span>\\n    <span class=\\"token function\\">print</span><span class=\\"token punctuation\\">(</span><span class=\\"token string\\">\\"Response without credentials: <span class=\\"token interpolation\\"><span class=\\"token delimiter variable\\">\\\\(</span>error<span class=\\"token delimiter variable\\">)</span></span>\\"</span><span class=\\"token punctuation\\">)</span>\\n<span class=\\"token punctuation\\">}</span></code></pre></div>\\n<p>Which results in:</p>\\n<div class=\\"gatsby-highlight\\" data-language=\\"text\\"><pre class=\\"language-text\\"><code class=\\"language-text\\">Response without credentials: 401 : Unauthorized</code></pre></div>\\n<hr>\\n<h2 id=\\"next-steps\\"><a href=\\"#next-steps\\" aria-label=\\"next steps permalink\\" class=\\"anchor\\"><svg aria-hidden=\\"true\\" focusable=\\"false\\" height=\\"16\\" version=\\"1.1\\" viewBox=\\"0 0 16 16\\" width=\\"16\\"><path fill-rule=\\"evenodd\\" d=\\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\\"></path></svg></a>Next steps</h2>\\n<p>Now that we can identify a user and some basic profile information, we may wish to associate a more rich and domain-specific user profile with them, and have access to this profile within our handlers too.</p>\\n<p>In a future post, we’ll look at how we can use <a href=\\"https://github.com/IBM-Swift/Swift-Kuery-ORM\\">Swift-Kuery-ORM</a> to easily store and retrieve user profiles in Codable routes.</p>\\n<p>Join the <a href=\\"http://swift-at-ibm-slack.mybluemix.net/?cm_sp=dw-bluemix-_-swift-_-devcenter&#x26;_ga=2.78945687.2052919715.1571393501-1533615335.1571393501\\">Kitura community on Slack</a> to discuss your thoughts or questions on this topic or Kitura in general.</p>","frontmatter":{"path":"/blogs/type-safe-authentication-using-oauth-tokens","title":"Type-Safe Authentication using OAuth tokens"}}},{"node":{"html":"<p>Kitura 2.0 introduced Codable routing, a powerful way to quickly build REST APIs from Swift datatypes. <a href=\\"/blogs/announcing-kitura-2-4\\">Kitura 2.4</a> enhances Codable routing by introducing “Type-Safe Middlewares”. This is a facility that centralizes your middleware logic in one place, guarantees that routes are invoked only after any required middlewares have successfully executed, and provides compile-time type safety to your Kitura app. This blog introduces the <code class=\\"language-text\\">TypeSafeMiddleware</code> protocol and demonstrates it being used with sessions and HTTP Basic authentication.</p>\\n<h2 id=\\"type-safe-middleware\\"><a href=\\"#type-safe-middleware\\" aria-label=\\"type safe middleware permalink\\" class=\\"anchor\\"><svg aria-hidden=\\"true\\" focusable=\\"false\\" height=\\"16\\" version=\\"1.1\\" viewBox=\\"0 0 16 16\\" width=\\"16\\"><path fill-rule=\\"evenodd\\" d=\\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\\"></path></svg></a>Type-Safe Middleware</h2>\\n<p>Traditional Kitura middlewares are functions that you can register against routes. They run code and change the request and response before the execution of the route handlers. This is implemented by the <code class=\\"language-text\\">handle()</code> function in the following protocol:</p>\\n<div class=\\"gatsby-highlight\\" data-language=\\"swift\\"><pre class=\\"language-swift\\"><code class=\\"language-swift\\"><span class=\\"token keyword\\">public</span> <span class=\\"token keyword\\">protocol</span> <span class=\\"token builtin\\">RouterMiddleware</span> <span class=\\"token punctuation\\">{</span>\\n    <span class=\\"token keyword\\">func</span> <span class=\\"token function\\">handle</span><span class=\\"token punctuation\\">(</span>request<span class=\\"token punctuation\\">:</span> <span class=\\"token builtin\\">RouterRequest</span><span class=\\"token punctuation\\">,</span>\\n                response<span class=\\"token punctuation\\">:</span> <span class=\\"token builtin\\">RouterResponse</span><span class=\\"token punctuation\\">,</span>\\n                next<span class=\\"token punctuation\\">:</span> @escaping <span class=\\"token punctuation\\">(</span><span class=\\"token punctuation\\">)</span> <span class=\\"token operator\\">-</span><span class=\\"token operator\\">></span> <span class=\\"token builtin\\">Void</span><span class=\\"token punctuation\\">)</span> <span class=\\"token keyword\\">throws</span>\\n<span class=\\"token punctuation\\">}</span></code></pre></div>\\n<p>However, Codable routes abstract away the request and response, so the results of standard middlewares are not available within the route handler.</p>\\n<p>Type-safe middlewares, rather than augmenting the request/response objects, are responsible for returning an instance of a concrete Swift type:</p>\\n<div class=\\"gatsby-highlight\\" data-language=\\"swift\\"><pre class=\\"language-swift\\"><code class=\\"language-swift\\"><span class=\\"token keyword\\">public</span> <span class=\\"token keyword\\">protocol</span> <span class=\\"token builtin\\">TypeSafeMiddleware</span> <span class=\\"token punctuation\\">{</span>\\n    <span class=\\"token keyword\\">static</span> <span class=\\"token keyword\\">func</span> <span class=\\"token function\\">handle</span><span class=\\"token punctuation\\">(</span>request<span class=\\"token punctuation\\">:</span> <span class=\\"token builtin\\">RouterRequest</span><span class=\\"token punctuation\\">,</span>\\n                       response<span class=\\"token punctuation\\">:</span> <span class=\\"token builtin\\">RouterResponse</span><span class=\\"token punctuation\\">,</span>\\n                       completion<span class=\\"token punctuation\\">:</span> @escaping <span class=\\"token punctuation\\">(</span><span class=\\"token keyword\\">Self</span><span class=\\"token operator\\">?</span><span class=\\"token punctuation\\">,</span> <span class=\\"token builtin\\">RequestError</span><span class=\\"token operator\\">?</span><span class=\\"token punctuation\\">)</span> <span class=\\"token operator\\">-</span><span class=\\"token operator\\">></span> <span class=\\"token builtin\\">Void</span><span class=\\"token punctuation\\">)</span>\\n<span class=\\"token punctuation\\">}</span></code></pre></div>\\n<p>The concrete type is <code class=\\"language-text\\">Self</code>, because this centralizes the middleware’s structure and behavior into a single place. The Codable route handler is passed a successfully executed middleware instance. This provides the user access to the middleware and the instance properties they specified when defining the type.</p>\\n<p>To add a type-safe middleware to your Codable route, specify the middleware in the application route handler. For example, a handler for GET requests that requires an instance of <code class=\\"language-text\\">MyMiddleware</code> becomes:</p>\\n<div class=\\"gatsby-highlight\\" data-language=\\"swift\\"><pre class=\\"language-swift\\"><code class=\\"language-swift\\">router<span class=\\"token punctuation\\">.</span><span class=\\"token keyword\\">get</span><span class=\\"token punctuation\\">(</span><span class=\\"token string\\">\\"/example\\"</span><span class=\\"token punctuation\\">,</span> handler<span class=\\"token punctuation\\">:</span> getHandler<span class=\\"token punctuation\\">)</span>\\n\\n<span class=\\"token keyword\\">func</span> <span class=\\"token function\\">getHandler</span><span class=\\"token punctuation\\">(</span>middleware<span class=\\"token punctuation\\">:</span> <span class=\\"token builtin\\">MyMiddleware</span><span class=\\"token punctuation\\">,</span> completion<span class=\\"token punctuation\\">:</span> @escaping <span class=\\"token punctuation\\">(</span><span class=\\"token builtin\\">User</span><span class=\\"token operator\\">?</span><span class=\\"token punctuation\\">,</span> <span class=\\"token builtin\\">RequestError</span><span class=\\"token operator\\">?</span><span class=\\"token punctuation\\">)</span> <span class=\\"token operator\\">-</span><span class=\\"token operator\\">></span> <span class=\\"token builtin\\">Void</span><span class=\\"token punctuation\\">)</span> <span class=\\"token punctuation\\">{</span>\\n    <span class=\\"token keyword\\">let</span> user<span class=\\"token punctuation\\">:</span> <span class=\\"token builtin\\">User</span> <span class=\\"token operator\\">=</span> middleware<span class=\\"token punctuation\\">.</span>user\\n    <span class=\\"token function\\">completion</span><span class=\\"token punctuation\\">(</span>user<span class=\\"token punctuation\\">,</span> <span class=\\"token constant\\">nil</span><span class=\\"token punctuation\\">)</span>\\n<span class=\\"token punctuation\\">}</span></code></pre></div>\\n<p>Kitura will invoke your static <code class=\\"language-text\\">MyMiddleware.handle()</code> function, and if an instance of <code class=\\"language-text\\">MyMiddleware</code> is successfully created, it is passed to the route handler. If no instance is created, the route handler is not called. This removes the requirement for type checking or dealing with middleware failure within the handler itself. As a result, you have all the data you expect and type mismatches are checked at compile time (hence “type-safe”).</p>\\n<hr>\\n<h2 id=\\"type-safe-sessions\\"><a href=\\"#type-safe-sessions\\" aria-label=\\"type safe sessions permalink\\" class=\\"anchor\\"><svg aria-hidden=\\"true\\" focusable=\\"false\\" height=\\"16\\" version=\\"1.1\\" viewBox=\\"0 0 16 16\\" width=\\"16\\"><path fill-rule=\\"evenodd\\" d=\\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\\"></path></svg></a>Type-safe Sessions</h2>\\n<p>We have added an implementation of type-safe sessions in <a href=\\"https://github.com/IBM-Swift/Kitura-Session\\">Kitura-Session</a>. This defines a <code class=\\"language-text\\">TypeSafeSession</code> protocol, which is also <code class=\\"language-text\\">Codable</code>. You can create a type that conforms to <code class=\\"language-text\\">TypeSafeSession</code> and contains exactly the data needed by your application. This type is then used as a type-safe middleware in your Codable routes. To demonstrate the benefits, let’s compare traditional and type-safe sessions for retrieving some books from a shopping cart:</p>\\n<div class=\\"gatsby-highlight\\" data-language=\\"swift\\"><pre class=\\"language-swift\\"><code class=\\"language-swift\\"><span class=\\"token keyword\\">struct</span> <span class=\\"token builtin\\">Book</span><span class=\\"token punctuation\\">:</span> <span class=\\"token builtin\\">Codable</span> <span class=\\"token punctuation\\">{</span>\\n    <span class=\\"token keyword\\">let</span> title<span class=\\"token punctuation\\">:</span> <span class=\\"token builtin\\">String</span>\\n    <span class=\\"token keyword\\">let</span> author<span class=\\"token punctuation\\">:</span> <span class=\\"token builtin\\">String</span>\\n<span class=\\"token punctuation\\">}</span></code></pre></div>\\n<h3 id=\\"raw-sessions\\"><a href=\\"#raw-sessions\\" aria-label=\\"raw sessions permalink\\" class=\\"anchor\\"><svg aria-hidden=\\"true\\" focusable=\\"false\\" height=\\"16\\" version=\\"1.1\\" viewBox=\\"0 0 16 16\\" width=\\"16\\"><path fill-rule=\\"evenodd\\" d=\\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\\"></path></svg></a>Raw sessions:</h3>\\n<p>Initialize the session:</p>\\n<div class=\\"gatsby-highlight\\" data-language=\\"swift\\"><pre class=\\"language-swift\\"><code class=\\"language-swift\\"><span class=\\"token keyword\\">let</span> session <span class=\\"token operator\\">=</span> <span class=\\"token function\\">Session</span><span class=\\"token punctuation\\">(</span>secret<span class=\\"token punctuation\\">:</span> <span class=\\"token string\\">\\"secret\\"</span><span class=\\"token punctuation\\">,</span> cookie<span class=\\"token punctuation\\">:</span> <span class=\\"token punctuation\\">[</span><span class=\\"token builtin\\">CookieParameter</span><span class=\\"token punctuation\\">.</span><span class=\\"token function\\">name</span><span class=\\"token punctuation\\">(</span><span class=\\"token string\\">\\"cookie-name\\"</span><span class=\\"token punctuation\\">)</span><span class=\\"token punctuation\\">]</span><span class=\\"token punctuation\\">)</span></code></pre></div>\\n<p>Register the session on the route:</p>\\n<div class=\\"gatsby-highlight\\" data-language=\\"swift\\"><pre class=\\"language-swift\\"><code class=\\"language-swift\\">router<span class=\\"token punctuation\\">.</span><span class=\\"token keyword\\">get</span><span class=\\"token punctuation\\">(</span><span class=\\"token string\\">\\"/cart\\"</span><span class=\\"token punctuation\\">,</span> middleware<span class=\\"token punctuation\\">:</span> session<span class=\\"token punctuation\\">)</span></code></pre></div>\\n<p>Interact with the session within the route:</p>\\n<div class=\\"gatsby-highlight\\" data-language=\\"swift\\"><pre class=\\"language-swift\\"><code class=\\"language-swift\\">router<span class=\\"token punctuation\\">.</span><span class=\\"token keyword\\">get</span><span class=\\"token punctuation\\">(</span><span class=\\"token string\\">\\"/cart\\"</span><span class=\\"token punctuation\\">)</span> <span class=\\"token punctuation\\">{</span> request<span class=\\"token punctuation\\">,</span> response<span class=\\"token punctuation\\">,</span> next <span class=\\"token keyword\\">in</span>\\n    <span class=\\"token keyword\\">guard</span> <span class=\\"token keyword\\">let</span> session <span class=\\"token operator\\">=</span> request<span class=\\"token punctuation\\">.</span>session<span class=\\"token punctuation\\">,</span>\\n          <span class=\\"token keyword\\">let</span> bookData <span class=\\"token operator\\">=</span> session<span class=\\"token punctuation\\">[</span><span class=\\"token string\\">\\"books\\"</span><span class=\\"token punctuation\\">]</span> <span class=\\"token keyword\\">as</span><span class=\\"token operator\\">?</span> <span class=\\"token punctuation\\">[</span><span class=\\"token punctuation\\">[</span><span class=\\"token builtin\\">String</span><span class=\\"token punctuation\\">:</span> <span class=\\"token builtin\\">String</span><span class=\\"token punctuation\\">]</span><span class=\\"token punctuation\\">]</span>\\n    <span class=\\"token keyword\\">else</span> <span class=\\"token punctuation\\">{</span>\\n         <span class=\\"token keyword\\">return</span> <span class=\\"token keyword\\">try</span> response<span class=\\"token punctuation\\">.</span><span class=\\"token function\\">status</span><span class=\\"token punctuation\\">(</span><span class=\\"token punctuation\\">.</span>internalServerError<span class=\\"token punctuation\\">)</span><span class=\\"token punctuation\\">.</span><span class=\\"token function\\">end</span><span class=\\"token punctuation\\">(</span><span class=\\"token punctuation\\">)</span>\\n    <span class=\\"token punctuation\\">}</span>\\n    <span class=\\"token keyword\\">var</span> books<span class=\\"token punctuation\\">:</span> <span class=\\"token punctuation\\">[</span><span class=\\"token builtin\\">Book</span><span class=\\"token punctuation\\">]</span> <span class=\\"token operator\\">=</span> <span class=\\"token punctuation\\">[</span><span class=\\"token punctuation\\">]</span>\\n    <span class=\\"token keyword\\">for</span> book <span class=\\"token keyword\\">in</span> bookData <span class=\\"token punctuation\\">{</span>\\n        <span class=\\"token keyword\\">guard</span> <span class=\\"token keyword\\">let</span> bookTitle <span class=\\"token operator\\">=</span> book<span class=\\"token punctuation\\">[</span><span class=\\"token string\\">\\"title\\"</span><span class=\\"token punctuation\\">]</span><span class=\\"token punctuation\\">,</span>\\n              <span class=\\"token keyword\\">let</span> bookAuthor <span class=\\"token operator\\">=</span> book<span class=\\"token punctuation\\">[</span><span class=\\"token string\\">\\"author\\"</span><span class=\\"token punctuation\\">]</span>\\n        <span class=\\"token keyword\\">else</span> <span class=\\"token punctuation\\">{</span> <span class=\\"token keyword\\">continue</span> <span class=\\"token punctuation\\">}</span>\\n        books<span class=\\"token punctuation\\">.</span><span class=\\"token function\\">append</span><span class=\\"token punctuation\\">(</span><span class=\\"token function\\">Book</span><span class=\\"token punctuation\\">(</span>title<span class=\\"token punctuation\\">:</span> bookTitle<span class=\\"token punctuation\\">,</span> author<span class=\\"token punctuation\\">:</span> bookAuthor<span class=\\"token punctuation\\">)</span><span class=\\"token punctuation\\">)</span>\\n    <span class=\\"token punctuation\\">}</span>\\n    <span class=\\"token comment\\">// Work with your books from the session</span>\\n    response<span class=\\"token punctuation\\">.</span><span class=\\"token function\\">send</span><span class=\\"token punctuation\\">(</span>json<span class=\\"token punctuation\\">:</span> books<span class=\\"token punctuation\\">)</span>\\n    <span class=\\"token function\\">next</span><span class=\\"token punctuation\\">(</span><span class=\\"token punctuation\\">)</span>    \\n<span class=\\"token punctuation\\">}</span></code></pre></div>\\n<h3 id=\\"type-safe-sessions-1\\"><a href=\\"#type-safe-sessions-1\\" aria-label=\\"type safe sessions 1 permalink\\" class=\\"anchor\\"><svg aria-hidden=\\"true\\" focusable=\\"false\\" height=\\"16\\" version=\\"1.1\\" viewBox=\\"0 0 16 16\\" width=\\"16\\"><path fill-rule=\\"evenodd\\" d=\\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\\"></path></svg></a>Type-safe sessions:</h3>\\n<p>Define and set up your session class with expected fields:</p>\\n<div class=\\"gatsby-highlight\\" data-language=\\"swift\\"><pre class=\\"language-swift\\"><code class=\\"language-swift\\"><span class=\\"token keyword\\">final</span> <span class=\\"token keyword\\">class</span> <span class=\\"token class-name\\">MySession</span><span class=\\"token punctuation\\">:</span> <span class=\\"token builtin\\">TypeSafeSession</span> <span class=\\"token punctuation\\">{</span>\\n    <span class=\\"token keyword\\">let</span> sessionId<span class=\\"token punctuation\\">:</span> <span class=\\"token builtin\\">String</span>             <span class=\\"token comment\\">// Requirement: every session must have an ID          </span>\\n    <span class=\\"token keyword\\">var</span> books<span class=\\"token punctuation\\">:</span> <span class=\\"token punctuation\\">[</span><span class=\\"token builtin\\">Book</span><span class=\\"token punctuation\\">]</span>                 <span class=\\"token comment\\">// User-defined type         </span>\\n    <span class=\\"token keyword\\">init</span><span class=\\"token punctuation\\">(</span>sessionId<span class=\\"token punctuation\\">:</span> <span class=\\"token builtin\\">String</span><span class=\\"token punctuation\\">)</span> <span class=\\"token punctuation\\">{</span>         <span class=\\"token comment\\">// Requirement: must be able to create a new (empty)          </span>\\n        <span class=\\"token keyword\\">self</span><span class=\\"token punctuation\\">.</span>sessionId <span class=\\"token operator\\">=</span> sessionId    <span class=\\"token comment\\">// Initialise the sessionId         </span>\\n        books <span class=\\"token operator\\">=</span> <span class=\\"token punctuation\\">[</span><span class=\\"token punctuation\\">]</span>                    <span class=\\"token comment\\">// empty value for any non-optional properties.          </span>\\n    <span class=\\"token punctuation\\">}</span>\\n<span class=\\"token punctuation\\">}</span>\\n\\n<span class=\\"token keyword\\">extension</span> <span class=\\"token builtin\\">MySession</span> <span class=\\"token punctuation\\">{</span>\\n    <span class=\\"token keyword\\">static</span> <span class=\\"token keyword\\">let</span> cookie <span class=\\"token operator\\">=</span> <span class=\\"token function\\">SessionCookie</span><span class=\\"token punctuation\\">(</span>name<span class=\\"token punctuation\\">:</span> <span class=\\"token string\\">\\"cookie-name\\"</span><span class=\\"token punctuation\\">,</span> secret<span class=\\"token punctuation\\">:</span> <span class=\\"token string\\">\\"secret\\"</span><span class=\\"token punctuation\\">)</span>\\n    <span class=\\"token keyword\\">static</span> <span class=\\"token keyword\\">var</span> store<span class=\\"token punctuation\\">:</span> <span class=\\"token builtin\\">Store</span><span class=\\"token operator\\">?</span>           <span class=\\"token comment\\">// Store for the sessions (nil defaults to in memory store)</span>\\n<span class=\\"token punctuation\\">}</span></code></pre></div>\\n<p>By convention, we have defined the instance properties separate from the static properties, which are in an extension. This is to distinguish between data provided by an instance, and static configuration properties on the type.</p>\\n<p>Interact with the session within the route:</p>\\n<div class=\\"gatsby-highlight\\" data-language=\\"swift\\"><pre class=\\"language-swift\\"><code class=\\"language-swift\\">router<span class=\\"token punctuation\\">.</span><span class=\\"token keyword\\">get</span><span class=\\"token punctuation\\">(</span><span class=\\"token string\\">\\"/cart\\"</span><span class=\\"token punctuation\\">)</span> <span class=\\"token punctuation\\">{</span> <span class=\\"token punctuation\\">(</span>session<span class=\\"token punctuation\\">:</span> <span class=\\"token builtin\\">MySession</span><span class=\\"token punctuation\\">,</span> respondWith<span class=\\"token punctuation\\">:</span> <span class=\\"token punctuation\\">(</span><span class=\\"token punctuation\\">[</span><span class=\\"token builtin\\">Book</span><span class=\\"token punctuation\\">]</span><span class=\\"token operator\\">?</span><span class=\\"token punctuation\\">,</span> <span class=\\"token builtin\\">RequestError</span><span class=\\"token operator\\">?</span><span class=\\"token punctuation\\">)</span> <span class=\\"token operator\\">-</span><span class=\\"token operator\\">></span> <span class=\\"token builtin\\">Void</span><span class=\\"token punctuation\\">)</span> <span class=\\"token keyword\\">in</span>\\n    <span class=\\"token keyword\\">var</span> books<span class=\\"token punctuation\\">:</span> <span class=\\"token punctuation\\">[</span><span class=\\"token builtin\\">Book</span><span class=\\"token punctuation\\">]</span> <span class=\\"token operator\\">=</span> session<span class=\\"token punctuation\\">.</span>books\\n    <span class=\\"token comment\\">// Work with your books from the session</span>\\n    <span class=\\"token function\\">respondWith</span><span class=\\"token punctuation\\">(</span>books<span class=\\"token punctuation\\">,</span> <span class=\\"token constant\\">nil</span><span class=\\"token punctuation\\">)</span>\\n<span class=\\"token punctuation\\">}</span></code></pre></div>\\n<p>By using type-safe sessions, we have ensured that:</p>\\n<ul>\\n<li>When the route handler is invoked, a session has already been successfully created (or retrieved from a store), and passed to the handler. There is no need to check whether a session exists.</li>\\n<li>All data in the session can be accessed directly from your class, with strongly typed properties. There is no need to downcast.</li>\\n<li>All data stored on a session can be persisted. A TypeSafeSession is Codable, so all types that are stored in the session must also be Codable.</li>\\n</ul>\\n<hr>\\n<h2 id=\\"http-basic-authentication\\"><a href=\\"#http-basic-authentication\\" aria-label=\\"http basic authentication permalink\\" class=\\"anchor\\"><svg aria-hidden=\\"true\\" focusable=\\"false\\" height=\\"16\\" version=\\"1.1\\" viewBox=\\"0 0 16 16\\" width=\\"16\\"><path fill-rule=\\"evenodd\\" d=\\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\\"></path></svg></a>HTTP Basic Authentication</h2>\\n<p>We have also added an implemention of type-safe HTTP Basic authentication in <a href=\\"https://github.com/IBM-Swift/Kitura-CredentialsHTTP\\">Kitura-CredentialsHTTP</a>. HTTP Basic authentication transmits credentials in an “Authorization” header as base64 encoded user ID/password pairs. Kitura also allows you to send the username and password in the URL as follows:</p>\\n<div class=\\"gatsby-highlight\\" data-language=\\"text\\"><pre class=\\"language-text\\"><code class=\\"language-text\\">https://username:password@www.example.com/</code></pre></div>\\n<p>Note: some web browsers disable this for security reasons.</p>\\n<h3 id=\\"raw-http-basic-authentication\\"><a href=\\"#raw-http-basic-authentication\\" aria-label=\\"raw http basic authentication permalink\\" class=\\"anchor\\"><svg aria-hidden=\\"true\\" focusable=\\"false\\" height=\\"16\\" version=\\"1.1\\" viewBox=\\"0 0 16 16\\" width=\\"16\\"><path fill-rule=\\"evenodd\\" d=\\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\\"></path></svg></a>Raw HTTP Basic authentication:</h3>\\n<p>In raw routing, you could implement HTTP basic code as follows:</p>\\n<p>Initialize the basicCredentials:</p>\\n<div class=\\"gatsby-highlight\\" data-language=\\"swift\\"><pre class=\\"language-swift\\"><code class=\\"language-swift\\"><span class=\\"token keyword\\">let</span> credentials <span class=\\"token operator\\">=</span> <span class=\\"token function\\">Credentials</span><span class=\\"token punctuation\\">(</span><span class=\\"token punctuation\\">)</span>\\n\\n<span class=\\"token keyword\\">static</span> <span class=\\"token keyword\\">let</span> users <span class=\\"token operator\\">=</span> <span class=\\"token punctuation\\">[</span><span class=\\"token string\\">\\"John\\"</span> <span class=\\"token punctuation\\">:</span> <span class=\\"token string\\">\\"12345\\"</span><span class=\\"token punctuation\\">,</span> <span class=\\"token string\\">\\"Mary\\"</span> <span class=\\"token punctuation\\">:</span> <span class=\\"token string\\">\\"qwerasdf\\"</span><span class=\\"token punctuation\\">]</span>\\n\\n<span class=\\"token keyword\\">let</span> basicCredentials <span class=\\"token operator\\">=</span> <span class=\\"token function\\">CredentialsHTTPBasic</span><span class=\\"token punctuation\\">(</span>verifyPassword<span class=\\"token punctuation\\">:</span> <span class=\\"token punctuation\\">{</span> userId<span class=\\"token punctuation\\">,</span> password<span class=\\"token punctuation\\">,</span> callback <span class=\\"token keyword\\">in</span>\\n    <span class=\\"token keyword\\">if</span> <span class=\\"token keyword\\">let</span> storedPassword <span class=\\"token operator\\">=</span> users<span class=\\"token punctuation\\">[</span>userId<span class=\\"token punctuation\\">]</span><span class=\\"token punctuation\\">,</span> storedPassword <span class=\\"token operator\\">==</span> password <span class=\\"token punctuation\\">{</span>\\n        <span class=\\"token function\\">callback</span><span class=\\"token punctuation\\">(</span><span class=\\"token function\\">UserProfile</span><span class=\\"token punctuation\\">(</span>id<span class=\\"token punctuation\\">:</span> userId<span class=\\"token punctuation\\">,</span> displayName<span class=\\"token punctuation\\">:</span> userId<span class=\\"token punctuation\\">,</span> provider<span class=\\"token punctuation\\">:</span> <span class=\\"token string\\">\\"HTTPBasic\\"</span><span class=\\"token punctuation\\">)</span><span class=\\"token punctuation\\">)</span>\\n    <span class=\\"token punctuation\\">}</span> <span class=\\"token keyword\\">else</span> <span class=\\"token punctuation\\">{</span>\\n        <span class=\\"token function\\">callback</span><span class=\\"token punctuation\\">(</span><span class=\\"token constant\\">nil</span><span class=\\"token punctuation\\">)</span>\\n    <span class=\\"token punctuation\\">}</span>\\n<span class=\\"token punctuation\\">}</span><span class=\\"token punctuation\\">)</span></code></pre></div>\\n<blockquote>\\n<p>This is a simplified example. In practice, passwords would not be stored in plain text.</p>\\n</blockquote>\\n<p>Register the middleware on the route:</p>\\n<div class=\\"gatsby-highlight\\" data-language=\\"swift\\"><pre class=\\"language-swift\\"><code class=\\"language-swift\\">credentials<span class=\\"token punctuation\\">.</span><span class=\\"token function\\">register</span><span class=\\"token punctuation\\">(</span>plugin<span class=\\"token punctuation\\">:</span> basicCredentials<span class=\\"token punctuation\\">)</span>\\nrouter<span class=\\"token punctuation\\">.</span><span class=\\"token function\\">all</span><span class=\\"token punctuation\\">(</span><span class=\\"token string\\">\\"/profile\\"</span><span class=\\"token punctuation\\">,</span> middleware<span class=\\"token punctuation\\">:</span> credentials<span class=\\"token punctuation\\">)</span></code></pre></div>\\n<p>Interact with the credentials within the route:</p>\\n<div class=\\"gatsby-highlight\\" data-language=\\"swift\\"><pre class=\\"language-swift\\"><code class=\\"language-swift\\">router<span class=\\"token punctuation\\">.</span><span class=\\"token keyword\\">get</span><span class=\\"token punctuation\\">(</span><span class=\\"token string\\">\\"/profile\\"</span><span class=\\"token punctuation\\">)</span> <span class=\\"token punctuation\\">{</span> request<span class=\\"token punctuation\\">,</span> response<span class=\\"token punctuation\\">,</span> next <span class=\\"token keyword\\">in</span>\\n    <span class=\\"token keyword\\">guard</span> <span class=\\"token keyword\\">let</span> profile <span class=\\"token operator\\">=</span> request<span class=\\"token punctuation\\">.</span>userProfile <span class=\\"token keyword\\">else</span> <span class=\\"token punctuation\\">{</span>\\n        <span class=\\"token keyword\\">return</span> <span class=\\"token keyword\\">try</span> response<span class=\\"token punctuation\\">.</span><span class=\\"token function\\">status</span><span class=\\"token punctuation\\">(</span><span class=\\"token punctuation\\">.</span>unauthorized<span class=\\"token punctuation\\">)</span><span class=\\"token punctuation\\">.</span><span class=\\"token function\\">end</span><span class=\\"token punctuation\\">(</span><span class=\\"token punctuation\\">)</span>\\n    <span class=\\"token punctuation\\">}</span>\\n    response<span class=\\"token punctuation\\">.</span><span class=\\"token function\\">send</span><span class=\\"token punctuation\\">(</span>profile<span class=\\"token punctuation\\">.</span>id<span class=\\"token punctuation\\">)</span>\\n    <span class=\\"token function\\">next</span><span class=\\"token punctuation\\">(</span><span class=\\"token punctuation\\">)</span>\\n<span class=\\"token punctuation\\">}</span></code></pre></div>\\n<h3 id=\\"type-safe-http-basic-authentication\\"><a href=\\"#type-safe-http-basic-authentication\\" aria-label=\\"type safe http basic authentication permalink\\" class=\\"anchor\\"><svg aria-hidden=\\"true\\" focusable=\\"false\\" height=\\"16\\" version=\\"1.1\\" viewBox=\\"0 0 16 16\\" width=\\"16\\"><path fill-rule=\\"evenodd\\" d=\\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\\"></path></svg></a>Type-safe HTTP Basic authentication:</h3>\\n<p>Type-safe middleware makes this simpler and safer. We create a new type conforming to <code class=\\"language-text\\">TypeSafeHTTPBasic</code>:</p>\\n<div class=\\"gatsby-highlight\\" data-language=\\"swift\\"><pre class=\\"language-swift\\"><code class=\\"language-swift\\"><span class=\\"token keyword\\">public</span> <span class=\\"token keyword\\">struct</span> <span class=\\"token builtin\\">MyBasicAuth</span><span class=\\"token punctuation\\">:</span> <span class=\\"token builtin\\">TypeSafeHTTPBasic</span> <span class=\\"token punctuation\\">{</span>\\n    <span class=\\"token keyword\\">public</span> <span class=\\"token keyword\\">let</span> id<span class=\\"token punctuation\\">:</span> <span class=\\"token builtin\\">String</span>\\n<span class=\\"token punctuation\\">}</span>\\n\\n<span class=\\"token keyword\\">extension</span> <span class=\\"token builtin\\">MyBasicAuth</span> <span class=\\"token punctuation\\">{</span>\\n    <span class=\\"token keyword\\">static</span> <span class=\\"token keyword\\">let</span> users <span class=\\"token operator\\">=</span> <span class=\\"token punctuation\\">[</span><span class=\\"token string\\">\\"John\\"</span> <span class=\\"token punctuation\\">:</span> <span class=\\"token string\\">\\"12345\\"</span><span class=\\"token punctuation\\">,</span> <span class=\\"token string\\">\\"Mary\\"</span> <span class=\\"token punctuation\\">:</span> <span class=\\"token string\\">\\"qwerasdf\\"</span><span class=\\"token punctuation\\">]</span>\\n\\n    <span class=\\"token keyword\\">public</span> <span class=\\"token keyword\\">static</span> <span class=\\"token keyword\\">func</span> <span class=\\"token function\\">verifyPassword</span><span class=\\"token punctuation\\">(</span>username<span class=\\"token punctuation\\">:</span> <span class=\\"token builtin\\">String</span><span class=\\"token punctuation\\">,</span> password<span class=\\"token punctuation\\">:</span> <span class=\\"token builtin\\">String</span><span class=\\"token punctuation\\">,</span> callback<span class=\\"token punctuation\\">:</span> @escaping <span class=\\"token punctuation\\">(</span><span class=\\"token builtin\\">MyBasicAuth</span><span class=\\"token operator\\">?</span><span class=\\"token punctuation\\">)</span> <span class=\\"token operator\\">-</span><span class=\\"token operator\\">></span> <span class=\\"token builtin\\">Void</span><span class=\\"token punctuation\\">)</span> <span class=\\"token punctuation\\">{</span>\\n        <span class=\\"token keyword\\">if</span> <span class=\\"token keyword\\">let</span> storedPassword <span class=\\"token operator\\">=</span> users<span class=\\"token punctuation\\">[</span>username<span class=\\"token punctuation\\">]</span><span class=\\"token punctuation\\">,</span> storedPassword <span class=\\"token operator\\">==</span> password <span class=\\"token punctuation\\">{</span>\\n            <span class=\\"token function\\">callback</span><span class=\\"token punctuation\\">(</span><span class=\\"token function\\">MyBasicAuth</span><span class=\\"token punctuation\\">(</span>id<span class=\\"token punctuation\\">:</span> username<span class=\\"token punctuation\\">)</span><span class=\\"token punctuation\\">)</span>\\n        <span class=\\"token punctuation\\">}</span> <span class=\\"token keyword\\">else</span> <span class=\\"token punctuation\\">{</span>\\n            <span class=\\"token function\\">callback</span><span class=\\"token punctuation\\">(</span><span class=\\"token constant\\">nil</span><span class=\\"token punctuation\\">)</span>\\n        <span class=\\"token punctuation\\">}</span>\\n    <span class=\\"token punctuation\\">}</span>\\n<span class=\\"token punctuation\\">}</span></code></pre></div>\\n<p>We interact with the credentials within the route:</p>\\n<div class=\\"gatsby-highlight\\" data-language=\\"swift\\"><pre class=\\"language-swift\\"><code class=\\"language-swift\\">router<span class=\\"token punctuation\\">.</span><span class=\\"token keyword\\">get</span><span class=\\"token punctuation\\">(</span><span class=\\"token string\\">\\"/profile\\"</span><span class=\\"token punctuation\\">)</span> <span class=\\"token punctuation\\">{</span> <span class=\\"token punctuation\\">(</span>userProfile<span class=\\"token punctuation\\">:</span> <span class=\\"token builtin\\">MyBasicAuth</span><span class=\\"token punctuation\\">,</span> respondWith<span class=\\"token punctuation\\">:</span> <span class=\\"token punctuation\\">(</span><span class=\\"token builtin\\">MyBasicAuth</span><span class=\\"token operator\\">?</span><span class=\\"token punctuation\\">,</span> <span class=\\"token builtin\\">RequestError</span><span class=\\"token operator\\">?</span><span class=\\"token punctuation\\">)</span> <span class=\\"token operator\\">-</span><span class=\\"token operator\\">></span> <span class=\\"token builtin\\">Void</span><span class=\\"token punctuation\\">)</span> <span class=\\"token keyword\\">in</span>\\n   <span class=\\"token function\\">respondWith</span><span class=\\"token punctuation\\">(</span>userProfile<span class=\\"token punctuation\\">,</span> <span class=\\"token constant\\">nil</span><span class=\\"token punctuation\\">)</span>\\n<span class=\\"token punctuation\\">}</span></code></pre></div>\\n<p>The route will now only be invoked if authentication has been successful. The handler is passed a <code class=\\"language-text\\">MyBasicAuth</code> instance with the id field initialized appropriately, as well as any additional user-defined fields, instead of a generic <code class=\\"language-text\\">[String: Any]</code> dictionary.</p>\\n<p>A further benefit of this approach can be seen when combining HTTP basic authentication with <a href=\\"https://github.com/IBM-Swift/Swift-Kuery-ORM\\">Swift-Kuery-ORM</a> for user persistence. Because <code class=\\"language-text\\">MyBasicAuth</code> is Codable, we can also make it conform to <code class=\\"language-text\\">Model</code>. Then you can initialize your user type by using <code class=\\"language-text\\">id</code> as a primary key to retrieve the instance from the database:</p>\\n<div class=\\"gatsby-highlight\\" data-language=\\"swift\\"><pre class=\\"language-swift\\"><code class=\\"language-swift\\"><span class=\\"token keyword\\">public</span> <span class=\\"token keyword\\">struct</span> <span class=\\"token builtin\\">MyBasicAuth</span><span class=\\"token punctuation\\">:</span> <span class=\\"token builtin\\">TypeSafeHTTPBasic</span><span class=\\"token punctuation\\">,</span> <span class=\\"token builtin\\">Model</span> <span class=\\"token punctuation\\">{</span>\\n    <span class=\\"token keyword\\">public</span> <span class=\\"token keyword\\">let</span> id<span class=\\"token punctuation\\">:</span> <span class=\\"token builtin\\">String</span>\\n    <span class=\\"token keyword\\">private</span> <span class=\\"token keyword\\">let</span> password<span class=\\"token punctuation\\">:</span> <span class=\\"token builtin\\">String</span>\\n    <span class=\\"token keyword\\">public</span> <span class=\\"token keyword\\">let</span> firstName<span class=\\"token punctuation\\">:</span> <span class=\\"token builtin\\">String</span>\\n    <span class=\\"token keyword\\">public</span> <span class=\\"token keyword\\">let</span> lastName<span class=\\"token punctuation\\">:</span> <span class=\\"token builtin\\">String</span>\\n    <span class=\\"token keyword\\">public</span> <span class=\\"token keyword\\">let</span> age<span class=\\"token punctuation\\">:</span> <span class=\\"token builtin\\">Int</span><span class=\\"token operator\\">?</span>\\n<span class=\\"token punctuation\\">}</span>\\n\\n<span class=\\"token keyword\\">extension</span> <span class=\\"token builtin\\">MyBasicAuth</span> <span class=\\"token punctuation\\">{</span>\\n    <span class=\\"token keyword\\">static</span> <span class=\\"token keyword\\">var</span> idColumnName <span class=\\"token operator\\">=</span> <span class=\\"token string\\">\\"id\\"</span>\\n\\n    <span class=\\"token keyword\\">public</span> <span class=\\"token keyword\\">static</span> <span class=\\"token keyword\\">func</span> <span class=\\"token function\\">verifyPassword</span><span class=\\"token punctuation\\">(</span>username<span class=\\"token punctuation\\">:</span> <span class=\\"token builtin\\">String</span><span class=\\"token punctuation\\">,</span> password<span class=\\"token punctuation\\">:</span> <span class=\\"token builtin\\">String</span><span class=\\"token punctuation\\">,</span> callback<span class=\\"token punctuation\\">:</span> @escaping <span class=\\"token punctuation\\">(</span><span class=\\"token builtin\\">MyBasicAuth</span><span class=\\"token operator\\">?</span><span class=\\"token punctuation\\">)</span> <span class=\\"token operator\\">-</span><span class=\\"token operator\\">></span> <span class=\\"token builtin\\">Void</span><span class=\\"token punctuation\\">)</span> <span class=\\"token punctuation\\">{</span>\\n        <span class=\\"token builtin\\">MyBasicAuth</span><span class=\\"token punctuation\\">.</span><span class=\\"token function\\">find</span><span class=\\"token punctuation\\">(</span>id<span class=\\"token punctuation\\">:</span> username<span class=\\"token punctuation\\">)</span> <span class=\\"token punctuation\\">{</span> userProfile<span class=\\"token punctuation\\">,</span> error <span class=\\"token keyword\\">in</span>\\n            <span class=\\"token keyword\\">if</span> <span class=\\"token keyword\\">let</span> userProfile <span class=\\"token operator\\">=</span> userProfile <span class=\\"token punctuation\\">{</span>\\n                <span class=\\"token keyword\\">if</span> password <span class=\\"token operator\\">==</span> userProfile<span class=\\"token punctuation\\">.</span>password <span class=\\"token punctuation\\">{</span>\\n                    <span class=\\"token function\\">callback</span><span class=\\"token punctuation\\">(</span>userProfile<span class=\\"token punctuation\\">)</span>\\n                    <span class=\\"token keyword\\">return</span>\\n                <span class=\\"token punctuation\\">}</span>   \\n            <span class=\\"token punctuation\\">}</span>\\n            <span class=\\"token function\\">callback</span><span class=\\"token punctuation\\">(</span><span class=\\"token constant\\">nil</span><span class=\\"token punctuation\\">)</span>\\n        <span class=\\"token punctuation\\">}</span>\\n    <span class=\\"token punctuation\\">}</span>\\n<span class=\\"token punctuation\\">}</span></code></pre></div>\\n<p>In this example, we have implemented the verifyPassword function by retrieving a user’s profile from a database. A profile with an id matching the supplied username is retrieved. If no matching id is found, or if the supplied password does not match, the middleware fails. If a match is found, the ORM returns an instance of MyBasicAuth, which is then provided to the route handler.</p>\\n<p>Any questions or comments? Please join the vibrant Kitura community on <a href=\\"http://swift-at-ibm-slack.mybluemix.net/?cm_sp=dw-bluemix-_-swift-_-devcenter&#x26;_ga=2.80654231.186671014.1570626561-1743126121.1570022962\\">Slack</a>!</p>","frontmatter":{"path":"/blogs/type-safe-middleware","title":"A new kind of Kitura middleware: type-safe and easy to use"}}},{"node":{"html":"<p>In Kitura 2.3 , we added support for receiving POST requests, which use the <code class=\\"language-text\\">application/x-www-form-urlencoded</code> content type. This blog describes the new APIs to handle these URL encoded forms for both Raw and Codable routes. We then provide a step by step example of a Kitura server receiving an HTML form and mapping the request to a Codable Swift object.</p>\\n<h2 id=\\"url-encoded-post-forms\\"><a href=\\"#url-encoded-post-forms\\" aria-label=\\"url encoded post forms permalink\\" class=\\"anchor\\"><svg aria-hidden=\\"true\\" focusable=\\"false\\" height=\\"16\\" version=\\"1.1\\" viewBox=\\"0 0 16 16\\" width=\\"16\\"><path fill-rule=\\"evenodd\\" d=\\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\\"></path></svg></a>URL Encoded POST Forms</h2>\\n<p>Typically, webpages use HTML forms to send POST requests. The sender marks the request as URL encoded using the content-type header <code class=\\"language-text\\">application/x-www-form-urlencoded</code>. This indicates that the request body is a query string consisting of “key=value” pairs, separated by the “&#x26;” symbol. As a result, Kitura can use its query decoder to map the body of a URL encoded form to a Swift object. For our demonstrations, we will use the following HTML form POST request:</p>\\n<div class=\\"gatsby-highlight\\" data-language=\\"text\\"><pre class=\\"language-text\\"><code class=\\"language-text\\">POST / HTTP/1.1\\nHost: http://localhost:8080\\nContent-Type: application/x-www-form-urlencoded\\nContent-Length: 17\\n\\nname=David&amp;age=42</code></pre></div>\\n<hr>\\n<h2 id=\\"receiving-url-encoded-forms-in-kitura-routes\\"><a href=\\"#receiving-url-encoded-forms-in-kitura-routes\\" aria-label=\\"receiving url encoded forms in kitura routes permalink\\" class=\\"anchor\\"><svg aria-hidden=\\"true\\" focusable=\\"false\\" height=\\"16\\" version=\\"1.1\\" viewBox=\\"0 0 16 16\\" width=\\"16\\"><path fill-rule=\\"evenodd\\" d=\\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\\"></path></svg></a>Receiving URL Encoded Forms in Kitura Routes</h2>\\n<p>With the release of Kitura 2.3, your Kitura application can now receive HTML form data in a convenient and type-safe way. As an example, we will map the POST request above to a Swift struct called <code class=\\"language-text\\">User</code>.</p>\\n<div class=\\"gatsby-highlight\\" data-language=\\"swift\\"><pre class=\\"language-swift\\"><code class=\\"language-swift\\"><span class=\\"token keyword\\">struct</span> <span class=\\"token builtin\\">User</span><span class=\\"token punctuation\\">:</span> <span class=\\"token builtin\\">Codable</span> <span class=\\"token punctuation\\">{</span>\\n    <span class=\\"token keyword\\">let</span> name<span class=\\"token punctuation\\">:</span> <span class=\\"token builtin\\">String</span>\\n    <span class=\\"token keyword\\">let</span> age<span class=\\"token punctuation\\">:</span> <span class=\\"token builtin\\">Int</span>\\n<span class=\\"token punctuation\\">}</span></code></pre></div>\\n<p>Previously, this would require the following boilerplate code:</p>\\n<div class=\\"gatsby-highlight\\" data-language=\\"swift\\"><pre class=\\"language-swift\\"><code class=\\"language-swift\\">router<span class=\\"token punctuation\\">.</span><span class=\\"token function\\">post</span><span class=\\"token punctuation\\">(</span><span class=\\"token string\\">\\"/form\\"</span><span class=\\"token punctuation\\">,</span> middleware<span class=\\"token punctuation\\">:</span> <span class=\\"token function\\">BodyParser</span><span class=\\"token punctuation\\">(</span><span class=\\"token punctuation\\">)</span><span class=\\"token punctuation\\">)</span>\\n\\nrouter<span class=\\"token punctuation\\">.</span><span class=\\"token function\\">post</span><span class=\\"token punctuation\\">(</span><span class=\\"token string\\">\\"/form\\"</span><span class=\\"token punctuation\\">)</span> <span class=\\"token punctuation\\">{</span> request<span class=\\"token punctuation\\">,</span> response<span class=\\"token punctuation\\">,</span> next <span class=\\"token keyword\\">in</span>\\n    <span class=\\"token keyword\\">guard</span> <span class=\\"token keyword\\">let</span> body <span class=\\"token operator\\">=</span> request<span class=\\"token punctuation\\">.</span>body<span class=\\"token operator\\">?</span><span class=\\"token punctuation\\">.</span>asURLEncoded<span class=\\"token punctuation\\">,</span>\\n        <span class=\\"token keyword\\">let</span> ageString <span class=\\"token operator\\">=</span> body<span class=\\"token punctuation\\">[</span><span class=\\"token string\\">\\"id\\"</span><span class=\\"token punctuation\\">]</span><span class=\\"token punctuation\\">,</span>\\n        <span class=\\"token keyword\\">let</span> age <span class=\\"token operator\\">=</span> <span class=\\"token function\\">Int</span><span class=\\"token punctuation\\">(</span>ageString<span class=\\"token punctuation\\">)</span><span class=\\"token punctuation\\">,</span>\\n        <span class=\\"token keyword\\">let</span> name <span class=\\"token operator\\">=</span> body<span class=\\"token punctuation\\">[</span><span class=\\"token string\\">\\"name\\"</span><span class=\\"token punctuation\\">]</span>\\n    <span class=\\"token keyword\\">else</span> <span class=\\"token punctuation\\">{</span>\\n        <span class=\\"token keyword\\">return</span> <span class=\\"token keyword\\">try</span> response<span class=\\"token punctuation\\">.</span><span class=\\"token function\\">status</span><span class=\\"token punctuation\\">(</span><span class=\\"token punctuation\\">.</span>unprocessableEntity<span class=\\"token punctuation\\">)</span><span class=\\"token punctuation\\">.</span><span class=\\"token function\\">end</span><span class=\\"token punctuation\\">(</span><span class=\\"token punctuation\\">)</span>\\n    <span class=\\"token punctuation\\">}</span>\\n    <span class=\\"token keyword\\">let</span> user <span class=\\"token operator\\">=</span> <span class=\\"token function\\">User</span><span class=\\"token punctuation\\">(</span>name<span class=\\"token punctuation\\">:</span> name<span class=\\"token punctuation\\">,</span> age<span class=\\"token punctuation\\">:</span> age<span class=\\"token punctuation\\">)</span>\\n    <span class=\\"token comment\\">// Application logic</span>\\n    response<span class=\\"token punctuation\\">.</span><span class=\\"token function\\">status</span><span class=\\"token punctuation\\">(</span><span class=\\"token punctuation\\">.</span>created<span class=\\"token punctuation\\">)</span><span class=\\"token punctuation\\">.</span><span class=\\"token function\\">send</span><span class=\\"token punctuation\\">(</span>json<span class=\\"token punctuation\\">:</span> user<span class=\\"token punctuation\\">)</span>\\n    <span class=\\"token function\\">next</span><span class=\\"token punctuation\\">(</span><span class=\\"token punctuation\\">)</span>\\n<span class=\\"token punctuation\\">}</span></code></pre></div>\\n<p>But in Kitura 2.3 you can use <code class=\\"language-text\\">request.read(as: &lt;Codable.protocol&gt;)</code> to decode URL encoded forms into a Codable type. This means that, while using Raw routing, we can vastly simplify the code above to:</p>\\n<div class=\\"gatsby-highlight\\" data-language=\\"swift\\"><pre class=\\"language-swift\\"><code class=\\"language-swift\\">router<span class=\\"token punctuation\\">.</span><span class=\\"token function\\">post</span><span class=\\"token punctuation\\">(</span><span class=\\"token string\\">\\"/form\\"</span><span class=\\"token punctuation\\">)</span> <span class=\\"token punctuation\\">{</span> request<span class=\\"token punctuation\\">,</span> response<span class=\\"token punctuation\\">,</span> next <span class=\\"token keyword\\">in</span>\\n    <span class=\\"token keyword\\">guard</span> <span class=\\"token keyword\\">let</span> user <span class=\\"token operator\\">=</span> <span class=\\"token keyword\\">try</span><span class=\\"token operator\\">?</span> request<span class=\\"token punctuation\\">.</span><span class=\\"token function\\">read</span><span class=\\"token punctuation\\">(</span><span class=\\"token keyword\\">as</span><span class=\\"token punctuation\\">:</span> <span class=\\"token builtin\\">User</span><span class=\\"token punctuation\\">.</span><span class=\\"token keyword\\">self</span><span class=\\"token punctuation\\">)</span>\\n    <span class=\\"token keyword\\">else</span> <span class=\\"token punctuation\\">{</span>\\n        <span class=\\"token keyword\\">return</span> <span class=\\"token keyword\\">try</span> response<span class=\\"token punctuation\\">.</span><span class=\\"token function\\">status</span><span class=\\"token punctuation\\">(</span><span class=\\"token punctuation\\">.</span>unprocessableEntity<span class=\\"token punctuation\\">)</span><span class=\\"token punctuation\\">.</span><span class=\\"token function\\">end</span><span class=\\"token punctuation\\">(</span><span class=\\"token punctuation\\">)</span>\\n    <span class=\\"token punctuation\\">}</span>\\n    <span class=\\"token comment\\">// Application logic</span>\\n    response<span class=\\"token punctuation\\">.</span><span class=\\"token function\\">status</span><span class=\\"token punctuation\\">(</span><span class=\\"token punctuation\\">.</span>created<span class=\\"token punctuation\\">)</span><span class=\\"token punctuation\\">.</span><span class=\\"token function\\">send</span><span class=\\"token punctuation\\">(</span>json<span class=\\"token punctuation\\">:</span> user<span class=\\"token punctuation\\">)</span>\\n    <span class=\\"token function\\">next</span><span class=\\"token punctuation\\">(</span><span class=\\"token punctuation\\">)</span>\\n<span class=\\"token punctuation\\">}</span></code></pre></div>\\n<p>Furthermore, you can use URL encoded forms within Codable routes. This means that, you can receive the form, parse it to a Swift object and use it within your route just by declaring the expected Swift object in the route handler:</p>\\n<div class=\\"gatsby-highlight\\" data-language=\\"swift\\"><pre class=\\"language-swift\\"><code class=\\"language-swift\\">router<span class=\\"token punctuation\\">.</span><span class=\\"token function\\">post</span><span class=\\"token punctuation\\">(</span><span class=\\"token string\\">\\"/form\\"</span><span class=\\"token punctuation\\">,</span> handler<span class=\\"token punctuation\\">:</span> formHandler<span class=\\"token punctuation\\">)</span>\\n<span class=\\"token keyword\\">func</span> <span class=\\"token function\\">formHandler</span><span class=\\"token punctuation\\">(</span>user<span class=\\"token punctuation\\">:</span> <span class=\\"token builtin\\">User</span><span class=\\"token punctuation\\">,</span> respondWith<span class=\\"token punctuation\\">:</span> <span class=\\"token punctuation\\">(</span><span class=\\"token builtin\\">User</span><span class=\\"token operator\\">?</span><span class=\\"token punctuation\\">,</span> <span class=\\"token builtin\\">RequestError</span><span class=\\"token operator\\">?</span><span class=\\"token punctuation\\">)</span> <span class=\\"token operator\\">-</span><span class=\\"token operator\\">></span> <span class=\\"token builtin\\">Void</span><span class=\\"token punctuation\\">)</span> <span class=\\"token punctuation\\">{</span>\\n    <span class=\\"token comment\\">// Application logic</span>\\n    <span class=\\"token function\\">respondWith</span><span class=\\"token punctuation\\">(</span>user<span class=\\"token punctuation\\">,</span> <span class=\\"token constant\\">nil</span><span class=\\"token punctuation\\">)</span>\\n<span class=\\"token punctuation\\">}</span></code></pre></div>\\n<hr>\\n<h2 id=\\"url-encoded-get-forms\\"><a href=\\"#url-encoded-get-forms\\" aria-label=\\"url encoded get forms permalink\\" class=\\"anchor\\"><svg aria-hidden=\\"true\\" focusable=\\"false\\" height=\\"16\\" version=\\"1.1\\" viewBox=\\"0 0 16 16\\" width=\\"16\\"><path fill-rule=\\"evenodd\\" d=\\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\\"></path></svg></a>URL Encoded GET Forms</h2>\\n<p>A webpage can also send an HTML form using a HTTP GET request. In this case, the form data is sent as query parameters on the end of the url. You can then map the received query parameters to a Swift object:</p>\\n<p>For Raw routes you can use <code class=\\"language-text\\">QueryDecoder</code> to decode the query parameters into your Codable Swift object.</p>\\n<div class=\\"gatsby-highlight\\" data-language=\\"swift\\"><pre class=\\"language-swift\\"><code class=\\"language-swift\\">router<span class=\\"token punctuation\\">.</span><span class=\\"token keyword\\">get</span><span class=\\"token punctuation\\">(</span><span class=\\"token string\\">\\"/form\\"</span><span class=\\"token punctuation\\">)</span> <span class=\\"token punctuation\\">{</span> request<span class=\\"token punctuation\\">,</span> response<span class=\\"token punctuation\\">,</span> next <span class=\\"token keyword\\">in</span>\\n    <span class=\\"token keyword\\">guard</span> <span class=\\"token keyword\\">let</span> user <span class=\\"token operator\\">=</span> <span class=\\"token keyword\\">try</span><span class=\\"token operator\\">?</span> <span class=\\"token function\\">QueryDecoder</span><span class=\\"token punctuation\\">(</span>dictionary<span class=\\"token punctuation\\">:</span> request<span class=\\"token punctuation\\">.</span>queryParameters<span class=\\"token punctuation\\">)</span><span class=\\"token punctuation\\">.</span><span class=\\"token function\\">decode</span><span class=\\"token punctuation\\">(</span><span class=\\"token builtin\\">User</span><span class=\\"token punctuation\\">.</span><span class=\\"token keyword\\">self</span><span class=\\"token punctuation\\">)</span>\\n    <span class=\\"token keyword\\">else</span> <span class=\\"token punctuation\\">{</span>\\n        <span class=\\"token keyword\\">return</span> <span class=\\"token keyword\\">try</span> response<span class=\\"token punctuation\\">.</span><span class=\\"token function\\">status</span><span class=\\"token punctuation\\">(</span><span class=\\"token punctuation\\">.</span>unprocessableEntity<span class=\\"token punctuation\\">)</span><span class=\\"token punctuation\\">.</span><span class=\\"token function\\">end</span><span class=\\"token punctuation\\">(</span><span class=\\"token punctuation\\">)</span>\\n    <span class=\\"token punctuation\\">}</span>\\n    <span class=\\"token comment\\">// Application logic</span>\\n    response<span class=\\"token punctuation\\">.</span><span class=\\"token function\\">status</span><span class=\\"token punctuation\\">(</span><span class=\\"token punctuation\\">.</span>created<span class=\\"token punctuation\\">)</span><span class=\\"token punctuation\\">.</span><span class=\\"token function\\">send</span><span class=\\"token punctuation\\">(</span>json<span class=\\"token punctuation\\">:</span> user<span class=\\"token punctuation\\">)</span>\\n    <span class=\\"token function\\">next</span><span class=\\"token punctuation\\">(</span><span class=\\"token punctuation\\">)</span>\\n<span class=\\"token punctuation\\">}</span></code></pre></div>\\n<p>For Codable routes, you just need to define your Swift object as conforming to <code class=\\"language-text\\">QueryParams</code>:</p>\\n<div class=\\"gatsby-highlight\\" data-language=\\"swift\\"><pre class=\\"language-swift\\"><code class=\\"language-swift\\"><span class=\\"token keyword\\">struct</span> <span class=\\"token builtin\\">User</span><span class=\\"token punctuation\\">:</span> <span class=\\"token builtin\\">Codable</span><span class=\\"token punctuation\\">,</span> <span class=\\"token builtin\\">QueryParams</span> <span class=\\"token punctuation\\">{</span></code></pre></div>\\n<p>You can then use the object within your route by declaring it in the route handler:</p>\\n<div class=\\"gatsby-highlight\\" data-language=\\"swift\\"><pre class=\\"language-swift\\"><code class=\\"language-swift\\">router<span class=\\"token punctuation\\">.</span><span class=\\"token keyword\\">get</span><span class=\\"token punctuation\\">(</span><span class=\\"token string\\">\\"/form\\"</span><span class=\\"token punctuation\\">,</span> handler<span class=\\"token punctuation\\">:</span> getFormHandler<span class=\\"token punctuation\\">)</span>\\n<span class=\\"token keyword\\">func</span> <span class=\\"token function\\">getFormHandler</span><span class=\\"token punctuation\\">(</span>user<span class=\\"token punctuation\\">:</span> <span class=\\"token builtin\\">User</span><span class=\\"token punctuation\\">,</span> respondWith<span class=\\"token punctuation\\">:</span> <span class=\\"token punctuation\\">(</span><span class=\\"token punctuation\\">[</span><span class=\\"token builtin\\">User</span><span class=\\"token punctuation\\">]</span><span class=\\"token operator\\">?</span><span class=\\"token punctuation\\">,</span> <span class=\\"token builtin\\">RequestError</span><span class=\\"token operator\\">?</span><span class=\\"token punctuation\\">)</span> <span class=\\"token operator\\">-</span><span class=\\"token operator\\">></span> <span class=\\"token builtin\\">Void</span><span class=\\"token punctuation\\">)</span> <span class=\\"token punctuation\\">{</span>\\n    <span class=\\"token comment\\">// Application logic</span>\\n    <span class=\\"token function\\">respondWith</span><span class=\\"token punctuation\\">(</span><span class=\\"token punctuation\\">[</span>user<span class=\\"token punctuation\\">]</span><span class=\\"token punctuation\\">,</span> <span class=\\"token constant\\">nil</span><span class=\\"token punctuation\\">)</span>\\n<span class=\\"token punctuation\\">}</span></code></pre></div>\\n<p>Currently Codable routes with <code class=\\"language-text\\">QueryParams</code> cannot return a single codable object so we are returning an array. This feature has been added to the master branch and will be in the next Kitura release.</p>\\n<hr>\\n<h2 id=\\"example-kitura-server-receiving-url-encoded-forms-in-routes\\"><a href=\\"#example-kitura-server-receiving-url-encoded-forms-in-routes\\" aria-label=\\"example kitura server receiving url encoded forms in routes permalink\\" class=\\"anchor\\"><svg aria-hidden=\\"true\\" focusable=\\"false\\" height=\\"16\\" version=\\"1.1\\" viewBox=\\"0 0 16 16\\" width=\\"16\\"><path fill-rule=\\"evenodd\\" d=\\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\\"></path></svg></a>Example: Kitura Server receiving URL Encoded Forms in Routes</h2>\\n<p>To demonstrate these new capabilities, we will create a simple Kitura web server. We will serve a static webpage, which will send GET and POST HTML forms. This server will then have Raw and Codable routes, which will receive these forms and return the corresponding Swift struct.</p>\\n<ol>\\n<li>In the terminal, using the <a href=\\"/docs/getting-started/create-server-cli\\">Kitura command-line interface</a>, generate a basic Kitura server:</li>\\n</ol>\\n<div class=\\"gatsby-highlight\\" data-language=\\"text\\"><pre class=\\"language-text\\"><code class=\\"language-text\\">mkdir ~/URLEncodedForms\\ncd ~/URLEncodedForms\\nkitura init</code></pre></div>\\n<ol start=\\"2\\">\\n<li>Create your web page HTML file:</li>\\n</ol>\\n<div class=\\"gatsby-highlight\\" data-language=\\"text\\"><pre class=\\"language-text\\"><code class=\\"language-text\\">mkdir ~/URLEncodedForms/public\\ncd ~/URLEncodedForms/public\\ntouch formwebpage.html\\nopen -a Xcode.app formwebpage.html</code></pre></div>\\n<ol start=\\"3\\">\\n<li>Copy in the following HTML:</li>\\n</ol>\\n<div class=\\"gatsby-highlight\\" data-language=\\"html\\"><pre class=\\"language-html\\"><code class=\\"language-html\\"><span class=\\"token doctype\\">&lt;!DOCTYPE html></span>\\n<span class=\\"token tag\\"><span class=\\"token tag\\"><span class=\\"token punctuation\\">&lt;</span>html</span><span class=\\"token punctuation\\">></span></span>\\n<span class=\\"token tag\\"><span class=\\"token tag\\"><span class=\\"token punctuation\\">&lt;</span>body</span><span class=\\"token punctuation\\">></span></span>\\n<span class=\\"token tag\\"><span class=\\"token tag\\"><span class=\\"token punctuation\\">&lt;</span>h2</span><span class=\\"token punctuation\\">></span></span>URL Encoded Forms<span class=\\"token tag\\"><span class=\\"token tag\\"><span class=\\"token punctuation\\">&lt;/</span>h2</span><span class=\\"token punctuation\\">></span></span>\\n\\n<span class=\\"token tag\\"><span class=\\"token tag\\"><span class=\\"token punctuation\\">&lt;</span>h4</span><span class=\\"token punctuation\\">></span></span>Post to Raw route<span class=\\"token tag\\"><span class=\\"token tag\\"><span class=\\"token punctuation\\">&lt;/</span>h4</span><span class=\\"token punctuation\\">></span></span>\\n<span class=\\"token tag\\"><span class=\\"token tag\\"><span class=\\"token punctuation\\">&lt;</span>form</span> <span class=\\"token attr-name\\">action</span><span class=\\"token attr-value\\"><span class=\\"token punctuation\\">=</span><span class=\\"token punctuation\\">\\"</span>raw<span class=\\"token punctuation\\">\\"</span></span> <span class=\\"token attr-name\\">method</span><span class=\\"token attr-value\\"><span class=\\"token punctuation\\">=</span><span class=\\"token punctuation\\">\\"</span>post<span class=\\"token punctuation\\">\\"</span></span> <span class=\\"token attr-name\\">enctype</span><span class=\\"token attr-value\\"><span class=\\"token punctuation\\">=</span><span class=\\"token punctuation\\">\\"</span>application/x-www-form-urlencoded<span class=\\"token punctuation\\">\\"</span></span> <span class=\\"token attr-name\\">target</span><span class=\\"token attr-value\\"><span class=\\"token punctuation\\">=</span><span class=\\"token punctuation\\">\\"</span>redirect<span class=\\"token punctuation\\">\\"</span></span><span class=\\"token punctuation\\">></span></span>\\n    Name: <span class=\\"token tag\\"><span class=\\"token tag\\"><span class=\\"token punctuation\\">&lt;</span>input</span> <span class=\\"token attr-name\\">type</span><span class=\\"token attr-value\\"><span class=\\"token punctuation\\">=</span><span class=\\"token punctuation\\">\\"</span>text<span class=\\"token punctuation\\">\\"</span></span> <span class=\\"token attr-name\\">name</span><span class=\\"token attr-value\\"><span class=\\"token punctuation\\">=</span><span class=\\"token punctuation\\">\\"</span>name<span class=\\"token punctuation\\">\\"</span></span> <span class=\\"token attr-name\\">required</span><span class=\\"token attr-value\\"><span class=\\"token punctuation\\">=</span><span class=\\"token punctuation\\">\\"</span>required<span class=\\"token punctuation\\">\\"</span></span><span class=\\"token punctuation\\">></span></span><span class=\\"token tag\\"><span class=\\"token tag\\"><span class=\\"token punctuation\\">&lt;</span>br</span><span class=\\"token punctuation\\">></span></span>\\n    Age: <span class=\\"token tag\\"><span class=\\"token tag\\"><span class=\\"token punctuation\\">&lt;</span>input</span> <span class=\\"token attr-name\\">type</span><span class=\\"token attr-value\\"><span class=\\"token punctuation\\">=</span><span class=\\"token punctuation\\">\\"</span>number<span class=\\"token punctuation\\">\\"</span></span> <span class=\\"token attr-name\\">name</span><span class=\\"token attr-value\\"><span class=\\"token punctuation\\">=</span><span class=\\"token punctuation\\">\\"</span>age<span class=\\"token punctuation\\">\\"</span></span> <span class=\\"token attr-name\\">required</span><span class=\\"token attr-value\\"><span class=\\"token punctuation\\">=</span><span class=\\"token punctuation\\">\\"</span>required<span class=\\"token punctuation\\">\\"</span></span><span class=\\"token punctuation\\">></span></span><span class=\\"token tag\\"><span class=\\"token tag\\"><span class=\\"token punctuation\\">&lt;</span>br</span><span class=\\"token punctuation\\">></span></span>\\n    <span class=\\"token tag\\"><span class=\\"token tag\\"><span class=\\"token punctuation\\">&lt;</span>input</span> <span class=\\"token attr-name\\">type</span><span class=\\"token attr-value\\"><span class=\\"token punctuation\\">=</span><span class=\\"token punctuation\\">\\"</span>submit<span class=\\"token punctuation\\">\\"</span></span> <span class=\\"token attr-name\\">value</span><span class=\\"token attr-value\\"><span class=\\"token punctuation\\">=</span><span class=\\"token punctuation\\">\\"</span>Submit<span class=\\"token punctuation\\">\\"</span></span><span class=\\"token punctuation\\">></span></span>\\n<span class=\\"token tag\\"><span class=\\"token tag\\"><span class=\\"token punctuation\\">&lt;/</span>form</span><span class=\\"token punctuation\\">></span></span>\\n\\n<span class=\\"token tag\\"><span class=\\"token tag\\"><span class=\\"token punctuation\\">&lt;</span>h4</span><span class=\\"token punctuation\\">></span></span>Post to Codable route<span class=\\"token tag\\"><span class=\\"token tag\\"><span class=\\"token punctuation\\">&lt;/</span>h4</span><span class=\\"token punctuation\\">></span></span>\\n<span class=\\"token tag\\"><span class=\\"token tag\\"><span class=\\"token punctuation\\">&lt;</span>form</span> <span class=\\"token attr-name\\">action</span><span class=\\"token attr-value\\"><span class=\\"token punctuation\\">=</span><span class=\\"token punctuation\\">\\"</span>codable<span class=\\"token punctuation\\">\\"</span></span> <span class=\\"token attr-name\\">method</span><span class=\\"token attr-value\\"><span class=\\"token punctuation\\">=</span><span class=\\"token punctuation\\">\\"</span>post<span class=\\"token punctuation\\">\\"</span></span> <span class=\\"token attr-name\\">enctype</span><span class=\\"token attr-value\\"><span class=\\"token punctuation\\">=</span><span class=\\"token punctuation\\">\\"</span>application/x-www-form-urlencoded<span class=\\"token punctuation\\">\\"</span></span> <span class=\\"token attr-name\\">target</span><span class=\\"token attr-value\\"><span class=\\"token punctuation\\">=</span><span class=\\"token punctuation\\">\\"</span>redirect<span class=\\"token punctuation\\">\\"</span></span><span class=\\"token punctuation\\">></span></span>\\n    Name: <span class=\\"token tag\\"><span class=\\"token tag\\"><span class=\\"token punctuation\\">&lt;</span>input</span> <span class=\\"token attr-name\\">type</span><span class=\\"token attr-value\\"><span class=\\"token punctuation\\">=</span><span class=\\"token punctuation\\">\\"</span>text<span class=\\"token punctuation\\">\\"</span></span> <span class=\\"token attr-name\\">name</span><span class=\\"token attr-value\\"><span class=\\"token punctuation\\">=</span><span class=\\"token punctuation\\">\\"</span>name<span class=\\"token punctuation\\">\\"</span></span> <span class=\\"token attr-name\\">required</span><span class=\\"token attr-value\\"><span class=\\"token punctuation\\">=</span><span class=\\"token punctuation\\">\\"</span>required<span class=\\"token punctuation\\">\\"</span></span><span class=\\"token punctuation\\">></span></span><span class=\\"token tag\\"><span class=\\"token tag\\"><span class=\\"token punctuation\\">&lt;</span>br</span><span class=\\"token punctuation\\">></span></span>\\n    Age: <span class=\\"token tag\\"><span class=\\"token tag\\"><span class=\\"token punctuation\\">&lt;</span>input</span> <span class=\\"token attr-name\\">type</span><span class=\\"token attr-value\\"><span class=\\"token punctuation\\">=</span><span class=\\"token punctuation\\">\\"</span>number<span class=\\"token punctuation\\">\\"</span></span> <span class=\\"token attr-name\\">name</span><span class=\\"token attr-value\\"><span class=\\"token punctuation\\">=</span><span class=\\"token punctuation\\">\\"</span>age<span class=\\"token punctuation\\">\\"</span></span> <span class=\\"token attr-name\\">required</span><span class=\\"token attr-value\\"><span class=\\"token punctuation\\">=</span><span class=\\"token punctuation\\">\\"</span>required<span class=\\"token punctuation\\">\\"</span></span><span class=\\"token punctuation\\">></span></span><span class=\\"token tag\\"><span class=\\"token tag\\"><span class=\\"token punctuation\\">&lt;</span>br</span><span class=\\"token punctuation\\">></span></span>\\n    <span class=\\"token tag\\"><span class=\\"token tag\\"><span class=\\"token punctuation\\">&lt;</span>input</span> <span class=\\"token attr-name\\">type</span><span class=\\"token attr-value\\"><span class=\\"token punctuation\\">=</span><span class=\\"token punctuation\\">\\"</span>submit<span class=\\"token punctuation\\">\\"</span></span> <span class=\\"token attr-name\\">value</span><span class=\\"token attr-value\\"><span class=\\"token punctuation\\">=</span><span class=\\"token punctuation\\">\\"</span>Submit<span class=\\"token punctuation\\">\\"</span></span><span class=\\"token punctuation\\">></span></span>\\n<span class=\\"token tag\\"><span class=\\"token tag\\"><span class=\\"token punctuation\\">&lt;/</span>form</span><span class=\\"token punctuation\\">></span></span>\\n\\n<span class=\\"token tag\\"><span class=\\"token tag\\"><span class=\\"token punctuation\\">&lt;</span>h4</span><span class=\\"token punctuation\\">></span></span>Get to Raw route<span class=\\"token tag\\"><span class=\\"token tag\\"><span class=\\"token punctuation\\">&lt;/</span>h4</span><span class=\\"token punctuation\\">></span></span>\\n<span class=\\"token tag\\"><span class=\\"token tag\\"><span class=\\"token punctuation\\">&lt;</span>form</span> <span class=\\"token attr-name\\">action</span><span class=\\"token attr-value\\"><span class=\\"token punctuation\\">=</span><span class=\\"token punctuation\\">\\"</span>raw<span class=\\"token punctuation\\">\\"</span></span> <span class=\\"token attr-name\\">method</span><span class=\\"token attr-value\\"><span class=\\"token punctuation\\">=</span><span class=\\"token punctuation\\">\\"</span>get<span class=\\"token punctuation\\">\\"</span></span> <span class=\\"token attr-name\\">enctype</span><span class=\\"token attr-value\\"><span class=\\"token punctuation\\">=</span><span class=\\"token punctuation\\">\\"</span>application/x-www-form-urlencoded<span class=\\"token punctuation\\">\\"</span></span> <span class=\\"token attr-name\\">target</span><span class=\\"token attr-value\\"><span class=\\"token punctuation\\">=</span><span class=\\"token punctuation\\">\\"</span>redirect<span class=\\"token punctuation\\">\\"</span></span><span class=\\"token punctuation\\">></span></span>\\n    Name: <span class=\\"token tag\\"><span class=\\"token tag\\"><span class=\\"token punctuation\\">&lt;</span>input</span> <span class=\\"token attr-name\\">type</span><span class=\\"token attr-value\\"><span class=\\"token punctuation\\">=</span><span class=\\"token punctuation\\">\\"</span>text<span class=\\"token punctuation\\">\\"</span></span> <span class=\\"token attr-name\\">name</span><span class=\\"token attr-value\\"><span class=\\"token punctuation\\">=</span><span class=\\"token punctuation\\">\\"</span>name<span class=\\"token punctuation\\">\\"</span></span> <span class=\\"token attr-name\\">required</span><span class=\\"token attr-value\\"><span class=\\"token punctuation\\">=</span><span class=\\"token punctuation\\">\\"</span>required<span class=\\"token punctuation\\">\\"</span></span><span class=\\"token punctuation\\">></span></span><span class=\\"token tag\\"><span class=\\"token tag\\"><span class=\\"token punctuation\\">&lt;</span>br</span><span class=\\"token punctuation\\">></span></span>\\n    Age: <span class=\\"token tag\\"><span class=\\"token tag\\"><span class=\\"token punctuation\\">&lt;</span>input</span> <span class=\\"token attr-name\\">type</span><span class=\\"token attr-value\\"><span class=\\"token punctuation\\">=</span><span class=\\"token punctuation\\">\\"</span>number<span class=\\"token punctuation\\">\\"</span></span> <span class=\\"token attr-name\\">name</span><span class=\\"token attr-value\\"><span class=\\"token punctuation\\">=</span><span class=\\"token punctuation\\">\\"</span>age<span class=\\"token punctuation\\">\\"</span></span> <span class=\\"token attr-name\\">required</span><span class=\\"token attr-value\\"><span class=\\"token punctuation\\">=</span><span class=\\"token punctuation\\">\\"</span>required<span class=\\"token punctuation\\">\\"</span></span><span class=\\"token punctuation\\">></span></span><span class=\\"token tag\\"><span class=\\"token tag\\"><span class=\\"token punctuation\\">&lt;</span>br</span><span class=\\"token punctuation\\">></span></span>\\n    <span class=\\"token tag\\"><span class=\\"token tag\\"><span class=\\"token punctuation\\">&lt;</span>input</span> <span class=\\"token attr-name\\">type</span><span class=\\"token attr-value\\"><span class=\\"token punctuation\\">=</span><span class=\\"token punctuation\\">\\"</span>submit<span class=\\"token punctuation\\">\\"</span></span> <span class=\\"token attr-name\\">value</span><span class=\\"token attr-value\\"><span class=\\"token punctuation\\">=</span><span class=\\"token punctuation\\">\\"</span>Submit<span class=\\"token punctuation\\">\\"</span></span><span class=\\"token punctuation\\">></span></span>\\n<span class=\\"token tag\\"><span class=\\"token tag\\"><span class=\\"token punctuation\\">&lt;/</span>form</span><span class=\\"token punctuation\\">></span></span>\\n\\n<span class=\\"token tag\\"><span class=\\"token tag\\"><span class=\\"token punctuation\\">&lt;</span>h4</span><span class=\\"token punctuation\\">></span></span>Get to Codable route<span class=\\"token tag\\"><span class=\\"token tag\\"><span class=\\"token punctuation\\">&lt;/</span>h4</span><span class=\\"token punctuation\\">></span></span>\\n<span class=\\"token tag\\"><span class=\\"token tag\\"><span class=\\"token punctuation\\">&lt;</span>form</span> <span class=\\"token attr-name\\">action</span><span class=\\"token attr-value\\"><span class=\\"token punctuation\\">=</span><span class=\\"token punctuation\\">\\"</span>codable<span class=\\"token punctuation\\">\\"</span></span> <span class=\\"token attr-name\\">method</span><span class=\\"token attr-value\\"><span class=\\"token punctuation\\">=</span><span class=\\"token punctuation\\">\\"</span>get<span class=\\"token punctuation\\">\\"</span></span> <span class=\\"token attr-name\\">enctype</span><span class=\\"token attr-value\\"><span class=\\"token punctuation\\">=</span><span class=\\"token punctuation\\">\\"</span>application/x-www-form-urlencoded<span class=\\"token punctuation\\">\\"</span></span> <span class=\\"token attr-name\\">target</span><span class=\\"token attr-value\\"><span class=\\"token punctuation\\">=</span><span class=\\"token punctuation\\">\\"</span>redirect<span class=\\"token punctuation\\">\\"</span></span><span class=\\"token punctuation\\">></span></span>\\n    Name: <span class=\\"token tag\\"><span class=\\"token tag\\"><span class=\\"token punctuation\\">&lt;</span>input</span> <span class=\\"token attr-name\\">type</span><span class=\\"token attr-value\\"><span class=\\"token punctuation\\">=</span><span class=\\"token punctuation\\">\\"</span>text<span class=\\"token punctuation\\">\\"</span></span> <span class=\\"token attr-name\\">name</span><span class=\\"token attr-value\\"><span class=\\"token punctuation\\">=</span><span class=\\"token punctuation\\">\\"</span>name<span class=\\"token punctuation\\">\\"</span></span> <span class=\\"token attr-name\\">required</span><span class=\\"token attr-value\\"><span class=\\"token punctuation\\">=</span><span class=\\"token punctuation\\">\\"</span>required<span class=\\"token punctuation\\">\\"</span></span><span class=\\"token punctuation\\">></span></span><span class=\\"token tag\\"><span class=\\"token tag\\"><span class=\\"token punctuation\\">&lt;</span>br</span><span class=\\"token punctuation\\">></span></span>\\n    Age: <span class=\\"token tag\\"><span class=\\"token tag\\"><span class=\\"token punctuation\\">&lt;</span>input</span> <span class=\\"token attr-name\\">type</span><span class=\\"token attr-value\\"><span class=\\"token punctuation\\">=</span><span class=\\"token punctuation\\">\\"</span>number<span class=\\"token punctuation\\">\\"</span></span> <span class=\\"token attr-name\\">name</span><span class=\\"token attr-value\\"><span class=\\"token punctuation\\">=</span><span class=\\"token punctuation\\">\\"</span>age<span class=\\"token punctuation\\">\\"</span></span> <span class=\\"token attr-name\\">required</span><span class=\\"token attr-value\\"><span class=\\"token punctuation\\">=</span><span class=\\"token punctuation\\">\\"</span>required<span class=\\"token punctuation\\">\\"</span></span><span class=\\"token punctuation\\">></span></span><span class=\\"token tag\\"><span class=\\"token tag\\"><span class=\\"token punctuation\\">&lt;</span>br</span><span class=\\"token punctuation\\">></span></span>\\n    <span class=\\"token tag\\"><span class=\\"token tag\\"><span class=\\"token punctuation\\">&lt;</span>input</span> <span class=\\"token attr-name\\">type</span><span class=\\"token attr-value\\"><span class=\\"token punctuation\\">=</span><span class=\\"token punctuation\\">\\"</span>submit<span class=\\"token punctuation\\">\\"</span></span> <span class=\\"token attr-name\\">value</span><span class=\\"token attr-value\\"><span class=\\"token punctuation\\">=</span><span class=\\"token punctuation\\">\\"</span>Submit<span class=\\"token punctuation\\">\\"</span></span><span class=\\"token punctuation\\">></span></span>\\n<span class=\\"token tag\\"><span class=\\"token tag\\"><span class=\\"token punctuation\\">&lt;/</span>form</span><span class=\\"token punctuation\\">></span></span>\\n\\n<span class=\\"token tag\\"><span class=\\"token tag\\"><span class=\\"token punctuation\\">&lt;</span>iframe</span> <span class=\\"token attr-name\\">name</span><span class=\\"token attr-value\\"><span class=\\"token punctuation\\">=</span><span class=\\"token punctuation\\">\\"</span>redirect<span class=\\"token punctuation\\">\\"</span></span><span class=\\"token style-attr language-css\\"><span class=\\"token attr-name\\"> <span class=\\"token attr-name\\">style</span></span><span class=\\"token punctuation\\">=\\"</span><span class=\\"token attr-value\\"><span class=\\"token property\\">display</span><span class=\\"token punctuation\\">:</span>none<span class=\\"token punctuation\\">;</span></span><span class=\\"token punctuation\\">\\"</span></span><span class=\\"token punctuation\\">></span></span><span class=\\"token tag\\"><span class=\\"token tag\\"><span class=\\"token punctuation\\">&lt;/</span>iframe</span><span class=\\"token punctuation\\">></span></span>\\n<span class=\\"token tag\\"><span class=\\"token tag\\"><span class=\\"token punctuation\\">&lt;/</span>body</span><span class=\\"token punctuation\\">></span></span>\\n<span class=\\"token tag\\"><span class=\\"token tag\\"><span class=\\"token punctuation\\">&lt;/</span>html</span><span class=\\"token punctuation\\">></span></span></code></pre></div>\\n<ol start=\\"4\\">\\n<li>Open your Kitura Xcode project:</li>\\n</ol>\\n<div class=\\"gatsby-highlight\\" data-language=\\"text\\"><pre class=\\"language-text\\"><code class=\\"language-text\\">cd ~/URLEncodedForms\\nopen URLEncodedForms.xcodeproj/</code></pre></div>\\n<ol start=\\"5\\">\\n<li>Open Sources > Application > Application.swift</li>\\n<li>Add your User struct after the App class:</li>\\n</ol>\\n<div class=\\"gatsby-highlight\\" data-language=\\"swift\\"><pre class=\\"language-swift\\"><code class=\\"language-swift\\"><span class=\\"token keyword\\">struct</span> <span class=\\"token builtin\\">User</span><span class=\\"token punctuation\\">:</span> <span class=\\"token builtin\\">Codable</span><span class=\\"token punctuation\\">,</span> <span class=\\"token builtin\\">QueryParams</span> <span class=\\"token punctuation\\">{</span>\\n    <span class=\\"token keyword\\">let</span> name<span class=\\"token punctuation\\">:</span> <span class=\\"token builtin\\">String</span>\\n    <span class=\\"token keyword\\">let</span> age<span class=\\"token punctuation\\">:</span> <span class=\\"token builtin\\">Int</span>\\n<span class=\\"token punctuation\\">}</span></code></pre></div>\\n<ol start=\\"7\\">\\n<li>\\n<p>Inside the <code class=\\"language-text\\">postInit</code> function, add the static file server middleware:</p>\\n<div class=\\"gatsby-highlight\\" data-language=\\"swift\\"><pre class=\\"language-swift\\"><code class=\\"language-swift\\">router<span class=\\"token punctuation\\">.</span><span class=\\"token keyword\\">get</span><span class=\\"token punctuation\\">(</span><span class=\\"token string\\">\\"/\\"</span><span class=\\"token punctuation\\">,</span> middleware<span class=\\"token punctuation\\">:</span> <span class=\\"token function\\">StaticFileServer</span><span class=\\"token punctuation\\">(</span><span class=\\"token punctuation\\">)</span><span class=\\"token punctuation\\">)</span></code></pre></div>\\n</li>\\n<li>Below your static file server, add a Raw route to receive a POST form:</li>\\n</ol>\\n<div class=\\"gatsby-highlight\\" data-language=\\"swift\\"><pre class=\\"language-swift\\"><code class=\\"language-swift\\">router<span class=\\"token punctuation\\">.</span><span class=\\"token function\\">post</span><span class=\\"token punctuation\\">(</span><span class=\\"token string\\">\\"/raw\\"</span><span class=\\"token punctuation\\">)</span> <span class=\\"token punctuation\\">{</span> request<span class=\\"token punctuation\\">,</span> response<span class=\\"token punctuation\\">,</span> next <span class=\\"token keyword\\">in</span>\\n    <span class=\\"token keyword\\">guard</span> <span class=\\"token keyword\\">let</span> user <span class=\\"token operator\\">=</span> <span class=\\"token keyword\\">try</span><span class=\\"token operator\\">?</span> request<span class=\\"token punctuation\\">.</span><span class=\\"token function\\">read</span><span class=\\"token punctuation\\">(</span><span class=\\"token keyword\\">as</span><span class=\\"token punctuation\\">:</span> <span class=\\"token builtin\\">User</span><span class=\\"token punctuation\\">.</span><span class=\\"token keyword\\">self</span><span class=\\"token punctuation\\">)</span>\\n    <span class=\\"token keyword\\">else</span> <span class=\\"token punctuation\\">{</span>\\n        <span class=\\"token keyword\\">return</span> <span class=\\"token keyword\\">try</span> response<span class=\\"token punctuation\\">.</span><span class=\\"token function\\">status</span><span class=\\"token punctuation\\">(</span><span class=\\"token punctuation\\">.</span>unprocessableEntity<span class=\\"token punctuation\\">)</span><span class=\\"token punctuation\\">.</span><span class=\\"token function\\">end</span><span class=\\"token punctuation\\">(</span><span class=\\"token punctuation\\">)</span>\\n    <span class=\\"token punctuation\\">}</span>\\n    <span class=\\"token function\\">print</span><span class=\\"token punctuation\\">(</span><span class=\\"token string\\">\\"Raw POST route: <span class=\\"token interpolation\\"><span class=\\"token delimiter variable\\">\\\\(</span>user<span class=\\"token punctuation\\">.</span>name<span class=\\"token delimiter variable\\">)</span></span>, is <span class=\\"token interpolation\\"><span class=\\"token delimiter variable\\">\\\\(</span>user<span class=\\"token punctuation\\">.</span>age<span class=\\"token delimiter variable\\">)</span></span> years old\\"</span><span class=\\"token punctuation\\">)</span>\\n    response<span class=\\"token punctuation\\">.</span><span class=\\"token function\\">status</span><span class=\\"token punctuation\\">(</span><span class=\\"token punctuation\\">.</span>created<span class=\\"token punctuation\\">)</span><span class=\\"token punctuation\\">.</span><span class=\\"token function\\">send</span><span class=\\"token punctuation\\">(</span>json<span class=\\"token punctuation\\">:</span> user<span class=\\"token punctuation\\">)</span>\\n    <span class=\\"token function\\">next</span><span class=\\"token punctuation\\">(</span><span class=\\"token punctuation\\">)</span>\\n<span class=\\"token punctuation\\">}</span></code></pre></div>\\n<ol start=\\"9\\">\\n<li>Below the previous route, add a Raw route to receive a GET form:</li>\\n</ol>\\n<div class=\\"gatsby-highlight\\" data-language=\\"swift\\"><pre class=\\"language-swift\\"><code class=\\"language-swift\\">router<span class=\\"token punctuation\\">.</span><span class=\\"token keyword\\">get</span><span class=\\"token punctuation\\">(</span><span class=\\"token string\\">\\"/raw\\"</span><span class=\\"token punctuation\\">)</span> <span class=\\"token punctuation\\">{</span> request<span class=\\"token punctuation\\">,</span> response<span class=\\"token punctuation\\">,</span> next <span class=\\"token keyword\\">in</span>\\n    <span class=\\"token keyword\\">guard</span> <span class=\\"token keyword\\">let</span> user <span class=\\"token operator\\">=</span> <span class=\\"token keyword\\">try</span><span class=\\"token operator\\">?</span> <span class=\\"token function\\">QueryDecoder</span><span class=\\"token punctuation\\">(</span>dictionary<span class=\\"token punctuation\\">:</span> request<span class=\\"token punctuation\\">.</span>queryParameters<span class=\\"token punctuation\\">)</span><span class=\\"token punctuation\\">.</span><span class=\\"token function\\">decode</span><span class=\\"token punctuation\\">(</span><span class=\\"token builtin\\">User</span><span class=\\"token punctuation\\">.</span><span class=\\"token keyword\\">self</span><span class=\\"token punctuation\\">)</span>\\n    <span class=\\"token keyword\\">else</span> <span class=\\"token punctuation\\">{</span>\\n        <span class=\\"token keyword\\">return</span> <span class=\\"token keyword\\">try</span> response<span class=\\"token punctuation\\">.</span><span class=\\"token function\\">status</span><span class=\\"token punctuation\\">(</span><span class=\\"token punctuation\\">.</span>unprocessableEntity<span class=\\"token punctuation\\">)</span><span class=\\"token punctuation\\">.</span><span class=\\"token function\\">end</span><span class=\\"token punctuation\\">(</span><span class=\\"token punctuation\\">)</span>\\n    <span class=\\"token punctuation\\">}</span>\\n    <span class=\\"token function\\">print</span><span class=\\"token punctuation\\">(</span><span class=\\"token string\\">\\"Raw GET route: <span class=\\"token interpolation\\"><span class=\\"token delimiter variable\\">\\\\(</span>user<span class=\\"token punctuation\\">.</span>name<span class=\\"token delimiter variable\\">)</span></span>, is <span class=\\"token interpolation\\"><span class=\\"token delimiter variable\\">\\\\(</span>user<span class=\\"token punctuation\\">.</span>age<span class=\\"token delimiter variable\\">)</span></span> years old\\"</span><span class=\\"token punctuation\\">)</span>\\n    response<span class=\\"token punctuation\\">.</span><span class=\\"token function\\">status</span><span class=\\"token punctuation\\">(</span><span class=\\"token punctuation\\">.</span>created<span class=\\"token punctuation\\">)</span><span class=\\"token punctuation\\">.</span><span class=\\"token function\\">send</span><span class=\\"token punctuation\\">(</span>json<span class=\\"token punctuation\\">:</span> user<span class=\\"token punctuation\\">)</span>\\n    <span class=\\"token function\\">next</span><span class=\\"token punctuation\\">(</span><span class=\\"token punctuation\\">)</span>\\n<span class=\\"token punctuation\\">}</span></code></pre></div>\\n<ol start=\\"10\\">\\n<li>Below your Raw routes, register the handlers for GET and POST requests on “codable”.</li>\\n</ol>\\n<div class=\\"gatsby-highlight\\" data-language=\\"swift\\"><pre class=\\"language-swift\\"><code class=\\"language-swift\\">router<span class=\\"token punctuation\\">.</span><span class=\\"token function\\">post</span><span class=\\"token punctuation\\">(</span><span class=\\"token string\\">\\"/codable\\"</span><span class=\\"token punctuation\\">,</span> handler<span class=\\"token punctuation\\">:</span> postFormHandler<span class=\\"token punctuation\\">)</span>\\nrouter<span class=\\"token punctuation\\">.</span><span class=\\"token keyword\\">get</span><span class=\\"token punctuation\\">(</span><span class=\\"token string\\">\\"/codable\\"</span><span class=\\"token punctuation\\">,</span> handler<span class=\\"token punctuation\\">:</span> getFormHandler<span class=\\"token punctuation\\">)</span></code></pre></div>\\n<ol start=\\"11\\">\\n<li>After the <code class=\\"language-text\\">postInit</code> function, add your postFormHandler function:</li>\\n</ol>\\n<div class=\\"gatsby-highlight\\" data-language=\\"swift\\"><pre class=\\"language-swift\\"><code class=\\"language-swift\\"><span class=\\"token keyword\\">func</span> <span class=\\"token function\\">postFormHandler</span><span class=\\"token punctuation\\">(</span>user<span class=\\"token punctuation\\">:</span> <span class=\\"token builtin\\">User</span><span class=\\"token punctuation\\">,</span> respondWith<span class=\\"token punctuation\\">:</span> <span class=\\"token punctuation\\">(</span><span class=\\"token builtin\\">User</span><span class=\\"token operator\\">?</span><span class=\\"token punctuation\\">,</span> <span class=\\"token builtin\\">RequestError</span><span class=\\"token operator\\">?</span><span class=\\"token punctuation\\">)</span> <span class=\\"token operator\\">-</span><span class=\\"token operator\\">></span> <span class=\\"token builtin\\">Void</span><span class=\\"token punctuation\\">)</span> <span class=\\"token punctuation\\">{</span>\\n    <span class=\\"token function\\">print</span><span class=\\"token punctuation\\">(</span><span class=\\"token string\\">\\"Codable POST route: <span class=\\"token interpolation\\"><span class=\\"token delimiter variable\\">\\\\(</span>user<span class=\\"token punctuation\\">.</span>name<span class=\\"token delimiter variable\\">)</span></span>, is <span class=\\"token interpolation\\"><span class=\\"token delimiter variable\\">\\\\(</span>user<span class=\\"token punctuation\\">.</span>age<span class=\\"token delimiter variable\\">)</span></span> years old\\"</span><span class=\\"token punctuation\\">)</span>\\n    <span class=\\"token function\\">respondWith</span><span class=\\"token punctuation\\">(</span>user<span class=\\"token punctuation\\">,</span> <span class=\\"token constant\\">nil</span><span class=\\"token punctuation\\">)</span>\\n<span class=\\"token punctuation\\">}</span></code></pre></div>\\n<ol start=\\"12\\">\\n<li>Below the previous handler, add your getFormHandler function:</li>\\n</ol>\\n<div class=\\"gatsby-highlight\\" data-language=\\"swift\\"><pre class=\\"language-swift\\"><code class=\\"language-swift\\"><span class=\\"token keyword\\">func</span> <span class=\\"token function\\">getFormHandler</span><span class=\\"token punctuation\\">(</span>user<span class=\\"token punctuation\\">:</span> <span class=\\"token builtin\\">User</span><span class=\\"token punctuation\\">,</span> respondWith<span class=\\"token punctuation\\">:</span> <span class=\\"token punctuation\\">(</span><span class=\\"token punctuation\\">[</span><span class=\\"token builtin\\">User</span><span class=\\"token punctuation\\">]</span><span class=\\"token operator\\">?</span><span class=\\"token punctuation\\">,</span> <span class=\\"token builtin\\">RequestError</span><span class=\\"token operator\\">?</span><span class=\\"token punctuation\\">)</span> <span class=\\"token operator\\">-</span><span class=\\"token operator\\">></span> <span class=\\"token builtin\\">Void</span><span class=\\"token punctuation\\">)</span> <span class=\\"token punctuation\\">{</span>\\n    <span class=\\"token function\\">print</span><span class=\\"token punctuation\\">(</span><span class=\\"token string\\">\\"Codable GET route: <span class=\\"token interpolation\\"><span class=\\"token delimiter variable\\">\\\\(</span>user<span class=\\"token punctuation\\">.</span>name<span class=\\"token delimiter variable\\">)</span></span>, is <span class=\\"token interpolation\\"><span class=\\"token delimiter variable\\">\\\\(</span>user<span class=\\"token punctuation\\">.</span>age<span class=\\"token delimiter variable\\">)</span></span> years old\\"</span><span class=\\"token punctuation\\">)</span>\\n    <span class=\\"token function\\">respondWith</span><span class=\\"token punctuation\\">(</span><span class=\\"token punctuation\\">[</span>user<span class=\\"token punctuation\\">]</span><span class=\\"token punctuation\\">,</span> <span class=\\"token constant\\">nil</span><span class=\\"token punctuation\\">)</span>\\n<span class=\\"token punctuation\\">}</span></code></pre></div>\\n<ol start=\\"13\\">\\n<li>In the top left corner of Xcode you should see a small toolbox icon with the text “URLEncodedForms-Package” next to it. Click this icon and then click “URLEncodedForms” from the dropdown menu.</li>\\n<li>Press the Run button or use the ⌘+R key shortcut to start your server.</li>\\n</ol>\\n<p>Go to <a href=\\"http://localhost:8080/formwebpage.html\\">http://localhost:8080/formwebpage.html</a>. You will see a very basic HTML page with four forms. When you submit the forms, they will send the data to the routes we just created. If you open your Xcode project, you should see the user’s name and age being printed to the console.</p>\\n<p>Congratulations! You have just set up a simple website which submits URL encoded forms to a Kitura server. Within a real application you would probably use <a href=\\"https://github.com/IBM-Swift/Swift-Kuery-ORM\\">Swift-Kuery-ORM</a> to save the users in a database and a template engine to produce a dynamic webpage based on the user.</p>\\n<p>Any questions or comments? Please join the vibrant Kitura community on <a href=\\"http://swift-at-ibm-slack.mybluemix.net/?cm_sp=dw-bluemix-_-swift-_-devcenter&#x26;_ga=2.210593109.1386731664.1571398389-799380006.1571398389\\">Slack</a>!</p>","frontmatter":{"path":"/blogs/url-encoded-forms-kitura","title":"Raw and Codable support for URL Encoded Forms in Kitura 2.3"}}}]}}}')},159:function(n,a){n.exports="data:image/svg+xml;base64,PHN2ZyB3aWR0aD0iMjQiIGhlaWdodD0iMjQiIHhtbG5zPSJodHRwOi8vd3d3LnczLm9yZy8yMDAwL3N2ZyI+CiA8IS0tIENyZWF0ZWQgd2l0aCBNZXRob2QgRHJhdyAtIGh0dHA6Ly9naXRodWIuY29tL2R1b3BpeGVsL01ldGhvZC1EcmF3LyAtLT4KCiA8Zz4KICA8dGl0bGU+YmFja2dyb3VuZDwvdGl0bGU+CiAgPHJlY3QgZmlsbD0ibm9uZSIgaWQ9ImNhbnZhc19iYWNrZ3JvdW5kIiBoZWlnaHQ9IjI2IiB3aWR0aD0iMjYiIHk9Ii0xIiB4PSItMSIvPgogIDxnIGRpc3BsYXk9Im5vbmUiIG92ZXJmbG93PSJ2aXNpYmxlIiB5PSIwIiB4PSIwIiBoZWlnaHQ9IjEwMCUiIHdpZHRoPSIxMDAlIiBpZD0iY2FudmFzR3JpZCI+CiAgIDxyZWN0IGZpbGw9InVybCgjZ3JpZHBhdHRlcm4pIiBzdHJva2Utd2lkdGg9IjAiIHk9IjEiIHg9IjEiIGhlaWdodD0iMjIiIHdpZHRoPSIyMiIvPgogIDwvZz4KIDwvZz4KIDxnPgogIDx0aXRsZT5MYXllciAxPC90aXRsZT4KICA8ZWxsaXBzZSByeT0iMTEiIHJ4PSIxMSIgaWQ9InN2Z18xIiBjeT0iMTIiIGN4PSIxMiIgc3Ryb2tlPSIjMDAwIiBmaWxsPSIjMDAwMDAwIi8+CiAgPHN0eWxlIHRyYW5zZm9ybT0ibWF0cml4KDAuMDY1MTgyNDk1NTczMjUzNjIsMCwwLDAuMDY1MTgyNDk1NTczMjUzNjIsMCwwKSAiIHR5cGU9InRleHQvY3NzIj4uc3Qwe2ZpbGw6I0ZGRkZGRjt9PC9zdHlsZT4KICA8ZyBzdHJva2U9Im51bGwiIGlkPSJzdmdfMTkiPgogICA8ZyBzdHJva2U9Im51bGwiIHRyYW5zZm9ybT0ibWF0cml4KDAuMTMwMTU1ODA4NTE4MDk0ODYsMCwwLDAuMTMwMTU1ODA4NTE4MDk0ODYsLTYuODQ5MDA2NDUwNDA1NDk5LC02LjgzMTUwNzM5MTAyMTkyNCkgIiBpZD0ic3ZnXzYiPgogICAgPGcgc3Ryb2tlPSJudWxsIiBpZD0ic3ZnXzciPgogICAgIDxwYXRoIHN0cm9rZT0ibnVsbCIgaWQ9InN2Z184IiBkPSJtMTEwLjI5ODI5MiwxNjEuMjkzMDExYzAsNy4xIC01LjgsMTIuOSAtMTIuOSwxMi45cy0xMi45LC01LjggLTEyLjksLTEyLjljMCwtNy4xIDUuOCwtMTIuOSAxMi45LC0xMi45bDEyLjksMGwwLDEyLjl6IiBjbGFzcz0ic3QwIi8+CiAgICAgPHBhdGggc3Ryb2tlPSJudWxsIiBpZD0ic3ZnXzkiIGQ9Im0xMTYuNzk4MjkyLDE2MS4yOTMwMTFjMCwtNy4xIDUuOCwtMTIuOSAxMi45LC0xMi45czEyLjksNS44IDEyLjksMTIuOWwwLDMyLjNjMCw3LjEgLTUuOCwxMi45IC0xMi45LDEyLjlzLTEyLjksLTUuOCAtMTIuOSwtMTIuOWMwLDAgMCwtMzIuMyAwLC0zMi4zeiIgY2xhc3M9InN0MCIvPgogICAgPC9nPgogICAgPGcgc3Ryb2tlPSJudWxsIiBpZD0ic3ZnXzEwIj4KICAgICA8cGF0aCBzdHJva2U9Im51bGwiIGlkPSJzdmdfMTEiIGQ9Im0xMjkuNjk4MjkyLDEwOS40OTMwMTFjLTcuMSwwIC0xMi45LC01LjggLTEyLjksLTEyLjlzNS44LC0xMi45IDEyLjksLTEyLjlzMTIuOSw1LjggMTIuOSwxMi45bDAsMTIuOWwtMTIuOSwweiIgY2xhc3M9InN0MCIvPgogICAgIDxwYXRoIHN0cm9rZT0ibnVsbCIgaWQ9InN2Z18xMiIgZD0ibTEyOS42OTgyOTIsMTE1Ljk5MzAxMWM3LjEsMCAxMi45LDUuOCAxMi45LDEyLjlzLTUuOCwxMi45IC0xMi45LDEyLjlsLTMyLjMsMGMtNy4xLDAgLTEyLjksLTUuOCAtMTIuOSwtMTIuOXM1LjgsLTEyLjkgMTIuOSwtMTIuOWMwLDAgMzIuMywwIDMyLjMsMHoiIGNsYXNzPSJzdDAiLz4KICAgIDwvZz4KICAgIDxnIHN0cm9rZT0ibnVsbCIgaWQ9InN2Z18xMyI+CiAgICAgPHBhdGggc3Ryb2tlPSJudWxsIiBpZD0ic3ZnXzE0IiBkPSJtMTgxLjQ5ODI5MiwxMjguODkzMDExYzAsLTcuMSA1LjgsLTEyLjkgMTIuOSwtMTIuOWM3LjEsMCAxMi45LDUuOCAxMi45LDEyLjlzLTUuOCwxMi45IC0xMi45LDEyLjlsLTEyLjksMGwwLC0xMi45eiIgY2xhc3M9InN0MCIvPgogICAgIDxwYXRoIHN0cm9rZT0ibnVsbCIgaWQ9InN2Z18xNSIgZD0ibTE3NC45OTgyOTIsMTI4Ljg5MzAxMWMwLDcuMSAtNS44LDEyLjkgLTEyLjksMTIuOWMtNy4xLDAgLTEyLjksLTUuOCAtMTIuOSwtMTIuOWwwLC0zMi4zYzAsLTcuMSA1LjgsLTEyLjkgMTIuOSwtMTIuOWM3LjEsMCAxMi45LDUuOCAxMi45LDEyLjlsMCwzMi4zeiIgY2xhc3M9InN0MCIvPgogICAgPC9nPgogICAgPGcgc3Ryb2tlPSJudWxsIiBpZD0ic3ZnXzE2Ij4KICAgICA8cGF0aCBzdHJva2U9Im51bGwiIGlkPSJzdmdfMTciIGQ9Im0xNjIuMDk4MjkyLDE4MC42OTMwMTFjNy4xLDAgMTIuOSw1LjggMTIuOSwxMi45YzAsNy4xIC01LjgsMTIuOSAtMTIuOSwxMi45Yy03LjEsMCAtMTIuOSwtNS44IC0xMi45LC0xMi45bDAsLTEyLjlsMTIuOSwweiIgY2xhc3M9InN0MCIvPgogICAgIDxwYXRoIHN0cm9rZT0ibnVsbCIgaWQ9InN2Z18xOCIgZD0ibTE2Mi4wOTgyOTIsMTc0LjE5MzAxMWMtNy4xLDAgLTEyLjksLTUuOCAtMTIuOSwtMTIuOWMwLC03LjEgNS44LC0xMi45IDEyLjksLTEyLjlsMzIuMywwYzcuMSwwIDEyLjksNS44IDEyLjksMTIuOWMwLDcuMSAtNS44LDEyLjkgLTEyLjksMTIuOWwtMzIuMywweiIgY2xhc3M9InN0MCIvPgogICAgPC9nPgogICA8L2c+CiAgPC9nPgogPC9nPgo8L3N2Zz4="},160:function(n,a){n.exports="data:image/svg+xml;base64,PD94bWwgdmVyc2lvbj0iMS4wIiBlbmNvZGluZz0iVVRGLTgiPz4KPHN2ZyB3aWR0aD0iMjJweCIgaGVpZ2h0PSIyMnB4IiB2aWV3Qm94PSIwIDAgMjIgMjIiIHZlcnNpb249IjEuMSIgeG1sbnM9Imh0dHA6Ly93d3cudzMub3JnLzIwMDAvc3ZnIiB4bWxuczp4bGluaz0iaHR0cDovL3d3dy53My5vcmcvMTk5OS94bGluayI+CiAgICA8IS0tIEdlbmVyYXRvcjogU2tldGNoIDU0LjEgKDc2NDkwKSAtIGh0dHBzOi8vc2tldGNoYXBwLmNvbSAtLT4KICAgIDx0aXRsZT5pY29uIGNvbG9yPC90aXRsZT4KICAgIDxkZXNjPkNyZWF0ZWQgd2l0aCBTa2V0Y2guPC9kZXNjPgogICAgPGRlZnM+CiAgICAgICAgPHBhdGggZD0iTTExLDAuNzU1IEM1LjgzNzgyNjU4LDAuNzQ0NDU4MDAxIDEuNDMzNzMzMzIsNC40ODc4MTYyMSAwLjYxMjMzMzA4Myw5LjU4NDIzMTM0IEMtMC4yMDkwNjcxNTgsMTQuNjgwNjQ2NSAyLjc5NTkxNDI2LDE5LjYxODE0MTMgNy43LDIxLjIzIEM4LjIyNSwyMS4zMDUgOC40NSwyMS4wMDUgOC40NSwyMC43MDUgTDguNDUsMTguOTA1IEM1LjUyNSwxOS41MDUgNC45MjUsMTcuNDggNC45MjUsMTcuNDggQzQuNzQwMjE5NzUsMTYuODQwNDAzOSA0LjMwODQzNDY4LDE2LjMwMDY3MjYgMy43MjUsMTUuOTggQzIuNzUsMTUuMzA1IDMuOCwxNS4zMDUgMy44LDE1LjMwNSBDNC40NjA2NDQwNCwxNS4zODg1NTM2IDUuMDQzNzc5NzgsMTUuNzc3MzEwNyA1LjM3NSwxNi4zNTUgQzYuMDAxNjg4NDEsMTcuNDE5NzIzMyA3LjM0ODEzMjY4LDE3LjgxMzgwNDYgOC40NSwxNy4yNTUgQzguNTAxNTI2MTMsMTYuNzE1NzA1IDguNzQwMzU4NDQsMTYuMjExNTAzNSA5LjEyNSwxNS44MyBDNi44LDE1LjUzIDQuMzI1LDE0LjYzIDQuMzI1LDEwLjY1NSBDNC4zMDQyODE2Nyw5LjYwNjc4MzQzIDQuNjc5MTcxNCw4LjU4OTIyNTYgNS4zNzUsNy44MDUgQzUuMDc4OTA5MDYsNi44ODg4NzUxNCA1LjEwNTM3NjQ5LDUuODk4OTkzNDYgNS40NSw1IEM1LjQ1LDUgNi4zNSw0LjcgOC4zLDYuMDUgQzkuMTU0Njg3NTgsNS44MTAwNDAxMiAxMC4wMzczMTEyLDUuNjgzOTUxMDQgMTAuOTI1LDUuNjc1IEMxMS44MTI2ODg4LDUuNjgzOTUxMDQgMTIuNjk1MzEyNCw1LjgxMDA0MDEyIDEzLjU1LDYuMDUgQzE1LjU3NSw0LjczIDE2LjQsNSAxNi40LDUgQzE2LjgyMzgwNzksNS44NzA5NTE2NiAxNi44NTExNDUxLDYuODgyNDI3OTkgMTYuNDc1LDcuNzc1IEMxNy4xODI4MzUyLDguNTUxOTg1MjMgMTcuNTU5NTUyNCw5LjU3NDUwMzU2IDE3LjUyNSwxMC42MjUgQzE3LjUyNSwxNC42NzUgMTUuMDUsMTUuNTc1IDEyLjcyNSwxNS44IEMxMy4yNDc5MjY0LDE2LjMwOTE4MjUgMTMuNTIxOTQ2NywxNy4wMjE2MzU1IDEzLjQ3NSwxNy43NSBMMTMuNDc1LDIwLjYgQzEzLjQ3NSwyMC45IDEzLjcsMjEuMiAxNC4yMjUsMjEuMTI1IEMxOC41NjU0MDA3LDE5LjgwNTE5NjUgMjEuNTIzNzc4OCwxNS43OTE1NjE5IDIxLjUsMTEuMjU1IEMyMS41LDUuNDU2MDEwMTMgMTYuNzk4OTg5OSwwLjc1NSAxMSwwLjc1NSBaIiBpZD0icGF0aC0xIj48L3BhdGg+CiAgICA8L2RlZnM+CiAgICA8ZyBpZD0iUGFnZS0xIiBzdHJva2U9Im5vbmUiIHN0cm9rZS13aWR0aD0iMSIgZmlsbD0ibm9uZSIgZmlsbC1ydWxlPSJldmVub2RkIj4KICAgICAgICA8ZyBpZD0iQXJ0Ym9hcmQiIHRyYW5zZm9ybT0idHJhbnNsYXRlKC0xMzQzLjAwMDAwMCwgLTIxLjAwMDAwMCkiPgogICAgICAgICAgICA8ZyBpZD0iaWNvbi9zb2NpYWwvZ2l0aHViLzI0IiB0cmFuc2Zvcm09InRyYW5zbGF0ZSgxMzQzLjAwMDAwMCwgMjEuMDAwMDAwKSI+CiAgICAgICAgICAgICAgICA8bWFzayBpZD0ibWFzay0yIiBmaWxsPSJ3aGl0ZSI+CiAgICAgICAgICAgICAgICAgICAgPHVzZSB4bGluazpocmVmPSIjcGF0aC0xIj48L3VzZT4KICAgICAgICAgICAgICAgIDwvbWFzaz4KICAgICAgICAgICAgICAgIDx1c2UgaWQ9Imljb24tY29sb3IiIGZpbGw9IiMwMDAwMDAiIHhsaW5rOmhyZWY9IiNwYXRoLTEiPjwvdXNlPgogICAgICAgICAgICA8L2c+CiAgICAgICAgPC9nPgogICAgPC9nPgo8L3N2Zz4K"},170:function(n,a,s){"use strict";s(68),s(49),s(61),s(16),s(14),s(6),s(21),s(50),s(22),s(36),s(31);var t=s(101),e="function"==typeof Symbol&&Symbol.for,o=e?Symbol.for("react.element"):60103,p=e?Symbol.for("react.portal"):60106,c=e?Symbol.for("react.fragment"):60107,i=e?Symbol.for("react.strict_mode"):60108,l=e?Symbol.for("react.profiler"):60114,u=e?Symbol.for("react.provider"):60109,r=e?Symbol.for("react.context"):60110,d=e?Symbol.for("react.forward_ref"):60112,h=e?Symbol.for("react.suspense"):60113,k=e?Symbol.for("react.suspense_list"):60120,g=e?Symbol.for("react.memo"):60115,f=e?Symbol.for("react.lazy"):60116;e&&Symbol.for("react.fundamental"),e&&Symbol.for("react.responder"),e&&Symbol.for("react.scope");var w="function"==typeof Symbol&&Symbol.iterator;function m(n){for(var a=n.message,s="https://reactjs.org/docs/error-decoder.html?invariant="+a,t=1;t<arguments.length;t++)s+="&args[]="+encodeURIComponent(arguments[t]);return n.message="Minified React error #"+a+"; visit "+s+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings. ",n}var b={isMounted:function(){return!1},enqueueForceUpdate:function(){},enqueueReplaceState:function(){},enqueueSetState:function(){}},v={};function y(n,a,s){this.props=n,this.context=a,this.refs=v,this.updater=s||b}function S(){}function x(n,a,s){this.props=n,this.context=a,this.refs=v,this.updater=s||b}y.prototype.isReactComponent={},y.prototype.setState=function(n,a){if("object"!=typeof n&&"function"!=typeof n&&null!=n)throw m(Error(85));this.updater.enqueueSetState(this,n,a,"setState")},y.prototype.forceUpdate=function(n){this.updater.enqueueForceUpdate(this,n,"forceUpdate")},S.prototype=y.prototype;var T=x.prototype=new S;T.constructor=x,t(T,y.prototype),T.isPureReactComponent=!0;var C={current:null},A={suspense:null},I={current:null},M=Object.prototype.hasOwnProperty,H={key:!0,ref:!0,__self:!0,__source:!0};function E(n,a,s){var t,e={},p=null,c=null;if(null!=a)for(t in void 0!==a.ref&&(c=a.ref),void 0!==a.key&&(p=""+a.key),a)M.call(a,t)&&!H.hasOwnProperty(t)&&(e[t]=a[t]);var i=arguments.length-2;if(1===i)e.children=s;else if(1<i){for(var l=Array(i),u=0;u<i;u++)l[u]=arguments[u+2];e.children=l}if(n&&n.defaultProps)for(t in i=n.defaultProps)void 0===e[t]&&(e[t]=i[t]);return{$$typeof:o,type:n,key:p,ref:c,props:e,_owner:I.current}}function P(n){return"object"==typeof n&&null!==n&&n.$$typeof===o}var z=/\/+/g,B=[];function K(n,a,s,t){if(B.length){var e=B.pop();return e.result=n,e.keyPrefix=a,e.func=s,e.context=t,e.count=0,e}return{result:n,keyPrefix:a,func:s,context:t,count:0}}function q(n){n.result=null,n.keyPrefix=null,n.func=null,n.context=null,n.count=0,10>B.length&&B.push(n)}function O(n,a,s){return null==n?0:function n(a,s,t,e){var c=typeof a;"undefined"!==c&&"boolean"!==c||(a=null);var i=!1;if(null===a)i=!0;else switch(c){case"string":case"number":i=!0;break;case"object":switch(a.$$typeof){case o:case p:i=!0}}if(i)return t(e,a,""===s?"."+R(a,0):s),1;if(i=0,s=""===s?".":s+":",Array.isArray(a))for(var l=0;l<a.length;l++){var u=s+R(c=a[l],l);i+=n(c,u,t,e)}else if(null===a||"object"!=typeof a?u=null:u="function"==typeof(u=w&&a[w]||a["@@iterator"])?u:null,"function"==typeof u)for(a=u.call(a),l=0;!(c=a.next()).done;)i+=n(c=c.value,u=s+R(c,l++),t,e);else if("object"===c)throw t=""+a,m(Error(31),"[object Object]"===t?"object with keys {"+Object.keys(a).join(", ")+"}":t,"");return i}(n,"",a,s)}function R(n,a){return"object"==typeof n&&null!==n&&null!=n.key?function(n){var a={"=":"=0",":":"=2"};return"$"+(""+n).replace(/[=:]/g,(function(n){return a[n]}))}(n.key):a.toString(36)}function L(n,a){n.func.call(n.context,a,n.count++)}function N(n,a,s){var t=n.result,e=n.keyPrefix;n=n.func.call(n.context,a,n.count++),Array.isArray(n)?V(n,t,s,(function(n){return n})):null!=n&&(P(n)&&(n=function(n,a){return{$$typeof:o,type:n.type,key:a,ref:n.ref,props:n.props,_owner:n._owner}}(n,e+(!n.key||a&&a.key===n.key?"":(""+n.key).replace(z,"$&/")+"/")+s)),t.push(n))}function V(n,a,s,t,e){var o="";null!=s&&(o=(""+s).replace(z,"$&/")+"/"),O(n,N,a=K(a,o,t,e)),q(a)}function D(){var n=C.current;if(null===n)throw m(Error(321));return n}var W={Children:{map:function(n,a,s){if(null==n)return n;var t=[];return V(n,t,null,a,s),t},forEach:function(n,a,s){if(null==n)return n;O(n,L,a=K(null,null,a,s)),q(a)},count:function(n){return O(n,(function(){return null}),null)},toArray:function(n){var a=[];return V(n,a,null,(function(n){return n})),a},only:function(n){if(!P(n))throw m(Error(143));return n}},createRef:function(){return{current:null}},Component:y,PureComponent:x,createContext:function(n,a){return void 0===a&&(a=null),(n={$$typeof:r,_calculateChangedBits:a,_currentValue:n,_currentValue2:n,_threadCount:0,Provider:null,Consumer:null}).Provider={$$typeof:u,_context:n},n.Consumer=n},forwardRef:function(n){return{$$typeof:d,render:n}},lazy:function(n){return{$$typeof:f,_ctor:n,_status:-1,_result:null}},memo:function(n,a){return{$$typeof:g,type:n,compare:void 0===a?null:a}},useCallback:function(n,a){return D().useCallback(n,a)},useContext:function(n,a){return D().useContext(n,a)},useEffect:function(n,a){return D().useEffect(n,a)},useImperativeHandle:function(n,a,s){return D().useImperativeHandle(n,a,s)},useDebugValue:function(){},useLayoutEffect:function(n,a){return D().useLayoutEffect(n,a)},useMemo:function(n,a){return D().useMemo(n,a)},useReducer:function(n,a,s){return D().useReducer(n,a,s)},useRef:function(n){return D().useRef(n)},useState:function(n){return D().useState(n)},Fragment:c,Profiler:l,StrictMode:i,Suspense:h,unstable_SuspenseList:k,createElement:E,cloneElement:function(n,a,s){if(null==n)throw m(Error(267),n);var e=t({},n.props),p=n.key,c=n.ref,i=n._owner;if(null!=a){if(void 0!==a.ref&&(c=a.ref,i=I.current),void 0!==a.key&&(p=""+a.key),n.type&&n.type.defaultProps)var l=n.type.defaultProps;for(u in a)M.call(a,u)&&!H.hasOwnProperty(u)&&(e[u]=void 0===a[u]&&void 0!==l?l[u]:a[u])}var u=arguments.length-2;if(1===u)e.children=s;else if(1<u){l=Array(u);for(var r=0;r<u;r++)l[r]=arguments[r+2];e.children=l}return{$$typeof:o,type:n.type,key:p,ref:c,props:e,_owner:i}},createFactory:function(n){var a=E.bind(null,n);return a.type=n,a},isValidElement:P,version:"16.10.2",unstable_withSuspenseConfig:function(n,a){var s=A.suspense;A.suspense=void 0===a?null:a;try{n()}finally{A.suspense=s}},__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED:{ReactCurrentDispatcher:C,ReactCurrentBatchConfig:A,ReactCurrentOwner:I,IsSomeRendererActing:{current:!1},assign:t}},j={default:W},U=j&&W||j;n.exports=U.default||U},197:function(n,a,s){"use strict";s(198),s(199),s(85),s(21),s(140),s(202),s(68),s(81),s(49),s(61),s(2),s(37),s(16),s(14),s(6),s(107),s(108),s(22),s(63),s(36),s(31),s(38),s(50),s(26);var t=s(0),e=s(101),o=s(203);function p(n){for(var a=n.message,s="https://reactjs.org/docs/error-decoder.html?invariant="+a,t=1;t<arguments.length;t++)s+="&args[]="+encodeURIComponent(arguments[t]);return n.message="Minified React error #"+a+"; visit "+s+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings. ",n}if(!t)throw p(Error(227));var c=null,i={};function l(){if(c)for(var n in i){var a=i[n],s=c.indexOf(n);if(!(-1<s))throw p(Error(96),n);if(!r[s]){if(!a.extractEvents)throw p(Error(97),n);for(var t in r[s]=a,s=a.eventTypes){var e=void 0,o=s[t],l=a,h=t;if(d.hasOwnProperty(h))throw p(Error(99),h);d[h]=o;var k=o.phasedRegistrationNames;if(k){for(e in k)k.hasOwnProperty(e)&&u(k[e],l,h);e=!0}else o.registrationName?(u(o.registrationName,l,h),e=!0):e=!1;if(!e)throw p(Error(98),t,n)}}}}function u(n,a,s){if(h[n])throw p(Error(100),n);h[n]=a,k[n]=a.eventTypes[s].dependencies}var r=[],d={},h={},k={};function g(n,a,s,t,e,o,p,c,i){var l=Array.prototype.slice.call(arguments,3);try{a.apply(s,l)}catch(u){this.onError(u)}}var f=!1,w=null,m=!1,b=null,v={onError:function(n){f=!0,w=n}};function y(n,a,s,t,e,o,p,c,i){f=!1,w=null,g.apply(v,arguments)}var S=null,x=null,T=null;function C(n,a,s){var t=n.type||"unknown-event";n.currentTarget=T(s),function(n,a,s,t,e,o,c,i,l){if(y.apply(this,arguments),f){if(!f)throw p(Error(198));var u=w;f=!1,w=null,m||(m=!0,b=u)}}(t,a,void 0,n),n.currentTarget=null}function A(n,a){if(null==a)throw p(Error(30));return null==n?a:Array.isArray(n)?Array.isArray(a)?(n.push.apply(n,a),n):(n.push(a),n):Array.isArray(a)?[n].concat(a):[n,a]}function I(n,a,s){Array.isArray(n)?n.forEach(a,s):n&&a.call(s,n)}var M=null;function H(n){if(n){var a=n._dispatchListeners,s=n._dispatchInstances;if(Array.isArray(a))for(var t=0;t<a.length&&!n.isPropagationStopped();t++)C(n,a[t],s[t]);else a&&C(n,a,s);n._dispatchListeners=null,n._dispatchInstances=null,n.isPersistent()||n.constructor.release(n)}}function E(n){if(null!==n&&(M=A(M,n)),n=M,M=null,n){if(I(n,H),M)throw p(Error(95));if(m)throw n=b,m=!1,b=null,n}}var P={injectEventPluginOrder:function(n){if(c)throw p(Error(101));c=Array.prototype.slice.call(n),l()},injectEventPluginsByName:function(n){var a,s=!1;for(a in n)if(n.hasOwnProperty(a)){var t=n[a];if(!i.hasOwnProperty(a)||i[a]!==t){if(i[a])throw p(Error(102),a);i[a]=t,s=!0}}s&&l()}};function z(n,a){var s=n.stateNode;if(!s)return null;var t=S(s);if(!t)return null;s=t[a];n:switch(a){case"onClick":case"onClickCapture":case"onDoubleClick":case"onDoubleClickCapture":case"onMouseDown":case"onMouseDownCapture":case"onMouseMove":case"onMouseMoveCapture":case"onMouseUp":case"onMouseUpCapture":(t=!t.disabled)||(t=!("button"===(n=n.type)||"input"===n||"select"===n||"textarea"===n)),n=!t;break n;default:n=!1}if(n)return null;if(s&&"function"!=typeof s)throw p(Error(231),a,typeof s);return s}var B=t.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED;B.hasOwnProperty("ReactCurrentDispatcher")||(B.ReactCurrentDispatcher={current:null}),B.hasOwnProperty("ReactCurrentBatchConfig")||(B.ReactCurrentBatchConfig={suspense:null});var K=/^(.*)[\\\/]/,q="function"==typeof Symbol&&Symbol.for,O=q?Symbol.for("react.element"):60103,R=q?Symbol.for("react.portal"):60106,L=q?Symbol.for("react.fragment"):60107,N=q?Symbol.for("react.strict_mode"):60108,V=q?Symbol.for("react.profiler"):60114,D=q?Symbol.for("react.provider"):60109,W=q?Symbol.for("react.context"):60110,j=q?Symbol.for("react.concurrent_mode"):60111,U=q?Symbol.for("react.forward_ref"):60112,_=q?Symbol.for("react.suspense"):60113,J=q?Symbol.for("react.suspense_list"):60120,F=q?Symbol.for("react.memo"):60115,G=q?Symbol.for("react.lazy"):60116;q&&Symbol.for("react.fundamental"),q&&Symbol.for("react.responder"),q&&Symbol.for("react.scope");var Q="function"==typeof Symbol&&Symbol.iterator;function Y(n){return null===n||"object"!=typeof n?null:"function"==typeof(n=Q&&n[Q]||n["@@iterator"])?n:null}function X(n){if(null==n)return null;if("function"==typeof n)return n.displayName||n.name||null;if("string"==typeof n)return n;switch(n){case L:return"Fragment";case R:return"Portal";case V:return"Profiler";case N:return"StrictMode";case _:return"Suspense";case J:return"SuspenseList"}if("object"==typeof n)switch(n.$$typeof){case W:return"Context.Consumer";case D:return"Context.Provider";case U:var a=n.render;return a=a.displayName||a.name||"",n.displayName||(""!==a?"ForwardRef("+a+")":"ForwardRef");case F:return X(n.type);case G:if(n=1===n._status?n._result:null)return X(n)}return null}function Z(n){var a="";do{n:switch(n.tag){case 3:case 4:case 6:case 7:case 10:case 9:var s="";break n;default:var t=n._debugOwner,e=n._debugSource,o=X(n.type);s=null,t&&(s=X(t.type)),t=o,o="",e?o=" (at "+e.fileName.replace(K,"")+":"+e.lineNumber+")":s&&(o=" (created by "+s+")"),s="\n    in "+(t||"Unknown")+o}a+=s,n=n.return}while(n);return a}var $=!("undefined"==typeof window||void 0===window.document||void 0===window.document.createElement),nn=null,an=null,sn=null;function tn(n){if(n=x(n)){if("function"!=typeof nn)throw p(Error(280));var a=S(n.stateNode);nn(n.stateNode,n.type,a)}}function en(n){an?sn?sn.push(n):sn=[n]:an=n}function on(){if(an){var n=an,a=sn;if(sn=an=null,tn(n),a)for(n=0;n<a.length;n++)tn(a[n])}}function pn(n,a){return n(a)}function cn(n,a,s,t){return n(a,s,t)}function ln(){}var un=pn,rn=!1,dn=!1;function hn(){null===an&&null===sn||(ln(),on())}new Map,new Map,new Map;var kn=/^[:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD][:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD\-.0-9\u00B7\u0300-\u036F\u203F-\u2040]*$/,gn=Object.prototype.hasOwnProperty,fn={},wn={};function mn(n,a,s,t,e,o){this.acceptsBooleans=2===a||3===a||4===a,this.attributeName=t,this.attributeNamespace=e,this.mustUseProperty=s,this.propertyName=n,this.type=a,this.sanitizeURL=o}var bn={};"children dangerouslySetInnerHTML defaultValue defaultChecked innerHTML suppressContentEditableWarning suppressHydrationWarning style".split(" ").forEach((function(n){bn[n]=new mn(n,0,!1,n,null,!1)})),[["acceptCharset","accept-charset"],["className","class"],["htmlFor","for"],["httpEquiv","http-equiv"]].forEach((function(n){var a=n[0];bn[a]=new mn(a,1,!1,n[1],null,!1)})),["contentEditable","draggable","spellCheck","value"].forEach((function(n){bn[n]=new mn(n,2,!1,n.toLowerCase(),null,!1)})),["autoReverse","externalResourcesRequired","focusable","preserveAlpha"].forEach((function(n){bn[n]=new mn(n,2,!1,n,null,!1)})),"allowFullScreen async autoFocus autoPlay controls default defer disabled disablePictureInPicture formNoValidate hidden loop noModule noValidate open playsInline readOnly required reversed scoped seamless itemScope".split(" ").forEach((function(n){bn[n]=new mn(n,3,!1,n.toLowerCase(),null,!1)})),["checked","multiple","muted","selected"].forEach((function(n){bn[n]=new mn(n,3,!0,n,null,!1)})),["capture","download"].forEach((function(n){bn[n]=new mn(n,4,!1,n,null,!1)})),["cols","rows","size","span"].forEach((function(n){bn[n]=new mn(n,6,!1,n,null,!1)})),["rowSpan","start"].forEach((function(n){bn[n]=new mn(n,5,!1,n.toLowerCase(),null,!1)}));var vn=/[\-:]([a-z])/g;function yn(n){return n[1].toUpperCase()}function Sn(n){switch(typeof n){case"boolean":case"number":case"object":case"string":case"undefined":return n;default:return""}}function xn(n,a,s,t){var e=bn.hasOwnProperty(a)?bn[a]:null;(null!==e?0===e.type:!t&&(2<a.length&&("o"===a[0]||"O"===a[0])&&("n"===a[1]||"N"===a[1])))||(function(n,a,s,t){if(null==a||function(n,a,s,t){if(null!==s&&0===s.type)return!1;switch(typeof a){case"function":case"symbol":return!0;case"boolean":return!t&&(null!==s?!s.acceptsBooleans:"data-"!==(n=n.toLowerCase().slice(0,5))&&"aria-"!==n);default:return!1}}(n,a,s,t))return!0;if(t)return!1;if(null!==s)switch(s.type){case 3:return!a;case 4:return!1===a;case 5:return isNaN(a);case 6:return isNaN(a)||1>a}return!1}(a,s,e,t)&&(s=null),t||null===e?function(n){return!!gn.call(wn,n)||!gn.call(fn,n)&&(kn.test(n)?wn[n]=!0:(fn[n]=!0,!1))}(a)&&(null===s?n.removeAttribute(a):n.setAttribute(a,""+s)):e.mustUseProperty?n[e.propertyName]=null===s?3!==e.type&&"":s:(a=e.attributeName,t=e.attributeNamespace,null===s?n.removeAttribute(a):(s=3===(e=e.type)||4===e&&!0===s?"":""+s,t?n.setAttributeNS(t,a,s):n.setAttribute(a,s))))}function Tn(n){var a=n.type;return(n=n.nodeName)&&"input"===n.toLowerCase()&&("checkbox"===a||"radio"===a)}function Cn(n){n._valueTracker||(n._valueTracker=function(n){var a=Tn(n)?"checked":"value",s=Object.getOwnPropertyDescriptor(n.constructor.prototype,a),t=""+n[a];if(!n.hasOwnProperty(a)&&void 0!==s&&"function"==typeof s.get&&"function"==typeof s.set){var e=s.get,o=s.set;return Object.defineProperty(n,a,{configurable:!0,get:function(){return e.call(this)},set:function(n){t=""+n,o.call(this,n)}}),Object.defineProperty(n,a,{enumerable:s.enumerable}),{getValue:function(){return t},setValue:function(n){t=""+n},stopTracking:function(){n._valueTracker=null,delete n[a]}}}}(n))}function An(n){if(!n)return!1;var a=n._valueTracker;if(!a)return!0;var s=a.getValue(),t="";return n&&(t=Tn(n)?n.checked?"true":"false":n.value),(n=t)!==s&&(a.setValue(n),!0)}function In(n,a){var s=a.checked;return e({},a,{defaultChecked:void 0,defaultValue:void 0,value:void 0,checked:null!=s?s:n._wrapperState.initialChecked})}function Mn(n,a){var s=null==a.defaultValue?"":a.defaultValue,t=null!=a.checked?a.checked:a.defaultChecked;s=Sn(null!=a.value?a.value:s),n._wrapperState={initialChecked:t,initialValue:s,controlled:"checkbox"===a.type||"radio"===a.type?null!=a.checked:null!=a.value}}function Hn(n,a){null!=(a=a.checked)&&xn(n,"checked",a,!1)}function En(n,a){Hn(n,a);var s=Sn(a.value),t=a.type;if(null!=s)"number"===t?(0===s&&""===n.value||n.value!=s)&&(n.value=""+s):n.value!==""+s&&(n.value=""+s);else if("submit"===t||"reset"===t)return void n.removeAttribute("value");a.hasOwnProperty("value")?zn(n,a.type,s):a.hasOwnProperty("defaultValue")&&zn(n,a.type,Sn(a.defaultValue)),null==a.checked&&null!=a.defaultChecked&&(n.defaultChecked=!!a.defaultChecked)}function Pn(n,a,s){if(a.hasOwnProperty("value")||a.hasOwnProperty("defaultValue")){var t=a.type;if(!("submit"!==t&&"reset"!==t||void 0!==a.value&&null!==a.value))return;a=""+n._wrapperState.initialValue,s||a===n.value||(n.value=a),n.defaultValue=a}""!==(s=n.name)&&(n.name=""),n.defaultChecked=!n.defaultChecked,n.defaultChecked=!!n._wrapperState.initialChecked,""!==s&&(n.name=s)}function zn(n,a,s){"number"===a&&n.ownerDocument.activeElement===n||(null==s?n.defaultValue=""+n._wrapperState.initialValue:n.defaultValue!==""+s&&(n.defaultValue=""+s))}function Bn(n,a){return n=e({children:void 0},a),(a=function(n){var a="";return t.Children.forEach(n,(function(n){null!=n&&(a+=n)})),a}(a.children))&&(n.children=a),n}function Kn(n,a,s,t){if(n=n.options,a){a={};for(var e=0;e<s.length;e++)a["$"+s[e]]=!0;for(s=0;s<n.length;s++)e=a.hasOwnProperty("$"+n[s].value),n[s].selected!==e&&(n[s].selected=e),e&&t&&(n[s].defaultSelected=!0)}else{for(s=""+Sn(s),a=null,e=0;e<n.length;e++){if(n[e].value===s)return n[e].selected=!0,void(t&&(n[e].defaultSelected=!0));null!==a||n[e].disabled||(a=n[e])}null!==a&&(a.selected=!0)}}function qn(n,a){if(null!=a.dangerouslySetInnerHTML)throw p(Error(91));return e({},a,{value:void 0,defaultValue:void 0,children:""+n._wrapperState.initialValue})}function On(n,a){var s=a.value;if(null==s){if(s=a.defaultValue,null!=(a=a.children)){if(null!=s)throw p(Error(92));if(Array.isArray(a)){if(!(1>=a.length))throw p(Error(93));a=a[0]}s=a}null==s&&(s="")}n._wrapperState={initialValue:Sn(s)}}function Rn(n,a){var s=Sn(a.value),t=Sn(a.defaultValue);null!=s&&((s=""+s)!==n.value&&(n.value=s),null==a.defaultValue&&n.defaultValue!==s&&(n.defaultValue=s)),null!=t&&(n.defaultValue=""+t)}function Ln(n){var a=n.textContent;a===n._wrapperState.initialValue&&""!==a&&null!==a&&(n.value=a)}"accent-height alignment-baseline arabic-form baseline-shift cap-height clip-path clip-rule color-interpolation color-interpolation-filters color-profile color-rendering dominant-baseline enable-background fill-opacity fill-rule flood-color flood-opacity font-family font-size font-size-adjust font-stretch font-style font-variant font-weight glyph-name glyph-orientation-horizontal glyph-orientation-vertical horiz-adv-x horiz-origin-x image-rendering letter-spacing lighting-color marker-end marker-mid marker-start overline-position overline-thickness paint-order panose-1 pointer-events rendering-intent shape-rendering stop-color stop-opacity strikethrough-position strikethrough-thickness stroke-dasharray stroke-dashoffset stroke-linecap stroke-linejoin stroke-miterlimit stroke-opacity stroke-width text-anchor text-decoration text-rendering underline-position underline-thickness unicode-bidi unicode-range units-per-em v-alphabetic v-hanging v-ideographic v-mathematical vector-effect vert-adv-y vert-origin-x vert-origin-y word-spacing writing-mode xmlns:xlink x-height".split(" ").forEach((function(n){var a=n.replace(vn,yn);bn[a]=new mn(a,1,!1,n,null,!1)})),"xlink:actuate xlink:arcrole xlink:role xlink:show xlink:title xlink:type".split(" ").forEach((function(n){var a=n.replace(vn,yn);bn[a]=new mn(a,1,!1,n,"http://www.w3.org/1999/xlink",!1)})),["xml:base","xml:lang","xml:space"].forEach((function(n){var a=n.replace(vn,yn);bn[a]=new mn(a,1,!1,n,"http://www.w3.org/XML/1998/namespace",!1)})),["tabIndex","crossOrigin"].forEach((function(n){bn[n]=new mn(n,1,!1,n.toLowerCase(),null,!1)})),bn.xlinkHref=new mn("xlinkHref",1,!1,"xlink:href","http://www.w3.org/1999/xlink",!0),["src","href","action","formAction"].forEach((function(n){bn[n]=new mn(n,1,!1,n.toLowerCase(),null,!0)}));var Nn={html:"http://www.w3.org/1999/xhtml",mathml:"http://www.w3.org/1998/Math/MathML",svg:"http://www.w3.org/2000/svg"};function Vn(n){switch(n){case"svg":return"http://www.w3.org/2000/svg";case"math":return"http://www.w3.org/1998/Math/MathML";default:return"http://www.w3.org/1999/xhtml"}}function Dn(n,a){return null==n||"http://www.w3.org/1999/xhtml"===n?Vn(a):"http://www.w3.org/2000/svg"===n&&"foreignObject"===a?"http://www.w3.org/1999/xhtml":n}var Wn,jn=function(n){return"undefined"!=typeof MSApp&&MSApp.execUnsafeLocalFunction?function(a,s,t,e){MSApp.execUnsafeLocalFunction((function(){return n(a,s)}))}:n}((function(n,a){if(n.namespaceURI!==Nn.svg||"innerHTML"in n)n.innerHTML=a;else{for((Wn=Wn||document.createElement("div")).innerHTML="<svg>"+a.valueOf().toString()+"</svg>",a=Wn.firstChild;n.firstChild;)n.removeChild(n.firstChild);for(;a.firstChild;)n.appendChild(a.firstChild)}}));function Un(n,a){if(a){var s=n.firstChild;if(s&&s===n.lastChild&&3===s.nodeType)return void(s.nodeValue=a)}n.textContent=a}function _n(n,a){var s={};return s[n.toLowerCase()]=a.toLowerCase(),s["Webkit"+n]="webkit"+a,s["Moz"+n]="moz"+a,s}var Jn={animationend:_n("Animation","AnimationEnd"),animationiteration:_n("Animation","AnimationIteration"),animationstart:_n("Animation","AnimationStart"),transitionend:_n("Transition","TransitionEnd")},Fn={},Gn={};function Qn(n){if(Fn[n])return Fn[n];if(!Jn[n])return n;var a,s=Jn[n];for(a in s)if(s.hasOwnProperty(a)&&a in Gn)return Fn[n]=s[a];return n}$&&(Gn=document.createElement("div").style,"AnimationEvent"in window||(delete Jn.animationend.animation,delete Jn.animationiteration.animation,delete Jn.animationstart.animation),"TransitionEvent"in window||delete Jn.transitionend.transition);var Yn=Qn("animationend"),Xn=Qn("animationiteration"),Zn=Qn("animationstart"),$n=Qn("transitionend"),na="abort canplay canplaythrough durationchange emptied encrypted ended error loadeddata loadedmetadata loadstart pause play playing progress ratechange seeked seeking stalled suspend timeupdate volumechange waiting".split(" "),aa=!1,sa=[],ta=null,ea=null,oa=null,pa=new Map,ca=new Map,ia="mousedown mouseup touchcancel touchend touchstart auxclick dblclick pointercancel pointerdown pointerup dragend dragstart drop compositionend compositionstart keydown keypress keyup input textInput close cancel copy cut paste click change contextmenu reset submit".split(" "),la="focus blur dragenter dragleave mouseover mouseout pointerover pointerout gotpointercapture lostpointercapture".split(" ");function ua(n,a,s,t){return{blockedOn:n,topLevelType:a,eventSystemFlags:32|s,nativeEvent:t}}function ra(n,a){switch(n){case"focus":case"blur":ta=null;break;case"dragenter":case"dragleave":ea=null;break;case"mouseover":case"mouseout":oa=null;break;case"pointerover":case"pointerout":pa.delete(a.pointerId);break;case"gotpointercapture":case"lostpointercapture":ca.delete(a.pointerId)}}function da(n,a,s,t,e){return null===n||n.nativeEvent!==e?ua(a,s,t,e):(n.eventSystemFlags|=t,n)}function ha(n){if(null!==n.blockedOn)return!1;var a=As(n.topLevelType,n.eventSystemFlags,n.nativeEvent);return null===a||(n.blockedOn=a,!1)}function ka(n,a,s){ha(n)&&s.delete(a)}function ga(){for(aa=!1;0<sa.length;){var n=sa[0];if(null!==n.blockedOn)break;var a=As(n.topLevelType,n.eventSystemFlags,n.nativeEvent);null!==a?n.blockedOn=a:sa.shift()}null!==ta&&ha(ta)&&(ta=null),null!==ea&&ha(ea)&&(ea=null),null!==oa&&ha(oa)&&(oa=null),pa.forEach(ka),ca.forEach(ka)}function fa(n,a){n.blockedOn===a&&(n.blockedOn=null,aa||(aa=!0,o.unstable_scheduleCallback(o.unstable_NormalPriority,ga)))}function wa(n){function a(a){return fa(a,n)}if(0<sa.length){fa(sa[0],n);for(var s=1;s<sa.length;s++){var t=sa[s];t.blockedOn===n&&(t.blockedOn=null)}}null!==ta&&fa(ta,n),null!==ea&&fa(ea,n),null!==oa&&fa(oa,n),pa.forEach(a),ca.forEach(a)}var ma=0,ba=2,va=1024;function ya(n){var a=n,s=n;if(n.alternate)for(;a.return;)a=a.return;else{n=a;do{((a=n).effectTag&(ba|va))!==ma&&(s=a.return),n=a.return}while(n)}return 3===a.tag?s:null}function Sa(n){if(ya(n)!==n)throw p(Error(188))}function xa(n){if(!(n=function(n){var a=n.alternate;if(!a){if(null===(a=ya(n)))throw p(Error(188));return a!==n?null:n}for(var s=n,t=a;;){var e=s.return;if(null===e)break;var o=e.alternate;if(null===o){if(null!==(t=e.return)){s=t;continue}break}if(e.child===o.child){for(o=e.child;o;){if(o===s)return Sa(e),n;if(o===t)return Sa(e),a;o=o.sibling}throw p(Error(188))}if(s.return!==t.return)s=e,t=o;else{for(var c=!1,i=e.child;i;){if(i===s){c=!0,s=e,t=o;break}if(i===t){c=!0,t=e,s=o;break}i=i.sibling}if(!c){for(i=o.child;i;){if(i===s){c=!0,s=o,t=e;break}if(i===t){c=!0,t=o,s=e;break}i=i.sibling}if(!c)throw p(Error(189))}}if(s.alternate!==t)throw p(Error(190))}if(3!==s.tag)throw p(Error(188));return s.stateNode.current===s?n:a}(n)))return null;for(var a=n;;){if(5===a.tag||6===a.tag)return a;if(a.child)a.child.return=a,a=a.child;else{if(a===n)break;for(;!a.sibling;){if(!a.return||a.return===n)return null;a=a.return}a.sibling.return=a.return,a=a.sibling}}return null}function Ta(n){return(n=n.target||n.srcElement||window).correspondingUseElement&&(n=n.correspondingUseElement),3===n.nodeType?n.parentNode:n}function Ca(n){do{n=n.return}while(n&&5!==n.tag);return n||null}function Aa(n,a,s){(a=z(n,s.dispatchConfig.phasedRegistrationNames[a]))&&(s._dispatchListeners=A(s._dispatchListeners,a),s._dispatchInstances=A(s._dispatchInstances,n))}function Ia(n){if(n&&n.dispatchConfig.phasedRegistrationNames){for(var a=n._targetInst,s=[];a;)s.push(a),a=Ca(a);for(a=s.length;0<a--;)Aa(s[a],"captured",n);for(a=0;a<s.length;a++)Aa(s[a],"bubbled",n)}}function Ma(n,a,s){n&&s&&s.dispatchConfig.registrationName&&(a=z(n,s.dispatchConfig.registrationName))&&(s._dispatchListeners=A(s._dispatchListeners,a),s._dispatchInstances=A(s._dispatchInstances,n))}function Ha(n){n&&n.dispatchConfig.registrationName&&Ma(n._targetInst,null,n)}function Ea(n){I(n,Ia)}function Pa(){return!0}function za(){return!1}function Ba(n,a,s,t){for(var e in this.dispatchConfig=n,this._targetInst=a,this.nativeEvent=s,n=this.constructor.Interface)n.hasOwnProperty(e)&&((a=n[e])?this[e]=a(s):"target"===e?this.target=t:this[e]=s[e]);return this.isDefaultPrevented=(null!=s.defaultPrevented?s.defaultPrevented:!1===s.returnValue)?Pa:za,this.isPropagationStopped=za,this}function Ka(n,a,s,t){if(this.eventPool.length){var e=this.eventPool.pop();return this.call(e,n,a,s,t),e}return new this(n,a,s,t)}function qa(n){if(!(n instanceof this))throw p(Error(279));n.destructor(),10>this.eventPool.length&&this.eventPool.push(n)}function Oa(n){n.eventPool=[],n.getPooled=Ka,n.release=qa}e(Ba.prototype,{preventDefault:function(){this.defaultPrevented=!0;var n=this.nativeEvent;n&&(n.preventDefault?n.preventDefault():"unknown"!=typeof n.returnValue&&(n.returnValue=!1),this.isDefaultPrevented=Pa)},stopPropagation:function(){var n=this.nativeEvent;n&&(n.stopPropagation?n.stopPropagation():"unknown"!=typeof n.cancelBubble&&(n.cancelBubble=!0),this.isPropagationStopped=Pa)},persist:function(){this.isPersistent=Pa},isPersistent:za,destructor:function(){var n,a=this.constructor.Interface;for(n in a)this[n]=null;this.nativeEvent=this._targetInst=this.dispatchConfig=null,this.isPropagationStopped=this.isDefaultPrevented=za,this._dispatchInstances=this._dispatchListeners=null}}),Ba.Interface={type:null,target:null,currentTarget:function(){return null},eventPhase:null,bubbles:null,cancelable:null,timeStamp:function(n){return n.timeStamp||Date.now()},defaultPrevented:null,isTrusted:null},Ba.extend=function(n){function a(){}function s(){return t.apply(this,arguments)}var t=this;a.prototype=t.prototype;var o=new a;return e(o,s.prototype),s.prototype=o,s.prototype.constructor=s,s.Interface=e({},t.Interface,n),s.extend=t.extend,Oa(s),s},Oa(Ba);var Ra=Ba.extend({animationName:null,elapsedTime:null,pseudoElement:null}),La=Ba.extend({clipboardData:function(n){return"clipboardData"in n?n.clipboardData:window.clipboardData}}),Na=Ba.extend({view:null,detail:null}),Va=Na.extend({relatedTarget:null});function Da(n){var a=n.keyCode;return"charCode"in n?0===(n=n.charCode)&&13===a&&(n=13):n=a,10===n&&(n=13),32<=n||13===n?n:0}var Wa={Esc:"Escape",Spacebar:" ",Left:"ArrowLeft",Up:"ArrowUp",Right:"ArrowRight",Down:"ArrowDown",Del:"Delete",Win:"OS",Menu:"ContextMenu",Apps:"ContextMenu",Scroll:"ScrollLock",MozPrintableKey:"Unidentified"},ja={8:"Backspace",9:"Tab",12:"Clear",13:"Enter",16:"Shift",17:"Control",18:"Alt",19:"Pause",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",45:"Insert",46:"Delete",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"NumLock",145:"ScrollLock",224:"Meta"},Ua={Alt:"altKey",Control:"ctrlKey",Meta:"metaKey",Shift:"shiftKey"};function _a(n){var a=this.nativeEvent;return a.getModifierState?a.getModifierState(n):!!(n=Ua[n])&&!!a[n]}function Ja(){return _a}for(var Fa=Na.extend({key:function(n){if(n.key){var a=Wa[n.key]||n.key;if("Unidentified"!==a)return a}return"keypress"===n.type?13===(n=Da(n))?"Enter":String.fromCharCode(n):"keydown"===n.type||"keyup"===n.type?ja[n.keyCode]||"Unidentified":""},location:null,ctrlKey:null,shiftKey:null,altKey:null,metaKey:null,repeat:null,locale:null,getModifierState:Ja,charCode:function(n){return"keypress"===n.type?Da(n):0},keyCode:function(n){return"keydown"===n.type||"keyup"===n.type?n.keyCode:0},which:function(n){return"keypress"===n.type?Da(n):"keydown"===n.type||"keyup"===n.type?n.keyCode:0}}),Ga=0,Qa=0,Ya=!1,Xa=!1,Za=Na.extend({screenX:null,screenY:null,clientX:null,clientY:null,pageX:null,pageY:null,ctrlKey:null,shiftKey:null,altKey:null,metaKey:null,getModifierState:Ja,button:null,buttons:null,relatedTarget:function(n){return n.relatedTarget||(n.fromElement===n.srcElement?n.toElement:n.fromElement)},movementX:function(n){if("movementX"in n)return n.movementX;var a=Ga;return Ga=n.screenX,Ya?"mousemove"===n.type?n.screenX-a:0:(Ya=!0,0)},movementY:function(n){if("movementY"in n)return n.movementY;var a=Qa;return Qa=n.screenY,Xa?"mousemove"===n.type?n.screenY-a:0:(Xa=!0,0)}}),$a=Za.extend({pointerId:null,width:null,height:null,pressure:null,tangentialPressure:null,tiltX:null,tiltY:null,twist:null,pointerType:null,isPrimary:null}),ns=Za.extend({dataTransfer:null}),as=Na.extend({touches:null,targetTouches:null,changedTouches:null,altKey:null,metaKey:null,ctrlKey:null,shiftKey:null,getModifierState:Ja}),ss=Ba.extend({propertyName:null,elapsedTime:null,pseudoElement:null}),ts=Za.extend({deltaX:function(n){return"deltaX"in n?n.deltaX:"wheelDeltaX"in n?-n.wheelDeltaX:0},deltaY:function(n){return"deltaY"in n?n.deltaY:"wheelDeltaY"in n?-n.wheelDeltaY:"wheelDelta"in n?-n.wheelDelta:0},deltaZ:null,deltaMode:null}),es=[["blur","blur",0],["cancel","cancel",0],["click","click",0],["close","close",0],["contextmenu","contextMenu",0],["copy","copy",0],["cut","cut",0],["auxclick","auxClick",0],["dblclick","doubleClick",0],["dragend","dragEnd",0],["dragstart","dragStart",0],["drop","drop",0],["focus","focus",0],["input","input",0],["invalid","invalid",0],["keydown","keyDown",0],["keypress","keyPress",0],["keyup","keyUp",0],["mousedown","mouseDown",0],["mouseup","mouseUp",0],["paste","paste",0],["pause","pause",0],["play","play",0],["pointercancel","pointerCancel",0],["pointerdown","pointerDown",0],["pointerup","pointerUp",0],["ratechange","rateChange",0],["reset","reset",0],["seeked","seeked",0],["submit","submit",0],["touchcancel","touchCancel",0],["touchend","touchEnd",0],["touchstart","touchStart",0],["volumechange","volumeChange",0],["drag","drag",1],["dragenter","dragEnter",1],["dragexit","dragExit",1],["dragleave","dragLeave",1],["dragover","dragOver",1],["mousemove","mouseMove",1],["mouseout","mouseOut",1],["mouseover","mouseOver",1],["pointermove","pointerMove",1],["pointerout","pointerOut",1],["pointerover","pointerOver",1],["scroll","scroll",1],["toggle","toggle",1],["touchmove","touchMove",1],["wheel","wheel",1],["abort","abort",2],[Yn,"animationEnd",2],[Xn,"animationIteration",2],[Zn,"animationStart",2],["canplay","canPlay",2],["canplaythrough","canPlayThrough",2],["durationchange","durationChange",2],["emptied","emptied",2],["encrypted","encrypted",2],["ended","ended",2],["error","error",2],["gotpointercapture","gotPointerCapture",2],["load","load",2],["loadeddata","loadedData",2],["loadedmetadata","loadedMetadata",2],["loadstart","loadStart",2],["lostpointercapture","lostPointerCapture",2],["playing","playing",2],["progress","progress",2],["seeking","seeking",2],["stalled","stalled",2],["suspend","suspend",2],["timeupdate","timeUpdate",2],[$n,"transitionEnd",2],["waiting","waiting",2]],os={},ps={},cs=0;cs<es.length;cs++){var is=es[cs],ls=is[0],us=is[1],rs=is[2],ds="on"+(us[0].toUpperCase()+us.slice(1)),hs={phasedRegistrationNames:{bubbled:ds,captured:ds+"Capture"},dependencies:[ls],eventPriority:rs};os[us]=hs,ps[ls]=hs}var ks={eventTypes:os,getEventPriority:function(n){return void 0!==(n=ps[n])?n.eventPriority:2},extractEvents:function(n,a,s,t){var e=ps[n];if(!e)return null;switch(n){case"keypress":if(0===Da(s))return null;case"keydown":case"keyup":n=Fa;break;case"blur":case"focus":n=Va;break;case"click":if(2===s.button)return null;case"auxclick":case"dblclick":case"mousedown":case"mousemove":case"mouseup":case"mouseout":case"mouseover":case"contextmenu":n=Za;break;case"drag":case"dragend":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"dragstart":case"drop":n=ns;break;case"touchcancel":case"touchend":case"touchmove":case"touchstart":n=as;break;case Yn:case Xn:case Zn:n=Ra;break;case $n:n=ss;break;case"scroll":n=Na;break;case"wheel":n=ts;break;case"copy":case"cut":case"paste":n=La;break;case"gotpointercapture":case"lostpointercapture":case"pointercancel":case"pointerdown":case"pointermove":case"pointerout":case"pointerover":case"pointerup":n=$a;break;default:n=Ba}return Ea(a=n.getPooled(e,a,s,t)),a}},gs=ks.getEventPriority,fs=10,ws=[];function ms(n){var a=n.targetInst,s=a;do{if(!s){n.ancestors.push(s);break}var t=s;if(3===t.tag)t=t.stateNode.containerInfo;else{for(;t.return;)t=t.return;t=3!==t.tag?null:t.stateNode.containerInfo}if(!t)break;5!==(a=s.tag)&&6!==a||n.ancestors.push(s),s=ct(t)}while(s);for(s=0;s<n.ancestors.length;s++){a=n.ancestors[s];var e=Ta(n.nativeEvent);t=n.topLevelType;for(var o=n.nativeEvent,p=n.eventSystemFlags,c=null,i=0;i<r.length;i++){var l=r[i];l&&(l=l.extractEvents(t,a,o,e,p))&&(c=A(c,l))}E(c)}}var bs=!0;function vs(n,a){ys(a,n,!1)}function ys(n,a,s){switch(gs(a)){case 0:var t=Ss.bind(null,a,1);break;case 1:t=xs.bind(null,a,1);break;default:t=Cs.bind(null,a,1)}s?n.addEventListener(a,t,!0):n.addEventListener(a,t,!1)}function Ss(n,a,s){rn||ln();var t=Cs,e=rn;rn=!0;try{cn(t,n,a,s)}finally{(rn=e)||hn()}}function xs(n,a,s){Cs(n,a,s)}function Ts(n,a,s,t){if(ws.length){var e=ws.pop();e.topLevelType=n,e.eventSystemFlags=a,e.nativeEvent=s,e.targetInst=t,n=e}else n={topLevelType:n,eventSystemFlags:a,nativeEvent:s,targetInst:t,ancestors:[]};try{if(a=ms,s=n,dn)a(s,void 0);else{dn=!0;try{un(a,s,void 0)}finally{dn=!1,hn()}}}finally{n.topLevelType=null,n.nativeEvent=null,n.targetInst=null,n.ancestors.length=0,ws.length<fs&&ws.push(n)}}function Cs(n,a,s){if(bs)if(0<sa.length&&-1<ia.indexOf(n))n=ua(null,n,a,s),sa.push(n);else{var t=As(n,a,s);null===t?ra(n,s):-1<ia.indexOf(n)?(n=ua(t,n,a,s),sa.push(n)):function(n,a,s,t){switch(a){case"focus":return ta=da(ta,n,a,s,t),!0;case"dragenter":return ea=da(ea,n,a,s,t),!0;case"mouseover":return oa=da(oa,n,a,s,t),!0;case"pointerover":var e=t.pointerId;return pa.set(e,da(pa.get(e)||null,n,a,s,t)),!0;case"gotpointercapture":return e=t.pointerId,ca.set(e,da(ca.get(e)||null,n,a,s,t)),!0}return!1}(t,n,a,s)||(ra(n,s),Ts(n,a,s,null))}}function As(n,a,s){var t=Ta(s),e=ct(t);if(null!==e)if(null===(t=ya(e)))e=null;else{var o=t.tag;if(13===o){if(null!==(t=13!==t.tag||(null===(e=t.memoizedState)&&(null!==(t=t.alternate)&&(e=t.memoizedState)),null===e)?null:e.dehydrated))return t;e=null}else if(3===o){if(t.stateNode.hydrate)return 3===t.tag?t.stateNode.containerInfo:null;e=null}else t!==e&&(e=null)}return Ts(n,a,s,e),null}function Is(n){if(!$)return!1;var a=(n="on"+n)in document;return a||((a=document.createElement("div")).setAttribute(n,"return;"),a="function"==typeof a[n]),a}var Ms=new("function"==typeof WeakMap?WeakMap:Map);function Hs(n){var a=Ms.get(n);return void 0===a&&(a=new Set,Ms.set(n,a)),a}function Es(n,a,s){if(!s.has(n)){switch(n){case"scroll":ys(a,"scroll",!0);break;case"focus":case"blur":ys(a,"focus",!0),ys(a,"blur",!0),s.add("blur"),s.add("focus");break;case"cancel":case"close":Is(n)&&ys(a,n,!0);break;case"invalid":case"submit":case"reset":break;default:-1===na.indexOf(n)&&vs(n,a)}s.add(n)}}var Ps={animationIterationCount:!0,borderImageOutset:!0,borderImageSlice:!0,borderImageWidth:!0,boxFlex:!0,boxFlexGroup:!0,boxOrdinalGroup:!0,columnCount:!0,columns:!0,flex:!0,flexGrow:!0,flexPositive:!0,flexShrink:!0,flexNegative:!0,flexOrder:!0,gridArea:!0,gridRow:!0,gridRowEnd:!0,gridRowSpan:!0,gridRowStart:!0,gridColumn:!0,gridColumnEnd:!0,gridColumnSpan:!0,gridColumnStart:!0,fontWeight:!0,lineClamp:!0,lineHeight:!0,opacity:!0,order:!0,orphans:!0,tabSize:!0,widows:!0,zIndex:!0,zoom:!0,fillOpacity:!0,floodOpacity:!0,stopOpacity:!0,strokeDasharray:!0,strokeDashoffset:!0,strokeMiterlimit:!0,strokeOpacity:!0,strokeWidth:!0},zs=["Webkit","ms","Moz","O"];function Bs(n,a,s){return null==a||"boolean"==typeof a||""===a?"":s||"number"!=typeof a||0===a||Ps.hasOwnProperty(n)&&Ps[n]?(""+a).trim():a+"px"}function Ks(n,a){for(var s in n=n.style,a)if(a.hasOwnProperty(s)){var t=0===s.indexOf("--"),e=Bs(s,a[s],t);"float"===s&&(s="cssFloat"),t?n.setProperty(s,e):n[s]=e}}Object.keys(Ps).forEach((function(n){zs.forEach((function(a){a=a+n.charAt(0).toUpperCase()+n.substring(1),Ps[a]=Ps[n]}))}));var qs=e({menuitem:!0},{area:!0,base:!0,br:!0,col:!0,embed:!0,hr:!0,img:!0,input:!0,keygen:!0,link:!0,meta:!0,param:!0,source:!0,track:!0,wbr:!0});function Os(n,a){if(a){if(qs[n]&&(null!=a.children||null!=a.dangerouslySetInnerHTML))throw p(Error(137),n,"");if(null!=a.dangerouslySetInnerHTML){if(null!=a.children)throw p(Error(60));if(!("object"==typeof a.dangerouslySetInnerHTML&&"__html"in a.dangerouslySetInnerHTML))throw p(Error(61))}if(null!=a.style&&"object"!=typeof a.style)throw p(Error(62),"")}}function Rs(n,a){if(-1===n.indexOf("-"))return"string"==typeof a.is;switch(n){case"annotation-xml":case"color-profile":case"font-face":case"font-face-src":case"font-face-uri":case"font-face-format":case"font-face-name":case"missing-glyph":return!1;default:return!0}}function Ls(n,a){var s=Hs(n=9===n.nodeType||11===n.nodeType?n:n.ownerDocument);a=k[a];for(var t=0;t<a.length;t++)Es(a[t],n,s)}function Ns(){}function Vs(n){if(void 0===(n=n||("undefined"!=typeof document?document:void 0)))return null;try{return n.activeElement||n.body}catch(ol){return n.body}}function Ds(n){for(;n&&n.firstChild;)n=n.firstChild;return n}function Ws(n,a){var s,t=Ds(n);for(n=0;t;){if(3===t.nodeType){if(s=n+t.textContent.length,n<=a&&s>=a)return{node:t,offset:a-n};n=s}n:{for(;t;){if(t.nextSibling){t=t.nextSibling;break n}t=t.parentNode}t=void 0}t=Ds(t)}}function js(){for(var n=window,a=Vs();a instanceof n.HTMLIFrameElement;){try{var s="string"==typeof a.contentWindow.location.href}catch(t){s=!1}if(!s)break;a=Vs((n=a.contentWindow).document)}return a}function Us(n){var a=n&&n.nodeName&&n.nodeName.toLowerCase();return a&&("input"===a&&("text"===n.type||"search"===n.type||"tel"===n.type||"url"===n.type||"password"===n.type)||"textarea"===a||"true"===n.contentEditable)}var _s="$",Js="/$",Fs="$?",Gs="$!",Qs=null,Ys=null;function Xs(n,a){switch(n){case"button":case"input":case"select":case"textarea":return!!a.autoFocus}return!1}function Zs(n,a){return"textarea"===n||"option"===n||"noscript"===n||"string"==typeof a.children||"number"==typeof a.children||"object"==typeof a.dangerouslySetInnerHTML&&null!==a.dangerouslySetInnerHTML&&null!=a.dangerouslySetInnerHTML.__html}var $s="function"==typeof setTimeout?setTimeout:void 0,nt="function"==typeof clearTimeout?clearTimeout:void 0;function at(n){for(;null!=n;n=n.nextSibling){var a=n.nodeType;if(1===a||3===a)break}return n}function st(n){n=n.previousSibling;for(var a=0;n;){if(8===n.nodeType){var s=n.data;if(s===_s||s===Gs||s===Fs){if(0===a)return n;a--}else s===Js&&a++}n=n.previousSibling}return null}var tt=Math.random().toString(36).slice(2),et="__reactInternalInstance$"+tt,ot="__reactEventHandlers$"+tt,pt="__reactContainere$"+tt;function ct(n){var a=n[et];if(a)return a;for(var s=n.parentNode;s;){if(a=s[pt]||s[et]){if(s=a.alternate,null!==a.child||null!==s&&null!==s.child)for(n=st(n);null!==n;){if(s=n[et])return s;n=st(n)}return a}s=(n=s).parentNode}return null}function it(n){return!(n=n[et]||n[pt])||5!==n.tag&&6!==n.tag&&13!==n.tag&&3!==n.tag?null:n}function lt(n){if(5===n.tag||6===n.tag)return n.stateNode;throw p(Error(33))}function ut(n){return n[ot]||null}var rt=null,dt=null,ht=null;function kt(){if(ht)return ht;var n,a,s=dt,t=s.length,e="value"in rt?rt.value:rt.textContent,o=e.length;for(n=0;n<t&&s[n]===e[n];n++);var p=t-n;for(a=1;a<=p&&s[t-a]===e[o-a];a++);return ht=e.slice(n,1<a?1-a:void 0)}var gt=Ba.extend({data:null}),ft=Ba.extend({data:null}),wt=[9,13,27,32],mt=$&&"CompositionEvent"in window,bt=null;$&&"documentMode"in document&&(bt=document.documentMode);var vt=$&&"TextEvent"in window&&!bt,yt=$&&(!mt||bt&&8<bt&&11>=bt),St=String.fromCharCode(32),xt={beforeInput:{phasedRegistrationNames:{bubbled:"onBeforeInput",captured:"onBeforeInputCapture"},dependencies:["compositionend","keypress","textInput","paste"]},compositionEnd:{phasedRegistrationNames:{bubbled:"onCompositionEnd",captured:"onCompositionEndCapture"},dependencies:"blur compositionend keydown keypress keyup mousedown".split(" ")},compositionStart:{phasedRegistrationNames:{bubbled:"onCompositionStart",captured:"onCompositionStartCapture"},dependencies:"blur compositionstart keydown keypress keyup mousedown".split(" ")},compositionUpdate:{phasedRegistrationNames:{bubbled:"onCompositionUpdate",captured:"onCompositionUpdateCapture"},dependencies:"blur compositionupdate keydown keypress keyup mousedown".split(" ")}},Tt=!1;function Ct(n,a){switch(n){case"keyup":return-1!==wt.indexOf(a.keyCode);case"keydown":return 229!==a.keyCode;case"keypress":case"mousedown":case"blur":return!0;default:return!1}}function At(n){return"object"==typeof(n=n.detail)&&"data"in n?n.data:null}var It=!1;var Mt={eventTypes:xt,extractEvents:function(n,a,s,t){var e;if(mt)n:{switch(n){case"compositionstart":var o=xt.compositionStart;break n;case"compositionend":o=xt.compositionEnd;break n;case"compositionupdate":o=xt.compositionUpdate;break n}o=void 0}else It?Ct(n,s)&&(o=xt.compositionEnd):"keydown"===n&&229===s.keyCode&&(o=xt.compositionStart);return o?(yt&&"ko"!==s.locale&&(It||o!==xt.compositionStart?o===xt.compositionEnd&&It&&(e=kt()):(dt="value"in(rt=t)?rt.value:rt.textContent,It=!0)),o=gt.getPooled(o,a,s,t),e?o.data=e:null!==(e=At(s))&&(o.data=e),Ea(o),e=o):e=null,(n=vt?function(n,a){switch(n){case"compositionend":return At(a);case"keypress":return 32!==a.which?null:(Tt=!0,St);case"textInput":return(n=a.data)===St&&Tt?null:n;default:return null}}(n,s):function(n,a){if(It)return"compositionend"===n||!mt&&Ct(n,a)?(n=kt(),ht=dt=rt=null,It=!1,n):null;switch(n){case"paste":return null;case"keypress":if(!(a.ctrlKey||a.altKey||a.metaKey)||a.ctrlKey&&a.altKey){if(a.char&&1<a.char.length)return a.char;if(a.which)return String.fromCharCode(a.which)}return null;case"compositionend":return yt&&"ko"!==a.locale?null:a.data;default:return null}}(n,s))?((a=ft.getPooled(xt.beforeInput,a,s,t)).data=n,Ea(a)):a=null,null===e?a:null===a?e:[e,a]}},Ht={color:!0,date:!0,datetime:!0,"datetime-local":!0,email:!0,month:!0,number:!0,password:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0};function Et(n){var a=n&&n.nodeName&&n.nodeName.toLowerCase();return"input"===a?!!Ht[n.type]:"textarea"===a}var Pt={change:{phasedRegistrationNames:{bubbled:"onChange",captured:"onChangeCapture"},dependencies:"blur change click focus input keydown keyup selectionchange".split(" ")}};function zt(n,a,s){return(n=Ba.getPooled(Pt.change,n,a,s)).type="change",en(s),Ea(n),n}var Bt=null,Kt=null;function qt(n){E(n)}function Ot(n){if(An(lt(n)))return n}function Rt(n,a){if("change"===n)return a}var Lt=!1;function Nt(){Bt&&(Bt.detachEvent("onpropertychange",Vt),Kt=Bt=null)}function Vt(n){if("value"===n.propertyName&&Ot(Kt))if(n=zt(Kt,n,Ta(n)),rn)E(n);else{rn=!0;try{pn(qt,n)}finally{rn=!1,hn()}}}function Dt(n,a,s){"focus"===n?(Nt(),Kt=s,(Bt=a).attachEvent("onpropertychange",Vt)):"blur"===n&&Nt()}function Wt(n){if("selectionchange"===n||"keyup"===n||"keydown"===n)return Ot(Kt)}function jt(n,a){if("click"===n)return Ot(a)}function Ut(n,a){if("input"===n||"change"===n)return Ot(a)}$&&(Lt=Is("input")&&(!document.documentMode||9<document.documentMode));var _t={eventTypes:Pt,_isInputEventSupported:Lt,extractEvents:function(n,a,s,t){var e=a?lt(a):window,o=e.nodeName&&e.nodeName.toLowerCase();if("select"===o||"input"===o&&"file"===e.type)var p=Rt;else if(Et(e))if(Lt)p=Ut;else{p=Wt;var c=Dt}else(o=e.nodeName)&&"input"===o.toLowerCase()&&("checkbox"===e.type||"radio"===e.type)&&(p=jt);if(p&&(p=p(n,a)))return zt(p,s,t);c&&c(n,e,a),"blur"===n&&(n=e._wrapperState)&&n.controlled&&"number"===e.type&&zn(e,"number",e.value)}},Jt={mouseEnter:{registrationName:"onMouseEnter",dependencies:["mouseout","mouseover"]},mouseLeave:{registrationName:"onMouseLeave",dependencies:["mouseout","mouseover"]},pointerEnter:{registrationName:"onPointerEnter",dependencies:["pointerout","pointerover"]},pointerLeave:{registrationName:"onPointerLeave",dependencies:["pointerout","pointerover"]}},Ft={eventTypes:Jt,extractEvents:function(n,a,s,t,e){var o="mouseover"===n||"pointerover"===n,p="mouseout"===n||"pointerout"===n;if(o&&0==(32&e)&&(s.relatedTarget||s.fromElement)||!p&&!o)return null;if(e=t.window===t?t:(e=t.ownerDocument)?e.defaultView||e.parentWindow:window,p?(p=a,null!==(a=(a=s.relatedTarget||s.toElement)?ct(a):null)&&(a!==(o=ya(a))||5!==a.tag&&6!==a.tag)&&(a=null)):p=null,p===a)return null;if("mouseout"===n||"mouseover"===n)var c=Za,i=Jt.mouseLeave,l=Jt.mouseEnter,u="mouse";else"pointerout"!==n&&"pointerover"!==n||(c=$a,i=Jt.pointerLeave,l=Jt.pointerEnter,u="pointer");if(n=null==p?e:lt(p),e=null==a?e:lt(a),(i=c.getPooled(i,p,s,t)).type=u+"leave",i.target=n,i.relatedTarget=e,(s=c.getPooled(l,a,s,t)).type=u+"enter",s.target=e,s.relatedTarget=n,u=a,(t=p)&&u)n:{for(l=u,n=0,p=c=t;p;p=Ca(p))n++;for(p=0,a=l;a;a=Ca(a))p++;for(;0<n-p;)c=Ca(c),n--;for(;0<p-n;)l=Ca(l),p--;for(;n--;){if(c===l||c===l.alternate)break n;c=Ca(c),l=Ca(l)}c=null}else c=null;for(l=c,c=[];t&&t!==l&&(null===(n=t.alternate)||n!==l);)c.push(t),t=Ca(t);for(t=[];u&&u!==l&&(null===(n=u.alternate)||n!==l);)t.push(u),u=Ca(u);for(u=0;u<c.length;u++)Ma(c[u],"bubbled",i);for(u=t.length;0<u--;)Ma(t[u],"captured",s);return[i,s]}};var Gt="function"==typeof Object.is?Object.is:function(n,a){return n===a&&(0!==n||1/n==1/a)||n!=n&&a!=a},Qt=Object.prototype.hasOwnProperty;function Yt(n,a){if(Gt(n,a))return!0;if("object"!=typeof n||null===n||"object"!=typeof a||null===a)return!1;var s=Object.keys(n),t=Object.keys(a);if(s.length!==t.length)return!1;for(t=0;t<s.length;t++)if(!Qt.call(a,s[t])||!Gt(n[s[t]],a[s[t]]))return!1;return!0}var Xt=$&&"documentMode"in document&&11>=document.documentMode,Zt={select:{phasedRegistrationNames:{bubbled:"onSelect",captured:"onSelectCapture"},dependencies:"blur contextmenu dragend focus keydown keyup mousedown mouseup selectionchange".split(" ")}},$t=null,ne=null,ae=null,se=!1;function te(n,a){var s=a.window===a?a.document:9===a.nodeType?a:a.ownerDocument;return se||null==$t||$t!==Vs(s)?null:("selectionStart"in(s=$t)&&Us(s)?s={start:s.selectionStart,end:s.selectionEnd}:s={anchorNode:(s=(s.ownerDocument&&s.ownerDocument.defaultView||window).getSelection()).anchorNode,anchorOffset:s.anchorOffset,focusNode:s.focusNode,focusOffset:s.focusOffset},ae&&Yt(ae,s)?null:(ae=s,(n=Ba.getPooled(Zt.select,ne,n,a)).type="select",n.target=$t,Ea(n),n))}var ee={eventTypes:Zt,extractEvents:function(n,a,s,t){var e,o=t.window===t?t.document:9===t.nodeType?t:t.ownerDocument;if(!(e=!o)){n:{o=Hs(o),e=k.onSelect;for(var p=0;p<e.length;p++)if(!o.has(e[p])){o=!1;break n}o=!0}e=!o}if(e)return null;switch(o=a?lt(a):window,n){case"focus":(Et(o)||"true"===o.contentEditable)&&($t=o,ne=a,ae=null);break;case"blur":ae=ne=$t=null;break;case"mousedown":se=!0;break;case"contextmenu":case"mouseup":case"dragend":return se=!1,te(s,t);case"selectionchange":if(Xt)break;case"keydown":case"keyup":return te(s,t)}return null}};P.injectEventPluginOrder("ResponderEventPlugin SimpleEventPlugin EnterLeaveEventPlugin ChangeEventPlugin SelectEventPlugin BeforeInputEventPlugin".split(" ")),S=ut,x=it,T=lt,P.injectEventPluginsByName({SimpleEventPlugin:ks,EnterLeaveEventPlugin:Ft,ChangeEventPlugin:_t,SelectEventPlugin:ee,BeforeInputEventPlugin:Mt}),new Set;var oe=[],pe=-1;function ce(n){0>pe||(n.current=oe[pe],oe[pe]=null,pe--)}function ie(n,a){oe[++pe]=n.current,n.current=a}var le={},ue={current:le},re={current:!1},de=le;function he(n,a){var s=n.type.contextTypes;if(!s)return le;var t=n.stateNode;if(t&&t.__reactInternalMemoizedUnmaskedChildContext===a)return t.__reactInternalMemoizedMaskedChildContext;var e,o={};for(e in s)o[e]=a[e];return t&&((n=n.stateNode).__reactInternalMemoizedUnmaskedChildContext=a,n.__reactInternalMemoizedMaskedChildContext=o),o}function ke(n){return null!=(n=n.childContextTypes)}function ge(n){ce(re),ce(ue)}function fe(n){ce(re),ce(ue)}function we(n,a,s){if(ue.current!==le)throw p(Error(168));ie(ue,a),ie(re,s)}function me(n,a,s){var t=n.stateNode;if(n=a.childContextTypes,"function"!=typeof t.getChildContext)return s;for(var o in t=t.getChildContext())if(!(o in n))throw p(Error(108),X(a)||"Unknown",o);return e({},s,{},t)}function be(n){var a=n.stateNode;return a=a&&a.__reactInternalMemoizedMergedChildContext||le,de=ue.current,ie(ue,a),ie(re,re.current),!0}function ve(n,a,s){var t=n.stateNode;if(!t)throw p(Error(169));s?(a=me(n,a,de),t.__reactInternalMemoizedMergedChildContext=a,ce(re),ce(ue),ie(ue,a)):ce(re),ie(re,s)}var ye=o.unstable_runWithPriority,Se=o.unstable_scheduleCallback,xe=o.unstable_cancelCallback,Te=o.unstable_shouldYield,Ce=o.unstable_requestPaint,Ae=o.unstable_now,Ie=o.unstable_getCurrentPriorityLevel,Me=o.unstable_ImmediatePriority,He=o.unstable_UserBlockingPriority,Ee=o.unstable_NormalPriority,Pe=o.unstable_LowPriority,ze=o.unstable_IdlePriority,Be={},Ke=void 0!==Ce?Ce:function(){},qe=null,Oe=null,Re=!1,Le=Ae(),Ne=1e4>Le?Ae:function(){return Ae()-Le};function Ve(){switch(Ie()){case Me:return 99;case He:return 98;case Ee:return 97;case Pe:return 96;case ze:return 95;default:throw p(Error(332))}}function De(n){switch(n){case 99:return Me;case 98:return He;case 97:return Ee;case 96:return Pe;case 95:return ze;default:throw p(Error(332))}}function We(n,a){return n=De(n),ye(n,a)}function je(n,a,s){return n=De(n),Se(n,a,s)}function Ue(n){return null===qe?(qe=[n],Oe=Se(Me,Je)):qe.push(n),Be}function _e(){if(null!==Oe){var n=Oe;Oe=null,xe(n)}Je()}function Je(){if(!Re&&null!==qe){Re=!0;var n=0;try{var a=qe;We(99,(function(){for(;n<a.length;n++){var s=a[n];do{s=s(!0)}while(null!==s)}})),qe=null}catch(s){throw null!==qe&&(qe=qe.slice(n+1)),Se(Me,_e),s}finally{Re=!1}}}function Fe(n,a){if(n&&n.defaultProps)for(var s in a=e({},a),n=n.defaultProps)void 0===a[s]&&(a[s]=n[s]);return a}var Ge={current:null},Qe=null,Ye=null,Xe=null;function Ze(){Xe=Ye=Qe=null}function $e(n,a){var s=n.type._context;ie(Ge,s._currentValue),s._currentValue=a}function no(n){var a=Ge.current;ce(Ge),n.type._context._currentValue=a}function ao(n,a){for(;null!==n;){var s=n.alternate;if(n.childExpirationTime<a)n.childExpirationTime=a,null!==s&&s.childExpirationTime<a&&(s.childExpirationTime=a);else{if(!(null!==s&&s.childExpirationTime<a))break;s.childExpirationTime=a}n=n.return}}function so(n,a){Qe=n,Xe=Ye=null,null!==(n=n.dependencies)&&null!==n.firstContext&&(n.expirationTime>=a&&(Ep=!0),n.firstContext=null)}function to(n,a){if(Xe!==n&&!1!==a&&0!==a)if("number"==typeof a&&1073741823!==a||(Xe=n,a=1073741823),a={context:n,observedBits:a,next:null},null===Ye){if(null===Qe)throw p(Error(308));Ye=a,Qe.dependencies={expirationTime:0,firstContext:a,responders:null}}else Ye=Ye.next=a;return n._currentValue}var eo=!1;function oo(n){return{baseState:n,firstUpdate:null,lastUpdate:null,firstCapturedUpdate:null,lastCapturedUpdate:null,firstEffect:null,lastEffect:null,firstCapturedEffect:null,lastCapturedEffect:null}}function po(n){return{baseState:n.baseState,firstUpdate:n.firstUpdate,lastUpdate:n.lastUpdate,firstCapturedUpdate:null,lastCapturedUpdate:null,firstEffect:null,lastEffect:null,firstCapturedEffect:null,lastCapturedEffect:null}}function co(n,a){return{expirationTime:n,suspenseConfig:a,tag:0,payload:null,callback:null,next:null,nextEffect:null}}function io(n,a){null===n.lastUpdate?n.firstUpdate=n.lastUpdate=a:(n.lastUpdate.next=a,n.lastUpdate=a)}function lo(n,a){var s=n.alternate;if(null===s){var t=n.updateQueue,e=null;null===t&&(t=n.updateQueue=oo(n.memoizedState))}else t=n.updateQueue,e=s.updateQueue,null===t?null===e?(t=n.updateQueue=oo(n.memoizedState),e=s.updateQueue=oo(s.memoizedState)):t=n.updateQueue=po(e):null===e&&(e=s.updateQueue=po(t));null===e||t===e?io(t,a):null===t.lastUpdate||null===e.lastUpdate?(io(t,a),io(e,a)):(io(t,a),e.lastUpdate=a)}function uo(n,a){var s=n.updateQueue;null===(s=null===s?n.updateQueue=oo(n.memoizedState):ro(n,s)).lastCapturedUpdate?s.firstCapturedUpdate=s.lastCapturedUpdate=a:(s.lastCapturedUpdate.next=a,s.lastCapturedUpdate=a)}function ro(n,a){var s=n.alternate;return null!==s&&a===s.updateQueue&&(a=n.updateQueue=po(a)),a}function ho(n,a,s,t,o,p){switch(s.tag){case 1:return"function"==typeof(n=s.payload)?n.call(p,t,o):n;case 3:n.effectTag=-4097&n.effectTag|64;case 0:if(null==(o="function"==typeof(n=s.payload)?n.call(p,t,o):n))break;return e({},t,o);case 2:eo=!0}return t}function ko(n,a,s,t,e){eo=!1;for(var o=(a=ro(n,a)).baseState,p=null,c=0,i=a.firstUpdate,l=o;null!==i;){var u=i.expirationTime;u<e?(null===p&&(p=i,o=l),c<u&&(c=u)):(fi(u,i.suspenseConfig),l=ho(n,0,i,l,s,t),null!==i.callback&&(n.effectTag|=32,i.nextEffect=null,null===a.lastEffect?a.firstEffect=a.lastEffect=i:(a.lastEffect.nextEffect=i,a.lastEffect=i))),i=i.next}for(u=null,i=a.firstCapturedUpdate;null!==i;){var r=i.expirationTime;r<e?(null===u&&(u=i,null===p&&(o=l)),c<r&&(c=r)):(l=ho(n,0,i,l,s,t),null!==i.callback&&(n.effectTag|=32,i.nextEffect=null,null===a.lastCapturedEffect?a.firstCapturedEffect=a.lastCapturedEffect=i:(a.lastCapturedEffect.nextEffect=i,a.lastCapturedEffect=i))),i=i.next}null===p&&(a.lastUpdate=null),null===u?a.lastCapturedUpdate=null:n.effectTag|=32,null===p&&null===u&&(o=l),a.baseState=o,a.firstUpdate=p,a.firstCapturedUpdate=u,wi(c),n.expirationTime=c,n.memoizedState=l}function go(n,a,s){null!==a.firstCapturedUpdate&&(null!==a.lastUpdate&&(a.lastUpdate.next=a.firstCapturedUpdate,a.lastUpdate=a.lastCapturedUpdate),a.firstCapturedUpdate=a.lastCapturedUpdate=null),fo(a.firstEffect,s),a.firstEffect=a.lastEffect=null,fo(a.firstCapturedEffect,s),a.firstCapturedEffect=a.lastCapturedEffect=null}function fo(n,a){for(;null!==n;){var s=n.callback;if(null!==s){n.callback=null;var t=a;if("function"!=typeof s)throw p(Error(191),s);s.call(t)}n=n.nextEffect}}var wo=B.ReactCurrentBatchConfig,mo=(new t.Component).refs;function bo(n,a,s,t){s=null==(s=s(t,a=n.memoizedState))?a:e({},a,s),n.memoizedState=s,null!==(t=n.updateQueue)&&0===n.expirationTime&&(t.baseState=s)}var vo={isMounted:function(n){return!!(n=n._reactInternalFiber)&&ya(n)===n},enqueueSetState:function(n,a,s){n=n._reactInternalFiber;var t=Zc(),e=wo.suspense;(e=co(t=$c(t,n,e),e)).payload=a,null!=s&&(e.callback=s),lo(n,e),si(n,t)},enqueueReplaceState:function(n,a,s){n=n._reactInternalFiber;var t=Zc(),e=wo.suspense;(e=co(t=$c(t,n,e),e)).tag=1,e.payload=a,null!=s&&(e.callback=s),lo(n,e),si(n,t)},enqueueForceUpdate:function(n,a){n=n._reactInternalFiber;var s=Zc(),t=wo.suspense;(t=co(s=$c(s,n,t),t)).tag=2,null!=a&&(t.callback=a),lo(n,t),si(n,s)}};function yo(n,a,s,t,e,o,p){return"function"==typeof(n=n.stateNode).shouldComponentUpdate?n.shouldComponentUpdate(t,o,p):!a.prototype||!a.prototype.isPureReactComponent||(!Yt(s,t)||!Yt(e,o))}function So(n,a,s){var t=!1,e=le,o=a.contextType;return"object"==typeof o&&null!==o?o=to(o):(e=ke(a)?de:ue.current,o=(t=null!=(t=a.contextTypes))?he(n,e):le),a=new a(s,o),n.memoizedState=null!==a.state&&void 0!==a.state?a.state:null,a.updater=vo,n.stateNode=a,a._reactInternalFiber=n,t&&((n=n.stateNode).__reactInternalMemoizedUnmaskedChildContext=e,n.__reactInternalMemoizedMaskedChildContext=o),a}function xo(n,a,s,t){n=a.state,"function"==typeof a.componentWillReceiveProps&&a.componentWillReceiveProps(s,t),"function"==typeof a.UNSAFE_componentWillReceiveProps&&a.UNSAFE_componentWillReceiveProps(s,t),a.state!==n&&vo.enqueueReplaceState(a,a.state,null)}function To(n,a,s,t){var e=n.stateNode;e.props=s,e.state=n.memoizedState,e.refs=mo;var o=a.contextType;"object"==typeof o&&null!==o?e.context=to(o):(o=ke(a)?de:ue.current,e.context=he(n,o)),null!==(o=n.updateQueue)&&(ko(n,o,s,e,t),e.state=n.memoizedState),"function"==typeof(o=a.getDerivedStateFromProps)&&(bo(n,a,o,s),e.state=n.memoizedState),"function"==typeof a.getDerivedStateFromProps||"function"==typeof e.getSnapshotBeforeUpdate||"function"!=typeof e.UNSAFE_componentWillMount&&"function"!=typeof e.componentWillMount||(a=e.state,"function"==typeof e.componentWillMount&&e.componentWillMount(),"function"==typeof e.UNSAFE_componentWillMount&&e.UNSAFE_componentWillMount(),a!==e.state&&vo.enqueueReplaceState(e,e.state,null),null!==(o=n.updateQueue)&&(ko(n,o,s,e,t),e.state=n.memoizedState)),"function"==typeof e.componentDidMount&&(n.effectTag|=4)}var Co=Array.isArray;function Ao(n,a,s){if(null!==(n=s.ref)&&"function"!=typeof n&&"object"!=typeof n){if(s._owner){if(s=s._owner){if(1!==s.tag)throw p(Error(309));var t=s.stateNode}if(!t)throw p(Error(147),n);var e=""+n;return null!==a&&null!==a.ref&&"function"==typeof a.ref&&a.ref._stringRef===e?a.ref:((a=function(n){var a=t.refs;a===mo&&(a=t.refs={}),null===n?delete a[e]:a[e]=n})._stringRef=e,a)}if("string"!=typeof n)throw p(Error(284));if(!s._owner)throw p(Error(290),n)}return n}function Io(n,a){if("textarea"!==n.type)throw p(Error(31),"[object Object]"===Object.prototype.toString.call(a)?"object with keys {"+Object.keys(a).join(", ")+"}":a,"")}function Mo(n){function a(a,s){if(n){var t=a.lastEffect;null!==t?(t.nextEffect=s,a.lastEffect=s):a.firstEffect=a.lastEffect=s,s.nextEffect=null,s.effectTag=8}}function s(s,t){if(!n)return null;for(;null!==t;)a(s,t),t=t.sibling;return null}function t(n,a){for(n=new Map;null!==a;)null!==a.key?n.set(a.key,a):n.set(a.index,a),a=a.sibling;return n}function e(n,a,s){return(n=Ri(n,a)).index=0,n.sibling=null,n}function o(a,s,t){return a.index=t,n?null!==(t=a.alternate)?(t=t.index)<s?(a.effectTag=ba,s):t:(a.effectTag=ba,s):s}function c(a){return n&&null===a.alternate&&(a.effectTag=ba),a}function i(n,a,s,t){return null===a||6!==a.tag?((a=Vi(s,n.mode,t)).return=n,a):((a=e(a,s)).return=n,a)}function l(n,a,s,t){return null!==a&&a.elementType===s.type?((t=e(a,s.props)).ref=Ao(n,a,s),t.return=n,t):((t=Li(s.type,s.key,s.props,null,n.mode,t)).ref=Ao(n,a,s),t.return=n,t)}function u(n,a,s,t){return null===a||4!==a.tag||a.stateNode.containerInfo!==s.containerInfo||a.stateNode.implementation!==s.implementation?((a=Di(s,n.mode,t)).return=n,a):((a=e(a,s.children||[])).return=n,a)}function r(n,a,s,t,o){return null===a||7!==a.tag?((a=Ni(s,n.mode,t,o)).return=n,a):((a=e(a,s)).return=n,a)}function d(n,a,s){if("string"==typeof a||"number"==typeof a)return(a=Vi(""+a,n.mode,s)).return=n,a;if("object"==typeof a&&null!==a){switch(a.$$typeof){case O:return(s=Li(a.type,a.key,a.props,null,n.mode,s)).ref=Ao(n,null,a),s.return=n,s;case R:return(a=Di(a,n.mode,s)).return=n,a}if(Co(a)||Y(a))return(a=Ni(a,n.mode,s,null)).return=n,a;Io(n,a)}return null}function h(n,a,s,t){var e=null!==a?a.key:null;if("string"==typeof s||"number"==typeof s)return null!==e?null:i(n,a,""+s,t);if("object"==typeof s&&null!==s){switch(s.$$typeof){case O:return s.key===e?s.type===L?r(n,a,s.props.children,t,e):l(n,a,s,t):null;case R:return s.key===e?u(n,a,s,t):null}if(Co(s)||Y(s))return null!==e?null:r(n,a,s,t,null);Io(n,s)}return null}function k(n,a,s,t,e){if("string"==typeof t||"number"==typeof t)return i(a,n=n.get(s)||null,""+t,e);if("object"==typeof t&&null!==t){switch(t.$$typeof){case O:return n=n.get(null===t.key?s:t.key)||null,t.type===L?r(a,n,t.props.children,e,t.key):l(a,n,t,e);case R:return u(a,n=n.get(null===t.key?s:t.key)||null,t,e)}if(Co(t)||Y(t))return r(a,n=n.get(s)||null,t,e,null);Io(a,t)}return null}function g(e,p,c,i){for(var l=null,u=null,r=p,g=p=0,f=null;null!==r&&g<c.length;g++){r.index>g?(f=r,r=null):f=r.sibling;var w=h(e,r,c[g],i);if(null===w){null===r&&(r=f);break}n&&r&&null===w.alternate&&a(e,r),p=o(w,p,g),null===u?l=w:u.sibling=w,u=w,r=f}if(g===c.length)return s(e,r),l;if(null===r){for(;g<c.length;g++)null!==(r=d(e,c[g],i))&&(p=o(r,p,g),null===u?l=r:u.sibling=r,u=r);return l}for(r=t(e,r);g<c.length;g++)null!==(f=k(r,e,g,c[g],i))&&(n&&null!==f.alternate&&r.delete(null===f.key?g:f.key),p=o(f,p,g),null===u?l=f:u.sibling=f,u=f);return n&&r.forEach((function(n){return a(e,n)})),l}function f(e,c,i,l){var u=Y(i);if("function"!=typeof u)throw p(Error(150));if(null==(i=u.call(i)))throw p(Error(151));for(var r=u=null,g=c,f=c=0,w=null,m=i.next();null!==g&&!m.done;f++,m=i.next()){g.index>f?(w=g,g=null):w=g.sibling;var b=h(e,g,m.value,l);if(null===b){null===g&&(g=w);break}n&&g&&null===b.alternate&&a(e,g),c=o(b,c,f),null===r?u=b:r.sibling=b,r=b,g=w}if(m.done)return s(e,g),u;if(null===g){for(;!m.done;f++,m=i.next())null!==(m=d(e,m.value,l))&&(c=o(m,c,f),null===r?u=m:r.sibling=m,r=m);return u}for(g=t(e,g);!m.done;f++,m=i.next())null!==(m=k(g,e,f,m.value,l))&&(n&&null!==m.alternate&&g.delete(null===m.key?f:m.key),c=o(m,c,f),null===r?u=m:r.sibling=m,r=m);return n&&g.forEach((function(n){return a(e,n)})),u}return function(n,t,o,i){var l="object"==typeof o&&null!==o&&o.type===L&&null===o.key;l&&(o=o.props.children);var u="object"==typeof o&&null!==o;if(u)switch(o.$$typeof){case O:n:{for(u=o.key,l=t;null!==l;){if(l.key===u){if(7===l.tag?o.type===L:l.elementType===o.type){s(n,l.sibling),(t=e(l,o.type===L?o.props.children:o.props)).ref=Ao(n,l,o),t.return=n,n=t;break n}s(n,l);break}a(n,l),l=l.sibling}o.type===L?((t=Ni(o.props.children,n.mode,i,o.key)).return=n,n=t):((i=Li(o.type,o.key,o.props,null,n.mode,i)).ref=Ao(n,t,o),i.return=n,n=i)}return c(n);case R:n:{for(l=o.key;null!==t;){if(t.key===l){if(4===t.tag&&t.stateNode.containerInfo===o.containerInfo&&t.stateNode.implementation===o.implementation){s(n,t.sibling),(t=e(t,o.children||[])).return=n,n=t;break n}s(n,t);break}a(n,t),t=t.sibling}(t=Di(o,n.mode,i)).return=n,n=t}return c(n)}if("string"==typeof o||"number"==typeof o)return o=""+o,null!==t&&6===t.tag?(s(n,t.sibling),(t=e(t,o)).return=n,n=t):(s(n,t),(t=Vi(o,n.mode,i)).return=n,n=t),c(n);if(Co(o))return g(n,t,o,i);if(Y(o))return f(n,t,o,i);if(u&&Io(n,o),void 0===o&&!l)switch(n.tag){case 1:case 0:throw n=n.type,p(Error(152),n.displayName||n.name||"Component")}return s(n,t)}}var Ho=Mo(!0),Eo=Mo(!1),Po={},zo={current:Po},Bo={current:Po},Ko={current:Po};function qo(n){if(n===Po)throw p(Error(174));return n}function Oo(n,a){ie(Ko,a),ie(Bo,n),ie(zo,Po);var s=a.nodeType;switch(s){case 9:case 11:a=(a=a.documentElement)?a.namespaceURI:Dn(null,"");break;default:a=Dn(a=(s=8===s?a.parentNode:a).namespaceURI||null,s=s.tagName)}ce(zo),ie(zo,a)}function Ro(n){ce(zo),ce(Bo),ce(Ko)}function Lo(n){qo(Ko.current);var a=qo(zo.current),s=Dn(a,n.type);a!==s&&(ie(Bo,n),ie(zo,s))}function No(n){Bo.current===n&&(ce(zo),ce(Bo))}var Vo={current:0};function Do(n){for(var a=n;null!==a;){if(13===a.tag){var s=a.memoizedState;if(null!==s&&(null===(s=s.dehydrated)||s.data===Fs||s.data===Gs))return a}else if(19===a.tag&&void 0!==a.memoizedProps.revealOrder){if((64&a.effectTag)!==ma)return a}else if(null!==a.child){a.child.return=a,a=a.child;continue}if(a===n)break;for(;null===a.sibling;){if(null===a.return||a.return===n)return null;a=a.return}a.sibling.return=a.return,a=a.sibling}return null}function Wo(n,a){return{responder:n,props:a}}var jo=B.ReactCurrentDispatcher,Uo=0,_o=null,Jo=null,Fo=null,Go=null,Qo=null,Yo=null,Xo=0,Zo=null,$o=0,np=!1,ap=null,sp=0;function tp(){throw p(Error(321))}function ep(n,a){if(null===a)return!1;for(var s=0;s<a.length&&s<n.length;s++)if(!Gt(n[s],a[s]))return!1;return!0}function op(n,a,s,t,e,o){if(Uo=o,_o=a,Fo=null!==n?n.memoizedState:null,jo.current=null===Fo?mp:bp,a=s(t,e),np){do{np=!1,sp+=1,Fo=null!==n?n.memoizedState:null,Yo=Go,Zo=Qo=Jo=null,jo.current=bp,a=s(t,e)}while(np);ap=null,sp=0}if(jo.current=wp,(n=_o).memoizedState=Go,n.expirationTime=Xo,n.updateQueue=Zo,n.effectTag|=$o,n=null!==Jo&&null!==Jo.next,Uo=0,Yo=Qo=Go=Fo=Jo=_o=null,Xo=0,Zo=null,$o=0,n)throw p(Error(300));return a}function pp(){jo.current=wp,Uo=0,Yo=Qo=Go=Fo=Jo=_o=null,Xo=0,Zo=null,$o=0,np=!1,ap=null,sp=0}function cp(){var n={memoizedState:null,baseState:null,queue:null,baseUpdate:null,next:null};return null===Qo?Go=Qo=n:Qo=Qo.next=n,Qo}function ip(){if(null!==Yo)Yo=(Qo=Yo).next,Fo=null!==(Jo=Fo)?Jo.next:null;else{if(null===Fo)throw p(Error(310));var n={memoizedState:(Jo=Fo).memoizedState,baseState:Jo.baseState,queue:Jo.queue,baseUpdate:Jo.baseUpdate,next:null};Qo=null===Qo?Go=n:Qo.next=n,Fo=Jo.next}return Qo}function lp(n,a){return"function"==typeof a?a(n):a}function up(n){var a=ip(),s=a.queue;if(null===s)throw p(Error(311));if(s.lastRenderedReducer=n,0<sp){var t=s.dispatch;if(null!==ap){var e=ap.get(s);if(void 0!==e){ap.delete(s);var o=a.memoizedState;do{o=n(o,e.action),e=e.next}while(null!==e);return Gt(o,a.memoizedState)||(Ep=!0),a.memoizedState=o,a.baseUpdate===s.last&&(a.baseState=o),s.lastRenderedState=o,[o,t]}}return[a.memoizedState,t]}t=s.last;var c=a.baseUpdate;if(o=a.baseState,null!==c?(null!==t&&(t.next=null),t=c.next):t=null!==t?t.next:null,null!==t){var i=e=null,l=t,u=!1;do{var r=l.expirationTime;r<Uo?(u||(u=!0,i=c,e=o),r>Xo&&wi(Xo=r)):(fi(r,l.suspenseConfig),o=l.eagerReducer===n?l.eagerState:n(o,l.action)),c=l,l=l.next}while(null!==l&&l!==t);u||(i=c,e=o),Gt(o,a.memoizedState)||(Ep=!0),a.memoizedState=o,a.baseUpdate=i,a.baseState=e,s.lastRenderedState=o}return[a.memoizedState,s.dispatch]}function rp(n,a,s,t){return n={tag:n,create:a,destroy:s,deps:t,next:null},null===Zo?(Zo={lastEffect:null}).lastEffect=n.next=n:null===(a=Zo.lastEffect)?Zo.lastEffect=n.next=n:(s=a.next,a.next=n,n.next=s,Zo.lastEffect=n),n}function dp(n,a,s,t){var e=cp();$o|=n,e.memoizedState=rp(a,s,void 0,void 0===t?null:t)}function hp(n,a,s,t){var e=ip();t=void 0===t?null:t;var o=void 0;if(null!==Jo){var p=Jo.memoizedState;if(o=p.destroy,null!==t&&ep(t,p.deps))return void rp(0,s,o,t)}$o|=n,e.memoizedState=rp(a,s,o,t)}function kp(n,a){return"function"==typeof a?(n=n(),a(n),function(){a(null)}):null!=a?(n=n(),a.current=n,function(){a.current=null}):void 0}function gp(){}function fp(n,a,s){if(!(25>sp))throw p(Error(301));var t=n.alternate;if(n===_o||null!==t&&t===_o)if(np=!0,n={expirationTime:Uo,suspenseConfig:null,action:s,eagerReducer:null,eagerState:null,next:null},null===ap&&(ap=new Map),void 0===(s=ap.get(a)))ap.set(a,n);else{for(a=s;null!==a.next;)a=a.next;a.next=n}else{var e=Zc(),o=wo.suspense;o={expirationTime:e=$c(e,n,o),suspenseConfig:o,action:s,eagerReducer:null,eagerState:null,next:null};var c=a.last;if(null===c)o.next=o;else{var i=c.next;null!==i&&(o.next=i),c.next=o}if(a.last=o,0===n.expirationTime&&(null===t||0===t.expirationTime)&&null!==(t=a.lastRenderedReducer))try{var l=a.lastRenderedState,u=t(l,s);if(o.eagerReducer=t,o.eagerState=u,Gt(u,l))return}catch(r){}si(n,e)}}var wp={readContext:to,useCallback:tp,useContext:tp,useEffect:tp,useImperativeHandle:tp,useLayoutEffect:tp,useMemo:tp,useReducer:tp,useRef:tp,useState:tp,useDebugValue:tp,useResponder:tp},mp={readContext:to,useCallback:function(n,a){return cp().memoizedState=[n,void 0===a?null:a],n},useContext:to,useEffect:function(n,a){return dp(516,192,n,a)},useImperativeHandle:function(n,a,s){return s=null!=s?s.concat([n]):null,dp(4,36,kp.bind(null,a,n),s)},useLayoutEffect:function(n,a){return dp(4,36,n,a)},useMemo:function(n,a){var s=cp();return a=void 0===a?null:a,n=n(),s.memoizedState=[n,a],n},useReducer:function(n,a,s){var t=cp();return a=void 0!==s?s(a):a,t.memoizedState=t.baseState=a,n=(n=t.queue={last:null,dispatch:null,lastRenderedReducer:n,lastRenderedState:a}).dispatch=fp.bind(null,_o,n),[t.memoizedState,n]},useRef:function(n){return n={current:n},cp().memoizedState=n},useState:function(n){var a=cp();return"function"==typeof n&&(n=n()),a.memoizedState=a.baseState=n,n=(n=a.queue={last:null,dispatch:null,lastRenderedReducer:lp,lastRenderedState:n}).dispatch=fp.bind(null,_o,n),[a.memoizedState,n]},useDebugValue:gp,useResponder:Wo},bp={readContext:to,useCallback:function(n,a){var s=ip();a=void 0===a?null:a;var t=s.memoizedState;return null!==t&&null!==a&&ep(a,t[1])?t[0]:(s.memoizedState=[n,a],n)},useContext:to,useEffect:function(n,a){return hp(516,192,n,a)},useImperativeHandle:function(n,a,s){return s=null!=s?s.concat([n]):null,hp(4,36,kp.bind(null,a,n),s)},useLayoutEffect:function(n,a){return hp(4,36,n,a)},useMemo:function(n,a){var s=ip();a=void 0===a?null:a;var t=s.memoizedState;return null!==t&&null!==a&&ep(a,t[1])?t[0]:(n=n(),s.memoizedState=[n,a],n)},useReducer:up,useRef:function(){return ip().memoizedState},useState:function(n){return up(lp)},useDebugValue:gp,useResponder:Wo},vp=null,yp=null,Sp=!1;function xp(n,a){var s=qi(5,null,null,0);s.elementType="DELETED",s.type="DELETED",s.stateNode=a,s.return=n,s.effectTag=8,null!==n.lastEffect?(n.lastEffect.nextEffect=s,n.lastEffect=s):n.firstEffect=n.lastEffect=s}function Tp(n,a){switch(n.tag){case 5:var s=n.type;return null!==(a=1!==a.nodeType||s.toLowerCase()!==a.nodeName.toLowerCase()?null:a)&&(n.stateNode=a,!0);case 6:return null!==(a=""===n.pendingProps||3!==a.nodeType?null:a)&&(n.stateNode=a,!0);case 13:default:return!1}}function Cp(n){if(Sp){var a=yp;if(a){var s=a;if(!Tp(n,a)){if(!(a=at(s.nextSibling))||!Tp(n,a))return n.effectTag=n.effectTag&~va|ba,Sp=!1,void(vp=n);xp(vp,s)}vp=n,yp=at(a.firstChild)}else n.effectTag=n.effectTag&~va|ba,Sp=!1,vp=n}}function Ap(n){for(n=n.return;null!==n&&5!==n.tag&&3!==n.tag&&13!==n.tag;)n=n.return;vp=n}function Ip(n){if(n!==vp)return!1;if(!Sp)return Ap(n),Sp=!0,!1;var a=n.type;if(5!==n.tag||"head"!==a&&"body"!==a&&!Zs(a,n.memoizedProps))for(a=yp;a;)xp(n,a),a=at(a.nextSibling);if(Ap(n),13===n.tag)if(null===(n=null!==(n=n.memoizedState)?n.dehydrated:null))n=yp;else n:{for(n=n.nextSibling,a=0;n;){if(8===n.nodeType){var s=n.data;if(s===Js){if(0===a){n=at(n.nextSibling);break n}a--}else s!==_s&&s!==Gs&&s!==Fs||a++}n=n.nextSibling}n=null}else n=vp?at(n.stateNode.nextSibling):null;return yp=n,!0}function Mp(){yp=vp=null,Sp=!1}var Hp=B.ReactCurrentOwner,Ep=!1;function Pp(n,a,s,t){a.child=null===n?Eo(a,null,s,t):Ho(a,n.child,s,t)}function zp(n,a,s,t,e){s=s.render;var o=a.ref;return so(a,e),t=op(n,a,s,t,o,e),null===n||Ep?(a.effectTag|=1,Pp(n,a,t,e),a.child):(a.updateQueue=n.updateQueue,a.effectTag&=-517,n.expirationTime<=e&&(n.expirationTime=0),Gp(n,a,e))}function Bp(n,a,s,t,e,o){if(null===n){var p=s.type;return"function"!=typeof p||Oi(p)||void 0!==p.defaultProps||null!==s.compare||void 0!==s.defaultProps?((n=Li(s.type,null,t,null,a.mode,o)).ref=a.ref,n.return=a,a.child=n):(a.tag=15,a.type=p,Kp(n,a,p,t,e,o))}return p=n.child,e<o&&(e=p.memoizedProps,(s=null!==(s=s.compare)?s:Yt)(e,t)&&n.ref===a.ref)?Gp(n,a,o):(a.effectTag|=1,(n=Ri(p,t)).ref=a.ref,n.return=a,a.child=n)}function Kp(n,a,s,t,e,o){return null!==n&&Yt(n.memoizedProps,t)&&n.ref===a.ref&&(Ep=!1,e<o)?Gp(n,a,o):Op(n,a,s,t,o)}function qp(n,a){var s=a.ref;(null===n&&null!==s||null!==n&&n.ref!==s)&&(a.effectTag|=128)}function Op(n,a,s,t,e){var o=ke(s)?de:ue.current;return o=he(a,o),so(a,e),s=op(n,a,s,t,o,e),null===n||Ep?(a.effectTag|=1,Pp(n,a,s,e),a.child):(a.updateQueue=n.updateQueue,a.effectTag&=-517,n.expirationTime<=e&&(n.expirationTime=0),Gp(n,a,e))}function Rp(n,a,s,t,e){if(ke(s)){var o=!0;be(a)}else o=!1;if(so(a,e),null===a.stateNode)null!==n&&(n.alternate=null,a.alternate=null,a.effectTag|=ba),So(a,s,t),To(a,s,t,e),t=!0;else if(null===n){var p=a.stateNode,c=a.memoizedProps;p.props=c;var i=p.context,l=s.contextType;"object"==typeof l&&null!==l?l=to(l):l=he(a,l=ke(s)?de:ue.current);var u=s.getDerivedStateFromProps,r="function"==typeof u||"function"==typeof p.getSnapshotBeforeUpdate;r||"function"!=typeof p.UNSAFE_componentWillReceiveProps&&"function"!=typeof p.componentWillReceiveProps||(c!==t||i!==l)&&xo(a,p,t,l),eo=!1;var d=a.memoizedState;i=p.state=d;var h=a.updateQueue;null!==h&&(ko(a,h,t,p,e),i=a.memoizedState),c!==t||d!==i||re.current||eo?("function"==typeof u&&(bo(a,s,u,t),i=a.memoizedState),(c=eo||yo(a,s,c,t,d,i,l))?(r||"function"!=typeof p.UNSAFE_componentWillMount&&"function"!=typeof p.componentWillMount||("function"==typeof p.componentWillMount&&p.componentWillMount(),"function"==typeof p.UNSAFE_componentWillMount&&p.UNSAFE_componentWillMount()),"function"==typeof p.componentDidMount&&(a.effectTag|=4)):("function"==typeof p.componentDidMount&&(a.effectTag|=4),a.memoizedProps=t,a.memoizedState=i),p.props=t,p.state=i,p.context=l,t=c):("function"==typeof p.componentDidMount&&(a.effectTag|=4),t=!1)}else p=a.stateNode,c=a.memoizedProps,p.props=a.type===a.elementType?c:Fe(a.type,c),i=p.context,"object"==typeof(l=s.contextType)&&null!==l?l=to(l):l=he(a,l=ke(s)?de:ue.current),(r="function"==typeof(u=s.getDerivedStateFromProps)||"function"==typeof p.getSnapshotBeforeUpdate)||"function"!=typeof p.UNSAFE_componentWillReceiveProps&&"function"!=typeof p.componentWillReceiveProps||(c!==t||i!==l)&&xo(a,p,t,l),eo=!1,i=a.memoizedState,d=p.state=i,null!==(h=a.updateQueue)&&(ko(a,h,t,p,e),d=a.memoizedState),c!==t||i!==d||re.current||eo?("function"==typeof u&&(bo(a,s,u,t),d=a.memoizedState),(u=eo||yo(a,s,c,t,i,d,l))?(r||"function"!=typeof p.UNSAFE_componentWillUpdate&&"function"!=typeof p.componentWillUpdate||("function"==typeof p.componentWillUpdate&&p.componentWillUpdate(t,d,l),"function"==typeof p.UNSAFE_componentWillUpdate&&p.UNSAFE_componentWillUpdate(t,d,l)),"function"==typeof p.componentDidUpdate&&(a.effectTag|=4),"function"==typeof p.getSnapshotBeforeUpdate&&(a.effectTag|=256)):("function"!=typeof p.componentDidUpdate||c===n.memoizedProps&&i===n.memoizedState||(a.effectTag|=4),"function"!=typeof p.getSnapshotBeforeUpdate||c===n.memoizedProps&&i===n.memoizedState||(a.effectTag|=256),a.memoizedProps=t,a.memoizedState=d),p.props=t,p.state=d,p.context=l,t=u):("function"!=typeof p.componentDidUpdate||c===n.memoizedProps&&i===n.memoizedState||(a.effectTag|=4),"function"!=typeof p.getSnapshotBeforeUpdate||c===n.memoizedProps&&i===n.memoizedState||(a.effectTag|=256),t=!1);return Lp(n,a,s,t,o,e)}function Lp(n,a,s,t,e,o){qp(n,a);var p=(64&a.effectTag)!==ma;if(!t&&!p)return e&&ve(a,s,!1),Gp(n,a,o);t=a.stateNode,Hp.current=a;var c=p&&"function"!=typeof s.getDerivedStateFromError?null:t.render();return a.effectTag|=1,null!==n&&p?(a.child=Ho(a,n.child,null,o),a.child=Ho(a,null,c,o)):Pp(n,a,c,o),a.memoizedState=t.state,e&&ve(a,s,!0),a.child}function Np(n){var a=n.stateNode;a.pendingContext?we(0,a.pendingContext,a.pendingContext!==a.context):a.context&&we(0,a.context,!1),Oo(n,a.containerInfo)}var Vp,Dp,Wp,jp,Up={dehydrated:null,retryTime:1};function _p(n,a,s){var t,e=a.mode,o=a.pendingProps,p=Vo.current,c=!1;if((t=(64&a.effectTag)!==ma)||(t=0!=(2&p)&&(null===n||null!==n.memoizedState)),t?(c=!0,a.effectTag&=-65):null!==n&&null===n.memoizedState||void 0===o.fallback||!0===o.unstable_avoidThisFallback||(p|=1),ie(Vo,1&p),null===n){if(c){if(c=o.fallback,(o=Ni(null,e,0,null)).return=a,0==(2&a.mode))for(n=null!==a.memoizedState?a.child.child:a.child,o.child=n;null!==n;)n.return=o,n=n.sibling;return(s=Ni(c,e,s,null)).return=a,o.sibling=s,a.memoizedState=Up,a.child=o,s}return e=o.children,a.memoizedState=null,a.child=Eo(a,null,e,s)}if(null!==n.memoizedState){if(e=(n=n.child).sibling,c){if(o=o.fallback,(s=Ri(n,n.pendingProps)).return=a,0==(2&a.mode)&&(c=null!==a.memoizedState?a.child.child:a.child)!==n.child)for(s.child=c;null!==c;)c.return=s,c=c.sibling;return(e=Ri(e,o,e.expirationTime)).return=a,s.sibling=e,s.childExpirationTime=0,a.memoizedState=Up,a.child=s,e}return s=Ho(a,n.child,o.children,s),a.memoizedState=null,a.child=s}if(n=n.child,c){if(c=o.fallback,(o=Ni(null,e,0,null)).return=a,o.child=n,null!==n&&(n.return=o),0==(2&a.mode))for(n=null!==a.memoizedState?a.child.child:a.child,o.child=n;null!==n;)n.return=o,n=n.sibling;return(s=Ni(c,e,s,null)).return=a,o.sibling=s,s.effectTag|=ba,o.childExpirationTime=0,a.memoizedState=Up,a.child=o,s}return a.memoizedState=null,a.child=Ho(a,n,o.children,s)}function Jp(n,a,s,t,e){var o=n.memoizedState;null===o?n.memoizedState={isBackwards:a,rendering:null,last:t,tail:s,tailExpiration:0,tailMode:e}:(o.isBackwards=a,o.rendering=null,o.last=t,o.tail=s,o.tailExpiration=0,o.tailMode=e)}function Fp(n,a,s){var t=a.pendingProps,e=t.revealOrder,o=t.tail;if(Pp(n,a,t.children,s),0!=(2&(t=Vo.current)))t=1&t|2,a.effectTag|=64;else{if(null!==n&&(64&n.effectTag)!==ma)n:for(n=a.child;null!==n;){if(13===n.tag){if(null!==n.memoizedState){n.expirationTime<s&&(n.expirationTime=s);var p=n.alternate;null!==p&&p.expirationTime<s&&(p.expirationTime=s),ao(n.return,s)}}else if(null!==n.child){n.child.return=n,n=n.child;continue}if(n===a)break n;for(;null===n.sibling;){if(null===n.return||n.return===a)break n;n=n.return}n.sibling.return=n.return,n=n.sibling}t&=1}if(ie(Vo,t),0==(2&a.mode))a.memoizedState=null;else switch(e){case"forwards":for(s=a.child,e=null;null!==s;)null!==(t=s.alternate)&&null===Do(t)&&(e=s),s=s.sibling;null===(s=e)?(e=a.child,a.child=null):(e=s.sibling,s.sibling=null),Jp(a,!1,e,s,o);break;case"backwards":for(s=null,e=a.child,a.child=null;null!==e;){if(null!==(t=e.alternate)&&null===Do(t)){a.child=e;break}t=e.sibling,e.sibling=s,s=e,e=t}Jp(a,!0,s,null,o);break;case"together":Jp(a,!1,null,null,void 0);break;default:a.memoizedState=null}return a.child}function Gp(n,a,s){null!==n&&(a.dependencies=n.dependencies);var t=a.expirationTime;if(0!==t&&wi(t),a.childExpirationTime<s)return null;if(null!==n&&a.child!==n.child)throw p(Error(153));if(null!==a.child){for(s=Ri(n=a.child,n.pendingProps,n.expirationTime),a.child=s,s.return=a;null!==n.sibling;)n=n.sibling,(s=s.sibling=Ri(n,n.pendingProps,n.expirationTime)).return=a;s.sibling=null}return a.child}function Qp(n){n.effectTag|=4}function Yp(n,a){switch(n.tailMode){case"hidden":a=n.tail;for(var s=null;null!==a;)null!==a.alternate&&(s=a),a=a.sibling;null===s?n.tail=null:s.sibling=null;break;case"collapsed":s=n.tail;for(var t=null;null!==s;)null!==s.alternate&&(t=s),s=s.sibling;null===t?a||null===n.tail?n.tail=null:n.tail.sibling=null:t.sibling=null}}function Xp(n){switch(n.tag){case 1:ke(n.type)&&ge();var a=n.effectTag;return 4096&a?(n.effectTag=-4097&a|64,n):null;case 3:if(Ro(),fe(),(64&(a=n.effectTag))!==ma)throw p(Error(285));return n.effectTag=-4097&a|64,n;case 5:return No(n),null;case 13:return ce(Vo),4096&(a=n.effectTag)?(n.effectTag=-4097&a|64,n):null;case 19:return ce(Vo),null;case 4:return Ro(),null;case 10:return no(n),null;default:return null}}function Zp(n,a){return{value:n,source:a,stack:Z(a)}}Vp=function(n,a){for(var s=a.child;null!==s;){if(5===s.tag||6===s.tag)n.appendChild(s.stateNode);else if(4!==s.tag&&null!==s.child){s.child.return=s,s=s.child;continue}if(s===a)break;for(;null===s.sibling;){if(null===s.return||s.return===a)return;s=s.return}s.sibling.return=s.return,s=s.sibling}},Dp=function(){},Wp=function(n,a,s,t,o){var p=n.memoizedProps;if(p!==t){var c,i,l=a.stateNode;switch(qo(zo.current),n=null,s){case"input":p=In(l,p),t=In(l,t),n=[];break;case"option":p=Bn(l,p),t=Bn(l,t),n=[];break;case"select":p=e({},p,{value:void 0}),t=e({},t,{value:void 0}),n=[];break;case"textarea":p=qn(l,p),t=qn(l,t),n=[];break;default:"function"!=typeof p.onClick&&"function"==typeof t.onClick&&(l.onclick=Ns)}for(c in Os(s,t),s=null,p)if(!t.hasOwnProperty(c)&&p.hasOwnProperty(c)&&null!=p[c])if("style"===c)for(i in l=p[c])l.hasOwnProperty(i)&&(s||(s={}),s[i]="");else"dangerouslySetInnerHTML"!==c&&"children"!==c&&"suppressContentEditableWarning"!==c&&"suppressHydrationWarning"!==c&&"autoFocus"!==c&&(h.hasOwnProperty(c)?n||(n=[]):(n=n||[]).push(c,null));for(c in t){var u=t[c];if(l=null!=p?p[c]:void 0,t.hasOwnProperty(c)&&u!==l&&(null!=u||null!=l))if("style"===c)if(l){for(i in l)!l.hasOwnProperty(i)||u&&u.hasOwnProperty(i)||(s||(s={}),s[i]="");for(i in u)u.hasOwnProperty(i)&&l[i]!==u[i]&&(s||(s={}),s[i]=u[i])}else s||(n||(n=[]),n.push(c,s)),s=u;else"dangerouslySetInnerHTML"===c?(u=u?u.__html:void 0,l=l?l.__html:void 0,null!=u&&l!==u&&(n=n||[]).push(c,""+u)):"children"===c?l===u||"string"!=typeof u&&"number"!=typeof u||(n=n||[]).push(c,""+u):"suppressContentEditableWarning"!==c&&"suppressHydrationWarning"!==c&&(h.hasOwnProperty(c)?(null!=u&&Ls(o,c),n||l===u||(n=[])):(n=n||[]).push(c,u))}s&&(n=n||[]).push("style",s),o=n,(a.updateQueue=o)&&Qp(a)}},jp=function(n,a,s,t){s!==t&&Qp(a)};var $p="function"==typeof WeakSet?WeakSet:Set;function nc(n,a){var s=a.source,t=a.stack;null===t&&null!==s&&(t=Z(s)),null!==s&&X(s.type),a=a.value,null!==n&&1===n.tag&&X(n.type);try{console.error(a)}catch(e){setTimeout((function(){throw e}))}}function ac(n){var a=n.ref;if(null!==a)if("function"==typeof a)try{a(null)}catch(s){Hi(n,s)}else a.current=null}function sc(n,a){switch(a.tag){case 0:case 11:case 15:tc(2,0,a);break;case 1:if(256&a.effectTag&&null!==n){var s=n.memoizedProps,t=n.memoizedState;a=(n=a.stateNode).getSnapshotBeforeUpdate(a.elementType===a.type?s:Fe(a.type,s),t),n.__reactInternalSnapshotBeforeUpdate=a}break;case 3:case 5:case 6:case 4:case 17:break;default:throw p(Error(163))}}function tc(n,a,s){if(null!==(s=null!==(s=s.updateQueue)?s.lastEffect:null)){var t=s=s.next;do{if(0!=(t.tag&n)){var e=t.destroy;t.destroy=void 0,void 0!==e&&e()}0!=(t.tag&a)&&(e=t.create,t.destroy=e()),t=t.next}while(t!==s)}}function ec(n,a,s){switch("function"==typeof Bi&&Bi(a),a.tag){case 0:case 11:case 14:case 15:if(null!==(n=a.updateQueue)&&null!==(n=n.lastEffect)){var t=n.next;We(97<s?97:s,(function(){var n=t;do{var s=n.destroy;if(void 0!==s){var e=a;try{s()}catch(o){Hi(e,o)}}n=n.next}while(n!==t)}))}break;case 1:ac(a),"function"==typeof(s=a.stateNode).componentWillUnmount&&function(n,a){try{a.props=n.memoizedProps,a.state=n.memoizedState,a.componentWillUnmount()}catch(s){Hi(n,s)}}(a,s);break;case 5:ac(a);break;case 4:ic(n,a,s)}}function oc(n){var a=n.alternate;n.return=null,n.child=null,n.memoizedState=null,n.updateQueue=null,n.dependencies=null,n.alternate=null,n.firstEffect=null,n.lastEffect=null,n.pendingProps=null,n.memoizedProps=null,null!==a&&oc(a)}function pc(n){return 5===n.tag||3===n.tag||4===n.tag}function cc(n){n:{for(var a=n.return;null!==a;){if(pc(a)){var s=a;break n}a=a.return}throw p(Error(160))}switch(a=s.stateNode,s.tag){case 5:var t=!1;break;case 3:case 4:a=a.containerInfo,t=!0;break;default:throw p(Error(161))}16&s.effectTag&&(Un(a,""),s.effectTag&=-17);n:a:for(s=n;;){for(;null===s.sibling;){if(null===s.return||pc(s.return)){s=null;break n}s=s.return}for(s.sibling.return=s.return,s=s.sibling;5!==s.tag&&6!==s.tag&&18!==s.tag;){if(s.effectTag&ba)continue a;if(null===s.child||4===s.tag)continue a;s.child.return=s,s=s.child}if(!(s.effectTag&ba)){s=s.stateNode;break n}}for(var e=n;;){var o=5===e.tag||6===e.tag;if(o){var c=o?e.stateNode:e.stateNode.instance;if(s)if(t){var i=c;c=s,8===(o=a).nodeType?o.parentNode.insertBefore(i,c):o.insertBefore(i,c)}else a.insertBefore(c,s);else t?(8===(i=a).nodeType?(o=i.parentNode).insertBefore(c,i):(o=i).appendChild(c),null!=(i=i._reactRootContainer)||null!==o.onclick||(o.onclick=Ns)):a.appendChild(c)}else if(4!==e.tag&&null!==e.child){e.child.return=e,e=e.child;continue}if(e===n)break;for(;null===e.sibling;){if(null===e.return||e.return===n)return;e=e.return}e.sibling.return=e.return,e=e.sibling}}function ic(n,a,s){for(var t,e,o=a,c=!1;;){if(!c){c=o.return;n:for(;;){if(null===c)throw p(Error(160));switch(t=c.stateNode,c.tag){case 5:e=!1;break n;case 3:case 4:t=t.containerInfo,e=!0;break n}c=c.return}c=!0}if(5===o.tag||6===o.tag){n:for(var i=n,l=o,u=s,r=l;;)if(ec(i,r,u),null!==r.child&&4!==r.tag)r.child.return=r,r=r.child;else{if(r===l)break;for(;null===r.sibling;){if(null===r.return||r.return===l)break n;r=r.return}r.sibling.return=r.return,r=r.sibling}e?(i=t,l=o.stateNode,8===i.nodeType?i.parentNode.removeChild(l):i.removeChild(l)):t.removeChild(o.stateNode)}else if(4===o.tag){if(null!==o.child){t=o.stateNode.containerInfo,e=!0,o.child.return=o,o=o.child;continue}}else if(ec(n,o,s),null!==o.child){o.child.return=o,o=o.child;continue}if(o===a)break;for(;null===o.sibling;){if(null===o.return||o.return===a)return;4===(o=o.return).tag&&(c=!1)}o.sibling.return=o.return,o=o.sibling}}function lc(n,a){switch(a.tag){case 0:case 11:case 14:case 15:tc(4,8,a);break;case 1:break;case 5:var s=a.stateNode;if(null!=s){var t=a.memoizedProps,e=null!==n?n.memoizedProps:t;n=a.type;var o=a.updateQueue;if(a.updateQueue=null,null!==o){for(s[ot]=t,"input"===n&&"radio"===t.type&&null!=t.name&&Hn(s,t),Rs(n,e),a=Rs(n,t),e=0;e<o.length;e+=2){var c=o[e],i=o[e+1];"style"===c?Ks(s,i):"dangerouslySetInnerHTML"===c?jn(s,i):"children"===c?Un(s,i):xn(s,c,i,a)}switch(n){case"input":En(s,t);break;case"textarea":Rn(s,t);break;case"select":a=s._wrapperState.wasMultiple,s._wrapperState.wasMultiple=!!t.multiple,null!=(n=t.value)?Kn(s,!!t.multiple,n,!1):a!==!!t.multiple&&(null!=t.defaultValue?Kn(s,!!t.multiple,t.defaultValue,!0):Kn(s,!!t.multiple,t.multiple?[]:"",!1))}}}break;case 6:if(null===a.stateNode)throw p(Error(162));a.stateNode.nodeValue=a.memoizedProps;break;case 3:(a=a.stateNode).hydrate&&(a.hydrate=!1,wa(a.containerInfo));break;case 12:break;case 13:if(s=a,null===a.memoizedState?t=!1:(t=!0,s=a.child,Nc=Ne()),null!==s)n:for(n=s;;){if(5===n.tag)o=n.stateNode,t?"function"==typeof(o=o.style).setProperty?o.setProperty("display","none","important"):o.display="none":(o=n.stateNode,e=null!=(e=n.memoizedProps.style)&&e.hasOwnProperty("display")?e.display:null,o.style.display=Bs("display",e));else if(6===n.tag)n.stateNode.nodeValue=t?"":n.memoizedProps;else{if(13===n.tag&&null!==n.memoizedState&&null===n.memoizedState.dehydrated){(o=n.child.sibling).return=n,n=o;continue}if(null!==n.child){n.child.return=n,n=n.child;continue}}if(n===s)break n;for(;null===n.sibling;){if(null===n.return||n.return===s)break n;n=n.return}n.sibling.return=n.return,n=n.sibling}uc(a);break;case 19:uc(a);break;case 17:case 20:case 21:break;default:throw p(Error(163))}}function uc(n){var a=n.updateQueue;if(null!==a){n.updateQueue=null;var s=n.stateNode;null===s&&(s=n.stateNode=new $p),a.forEach((function(a){var t=Pi.bind(null,n,a);s.has(a)||(s.add(a),a.then(t,t))}))}}var rc="function"==typeof WeakMap?WeakMap:Map;function dc(n,a,s){(s=co(s,null)).tag=3,s.payload={element:null};var t=a.value;return s.callback=function(){Wc||(Wc=!0,jc=t),nc(n,a)},s}function hc(n,a,s){(s=co(s,null)).tag=3;var t=n.type.getDerivedStateFromError;if("function"==typeof t){var e=a.value;s.payload=function(){return nc(n,a),t(e)}}var o=n.stateNode;return null!==o&&"function"==typeof o.componentDidCatch&&(s.callback=function(){"function"!=typeof t&&(null===Uc?Uc=new Set([this]):Uc.add(this),nc(n,a));var s=a.stack;this.componentDidCatch(a.value,{componentStack:null!==s?s:""})}),s}var kc=Math.ceil,gc=B.ReactCurrentDispatcher,fc=B.ReactCurrentOwner,wc=0,mc=8,bc=16,vc=32,yc=0,Sc=1,xc=2,Tc=3,Cc=4,Ac=5,Ic=6,Mc=wc,Hc=null,Ec=null,Pc=0,zc=yc,Bc=null,Kc=1073741823,qc=1073741823,Oc=null,Rc=0,Lc=!1,Nc=0,Vc=500,Dc=null,Wc=!1,jc=null,Uc=null,_c=!1,Jc=null,Fc=90,Gc=null,Qc=0,Yc=null,Xc=0;function Zc(){return(Mc&(bc|vc))!==wc?1073741821-(Ne()/10|0):0!==Xc?Xc:Xc=1073741821-(Ne()/10|0)}function $c(n,a,s){if(0==(2&(a=a.mode)))return 1073741823;var t=Ve();if(0==(4&a))return 99===t?1073741823:1073741822;if((Mc&bc)!==wc)return Pc;if(null!==s)n=1073741821-25*(1+((1073741821-n+(0|s.timeoutMs||5e3)/10)/25|0));else switch(t){case 99:n=1073741823;break;case 98:n=1073741821-10*(1+((1073741821-n+15)/10|0));break;case 97:case 96:n=1073741821-25*(1+((1073741821-n+500)/25|0));break;case 95:n=2;break;default:throw p(Error(326))}return null!==Hc&&n===Pc&&--n,n}var ni,ai=0;function si(n,a){if(50<Qc)throw Qc=0,Yc=null,p(Error(185));if(null!==(n=ti(n,a))){var s=Ve();1073741823===a?(Mc&mc)!==wc&&(Mc&(bc|vc))===wc?ci(n):(oi(n),Mc===wc&&_e()):oi(n),(4&Mc)===wc||98!==s&&99!==s||(null===Gc?Gc=new Map([[n,a]]):(void 0===(s=Gc.get(n))||s>a)&&Gc.set(n,a))}}function ti(n,a){n.expirationTime<a&&(n.expirationTime=a);var s=n.alternate;null!==s&&s.expirationTime<a&&(s.expirationTime=a);var t=n.return,e=null;if(null===t&&3===n.tag)e=n.stateNode;else for(;null!==t;){if(s=t.alternate,t.childExpirationTime<a&&(t.childExpirationTime=a),null!==s&&s.childExpirationTime<a&&(s.childExpirationTime=a),null===t.return&&3===t.tag){e=t.stateNode;break}t=t.return}return null!==e&&(Hc===e&&(wi(a),zc===Cc&&Ui(e,Pc)),_i(e,a)),e}function ei(n){var a=n.lastExpiredTime;return 0!==a?a:ji(n,a=n.firstPendingTime)?(a=n.lastPingedTime)>(n=n.nextKnownPendingLevel)?a:n:a}function oi(n){if(0!==n.lastExpiredTime)n.callbackExpirationTime=1073741823,n.callbackPriority=99,n.callbackNode=Ue(ci.bind(null,n));else{var a=ei(n),s=n.callbackNode;if(0===a)null!==s&&(n.callbackNode=null,n.callbackExpirationTime=0,n.callbackPriority=90);else{var t=Zc();if(1073741823===a?t=99:1===a||2===a?t=95:t=0>=(t=10*(1073741821-a)-10*(1073741821-t))?99:250>=t?98:5250>=t?97:95,null!==s){var e=n.callbackPriority;if(n.callbackExpirationTime===a&&e>=t)return;s!==Be&&xe(s)}n.callbackExpirationTime=a,n.callbackPriority=t,a=1073741823===a?Ue(ci.bind(null,n)):je(t,pi.bind(null,n),{timeout:10*(1073741821-a)-Ne()}),n.callbackNode=a}}}function pi(n,a){if(Xc=0,a)return Ji(n,a=Zc()),oi(n),null;var s=ei(n);if(0!==s){if(a=n.callbackNode,(Mc&(bc|vc))!==wc)throw p(Error(327));if(Ai(),n===Hc&&s===Pc||hi(n,s),null!==Ec){var t=Mc;Mc|=bc;for(var e=gi();;)try{bi();break}catch(i){ki(n,i)}if(Ze(),Mc=t,gc.current=e,zc===Sc)throw a=Bc,hi(n,s),Ui(n,s),oi(n),a;if(null===Ec)switch(e=n.finishedWork=n.current.alternate,n.finishedExpirationTime=s,li(n,s),t=zc,Hc=null,t){case yc:case Sc:throw p(Error(345));case xc:if(2!==s){Ji(n,2);break}xi(n);break;case Tc:if(Ui(n,s),s===(t=n.lastSuspendedTime)&&(n.nextKnownPendingLevel=Si(e)),1073741823===Kc&&10<(e=Nc+Vc-Ne())){if(Lc){var o=n.lastPingedTime;if(0===o||o>=s){n.lastPingedTime=s,hi(n,s);break}}if(0!==(o=ei(n))&&o!==s)break;if(0!==t&&t!==s){n.lastPingedTime=t;break}n.timeoutHandle=$s(xi.bind(null,n),e);break}xi(n);break;case Cc:if(Ui(n,s),s===(t=n.lastSuspendedTime)&&(n.nextKnownPendingLevel=Si(e)),Lc&&(0===(e=n.lastPingedTime)||e>=s)){n.lastPingedTime=s,hi(n,s);break}if(0!==(e=ei(n))&&e!==s)break;if(0!==t&&t!==s){n.lastPingedTime=t;break}if(1073741823!==qc?t=10*(1073741821-qc)-Ne():1073741823===Kc?t=0:(t=10*(1073741821-Kc)-5e3,0>(t=(e=Ne())-t)&&(t=0),(s=10*(1073741821-s)-e)<(t=(120>t?120:480>t?480:1080>t?1080:1920>t?1920:3e3>t?3e3:4320>t?4320:1960*kc(t/1960))-t)&&(t=s)),10<t){n.timeoutHandle=$s(xi.bind(null,n),t);break}xi(n);break;case Ac:if(1073741823!==Kc&&null!==Oc){o=Kc;var c=Oc;if(0>=(t=0|c.busyMinDurationMs)?t=0:(e=0|c.busyDelayMs,t=(o=Ne()-(10*(1073741821-o)-(0|c.timeoutMs||5e3)))<=e?0:e+t-o),10<t){Ui(n,s),n.timeoutHandle=$s(xi.bind(null,n),t);break}}xi(n);break;case Ic:Ui(n,s);break;default:throw p(Error(329))}if(oi(n),n.callbackNode===a)return pi.bind(null,n)}}return null}function ci(n){var a=n.lastExpiredTime;if(a=0!==a?a:1073741823,n.finishedExpirationTime===a)xi(n);else{if((Mc&(bc|vc))!==wc)throw p(Error(327));if(Ai(),n===Hc&&a===Pc||hi(n,a),null!==Ec){var s=Mc;Mc|=bc;for(var t=gi();;)try{mi();break}catch(e){ki(n,e)}if(Ze(),Mc=s,gc.current=t,zc===Sc)throw s=Bc,hi(n,a),Ui(n,a),oi(n),s;if(null!==Ec)throw p(Error(261));n.finishedWork=n.current.alternate,n.finishedExpirationTime=a,li(n,a),zc===Ic?Ui(n,a):(Hc=null,xi(n)),oi(n)}}return null}function ii(){(Mc&(1|bc|vc))===wc&&(function(){if(null!==Gc){var n=Gc;Gc=null,n.forEach((function(n,a){Ji(a,n),oi(a)})),_e()}}(),Ai())}function li(n,a){var s=n.firstBatch;null!==s&&s._defer&&s._expirationTime>=a&&(je(97,(function(){return s._onComplete(),null})),zc=Ic)}function ui(n,a){var s=Mc;Mc|=1;try{return n(a)}finally{(Mc=s)===wc&&_e()}}function ri(n,a,s,t){var e=Mc;Mc|=4;try{return We(98,n.bind(null,a,s,t))}finally{(Mc=e)===wc&&_e()}}function di(n,a){var s=Mc;Mc&=-2,Mc|=mc;try{return n(a)}finally{(Mc=s)===wc&&_e()}}function hi(n,a){n.finishedWork=null,n.finishedExpirationTime=0;var s=n.timeoutHandle;if(-1!==s&&(n.timeoutHandle=-1,nt(s)),null!==Ec)for(s=Ec.return;null!==s;){var t=s;switch(t.tag){case 1:var e=t.type.childContextTypes;null!=e&&ge();break;case 3:Ro(),fe();break;case 5:No(t);break;case 4:Ro();break;case 13:case 19:ce(Vo);break;case 10:no(t)}s=s.return}Hc=n,Ec=Ri(n.current,null),Pc=a,zc=yc,Bc=null,qc=Kc=1073741823,Oc=null,Rc=0,Lc=!1}function ki(n,a){for(;;){try{if(Ze(),pp(),null===Ec||null===Ec.return)return zc=Sc,Bc=a,null;n:{var s=n,t=Ec.return,e=Ec,o=a;if(a=Pc,e.effectTag|=2048,e.firstEffect=e.lastEffect=null,null!==o&&"object"==typeof o&&"function"==typeof o.then){var p=o,c=0!=(1&Vo.current),i=t;do{var l;if(l=13===i.tag){var u=i.memoizedState;if(null!==u)l=null!==u.dehydrated;else{var r=i.memoizedProps;l=void 0!==r.fallback&&(!0!==r.unstable_avoidThisFallback||!c)}}if(l){var d=i.updateQueue;if(null===d){var h=new Set;h.add(p),i.updateQueue=h}else d.add(p);if(0==(2&i.mode)){if(i.effectTag|=64,e.effectTag&=-2981,1===e.tag)if(null===e.alternate)e.tag=17;else{var k=co(1073741823,null);k.tag=2,lo(e,k)}e.expirationTime=1073741823;break n}o=void 0,e=a;var g=s.pingCache;if(null===g?(g=s.pingCache=new rc,o=new Set,g.set(p,o)):void 0===(o=g.get(p))&&(o=new Set,g.set(p,o)),!o.has(e)){o.add(e);var f=Ei.bind(null,s,p,e);p.then(f,f)}i.effectTag|=4096,i.expirationTime=a;break n}i=i.return}while(null!==i);o=Error((X(e.type)||"A React component")+" suspended while rendering, but no fallback UI was specified.\n\nAdd a <Suspense fallback=...> component higher in the tree to provide a loading indicator or placeholder to display."+Z(e))}zc!==Ac&&(zc=xc),o=Zp(o,e),i=t;do{switch(i.tag){case 3:p=o,i.effectTag|=4096,i.expirationTime=a,uo(i,dc(i,p,a));break n;case 1:p=o;var w=i.type,m=i.stateNode;if((64&i.effectTag)===ma&&("function"==typeof w.getDerivedStateFromError||null!==m&&"function"==typeof m.componentDidCatch&&(null===Uc||!Uc.has(m)))){i.effectTag|=4096,i.expirationTime=a,uo(i,hc(i,p,a));break n}}i=i.return}while(null!==i)}Ec=yi(Ec)}catch(b){a=b;continue}break}}function gi(){var n=gc.current;return gc.current=wp,null===n?wp:n}function fi(n,a){n<Kc&&2<n&&(Kc=n),null!==a&&n<qc&&2<n&&(qc=n,Oc=a)}function wi(n){n>Rc&&(Rc=n)}function mi(){for(;null!==Ec;)Ec=vi(Ec)}function bi(){for(;null!==Ec&&!Te();)Ec=vi(Ec)}function vi(n){var a=ni(n.alternate,n,Pc);return n.memoizedProps=n.pendingProps,null===a&&(a=yi(n)),fc.current=null,a}function yi(n){Ec=n;do{var a=Ec.alternate;if(n=Ec.return,(2048&Ec.effectTag)===ma){n:{var s=a,t=Pc,o=(a=Ec).pendingProps;switch(a.tag){case 2:case 16:break;case 15:case 0:break;case 1:ke(a.type)&&ge();break;case 3:Ro(),fe(),(t=a.stateNode).pendingContext&&(t.context=t.pendingContext,t.pendingContext=null),(null===s||null===s.child)&&Ip(a)&&Qp(a),Dp(a);break;case 5:No(a),t=qo(Ko.current);var c=a.type;if(null!==s&&null!=a.stateNode)Wp(s,a,c,o,t),s.ref!==a.ref&&(a.effectTag|=128);else if(o){var i=qo(zo.current);if(Ip(a)){c=void 0,s=(o=a).stateNode;var l=o.type,u=o.memoizedProps;switch(s[et]=o,s[ot]=u,l){case"iframe":case"object":case"embed":vs("load",s);break;case"video":case"audio":for(var r=0;r<na.length;r++)vs(na[r],s);break;case"source":vs("error",s);break;case"img":case"image":case"link":vs("error",s),vs("load",s);break;case"form":vs("reset",s),vs("submit",s);break;case"details":vs("toggle",s);break;case"input":Mn(s,u),vs("invalid",s),Ls(t,"onChange");break;case"select":s._wrapperState={wasMultiple:!!u.multiple},vs("invalid",s),Ls(t,"onChange");break;case"textarea":On(s,u),vs("invalid",s),Ls(t,"onChange")}for(c in Os(l,u),r=null,u)u.hasOwnProperty(c)&&(i=u[c],"children"===c?"string"==typeof i?s.textContent!==i&&(r=["children",i]):"number"==typeof i&&s.textContent!==""+i&&(r=["children",""+i]):h.hasOwnProperty(c)&&null!=i&&Ls(t,c));switch(l){case"input":Cn(s),Pn(s,u,!0);break;case"textarea":Cn(s),Ln(s);break;case"select":case"option":break;default:"function"==typeof u.onClick&&(s.onclick=Ns)}t=r,o.updateQueue=t,null!==t&&Qp(a)}else{u=c,s=o,l=a,r=9===t.nodeType?t:t.ownerDocument,i===Nn.html&&(i=Vn(u)),i===Nn.html?"script"===u?((u=r.createElement("div")).innerHTML="<script><\/script>",r=u.removeChild(u.firstChild)):"string"==typeof s.is?r=r.createElement(u,{is:s.is}):(r=r.createElement(u),"select"===u&&(u=r,s.multiple?u.multiple=!0:s.size&&(u.size=s.size))):r=r.createElementNS(i,u),(u=r)[et]=l,u[ot]=s,Vp(s=u,a,!1,!1),a.stateNode=s,i=t;var d=Rs(c,o);switch(c){case"iframe":case"object":case"embed":vs("load",s),t=o;break;case"video":case"audio":for(t=0;t<na.length;t++)vs(na[t],s);t=o;break;case"source":vs("error",s),t=o;break;case"img":case"image":case"link":vs("error",s),vs("load",s),t=o;break;case"form":vs("reset",s),vs("submit",s),t=o;break;case"details":vs("toggle",s),t=o;break;case"input":Mn(s,o),t=In(s,o),vs("invalid",s),Ls(i,"onChange");break;case"option":t=Bn(s,o);break;case"select":s._wrapperState={wasMultiple:!!o.multiple},t=e({},o,{value:void 0}),vs("invalid",s),Ls(i,"onChange");break;case"textarea":On(s,o),t=qn(s,o),vs("invalid",s),Ls(i,"onChange");break;default:t=o}Os(c,t),l=void 0,u=c,r=s;var k=t;for(l in k)if(k.hasOwnProperty(l)){var g=k[l];"style"===l?Ks(r,g):"dangerouslySetInnerHTML"===l?null!=(g=g?g.__html:void 0)&&jn(r,g):"children"===l?"string"==typeof g?("textarea"!==u||""!==g)&&Un(r,g):"number"==typeof g&&Un(r,""+g):"suppressContentEditableWarning"!==l&&"suppressHydrationWarning"!==l&&"autoFocus"!==l&&(h.hasOwnProperty(l)?null!=g&&Ls(i,l):null!=g&&xn(r,l,g,d))}switch(c){case"input":Cn(s),Pn(s,o,!1);break;case"textarea":Cn(s),Ln(s);break;case"option":null!=o.value&&s.setAttribute("value",""+Sn(o.value));break;case"select":t=s,s=o,t.multiple=!!s.multiple,null!=(l=s.value)?Kn(t,!!s.multiple,l,!1):null!=s.defaultValue&&Kn(t,!!s.multiple,s.defaultValue,!0);break;default:"function"==typeof t.onClick&&(s.onclick=Ns)}Xs(c,o)&&Qp(a)}null!==a.ref&&(a.effectTag|=128)}else if(null===a.stateNode)throw p(Error(166));break;case 6:if(s&&null!=a.stateNode)jp(s,a,s.memoizedProps,o);else{if("string"!=typeof o&&null===a.stateNode)throw p(Error(166));c=qo(Ko.current),qo(zo.current),Ip(a)?(t=a.stateNode,o=a.memoizedProps,t[et]=a,t.nodeValue!==o&&Qp(a)):(t=a,(o=(9===c.nodeType?c:c.ownerDocument).createTextNode(o))[et]=a,t.stateNode=o)}break;case 11:break;case 13:if(ce(Vo),o=a.memoizedState,(64&a.effectTag)!==ma){a.expirationTime=t;break n}t=null!==o,o=!1,null===s?Ip(a):(o=null!==(c=s.memoizedState),t||null===c||null!==(c=s.child.sibling)&&(null!==(l=a.firstEffect)?(a.firstEffect=c,c.nextEffect=l):(a.firstEffect=a.lastEffect=c,c.nextEffect=null),c.effectTag=8)),t&&!o&&0!=(2&a.mode)&&(null===s&&!0!==a.memoizedProps.unstable_avoidThisFallback||0!=(1&Vo.current)?zc===yc&&(zc=Tc):(zc!==yc&&zc!==Tc||(zc=Cc),0!==Rc&&null!==Hc&&(Ui(Hc,Pc),_i(Hc,Rc)))),(t||o)&&(a.effectTag|=4);break;case 7:case 8:case 12:break;case 4:Ro(),Dp(a);break;case 10:no(a);break;case 9:case 14:break;case 17:ke(a.type)&&ge();break;case 19:if(ce(Vo),null===(o=a.memoizedState))break;if(c=(64&a.effectTag)!==ma,null===(l=o.rendering)){if(c)Yp(o,!1);else if(zc!==yc||null!==s&&(64&s.effectTag)!==ma)for(s=a.child;null!==s;){if(null!==(l=Do(s))){for(a.effectTag|=64,Yp(o,!1),null!==(o=l.updateQueue)&&(a.updateQueue=o,a.effectTag|=4),a.firstEffect=a.lastEffect=null,o=a.child;null!==o;)s=t,(c=o).effectTag&=ba,c.nextEffect=null,c.firstEffect=null,c.lastEffect=null,null===(l=c.alternate)?(c.childExpirationTime=0,c.expirationTime=s,c.child=null,c.memoizedProps=null,c.memoizedState=null,c.updateQueue=null,c.dependencies=null):(c.childExpirationTime=l.childExpirationTime,c.expirationTime=l.expirationTime,c.child=l.child,c.memoizedProps=l.memoizedProps,c.memoizedState=l.memoizedState,c.updateQueue=l.updateQueue,s=l.dependencies,c.dependencies=null===s?null:{expirationTime:s.expirationTime,firstContext:s.firstContext,responders:s.responders}),o=o.sibling;ie(Vo,1&Vo.current|2),a=a.child;break n}s=s.sibling}}else{if(!c)if(null!==(s=Do(l))){if(a.effectTag|=64,c=!0,Yp(o,!0),null===o.tail&&"hidden"===o.tailMode){null!==(t=s.updateQueue)&&(a.updateQueue=t,a.effectTag|=4),null!==(a=a.lastEffect=o.lastEffect)&&(a.nextEffect=null);break}}else Ne()>o.tailExpiration&&1<t&&(a.effectTag|=64,c=!0,Yp(o,!1),a.expirationTime=a.childExpirationTime=t-1);o.isBackwards?(l.sibling=a.child,a.child=l):(null!==(t=o.last)?t.sibling=l:a.child=l,o.last=l)}if(null!==o.tail){0===o.tailExpiration&&(o.tailExpiration=Ne()+500),t=o.tail,o.rendering=t,o.tail=t.sibling,o.lastEffect=a.lastEffect,t.sibling=null,o=Vo.current,ie(Vo,o=c?1&o|2:1&o),a=t;break n}break;case 20:case 21:break;default:throw p(Error(156),a.tag)}a=null}if(t=Ec,1===Pc||1!==t.childExpirationTime){for(o=0,c=t.child;null!==c;)(s=c.expirationTime)>o&&(o=s),(l=c.childExpirationTime)>o&&(o=l),c=c.sibling;t.childExpirationTime=o}if(null!==a)return a;null!==n&&(2048&n.effectTag)===ma&&(null===n.firstEffect&&(n.firstEffect=Ec.firstEffect),null!==Ec.lastEffect&&(null!==n.lastEffect&&(n.lastEffect.nextEffect=Ec.firstEffect),n.lastEffect=Ec.lastEffect),1<Ec.effectTag&&(null!==n.lastEffect?n.lastEffect.nextEffect=Ec:n.firstEffect=Ec,n.lastEffect=Ec))}else{if(null!==(a=Xp(Ec)))return a.effectTag&=2047,a;null!==n&&(n.firstEffect=n.lastEffect=null,n.effectTag|=2048)}if(null!==(a=Ec.sibling))return a;Ec=n}while(null!==Ec);return zc===yc&&(zc=Ac),null}function Si(n){var a=n.expirationTime;return a>(n=n.childExpirationTime)?a:n}function xi(n){var a=Ve();return We(99,Ti.bind(null,n,a)),null}function Ti(n,a){if(Ai(),(Mc&(bc|vc))!==wc)throw p(Error(327));var s=n.finishedWork,t=n.finishedExpirationTime;if(null===s)return null;if(n.finishedWork=null,n.finishedExpirationTime=0,s===n.current)throw p(Error(177));n.callbackNode=null,n.callbackExpirationTime=0,n.callbackPriority=90,n.nextKnownPendingLevel=0;var e=Si(s);if(n.firstPendingTime=e,t<=n.lastSuspendedTime?n.firstSuspendedTime=n.lastSuspendedTime=n.nextKnownPendingLevel=0:t<=n.firstSuspendedTime&&(n.firstSuspendedTime=t-1),t<=n.lastPingedTime&&(n.lastPingedTime=0),t<=n.lastExpiredTime&&(n.lastExpiredTime=0),n===Hc&&(Ec=Hc=null,Pc=0),1<s.effectTag?null!==s.lastEffect?(s.lastEffect.nextEffect=s,e=s.firstEffect):e=s:e=s.firstEffect,null!==e){var o=Mc;Mc|=vc,fc.current=null,Qs=bs;var c=js();if(Us(c)){if("selectionStart"in c)var i={start:c.selectionStart,end:c.selectionEnd};else n:{var l=(i=(i=c.ownerDocument)&&i.defaultView||window).getSelection&&i.getSelection();if(l&&0!==l.rangeCount){i=l.anchorNode;var u=l.anchorOffset,r=l.focusNode;l=l.focusOffset;try{i.nodeType,r.nodeType}catch(O){i=null;break n}var d=0,h=-1,k=-1,g=0,f=0,w=c,m=null;a:for(;;){for(var b;w!==i||0!==u&&3!==w.nodeType||(h=d+u),w!==r||0!==l&&3!==w.nodeType||(k=d+l),3===w.nodeType&&(d+=w.nodeValue.length),null!==(b=w.firstChild);)m=w,w=b;for(;;){if(w===c)break a;if(m===i&&++g===u&&(h=d),m===r&&++f===l&&(k=d),null!==(b=w.nextSibling))break;m=(w=m).parentNode}w=b}i=-1===h||-1===k?null:{start:h,end:k}}else i=null}i=i||{start:0,end:0}}else i=null;Ys={focusedElem:c,selectionRange:i},bs=!1,Dc=e;do{try{Ci()}catch(O){if(null===Dc)throw p(Error(330));Hi(Dc,O),Dc=Dc.nextEffect}}while(null!==Dc);Dc=e;do{try{for(c=n,i=a;null!==Dc;){var v=Dc.effectTag;if(16&v&&Un(Dc.stateNode,""),128&v){var y=Dc.alternate;if(null!==y){var S=y.ref;null!==S&&("function"==typeof S?S(null):S.current=null)}}switch(v&(12|ba|va)){case ba:cc(Dc),Dc.effectTag&=~ba;break;case 6:cc(Dc),Dc.effectTag&=~ba,lc(Dc.alternate,Dc);break;case va:Dc.effectTag&=~va;break;case 1028:Dc.effectTag&=~va,lc(Dc.alternate,Dc);break;case 4:lc(Dc.alternate,Dc);break;case 8:ic(c,u=Dc,i),oc(u)}Dc=Dc.nextEffect}}catch(O){if(null===Dc)throw p(Error(330));Hi(Dc,O),Dc=Dc.nextEffect}}while(null!==Dc);if(S=Ys,y=js(),v=S.focusedElem,i=S.selectionRange,y!==v&&v&&v.ownerDocument&&function n(a,s){return!(!a||!s)&&(a===s||(!a||3!==a.nodeType)&&(s&&3===s.nodeType?n(a,s.parentNode):"contains"in a?a.contains(s):!!a.compareDocumentPosition&&!!(16&a.compareDocumentPosition(s))))}(v.ownerDocument.documentElement,v)){null!==i&&Us(v)&&(y=i.start,void 0===(S=i.end)&&(S=y),"selectionStart"in v?(v.selectionStart=y,v.selectionEnd=Math.min(S,v.value.length)):(S=(y=v.ownerDocument||document)&&y.defaultView||window).getSelection&&(S=S.getSelection(),u=v.textContent.length,c=Math.min(i.start,u),i=void 0===i.end?c:Math.min(i.end,u),!S.extend&&c>i&&(u=i,i=c,c=u),u=Ws(v,c),r=Ws(v,i),u&&r&&(1!==S.rangeCount||S.anchorNode!==u.node||S.anchorOffset!==u.offset||S.focusNode!==r.node||S.focusOffset!==r.offset)&&((y=y.createRange()).setStart(u.node,u.offset),S.removeAllRanges(),c>i?(S.addRange(y),S.extend(r.node,r.offset)):(y.setEnd(r.node,r.offset),S.addRange(y))))),y=[];for(S=v;S=S.parentNode;)1===S.nodeType&&y.push({element:S,left:S.scrollLeft,top:S.scrollTop});for("function"==typeof v.focus&&v.focus(),v=0;v<y.length;v++)(S=y[v]).element.scrollLeft=S.left,S.element.scrollTop=S.top}Ys=null,bs=!!Qs,Qs=null,n.current=s,Dc=e;do{try{for(v=t;null!==Dc;){var x=Dc.effectTag;if(36&x){var T=Dc.alternate;switch(S=v,(y=Dc).tag){case 0:case 11:case 15:tc(16,32,y);break;case 1:var C=y.stateNode;if(4&y.effectTag)if(null===T)C.componentDidMount();else{var A=y.elementType===y.type?T.memoizedProps:Fe(y.type,T.memoizedProps);C.componentDidUpdate(A,T.memoizedState,C.__reactInternalSnapshotBeforeUpdate)}var I=y.updateQueue;null!==I&&go(0,I,C);break;case 3:var M=y.updateQueue;if(null!==M){if(c=null,null!==y.child)switch(y.child.tag){case 5:c=y.child.stateNode;break;case 1:c=y.child.stateNode}go(0,M,c)}break;case 5:var H=y.stateNode;null===T&&4&y.effectTag&&(S=H,Xs(y.type,y.memoizedProps)&&S.focus());break;case 6:case 4:case 12:break;case 13:if(null===y.memoizedState){var E=y.alternate;if(null!==E){var P=E.memoizedState;if(null!==P){var z=P.dehydrated;null!==z&&wa(z)}}}break;case 19:case 17:case 20:case 21:break;default:throw p(Error(163))}}if(128&x){var B=(y=Dc).ref;if(null!==B){var K=y.stateNode;switch(y.tag){case 5:var q=K;break;default:q=K}"function"==typeof B?B(q):B.current=q}}Dc=Dc.nextEffect}}catch(O){if(null===Dc)throw p(Error(330));Hi(Dc,O),Dc=Dc.nextEffect}}while(null!==Dc);Dc=null,Ke(),Mc=o}else n.current=s;if(_c)_c=!1,Jc=n,Fc=a;else for(Dc=e;null!==Dc;)a=Dc.nextEffect,Dc.nextEffect=null,Dc=a;if(0===(a=n.firstPendingTime)&&(Uc=null),1073741823===a?n===Yc?Qc++:(Qc=0,Yc=n):Qc=0,"function"==typeof zi&&zi(s.stateNode,t),oi(n),Wc)throw Wc=!1,n=jc,jc=null,n;return(Mc&mc)!==wc?null:(_e(),null)}function Ci(){for(;null!==Dc;){var n=Dc.effectTag;(256&n)!==ma&&sc(Dc.alternate,Dc),(512&n)===ma||_c||(_c=!0,je(97,(function(){return Ai(),null}))),Dc=Dc.nextEffect}}function Ai(){if(90!==Fc){var n=97<Fc?97:Fc;return Fc=90,We(n,Ii)}}function Ii(){if(null===Jc)return!1;var n=Jc;if(Jc=null,(Mc&(bc|vc))!==wc)throw p(Error(331));var a=Mc;for(Mc|=vc,n=n.current.firstEffect;null!==n;){try{var s=n;if((512&s.effectTag)!==ma)switch(s.tag){case 0:case 11:case 15:tc(128,0,s),tc(0,64,s)}}catch(t){if(null===n)throw p(Error(330));Hi(n,t)}s=n.nextEffect,n.nextEffect=null,n=s}return Mc=a,_e(),!0}function Mi(n,a,s){lo(n,a=dc(n,a=Zp(s,a),1073741823)),null!==(n=ti(n,1073741823))&&oi(n)}function Hi(n,a){if(3===n.tag)Mi(n,n,a);else for(var s=n.return;null!==s;){if(3===s.tag){Mi(s,n,a);break}if(1===s.tag){var t=s.stateNode;if("function"==typeof s.type.getDerivedStateFromError||"function"==typeof t.componentDidCatch&&(null===Uc||!Uc.has(t))){lo(s,n=hc(s,n=Zp(a,n),1073741823)),null!==(s=ti(s,1073741823))&&oi(s);break}}s=s.return}}function Ei(n,a,s){var t=n.pingCache;null!==t&&t.delete(a),Hc===n&&Pc===s?zc===Cc||zc===Tc&&1073741823===Kc&&Ne()-Nc<Vc?hi(n,Pc):Lc=!0:ji(n,s)&&(0!==(a=n.lastPingedTime)&&a<s||(n.lastPingedTime=s,n.finishedExpirationTime===s&&(n.finishedExpirationTime=0,n.finishedWork=null),oi(n)))}function Pi(n,a){var s=n.stateNode;null!==s&&s.delete(a),1===(a=1)&&(a=$c(a=Zc(),n,null)),null!==(n=ti(n,a))&&oi(n)}ni=function(n,a,s){var t=a.expirationTime;if(null!==n){var e=a.pendingProps;if(n.memoizedProps!==e||re.current)Ep=!0;else{if(t<s){switch(Ep=!1,a.tag){case 3:Np(a),Mp();break;case 5:if(Lo(a),4&a.mode&&1!==s&&e.hidden)return a.expirationTime=a.childExpirationTime=1,null;break;case 1:ke(a.type)&&be(a);break;case 4:Oo(a,a.stateNode.containerInfo);break;case 10:$e(a,a.memoizedProps.value);break;case 13:if(null!==a.memoizedState)return 0!==(t=a.child.childExpirationTime)&&t>=s?_p(n,a,s):(ie(Vo,1&Vo.current),null!==(a=Gp(n,a,s))?a.sibling:null);ie(Vo,1&Vo.current);break;case 19:if(t=a.childExpirationTime>=s,(64&n.effectTag)!==ma){if(t)return Fp(n,a,s);a.effectTag|=64}if(null!==(e=a.memoizedState)&&(e.rendering=null,e.tail=null),ie(Vo,Vo.current),!t)return null}return Gp(n,a,s)}Ep=!1}}else Ep=!1;switch(a.expirationTime=0,a.tag){case 2:if(t=a.type,null!==n&&(n.alternate=null,a.alternate=null,a.effectTag|=ba),n=a.pendingProps,e=he(a,ue.current),so(a,s),e=op(null,a,t,n,e,s),a.effectTag|=1,"object"==typeof e&&null!==e&&"function"==typeof e.render&&void 0===e.$$typeof){if(a.tag=1,pp(),ke(t)){var o=!0;be(a)}else o=!1;a.memoizedState=null!==e.state&&void 0!==e.state?e.state:null;var c=t.getDerivedStateFromProps;"function"==typeof c&&bo(a,t,c,n),e.updater=vo,a.stateNode=e,e._reactInternalFiber=a,To(a,t,n,s),a=Lp(null,a,t,!0,o,s)}else a.tag=0,Pp(null,a,e,s),a=a.child;return a;case 16:if(e=a.elementType,null!==n&&(n.alternate=null,a.alternate=null,a.effectTag|=ba),n=a.pendingProps,function(n){if(-1===n._status){n._status=0;var a=n._ctor;a=a(),n._result=a,a.then((function(a){0===n._status&&(a=a.default,n._status=1,n._result=a)}),(function(a){0===n._status&&(n._status=2,n._result=a)}))}}(e),1!==e._status)throw e._result;switch(e=e._result,a.type=e,o=a.tag=function(n){if("function"==typeof n)return Oi(n)?1:0;if(null!=n){if((n=n.$$typeof)===U)return 11;if(n===F)return 14}return 2}(e),n=Fe(e,n),o){case 0:a=Op(null,a,e,n,s);break;case 1:a=Rp(null,a,e,n,s);break;case 11:a=zp(null,a,e,n,s);break;case 14:a=Bp(null,a,e,Fe(e.type,n),t,s);break;default:throw p(Error(306),e,"")}return a;case 0:return t=a.type,e=a.pendingProps,Op(n,a,t,e=a.elementType===t?e:Fe(t,e),s);case 1:return t=a.type,e=a.pendingProps,Rp(n,a,t,e=a.elementType===t?e:Fe(t,e),s);case 3:if(Np(a),null===(t=a.updateQueue))throw p(Error(282));if(e=null!==(e=a.memoizedState)?e.element:null,ko(a,t,a.pendingProps,null,s),(t=a.memoizedState.element)===e)Mp(),a=Gp(n,a,s);else{if((e=a.stateNode.hydrate)&&(yp=at(a.stateNode.containerInfo.firstChild),vp=a,e=Sp=!0),e)for(s=Eo(a,null,t,s),a.child=s;s;)s.effectTag=s.effectTag&~ba|va,s=s.sibling;else Pp(n,a,t,s),Mp();a=a.child}return a;case 5:return Lo(a),null===n&&Cp(a),t=a.type,e=a.pendingProps,o=null!==n?n.memoizedProps:null,c=e.children,Zs(t,e)?c=null:null!==o&&Zs(t,o)&&(a.effectTag|=16),qp(n,a),4&a.mode&&1!==s&&e.hidden?(a.expirationTime=a.childExpirationTime=1,a=null):(Pp(n,a,c,s),a=a.child),a;case 6:return null===n&&Cp(a),null;case 13:return _p(n,a,s);case 4:return Oo(a,a.stateNode.containerInfo),t=a.pendingProps,null===n?a.child=Ho(a,null,t,s):Pp(n,a,t,s),a.child;case 11:return t=a.type,e=a.pendingProps,zp(n,a,t,e=a.elementType===t?e:Fe(t,e),s);case 7:return Pp(n,a,a.pendingProps,s),a.child;case 8:case 12:return Pp(n,a,a.pendingProps.children,s),a.child;case 10:n:{if(t=a.type._context,e=a.pendingProps,c=a.memoizedProps,$e(a,o=e.value),null!==c){var i=c.value;if(0===(o=Gt(i,o)?0:0|("function"==typeof t._calculateChangedBits?t._calculateChangedBits(i,o):1073741823))){if(c.children===e.children&&!re.current){a=Gp(n,a,s);break n}}else for(null!==(i=a.child)&&(i.return=a);null!==i;){var l=i.dependencies;if(null!==l){c=i.child;for(var u=l.firstContext;null!==u;){if(u.context===t&&0!=(u.observedBits&o)){1===i.tag&&((u=co(s,null)).tag=2,lo(i,u)),i.expirationTime<s&&(i.expirationTime=s),null!==(u=i.alternate)&&u.expirationTime<s&&(u.expirationTime=s),ao(i.return,s),l.expirationTime<s&&(l.expirationTime=s);break}u=u.next}}else c=10===i.tag&&i.type===a.type?null:i.child;if(null!==c)c.return=i;else for(c=i;null!==c;){if(c===a){c=null;break}if(null!==(i=c.sibling)){i.return=c.return,c=i;break}c=c.return}i=c}}Pp(n,a,e.children,s),a=a.child}return a;case 9:return e=a.type,t=(o=a.pendingProps).children,so(a,s),t=t(e=to(e,o.unstable_observedBits)),a.effectTag|=1,Pp(n,a,t,s),a.child;case 14:return o=Fe(e=a.type,a.pendingProps),Bp(n,a,e,o=Fe(e.type,o),t,s);case 15:return Kp(n,a,a.type,a.pendingProps,t,s);case 17:return t=a.type,e=a.pendingProps,e=a.elementType===t?e:Fe(t,e),null!==n&&(n.alternate=null,a.alternate=null,a.effectTag|=ba),a.tag=1,ke(t)?(n=!0,be(a)):n=!1,so(a,s),So(a,t,e),To(a,t,e,s),Lp(null,a,t,!0,n,s);case 19:return Fp(n,a,s)}throw p(Error(156),a.tag)};var zi=null,Bi=null;function Ki(n,a,s,t){this.tag=n,this.key=s,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.ref=null,this.pendingProps=a,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=t,this.effectTag=ma,this.lastEffect=this.firstEffect=this.nextEffect=null,this.childExpirationTime=this.expirationTime=0,this.alternate=null}function qi(n,a,s,t){return new Ki(n,a,s,t)}function Oi(n){return!(!(n=n.prototype)||!n.isReactComponent)}function Ri(n,a){var s=n.alternate;return null===s?((s=qi(n.tag,a,n.key,n.mode)).elementType=n.elementType,s.type=n.type,s.stateNode=n.stateNode,s.alternate=n,n.alternate=s):(s.pendingProps=a,s.effectTag=ma,s.nextEffect=null,s.firstEffect=null,s.lastEffect=null),s.childExpirationTime=n.childExpirationTime,s.expirationTime=n.expirationTime,s.child=n.child,s.memoizedProps=n.memoizedProps,s.memoizedState=n.memoizedState,s.updateQueue=n.updateQueue,a=n.dependencies,s.dependencies=null===a?null:{expirationTime:a.expirationTime,firstContext:a.firstContext,responders:a.responders},s.sibling=n.sibling,s.index=n.index,s.ref=n.ref,s}function Li(n,a,s,t,e,o){var c=2;if(t=n,"function"==typeof n)Oi(n)&&(c=1);else if("string"==typeof n)c=5;else n:switch(n){case L:return Ni(s.children,e,o,a);case j:c=8,e|=7;break;case N:c=8,e|=1;break;case V:return(n=qi(12,s,a,8|e)).elementType=V,n.type=V,n.expirationTime=o,n;case _:return(n=qi(13,s,a,e)).type=_,n.elementType=_,n.expirationTime=o,n;case J:return(n=qi(19,s,a,e)).elementType=J,n.expirationTime=o,n;default:if("object"==typeof n&&null!==n)switch(n.$$typeof){case D:c=10;break n;case W:c=9;break n;case U:c=11;break n;case F:c=14;break n;case G:c=16,t=null;break n}throw p(Error(130),null==n?n:typeof n,"")}return(a=qi(c,s,a,e)).elementType=n,a.type=t,a.expirationTime=o,a}function Ni(n,a,s,t){return(n=qi(7,n,t,a)).expirationTime=s,n}function Vi(n,a,s){return(n=qi(6,n,null,a)).expirationTime=s,n}function Di(n,a,s){return(a=qi(4,null!==n.children?n.children:[],n.key,a)).expirationTime=s,a.stateNode={containerInfo:n.containerInfo,pendingChildren:null,implementation:n.implementation},a}function Wi(n,a,s){this.tag=a,this.current=null,this.containerInfo=n,this.pingCache=this.pendingChildren=null,this.finishedExpirationTime=0,this.finishedWork=null,this.timeoutHandle=-1,this.pendingContext=this.context=null,this.hydrate=s,this.callbackNode=this.firstBatch=null,this.callbackPriority=90,this.lastExpiredTime=this.lastPingedTime=this.nextKnownPendingLevel=this.lastSuspendedTime=this.firstSuspendedTime=this.firstPendingTime=0}function ji(n,a){var s=n.firstSuspendedTime;return n=n.lastSuspendedTime,0!==s&&s>=a&&n<=a}function Ui(n,a){var s=n.firstSuspendedTime,t=n.lastSuspendedTime;s<a&&(n.firstSuspendedTime=a),(t>a||0===s)&&(n.lastSuspendedTime=a),a<=n.lastPingedTime&&(n.lastPingedTime=0),a<=n.lastExpiredTime&&(n.lastExpiredTime=0)}function _i(n,a){a>n.firstPendingTime&&(n.firstPendingTime=a);var s=n.firstSuspendedTime;0!==s&&(a>=s?n.firstSuspendedTime=n.lastSuspendedTime=n.nextKnownPendingLevel=0:a>=n.lastSuspendedTime&&(n.lastSuspendedTime=a+1),a>n.nextKnownPendingLevel&&(n.nextKnownPendingLevel=a))}function Ji(n,a){var s=n.lastExpiredTime;(0===s||s>a)&&(n.lastExpiredTime=a)}function Fi(n,a,s,t,e,o){var c=a.current;n:if(s){a:{if(ya(s=s._reactInternalFiber)!==s||1!==s.tag)throw p(Error(170));var i=s;do{switch(i.tag){case 3:i=i.stateNode.context;break a;case 1:if(ke(i.type)){i=i.stateNode.__reactInternalMemoizedMergedChildContext;break a}}i=i.return}while(null!==i);throw p(Error(171))}if(1===s.tag){var l=s.type;if(ke(l)){s=me(s,l,i);break n}}s=i}else s=le;return null===a.context?a.context=s:a.pendingContext=s,a=o,(e=co(t,e)).payload={element:n},null!==(a=void 0===a?null:a)&&(e.callback=a),lo(c,e),si(c,t),t}function Gi(n,a,s,t){var e=a.current,o=Zc(),p=wo.suspense;return Fi(n,a,s,e=$c(o,e,p),p,t)}function Qi(n){if(!(n=n.current).child)return null;switch(n.child.tag){case 5:default:return n.child.stateNode}}function Yi(n){var a=1073741821-25*(1+((1073741821-Zc()+500)/25|0));a<=ai&&--a,this._expirationTime=ai=a,this._root=n,this._callbacks=this._next=null,this._hasChildren=this._didComplete=!1,this._children=null,this._defer=!0}function Xi(){this._callbacks=null,this._didCommit=!1,this._onCommit=this._onCommit.bind(this)}function Zi(n,a,s){var t=new Wi(n,a,s=null!=s&&!0===s.hydrate),e=qi(3,null,null,2===a?7:1===a?3:0);return t.current=e,e.stateNode=t,n[pt]=t.current,s&&0!==a&&function(n){var a=Hs(n);ia.forEach((function(s){Es(s,n,a)})),la.forEach((function(s){Es(s,n,a)}))}(9===n.nodeType?n:n.ownerDocument),t}function $i(n,a,s){this._internalRoot=Zi(n,a,s)}function nl(n,a){this._internalRoot=Zi(n,2,a)}function al(n){return!(!n||1!==n.nodeType&&9!==n.nodeType&&11!==n.nodeType&&(8!==n.nodeType||" react-mount-point-unstable "!==n.nodeValue))}function sl(n,a,s,t,e){var o=s._reactRootContainer;if(o){var p=o._internalRoot;if("function"==typeof e){var c=e;e=function(){var n=Qi(p);c.call(n)}}Gi(a,p,n,e)}else{if(o=s._reactRootContainer=function(n,a){if(a||(a=!(!(a=n?9===n.nodeType?n.documentElement:n.firstChild:null)||1!==a.nodeType||!a.hasAttribute("data-reactroot"))),!a)for(var s;s=n.lastChild;)n.removeChild(s);return new $i(n,0,a?{hydrate:!0}:void 0)}(s,t),p=o._internalRoot,"function"==typeof e){var i=e;e=function(){var n=Qi(p);i.call(n)}}di((function(){Gi(a,p,n,e)}))}return Qi(p)}function tl(n,a){var s=2<arguments.length&&void 0!==arguments[2]?arguments[2]:null;if(!al(a))throw p(Error(200));return function(n,a,s){var t=3<arguments.length&&void 0!==arguments[3]?arguments[3]:null;return{$$typeof:R,key:null==t?null:""+t,children:n,containerInfo:a,implementation:s}}(n,a,null,s)}nn=function(n,a,s){switch(a){case"input":if(En(n,s),a=s.name,"radio"===s.type&&null!=a){for(s=n;s.parentNode;)s=s.parentNode;for(s=s.querySelectorAll("input[name="+JSON.stringify(""+a)+'][type="radio"]'),a=0;a<s.length;a++){var t=s[a];if(t!==n&&t.form===n.form){var e=ut(t);if(!e)throw p(Error(90));An(t),En(t,e)}}}break;case"textarea":Rn(n,s);break;case"select":null!=(a=s.value)&&Kn(n,!!s.multiple,a,!1)}},Yi.prototype.render=function(n){if(!this._defer)throw p(Error(250));this._hasChildren=!0,this._children=n;var a=this._root._internalRoot,s=this._expirationTime,t=new Xi;return Fi(n,a,null,s,null,t._onCommit),t},Yi.prototype.then=function(n){if(this._didComplete)n();else{var a=this._callbacks;null===a&&(a=this._callbacks=[]),a.push(n)}},Yi.prototype.commit=function(){var n=this._root._internalRoot,a=n.firstBatch;if(!this._defer||null===a)throw p(Error(251));if(this._hasChildren){var s=this._expirationTime;if(a!==this){this._hasChildren&&(s=this._expirationTime=a._expirationTime,this.render(this._children));for(var t=null,e=a;e!==this;)t=e,e=e._next;if(null===t)throw p(Error(251));t._next=e._next,this._next=a,n.firstBatch=this}if(this._defer=!1,a=s,(Mc&(bc|vc))!==wc)throw p(Error(253));Ji(n,a),oi(n),_e(),a=this._next,this._next=null,null!==(a=n.firstBatch=a)&&a._hasChildren&&a.render(a._children)}else this._next=null,this._defer=!1},Yi.prototype._onComplete=function(){if(!this._didComplete){this._didComplete=!0;var n=this._callbacks;if(null!==n)for(var a=0;a<n.length;a++)(0,n[a])()}},Xi.prototype.then=function(n){if(this._didCommit)n();else{var a=this._callbacks;null===a&&(a=this._callbacks=[]),a.push(n)}},Xi.prototype._onCommit=function(){if(!this._didCommit){this._didCommit=!0;var n=this._callbacks;if(null!==n)for(var a=0;a<n.length;a++){var s=n[a];if("function"!=typeof s)throw p(Error(191),s);s()}}},nl.prototype.render=$i.prototype.render=function(n,a){var s=this._internalRoot,t=new Xi;return null!==(a=void 0===a?null:a)&&t.then(a),Gi(n,s,null,t._onCommit),t},nl.prototype.unmount=$i.prototype.unmount=function(n){var a=this._internalRoot,s=new Xi;return null!==(n=void 0===n?null:n)&&s.then(n),Gi(null,a,null,s._onCommit),s},nl.prototype.createBatch=function(){var n=new Yi(this),a=n._expirationTime,s=this._internalRoot,t=s.firstBatch;if(null===t)s.firstBatch=n,n._next=null;else{for(s=null;null!==t&&t._expirationTime>=a;)s=t,t=t._next;n._next=t,null!==s&&(s._next=n)}return n},pn=ui,cn=ri,ln=ii,un=function(n,a){var s=Mc;Mc|=2;try{return n(a)}finally{(Mc=s)===wc&&_e()}};var el,ol,pl={createPortal:tl,findDOMNode:function(n){if(null==n)n=null;else if(1!==n.nodeType){var a=n._reactInternalFiber;if(void 0===a){if("function"==typeof n.render)throw p(Error(188));throw p(Error(268),Object.keys(n))}n=null===(n=xa(a))?null:n.stateNode}return n},hydrate:function(n,a,s){if(!al(a))throw p(Error(200));return sl(null,n,a,!0,s)},render:function(n,a,s){if(!al(a))throw p(Error(200));return sl(null,n,a,!1,s)},unstable_renderSubtreeIntoContainer:function(n,a,s,t){if(!al(s))throw p(Error(200));if(null==n||void 0===n._reactInternalFiber)throw p(Error(38));return sl(n,a,s,!1,t)},unmountComponentAtNode:function(n){if(!al(n))throw p(Error(40));return!!n._reactRootContainer&&(di((function(){sl(null,null,n,!1,(function(){n._reactRootContainer=null}))})),!0)},unstable_createPortal:function(){return tl.apply(void 0,arguments)},unstable_batchedUpdates:ui,unstable_interactiveUpdates:function(n,a,s,t){return ii(),ri(n,a,s,t)},unstable_discreteUpdates:ri,unstable_flushDiscreteUpdates:ii,flushSync:function(n,a){if((Mc&(bc|vc))!==wc)throw p(Error(187));var s=Mc;Mc|=1;try{return We(99,n.bind(null,a))}finally{Mc=s,_e()}},unstable_createRoot:function(n,a){if(!al(n))throw p(Error(299),"unstable_createRoot");return new nl(n,a)},unstable_createSyncRoot:function(n,a){if(!al(n))throw p(Error(299),"unstable_createRoot");return new $i(n,1,a)},unstable_flushControlled:function(n){var a=Mc;Mc|=1;try{We(99,n)}finally{(Mc=a)===wc&&_e()}},__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED:{Events:[it,lt,ut,P.injectEventPluginsByName,d,Ea,function(n){I(n,Ha)},en,on,Cs,E,Ai,{current:!1}]}};ol=(el={findFiberByHostInstance:ct,bundleType:0,version:"16.10.2",rendererPackageName:"react-dom"}).findFiberByHostInstance,function(n){if("undefined"==typeof __REACT_DEVTOOLS_GLOBAL_HOOK__)return!1;var a=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(a.isDisabled||!a.supportsFiber)return!0;try{var s=a.inject(n);zi=function(n){try{a.onCommitFiberRoot(s,n,void 0,64==(64&n.current.effectTag))}catch(t){}},Bi=function(n){try{a.onCommitFiberUnmount(s,n)}catch(t){}}}catch(t){}}(e({},el,{overrideHookState:null,overrideProps:null,setSuspenseHandler:null,scheduleUpdate:null,currentDispatcherRef:B.ReactCurrentDispatcher,findHostInstanceByFiber:function(n){return null===(n=xa(n))?null:n.stateNode},findFiberByHostInstance:function(n){return ol?ol(n):null},findHostInstancesForRefresh:null,scheduleRefresh:null,scheduleRoot:null,setRefreshHandler:null,getCurrentFiber:null}));var cl={default:pl},il=cl&&pl||cl;n.exports=il.default||il},203:function(n,a,s){"use strict";n.exports=s(204)},204:function(n,a,s){"use strict";var t,e,o,p,c;if(s(81),s(2),Object.defineProperty(a,"__esModule",{value:!0}),"undefined"==typeof window||"function"!=typeof MessageChannel){var i=null,l=null,u=function n(){if(null!==i)try{var s=a.unstable_now();i(!0,s),i=null}catch(t){throw setTimeout(n,0),t}},r=Date.now();a.unstable_now=function(){return Date.now()-r},t=function(n){null!==i?setTimeout(t,0,n):(i=n,setTimeout(u,0))},e=function(n,a){l=setTimeout(n,a)},o=function(){clearTimeout(l)},p=function(){return!1},c=a.unstable_forceFrameRate=function(){}}else{var d=window.performance,h=window.Date,k=window.setTimeout,g=window.clearTimeout,f=window.requestAnimationFrame,w=window.cancelAnimationFrame;if("undefined"!=typeof console&&("function"!=typeof f&&console.error("This browser doesn't support requestAnimationFrame. Make sure that you load a polyfill in older browsers. https://fb.me/react-polyfills"),"function"!=typeof w&&console.error("This browser doesn't support cancelAnimationFrame. Make sure that you load a polyfill in older browsers. https://fb.me/react-polyfills")),"object"==typeof d&&"function"==typeof d.now)a.unstable_now=function(){return d.now()};else{var m=h.now();a.unstable_now=function(){return h.now()-m}}var b=!1,v=null,y=-1,S=5,x=0;p=function(){return a.unstable_now()>=x},c=function(){},a.unstable_forceFrameRate=function(n){0>n||125<n?console.error("forceFrameRate takes a positive int between 0 and 125, forcing framerates higher than 125 fps is not unsupported"):S=0<n?Math.floor(1e3/n):33.33};var T=new MessageChannel,C=T.port2;T.port1.onmessage=function(){if(null!==v){var n=a.unstable_now();x=n+S;try{v(!0,n)?C.postMessage(null):(b=!1,v=null)}catch(s){throw C.postMessage(null),s}}else b=!1},t=function(n){v=n,b||(b=!0,C.postMessage(null))},e=function(n,s){y=k((function(){n(a.unstable_now())}),s)},o=function(){g(y),y=-1}}function A(n,a){var s=n.length;n.push(a);n:for(;;){var t=Math.floor((s-1)/2),e=n[t];if(!(void 0!==e&&0<H(e,a)))break n;n[t]=a,n[s]=e,s=t}}function I(n){return void 0===(n=n[0])?null:n}function M(n){var a=n[0];if(void 0!==a){var s=n.pop();if(s!==a){n[0]=s;n:for(var t=0,e=n.length;t<e;){var o=2*(t+1)-1,p=n[o],c=o+1,i=n[c];if(void 0!==p&&0>H(p,s))void 0!==i&&0>H(i,p)?(n[t]=i,n[c]=s,t=c):(n[t]=p,n[o]=s,t=o);else{if(!(void 0!==i&&0>H(i,s)))break n;n[t]=i,n[c]=s,t=c}}}return a}return null}function H(n,a){var s=n.sortIndex-a.sortIndex;return 0!==s?s:n.id-a.id}var E=[],P=[],z=1,B=null,K=3,q=!1,O=!1,R=!1;function L(n){for(var a=I(P);null!==a;){if(null===a.callback)M(P);else{if(!(a.startTime<=n))break;M(P),a.sortIndex=a.expirationTime,A(E,a)}a=I(P)}}function N(n){if(R=!1,L(n),!O)if(null!==I(E))O=!0,t(V);else{var a=I(P);null!==a&&e(N,a.startTime-n)}}function V(n,s){O=!1,R&&(R=!1,o()),q=!0;var t=K;try{for(L(s),B=I(E);null!==B&&(!(B.expirationTime>s)||n&&!p());){var c=B.callback;if(null!==c){B.callback=null,K=B.priorityLevel;var i=c(B.expirationTime<=s);s=a.unstable_now(),"function"==typeof i?B.callback=i:B===I(E)&&M(E),L(s)}else M(E);B=I(E)}if(null!==B)var l=!0;else{var u=I(P);null!==u&&e(N,u.startTime-s),l=!1}return l}finally{B=null,K=t,q=!1}}function D(n){switch(n){case 1:return-1;case 2:return 250;case 5:return 1073741823;case 4:return 1e4;default:return 5e3}}var W=c;a.unstable_ImmediatePriority=1,a.unstable_UserBlockingPriority=2,a.unstable_NormalPriority=3,a.unstable_IdlePriority=5,a.unstable_LowPriority=4,a.unstable_runWithPriority=function(n,a){switch(n){case 1:case 2:case 3:case 4:case 5:break;default:n=3}var s=K;K=n;try{return a()}finally{K=s}},a.unstable_next=function(n){switch(K){case 1:case 2:case 3:var a=3;break;default:a=K}var s=K;K=a;try{return n()}finally{K=s}},a.unstable_scheduleCallback=function(n,s,p){var c=a.unstable_now();if("object"==typeof p&&null!==p){var i=p.delay;i="number"==typeof i&&0<i?c+i:c,p="number"==typeof p.timeout?p.timeout:D(n)}else p=D(n),i=c;return n={id:z++,callback:s,priorityLevel:n,startTime:i,expirationTime:p=i+p,sortIndex:-1},i>c?(n.sortIndex=i,A(P,n),null===I(E)&&n===I(P)&&(R?o():R=!0,e(N,i-c))):(n.sortIndex=p,A(E,n),O||q||(O=!0,t(V))),n},a.unstable_cancelCallback=function(n){n.callback=null},a.unstable_wrapCallback=function(n){var a=K;return function(){var s=K;K=a;try{return n.apply(this,arguments)}finally{K=s}}},a.unstable_getCurrentPriorityLevel=function(){return K},a.unstable_shouldYield=function(){var n=a.unstable_now();L(n);var s=I(E);return s!==B&&null!==B&&null!==s&&null!==s.callback&&s.startTime<=n&&s.expirationTime<B.expirationTime||p()},a.unstable_requestPaint=W,a.unstable_continueExecution=function(){O||q||(O=!0,t(V))},a.unstable_pauseExecution=function(){},a.unstable_getFirstCallbackNode=function(){return I(E)},a.unstable_Profiling=null},216:function(n,a,s){"use strict";function t(n){return n&&"object"==typeof n&&"default"in n?n.default:n}s(26),s(32),s(63),s(54),s(2);var e=s(0),o=t(e),p=t(s(217));function c(n,a,s){return a in n?Object.defineProperty(n,a,{value:s,enumerable:!0,configurable:!0,writable:!0}):n[a]=s,n}var i=!("undefined"==typeof window||!window.document||!window.document.createElement);n.exports=function(n,a,s){if("function"!=typeof n)throw new Error("Expected reducePropsToState to be a function.");if("function"!=typeof a)throw new Error("Expected handleStateChangeOnClient to be a function.");if(void 0!==s&&"function"!=typeof s)throw new Error("Expected mapStateOnServer to either be undefined or a function.");return function(t){if("function"!=typeof t)throw new Error("Expected WrappedComponent to be a React component.");var l,u=[];function r(){l=n(u.map((function(n){return n.props}))),d.canUseDOM?a(l):s&&(l=s(l))}var d=function(n){var a,s;function e(){return n.apply(this,arguments)||this}s=n,(a=e).prototype=Object.create(s.prototype),a.prototype.constructor=a,a.__proto__=s,e.peek=function(){return l},e.rewind=function(){if(e.canUseDOM)throw new Error("You may only call rewind() on the server. Call peek() to read the current state.");var n=l;return l=void 0,u=[],n};var c=e.prototype;return c.shouldComponentUpdate=function(n){return!p(n,this.props)},c.componentWillMount=function(){u.push(this),r()},c.componentDidUpdate=function(){r()},c.componentWillUnmount=function(){var n=u.indexOf(this);u.splice(n,1),r()},c.render=function(){return o.createElement(t,this.props)},e}(e.Component);return c(d,"displayName","SideEffect("+function(n){return n.displayName||n.name||"Component"}(t)+")"),c(d,"canUseDOM",i),d}}},217:function(n,a,s){s(68),s(16),s(14),s(6),s(21),n.exports=function(n,a,s,t){var e=s?s.call(t,n,a):void 0;if(void 0!==e)return!!e;if(n===a)return!0;if("object"!=typeof n||!n||"object"!=typeof a||!a)return!1;var o=Object.keys(n),p=Object.keys(a);if(o.length!==p.length)return!1;for(var c=Object.prototype.hasOwnProperty.bind(a),i=0;i<o.length;i++){var l=o[i];if(!c(l))return!1;var u=n[l],r=a[l];if(!1===(e=s?s.call(t,u,r,l):void 0)||void 0===e&&u!==r)return!1}return!0}},218:function(n,a,s){"use strict";s(63),s(120),s(49),s(61),s(219),s(16),s(14),s(6),s(21),s(50);var t=Array.isArray,e=Object.keys,o=Object.prototype.hasOwnProperty,p="undefined"!=typeof Element;n.exports=function(n,a){try{return function n(a,s){if(a===s)return!0;if(a&&s&&"object"==typeof a&&"object"==typeof s){var c,i,l,u=t(a),r=t(s);if(u&&r){if((i=a.length)!=s.length)return!1;for(c=i;0!=c--;)if(!n(a[c],s[c]))return!1;return!0}if(u!=r)return!1;var d=a instanceof Date,h=s instanceof Date;if(d!=h)return!1;if(d&&h)return a.getTime()==s.getTime();var k=a instanceof RegExp,g=s instanceof RegExp;if(k!=g)return!1;if(k&&g)return a.toString()==s.toString();var f=e(a);if((i=f.length)!==e(s).length)return!1;for(c=i;0!=c--;)if(!o.call(s,f[c]))return!1;if(p&&a instanceof Element&&s instanceof Element)return a===s;for(c=i;0!=c--;)if(!("_owner"===(l=f[c])&&a.$$typeof||n(a[l],s[l])))return!1;return!0}return a!=a&&s!=s}(n,a)}catch(s){if(s.message&&s.message.match(/stack|recursion/i)||-2146828260===s.number)return console.warn("Warning: react-fast-compare does not handle circular references.",s.name,s.message),!1;throw s}}},219:function(n,a,s){var t=s(7),e=s(142),o=s(15).f,p=s(100).f,c=s(102),i=s(73),l=t.RegExp,u=l,r=l.prototype,d=/a/g,h=/a/g,k=new l(d)!==d;if(s(13)&&(!k||s(12)((function(){return h[s(5)("match")]=!1,l(d)!=d||l(h)==h||"/a/i"!=l(d,"i")})))){l=function(n,a){var s=this instanceof l,t=c(n),o=void 0===a;return!s&&t&&n.constructor===l&&o?n:e(k?new u(t&&!o?n.source:n,a):u((t=n instanceof l)?n.source:n,t&&o?i.call(n):a),s?this:r,l)};for(var g=function(n){n in l||o(l,n,{configurable:!0,get:function(){return u[n]},set:function(a){u[n]=a}})},f=p(u),w=0;f.length>w;)g(f[w++]);r.constructor=l,l.prototype=r,s(17)(t,"RegExp",l)}s(95)("RegExp")},220:function(n,a,s){(function(n){s(112),s(37),s(81),s(38),s(50),s(26),s(16),s(14),s(6),s(21),s(51),s(32),s(106),s(22),s(20),s(36),s(31),a.__esModule=!0,a.warn=a.requestAnimationFrame=a.reducePropsToState=a.mapStateOnServer=a.handleClientStateChange=a.convertReactPropstoHtmlAttributes=void 0;var t="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(n){return typeof n}:function(n){return n&&"function"==typeof Symbol&&n.constructor===Symbol&&n!==Symbol.prototype?"symbol":typeof n},e=Object.assign||function(n){for(var a=1;a<arguments.length;a++){var s=arguments[a];for(var t in s)Object.prototype.hasOwnProperty.call(s,t)&&(n[t]=s[t])}return n},o=i(s(0)),p=i(s(101)),c=s(147);function i(n){return n&&n.__esModule?n:{default:n}}var l,u=function(n){var a=!(arguments.length>1&&void 0!==arguments[1])||arguments[1];return!1===a?String(n):String(n).replace(/&/g,"&amp;").replace(/</g,"&lt;").replace(/>/g,"&gt;").replace(/"/g,"&quot;").replace(/'/g,"&#x27;")},r=function(n){var a=f(n,c.TAG_NAMES.TITLE),s=f(n,c.HELMET_PROPS.TITLE_TEMPLATE);if(s&&a)return s.replace(/%s/g,(function(){return a}));var t=f(n,c.HELMET_PROPS.DEFAULT_TITLE);return a||t||void 0},d=function(n){return f(n,c.HELMET_PROPS.ON_CHANGE_CLIENT_STATE)||function(){}},h=function(n,a){return a.filter((function(a){return void 0!==a[n]})).map((function(a){return a[n]})).reduce((function(n,a){return e({},n,a)}),{})},k=function(n,a){return a.filter((function(n){return void 0!==n[c.TAG_NAMES.BASE]})).map((function(n){return n[c.TAG_NAMES.BASE]})).reverse().reduce((function(a,s){if(!a.length)for(var t=Object.keys(s),e=0;e<t.length;e++){var o=t[e].toLowerCase();if(-1!==n.indexOf(o)&&s[o])return a.concat(s)}return a}),[])},g=function(n,a,s){var e={};return s.filter((function(a){return!!Array.isArray(a[n])||(void 0!==a[n]&&y("Helmet: "+n+' should be of type "Array". Instead found type "'+t(a[n])+'"'),!1)})).map((function(a){return a[n]})).reverse().reduce((function(n,s){var t={};s.filter((function(n){for(var s=void 0,o=Object.keys(n),p=0;p<o.length;p++){var i=o[p],l=i.toLowerCase();-1===a.indexOf(l)||s===c.TAG_PROPERTIES.REL&&"canonical"===n[s].toLowerCase()||l===c.TAG_PROPERTIES.REL&&"stylesheet"===n[l].toLowerCase()||(s=l),-1===a.indexOf(i)||i!==c.TAG_PROPERTIES.INNER_HTML&&i!==c.TAG_PROPERTIES.CSS_TEXT&&i!==c.TAG_PROPERTIES.ITEM_PROP||(s=i)}if(!s||!n[s])return!1;var u=n[s].toLowerCase();return e[s]||(e[s]={}),t[s]||(t[s]={}),!e[s][u]&&(t[s][u]=!0,!0)})).reverse().forEach((function(a){return n.push(a)}));for(var o=Object.keys(t),i=0;i<o.length;i++){var l=o[i],u=(0,p.default)({},e[l],t[l]);e[l]=u}return n}),[]).reverse()},f=function(n,a){for(var s=n.length-1;s>=0;s--){var t=n[s];if(t.hasOwnProperty(a))return t[a]}return null},w=(l=Date.now(),function(n){var a=Date.now();a-l>16?(l=a,n(a)):setTimeout((function(){w(n)}),0)}),m=function(n){return clearTimeout(n)},b="undefined"!=typeof window?window.requestAnimationFrame||window.webkitRequestAnimationFrame||window.mozRequestAnimationFrame||w:n.requestAnimationFrame||w,v="undefined"!=typeof window?window.cancelAnimationFrame||window.webkitCancelAnimationFrame||window.mozCancelAnimationFrame||m:n.cancelAnimationFrame||m,y=function(n){return console&&"function"==typeof console.warn&&console.warn(n)},S=null,x=function(n,a){var s=n.baseTag,t=n.bodyAttributes,e=n.htmlAttributes,o=n.linkTags,p=n.metaTags,i=n.noscriptTags,l=n.onChangeClientState,u=n.scriptTags,r=n.styleTags,d=n.title,h=n.titleAttributes;A(c.TAG_NAMES.BODY,t),A(c.TAG_NAMES.HTML,e),C(d,h);var k={baseTag:I(c.TAG_NAMES.BASE,s),linkTags:I(c.TAG_NAMES.LINK,o),metaTags:I(c.TAG_NAMES.META,p),noscriptTags:I(c.TAG_NAMES.NOSCRIPT,i),scriptTags:I(c.TAG_NAMES.SCRIPT,u),styleTags:I(c.TAG_NAMES.STYLE,r)},g={},f={};Object.keys(k).forEach((function(n){var a=k[n],s=a.newTags,t=a.oldTags;s.length&&(g[n]=s),t.length&&(f[n]=k[n].oldTags)})),a&&a(),l(n,g,f)},T=function(n){return Array.isArray(n)?n.join(""):n},C=function(n,a){void 0!==n&&document.title!==n&&(document.title=T(n)),A(c.TAG_NAMES.TITLE,a)},A=function(n,a){var s=document.getElementsByTagName(n)[0];if(s){for(var t=s.getAttribute(c.HELMET_ATTRIBUTE),e=t?t.split(","):[],o=[].concat(e),p=Object.keys(a),i=0;i<p.length;i++){var l=p[i],u=a[l]||"";s.getAttribute(l)!==u&&s.setAttribute(l,u),-1===e.indexOf(l)&&e.push(l);var r=o.indexOf(l);-1!==r&&o.splice(r,1)}for(var d=o.length-1;d>=0;d--)s.removeAttribute(o[d]);e.length===o.length?s.removeAttribute(c.HELMET_ATTRIBUTE):s.getAttribute(c.HELMET_ATTRIBUTE)!==p.join(",")&&s.setAttribute(c.HELMET_ATTRIBUTE,p.join(","))}},I=function(n,a){var s=document.head||document.querySelector(c.TAG_NAMES.HEAD),t=s.querySelectorAll(n+"["+c.HELMET_ATTRIBUTE+"]"),e=Array.prototype.slice.call(t),o=[],p=void 0;return a&&a.length&&a.forEach((function(a){var s=document.createElement(n);for(var t in a)if(a.hasOwnProperty(t))if(t===c.TAG_PROPERTIES.INNER_HTML)s.innerHTML=a.innerHTML;else if(t===c.TAG_PROPERTIES.CSS_TEXT)s.styleSheet?s.styleSheet.cssText=a.cssText:s.appendChild(document.createTextNode(a.cssText));else{var i=void 0===a[t]?"":a[t];s.setAttribute(t,i)}s.setAttribute(c.HELMET_ATTRIBUTE,"true"),e.some((function(n,a){return p=a,s.isEqualNode(n)}))?e.splice(p,1):o.push(s)})),e.forEach((function(n){return n.parentNode.removeChild(n)})),o.forEach((function(n){return s.appendChild(n)})),{oldTags:e,newTags:o}},M=function(n){return Object.keys(n).reduce((function(a,s){var t=void 0!==n[s]?s+'="'+n[s]+'"':""+s;return a?a+" "+t:t}),"")},H=function(n){var a=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};return Object.keys(n).reduce((function(a,s){return a[c.REACT_TAG_MAP[s]||s]=n[s],a}),a)},E=function(n,a,s){switch(n){case c.TAG_NAMES.TITLE:return{toComponent:function(){return n=a.title,s=a.titleAttributes,(t={key:n})[c.HELMET_ATTRIBUTE]=!0,e=H(s,t),[o.default.createElement(c.TAG_NAMES.TITLE,e,n)];var n,s,t,e},toString:function(){return function(n,a,s,t){var e=M(s),o=T(a);return e?"<"+n+" "+c.HELMET_ATTRIBUTE+'="true" '+e+">"+u(o,t)+"</"+n+">":"<"+n+" "+c.HELMET_ATTRIBUTE+'="true">'+u(o,t)+"</"+n+">"}(n,a.title,a.titleAttributes,s)}};case c.ATTRIBUTE_NAMES.BODY:case c.ATTRIBUTE_NAMES.HTML:return{toComponent:function(){return H(a)},toString:function(){return M(a)}};default:return{toComponent:function(){return function(n,a){return a.map((function(a,s){var t,e=((t={key:s})[c.HELMET_ATTRIBUTE]=!0,t);return Object.keys(a).forEach((function(n){var s=c.REACT_TAG_MAP[n]||n;if(s===c.TAG_PROPERTIES.INNER_HTML||s===c.TAG_PROPERTIES.CSS_TEXT){var t=a.innerHTML||a.cssText;e.dangerouslySetInnerHTML={__html:t}}else e[s]=a[n]})),o.default.createElement(n,e)}))}(n,a)},toString:function(){return function(n,a,s){return a.reduce((function(a,t){var e=Object.keys(t).filter((function(n){return!(n===c.TAG_PROPERTIES.INNER_HTML||n===c.TAG_PROPERTIES.CSS_TEXT)})).reduce((function(n,a){var e=void 0===t[a]?a:a+'="'+u(t[a],s)+'"';return n?n+" "+e:e}),""),o=t.innerHTML||t.cssText||"",p=-1===c.SELF_CLOSING_TAGS.indexOf(n);return a+"<"+n+" "+c.HELMET_ATTRIBUTE+'="true" '+e+(p?"/>":">"+o+"</"+n+">")}),"")}(n,a,s)}}}};a.convertReactPropstoHtmlAttributes=function(n){var a=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};return Object.keys(n).reduce((function(a,s){return a[c.HTML_TAG_MAP[s]||s]=n[s],a}),a)},a.handleClientStateChange=function(n){S&&v(S),n.defer?S=b((function(){x(n,(function(){S=null}))})):(x(n),S=null)},a.mapStateOnServer=function(n){var a=n.baseTag,s=n.bodyAttributes,t=n.encode,e=n.htmlAttributes,o=n.linkTags,p=n.metaTags,i=n.noscriptTags,l=n.scriptTags,u=n.styleTags,r=n.title,d=void 0===r?"":r,h=n.titleAttributes;return{base:E(c.TAG_NAMES.BASE,a,t),bodyAttributes:E(c.ATTRIBUTE_NAMES.BODY,s,t),htmlAttributes:E(c.ATTRIBUTE_NAMES.HTML,e,t),link:E(c.TAG_NAMES.LINK,o,t),meta:E(c.TAG_NAMES.META,p,t),noscript:E(c.TAG_NAMES.NOSCRIPT,i,t),script:E(c.TAG_NAMES.SCRIPT,l,t),style:E(c.TAG_NAMES.STYLE,u,t),title:E(c.TAG_NAMES.TITLE,{title:d,titleAttributes:h},t)}},a.reducePropsToState=function(n){return{baseTag:k([c.TAG_PROPERTIES.HREF],n),bodyAttributes:h(c.ATTRIBUTE_NAMES.BODY,n),defer:f(n,c.HELMET_PROPS.DEFER),encode:f(n,c.HELMET_PROPS.ENCODE_SPECIAL_CHARACTERS),htmlAttributes:h(c.ATTRIBUTE_NAMES.HTML,n),linkTags:g(c.TAG_NAMES.LINK,[c.TAG_PROPERTIES.REL,c.TAG_PROPERTIES.HREF],n),metaTags:g(c.TAG_NAMES.META,[c.TAG_PROPERTIES.NAME,c.TAG_PROPERTIES.CHARSET,c.TAG_PROPERTIES.HTTPEQUIV,c.TAG_PROPERTIES.PROPERTY,c.TAG_PROPERTIES.ITEM_PROP],n),noscriptTags:g(c.TAG_NAMES.NOSCRIPT,[c.TAG_PROPERTIES.INNER_HTML],n),onChangeClientState:d(n),scriptTags:g(c.TAG_NAMES.SCRIPT,[c.TAG_PROPERTIES.SRC,c.TAG_PROPERTIES.INNER_HTML],n),styleTags:g(c.TAG_NAMES.STYLE,[c.TAG_PROPERTIES.CSS_TEXT],n),title:r(n),titleAttributes:h(c.ATTRIBUTE_NAMES.TITLE,n)}},a.requestAnimationFrame=b,a.warn=y}).call(this,s(221))},221:function(n,a){var s;s=function(){return this}();try{s=s||new Function("return this")()}catch(t){"object"==typeof window&&(s=window)}n.exports=s},222:function(n,a,s){"use strict";s(2),Object.defineProperty(a,"__esModule",{value:!0});var t=function(){function n(n,a){for(var s=0;s<a.length;s++){var t=a[s];t.enumerable=t.enumerable||!1,t.configurable=!0,"value"in t&&(t.writable=!0),Object.defineProperty(n,t.key,t)}}return function(a,s,t){return s&&n(a.prototype,s),t&&n(a,t),a}}();a.AllSubstringsIndexStrategy=function(){function n(){!function(n,a){if(!(n instanceof a))throw new TypeError("Cannot call a class as a function")}(this,n)}return t(n,[{key:"expandToken",value:function(n){for(var a,s=[],t=0,e=n.length;t<e;++t){a="";for(var o=t;o<e;++o)a+=n.charAt(o),s.push(a)}return s}}]),n}()},223:function(n,a,s){"use strict";s(2),Object.defineProperty(a,"__esModule",{value:!0});var t=function(){function n(n,a){for(var s=0;s<a.length;s++){var t=a[s];t.enumerable=t.enumerable||!1,t.configurable=!0,"value"in t&&(t.writable=!0),Object.defineProperty(n,t.key,t)}}return function(a,s,t){return s&&n(a.prototype,s),t&&n(a,t),a}}();a.ExactWordIndexStrategy=function(){function n(){!function(n,a){if(!(n instanceof a))throw new TypeError("Cannot call a class as a function")}(this,n)}return t(n,[{key:"expandToken",value:function(n){return n?[n]:[]}}]),n}()},224:function(n,a,s){"use strict";s(2),Object.defineProperty(a,"__esModule",{value:!0});var t=function(){function n(n,a){for(var s=0;s<a.length;s++){var t=a[s];t.enumerable=t.enumerable||!1,t.configurable=!0,"value"in t&&(t.writable=!0),Object.defineProperty(n,t.key,t)}}return function(a,s,t){return s&&n(a.prototype,s),t&&n(a,t),a}}();a.PrefixIndexStrategy=function(){function n(){!function(n,a){if(!(n instanceof a))throw new TypeError("Cannot call a class as a function")}(this,n)}return t(n,[{key:"expandToken",value:function(n){for(var a=[],s="",t=0,e=n.length;t<e;++t)s+=n.charAt(t),a.push(s);return a}}]),n}()},225:function(n,a,s){"use strict";s(85),s(2),Object.defineProperty(a,"__esModule",{value:!0});var t=function(){function n(n,a){for(var s=0;s<a.length;s++){var t=a[s];t.enumerable=t.enumerable||!1,t.configurable=!0,"value"in t&&(t.writable=!0),Object.defineProperty(n,t.key,t)}}return function(a,s,t){return s&&n(a.prototype,s),t&&n(a,t),a}}();a.CaseSensitiveSanitizer=function(){function n(){!function(n,a){if(!(n instanceof a))throw new TypeError("Cannot call a class as a function")}(this,n)}return t(n,[{key:"sanitize",value:function(n){return n?n.trim():""}}]),n}()},226:function(n,a,s){"use strict";s(85),s(2),Object.defineProperty(a,"__esModule",{value:!0});var t=function(){function n(n,a){for(var s=0;s<a.length;s++){var t=a[s];t.enumerable=t.enumerable||!1,t.configurable=!0,"value"in t&&(t.writable=!0),Object.defineProperty(n,t.key,t)}}return function(a,s,t){return s&&n(a.prototype,s),t&&n(a,t),a}}();a.LowerCaseSanitizer=function(){function n(){!function(n,a){if(!(n instanceof a))throw new TypeError("Cannot call a class as a function")}(this,n)}return t(n,[{key:"sanitize",value:function(n){return n?n.toLocaleLowerCase().trim():""}}]),n}()},227:function(n,a,s){"use strict";s(138),s(16),s(14),s(6),s(21),s(36),s(31),s(2),Object.defineProperty(a,"__esModule",{value:!0}),a.TfIdfSearchIndex=void 0;var t,e="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(n){return typeof n}:function(n){return n&&"function"==typeof Symbol&&n.constructor===Symbol&&n!==Symbol.prototype?"symbol":typeof n},o=function(){function n(n,a){for(var s=0;s<a.length;s++){var t=a[s];t.enumerable=t.enumerable||!1,t.configurable=!0,"value"in t&&(t.writable=!0),Object.defineProperty(n,t.key,t)}}return function(a,s,t){return s&&n(a.prototype,s),t&&n(a,t),a}}(),p=s(149),c=(t=p)&&t.__esModule?t:{default:t};a.TfIdfSearchIndex=function(){function n(a){!function(n,a){if(!(n instanceof a))throw new TypeError("Cannot call a class as a function")}(this,n),this._uidFieldName=a,this._tokenToIdfCache={},this._tokenMap={}}return o(n,[{key:"indexDocument",value:function(n,a,s){this._tokenToIdfCache={};var t,o=this._tokenMap;"object"!==e(o[n])?o[n]=t={$numDocumentOccurrences:0,$totalNumOccurrences:1,$uidMap:{}}:(t=o[n]).$totalNumOccurrences++;var p=t.$uidMap;"object"!==e(p[a])?(t.$numDocumentOccurrences++,p[a]={$document:s,$numTokenOccurrences:1}):p[a].$numTokenOccurrences++}},{key:"search",value:function(n,a){for(var s={},t=0,o=n.length;t<o;t++){var p=n[t],c=this._tokenMap[p];if(!c)return[];if(0===t)for(var i=0,l=(u=Object.keys(c.$uidMap)).length;i<l;i++){s[r=u[i]]=c.$uidMap[r].$document}else{var u;for(i=0,l=(u=Object.keys(s)).length;i<l;i++){var r=u[i];"object"!==e(c.$uidMap[r])&&delete s[r]}}}var d=[];for(var r in s)d.push(s[r]);var h=this._createCalculateTfIdf();return d.sort((function(s,t){return h(n,t,a)-h(n,s,a)}))}},{key:"_createCalculateIdf",value:function(){var n=this._tokenMap,a=this._tokenToIdfCache;return function(s,t){if(!a[s]){var e=void 0!==n[s]?n[s].$numDocumentOccurrences:0;a[s]=1+Math.log(t.length/(1+e))}return a[s]}}},{key:"_createCalculateTfIdf",value:function(){var n=this._tokenMap,a=this._uidFieldName,s=this._createCalculateIdf();return function(t,e,o){for(var p=0,i=0,l=t.length;i<l;++i){var u,r=t[i],d=s(r,o);d===1/0&&(d=0),u=a instanceof Array?e&&(0,c.default)(e,a):e&&e[a],p+=(void 0!==n[r]&&void 0!==n[r].$uidMap[u]?n[r].$uidMap[u].$numTokenOccurrences:0)*d}return p}}}]),n}()},228:function(n,a,s){"use strict";s(16),s(14),s(6),s(21),s(36),s(31),s(2),Object.defineProperty(a,"__esModule",{value:!0});var t="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(n){return typeof n}:function(n){return n&&"function"==typeof Symbol&&n.constructor===Symbol&&n!==Symbol.prototype?"symbol":typeof n},e=function(){function n(n,a){for(var s=0;s<a.length;s++){var t=a[s];t.enumerable=t.enumerable||!1,t.configurable=!0,"value"in t&&(t.writable=!0),Object.defineProperty(n,t.key,t)}}return function(a,s,t){return s&&n(a.prototype,s),t&&n(a,t),a}}();a.UnorderedSearchIndex=function(){function n(){!function(n,a){if(!(n instanceof a))throw new TypeError("Cannot call a class as a function")}(this,n),this._tokenToUidToDocumentMap={}}return e(n,[{key:"indexDocument",value:function(n,a,s){"object"!==t(this._tokenToUidToDocumentMap[n])&&(this._tokenToUidToDocumentMap[n]={}),this._tokenToUidToDocumentMap[n][a]=s}},{key:"search",value:function(n,a){for(var s={},e=this._tokenToUidToDocumentMap,o=0,p=n.length;o<p;o++){var c=e[n[o]];if(!c)return[];if(0===o)for(var i=0,l=(r=Object.keys(c)).length;i<l;i++){s[u=r[i]]=c[u]}else for(i=0,l=(r=Object.keys(s)).length;i<l;i++){var u=r[i];"object"!==t(c[u])&&delete s[u]}}var r,d=[];for(o=0,l=(r=Object.keys(s)).length;o<l;o++){u=r[o];d.push(s[u])}return d}}]),n}()},229:function(n,a,s){"use strict";s(37),s(51),s(2),Object.defineProperty(a,"__esModule",{value:!0});var t=function(){function n(n,a){for(var s=0;s<a.length;s++){var t=a[s];t.enumerable=t.enumerable||!1,t.configurable=!0,"value"in t&&(t.writable=!0),Object.defineProperty(n,t.key,t)}}return function(a,s,t){return s&&n(a.prototype,s),t&&n(a,t),a}}();var e=/[^a-zа-яё0-9\-']+/i;a.SimpleTokenizer=function(){function n(){!function(n,a){if(!(n instanceof a))throw new TypeError("Cannot call a class as a function")}(this,n)}return t(n,[{key:"tokenize",value:function(n){return n.split(e).filter((function(n){return n}))}}]),n}()},23:function(n,a,s){n.exports={header:"header-module--header--2Q3RK",homeLink:"header-module--home-link--15xnn",logoSection:"header-module--logo-section--3Q8-7",headerImage:"header-module--header-image--t_wFI",headerNav:"header-module--header-nav--JLMri",navLink:"header-module--nav-link--2jqj3",socialNav:"header-module--social-nav--3LS55",socialIcon:"header-module--social-icon--iQP_n"}},230:function(n,a,s){"use strict";s(32),s(2),Object.defineProperty(a,"__esModule",{value:!0});var t=function(){function n(n,a){for(var s=0;s<a.length;s++){var t=a[s];t.enumerable=t.enumerable||!1,t.configurable=!0,"value"in t&&(t.writable=!0),Object.defineProperty(n,t.key,t)}}return function(a,s,t){return s&&n(a.prototype,s),t&&n(a,t),a}}();a.StemmingTokenizer=function(){function n(a,s){!function(n,a){if(!(n instanceof a))throw new TypeError("Cannot call a class as a function")}(this,n),this._stemmingFunction=a,this._tokenizer=s}return t(n,[{key:"tokenize",value:function(n){return this._tokenizer.tokenize(n).map(this._stemmingFunction)}}]),n}()},231:function(n,a,s){"use strict";s(51),s(2),Object.defineProperty(a,"__esModule",{value:!0}),a.StopWordsTokenizer=void 0;var t=function(){function n(n,a){for(var s=0;s<a.length;s++){var t=a[s];t.enumerable=t.enumerable||!1,t.configurable=!0,"value"in t&&(t.writable=!0),Object.defineProperty(n,t.key,t)}}return function(a,s,t){return s&&n(a.prototype,s),t&&n(a,t),a}}(),e=s(151);a.StopWordsTokenizer=function(){function n(a){!function(n,a){if(!(n instanceof a))throw new TypeError("Cannot call a class as a function")}(this,n),this._tokenizer=a}return t(n,[{key:"tokenize",value:function(n){return this._tokenizer.tokenize(n).filter((function(n){return!e.StopWordsMap[n]}))}}]),n}()},232:function(n,a,s){"use strict";s(49),s(61),s(6),s(86),s(2),Object.defineProperty(a,"__esModule",{value:!0}),a.Search=void 0;var t,e=function(){function n(n,a){for(var s=0;s<a.length;s++){var t=a[s];t.enumerable=t.enumerable||!1,t.configurable=!0,"value"in t&&(t.writable=!0),Object.defineProperty(n,t.key,t)}}return function(a,s,t){return s&&n(a.prototype,s),t&&n(a,t),a}}(),o=s(149),p=(t=o)&&t.__esModule?t:{default:t},c=s(113),i=s(114),l=s(148),u=s(150);a.Search=function(){function n(a){if(function(n,a){if(!(n instanceof a))throw new TypeError("Cannot call a class as a function")}(this,n),!a)throw Error("js-search requires a uid field name constructor parameter");this._uidFieldName=a,this._indexStrategy=new c.PrefixIndexStrategy,this._searchIndex=new l.TfIdfSearchIndex(a),this._sanitizer=new i.LowerCaseSanitizer,this._tokenizer=new u.SimpleTokenizer,this._documents=[],this._searchableFields=[]}return e(n,[{key:"addDocument",value:function(n){this.addDocuments([n])}},{key:"addDocuments",value:function(n){this._documents=this._documents.concat(n),this.indexDocuments_(n,this._searchableFields)}},{key:"addIndex",value:function(n){this._searchableFields.push(n),this.indexDocuments_(this._documents,[n])}},{key:"search",value:function(n){var a=this._tokenizer.tokenize(this._sanitizer.sanitize(n));return this._searchIndex.search(a,this._documents)}},{key:"indexDocuments_",value:function(n,a){this._initialized=!0;for(var s=this._indexStrategy,t=this._sanitizer,e=this._searchIndex,o=this._tokenizer,c=this._uidFieldName,i=0,l=n.length;i<l;i++){var u,r=n[i];u=c instanceof Array?(0,p.default)(r,c):r[c];for(var d=0,h=a.length;d<h;d++){var k,g=a[d];if(null!=(k=g instanceof Array?(0,p.default)(r,g):r[g])&&"string"!=typeof k&&k.toString&&(k=k.toString()),"string"==typeof k)for(var f=o.tokenize(t.sanitize(k)),w=0,m=f.length;w<m;w++)for(var b=f[w],v=s.expandToken(b),y=0,S=v.length;y<S;y++){var x=v[y];e.indexDocument(x,u,r)}}}}},{key:"indexStrategy",set:function(n){if(this._initialized)throw Error("IIndexStrategy cannot be set after initialization");this._indexStrategy=n},get:function(){return this._indexStrategy}},{key:"sanitizer",set:function(n){if(this._initialized)throw Error("ISanitizer cannot be set after initialization");this._sanitizer=n},get:function(){return this._sanitizer}},{key:"searchIndex",set:function(n){if(this._initialized)throw Error("ISearchIndex cannot be set after initialization");this._searchIndex=n},get:function(){return this._searchIndex}},{key:"tokenizer",set:function(n){if(this._initialized)throw Error("ITokenizer cannot be set after initialization");this._tokenizer=n},get:function(){return this._tokenizer}}]),n}()},233:function(n,a,s){"use strict";s(26),s(54),s(2),Object.defineProperty(a,"__esModule",{value:!0}),a.TokenHighlighter=void 0;var t=function(){function n(n,a){for(var s=0;s<a.length;s++){var t=a[s];t.enumerable=t.enumerable||!1,t.configurable=!0,"value"in t&&(t.writable=!0),Object.defineProperty(n,t.key,t)}}return function(a,s,t){return s&&n(a.prototype,s),t&&n(a,t),a}}(),e=s(113),o=s(114);a.TokenHighlighter=function(){function n(a,s,t){!function(n,a){if(!(n instanceof a))throw new TypeError("Cannot call a class as a function")}(this,n),this._indexStrategy=a||new e.PrefixIndexStrategy,this._sanitizer=s||new o.LowerCaseSanitizer,this._wrapperTagName=t||"mark"}return t(n,[{key:"highlight",value:function(n,a){for(var s=this._wrapText("").length,t=Object.create(null),e=0,o=a.length;e<o;e++)for(var p=this._sanitizer.sanitize(a[e]),c=this._indexStrategy.expandToken(p),i=0,l=c.length;i<l;i++){var u=c[i];t[u]?t[u].push(p):t[u]=[p]}for(var r="",d="",h=0,k=(e=0,n.length);e<k;e++){var g=n.charAt(e);" "===g?(r="",d="",h=e+1):(r+=g,d+=this._sanitizer.sanitize(g)),t[d]&&t[d].indexOf(d)>=0&&(r=this._wrapText(r),n=n.substring(0,h)+r+n.substring(e+1),e+=s,k+=s)}return n}},{key:"_wrapText",value:function(n){var a=this._wrapperTagName;return"<"+a+">"+n+"</"+a+">"}}]),n}()},234:function(n,a,s){},236:function(n,a,s){"use strict";var t=s(0),e=s.n(t),o=s(157),p=s(8),c=s(23),i=s.n(c),l=(s(143),s(144),s(86),s(158)),u=s(65),r=s(4),d=s.n(r);function h(n){if(void 0===n)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return n}var k=function(n){var a,s;function t(a){var s;return(s=n.call(this,a)||this).state={pageList:[],search:[],searchResults:[],isLoading:!0,isError:!1,searchQuery:"",isOpen:!1},s.rebuildIndex=function(){var n=s.state.pageList,a=new u.Search("html");a.indexStrategy=new u.PrefixIndexStrategy,a.sanitizer=new u.LowerCaseSanitizer,a.searchIndex=new u.TfIdfSearchIndex("html"),a.addIndex("html"),a.addDocuments(n),s.setState({search:a,isLoading:!1})},s.searchData=function(n){var a=s.state.search.search(n.target.value);s.setState({searchQuery:n.target.value,searchResults:a})},s.handleSubmit=function(n){n.preventDefault()},s.closeDropdown=s.closeDropdown.bind(h(s)),s.openDropdown=s.openDropdown.bind(h(s)),s}s=n,(a=t).prototype=Object.create(s.prototype),a.prototype.constructor=a,a.__proto__=s;var o=t.prototype;return o.componentDidMount=function(){var n=this;this.setState({pageList:this.props.items},(function(){n.rebuildIndex()}))},o.closeDropdown=function(){this.setState({isOpen:!1})},o.openDropdown=function(){this.setState({isOpen:!0})},o.render=function(){var n=this,a=this.state,s=a.searchResults,t=a.searchQuery,o=s;return this.state.isOpen,e.a.createElement("div",{className:d.a.dropdown},e.a.createElement("form",{className:d.a.searchSection,onSubmit:this.handleSubmit},e.a.createElement("input",{className:d.a.activeInput,onClick:this.openDropdown,type:"text",placeholder:"Search","aria-label":"Search",value:t,onChange:this.searchData})),e.a.createElement("div",{className:this.state.isOpen?d.a.dropdownContent:d.a.dropdownContentHide},e.a.createElement("table",{className:d.a.resultsTable},e.a.createElement("tbody",{className:d.a.resultBody},o.map((function(a){var s="";return s=a.frontmatter.path.includes("blogs")?"Blog post":"Guide",e.a.createElement("tr",{className:d.a.searchRow,key:"row_"+a.frontmatter.title},e.a.createElement(p.Link,{onClick:n.closeDropdown,to:a.frontmatter.path},e.a.createElement("td",{className:d.a.typeCell},s),e.a.createElement("td",{className:d.a.searchCell},a.frontmatter.title)))}))))))},t}(t.Component),g=function(){return e.a.createElement(p.StaticQuery,{query:"206866379",render:function(n){var a=[],s=n.blogs;return n.guides.edges.forEach((function(n){a=a.concat(n.node)})),s.edges.forEach((function(n){a=a.concat(n.node)})),e.a.createElement(k,{items:a})},data:l})},f=s(84),w=s.n(f),m=s(159),b=s.n(m),v=s(160),y=s.n(v),S=function(){return e.a.createElement("header",{className:i.a.header},e.a.createElement("div",{className:i.a.logoSection},e.a.createElement(p.Link,{className:i.a.homeLink,to:"/"},e.a.createElement("img",{className:i.a.headerImage,src:w.a,alt:"Kitura Logo"}),e.a.createElement("h1",null,"KITURA"))),e.a.createElement("nav",{className:i.a.headerNav},e.a.createElement(p.Link,{className:i.a.navLink,to:"/learn"},"Learn"),e.a.createElement(p.Link,{className:i.a.navLink,to:"/news"},"Blog")),e.a.createElement(g,null),e.a.createElement("nav",{className:i.a.socialNav},e.a.createElement("a",{target:"_blank",href:"https://github.com/IBM-Swift/Kitura"},e.a.createElement("img",{className:i.a.socialIcon,src:y.a})),e.a.createElement("a",{target:"_blank",href:"http://slack.kitura.io"},e.a.createElement("img",{className:i.a.socialIcon,src:b.a}))))};S.defaultProps={siteTitle:""};var x=S,T=s(66),C=s.n(T),A=function(){return e.a.createElement("header",{className:C.a.header},e.a.createElement("div",{className:C.a.logoSection},e.a.createElement(p.Link,{className:C.a.homeLink,to:"/"},e.a.createElement("img",{className:C.a.headerImage,src:w.a,alt:"Kitura Logo"}),e.a.createElement("h1",null,"KITURA"))),e.a.createElement(g,null))},I=s(67),M=s.n(I),H=function(){return e.a.createElement("footer",{className:M.a.footer},e.a.createElement(p.Link,{to:"/privacy",className:M.a.footerLink},"Privacy"),e.a.createElement("div",{className:M.a.separator}),e.a.createElement("a",{href:"https://github.com/IBM-Swift/Kitura/blob/master/LICENSE.txt",className:M.a.footerLink},"License"))},E=s(44),P=s.n(E),z=function(){return e.a.createElement("nav",{className:P.a.mobileNav},e.a.createElement(p.Link,{className:P.a.navLink,to:"/"},"Home"),e.a.createElement(p.Link,{className:P.a.navLink,to:"/learn"},"Learn"),e.a.createElement(p.Link,{className:P.a.navLink,to:"/news"},"Blog"),e.a.createElement("a",{className:P.a.navLink,href:"https://github.com/IBM-Swift/Kitura",target:"_blank",rel:"noopener noreferrer"},"GitHub"),e.a.createElement("a",{className:P.a.navLink,href:"http://slack.kitura.io"},"Slack"))};s(234),a.a=function(n){var a=n.children;return e.a.createElement(e.a.Fragment,null,e.a.createElement(o.Helmet,null,e.a.createElement("meta",{charset:"UTF-8"}),e.a.createElement("title",null,"Kitura - An Enterprise-Grade Server-Side Swift Web Framework"),e.a.createElement("meta",{name:"description",content:"Kitura is an enterprise-grade server-side Swift web framework, backed by IBM. Kitura makes it possible to build web sites, REST APIs, and full-stack Swift applications using Swift's key tenets of Safe, Expressive and Fast."}),e.a.createElement("meta",{name:"keywords",content:"kitura, microservice, server-side swift, swiftlang"}),e.a.createElement("meta",{property:"og:title",content:"Kitura - An Enterprise-Grade Server-Side Swift Web Framework"}),e.a.createElement("meta",{property:"og:type",content:"website"}),e.a.createElement("meta",{property:"og:url",content:"https://www.kitura.io/"}),e.a.createElement("script",{src:"https://unpkg.com/web-animations-js@2.3.2/web-animations.min.js"}),e.a.createElement("script",{src:"https://unpkg.com/muuri@0.8.0/dist/muuri.min.js"})),e.a.createElement(x,null),e.a.createElement(A,null),e.a.createElement("main",{style:{marginTop:"75px"}},a),e.a.createElement(z,null),e.a.createElement(H,null))}},4:function(n,a,s){n.exports={dropdown:"search-module--dropdown--scJAx",activeInput:"search-module--active-input--36xK4",dropdownContent:"search-module--dropdown-content--J8CNd",dropdownContentHide:"search-module--dropdown-content-hide--9GPCf",resultsTable:"search-module--results-table--1InHv",searchRow:"search-module--search-row--3ToZQ",searchCell:"search-module--search-cell--2VDZ5",typeCell:"search-module--type-cell--1jaXf"}},44:function(n,a,s){n.exports={mobileNav:"mobile-nav-module--mobile-nav--39noo",navLink:"mobile-nav-module--nav-link--2OUm2"}},65:function(n,a,s){"use strict";s(2),Object.defineProperty(a,"__esModule",{value:!0});var t=s(113);Object.defineProperty(a,"AllSubstringsIndexStrategy",{enumerable:!0,get:function(){return t.AllSubstringsIndexStrategy}}),Object.defineProperty(a,"ExactWordIndexStrategy",{enumerable:!0,get:function(){return t.ExactWordIndexStrategy}}),Object.defineProperty(a,"PrefixIndexStrategy",{enumerable:!0,get:function(){return t.PrefixIndexStrategy}});var e=s(114);Object.defineProperty(a,"CaseSensitiveSanitizer",{enumerable:!0,get:function(){return e.CaseSensitiveSanitizer}}),Object.defineProperty(a,"LowerCaseSanitizer",{enumerable:!0,get:function(){return e.LowerCaseSanitizer}});var o=s(148);Object.defineProperty(a,"TfIdfSearchIndex",{enumerable:!0,get:function(){return o.TfIdfSearchIndex}}),Object.defineProperty(a,"UnorderedSearchIndex",{enumerable:!0,get:function(){return o.UnorderedSearchIndex}});var p=s(150);Object.defineProperty(a,"SimpleTokenizer",{enumerable:!0,get:function(){return p.SimpleTokenizer}}),Object.defineProperty(a,"StemmingTokenizer",{enumerable:!0,get:function(){return p.StemmingTokenizer}}),Object.defineProperty(a,"StopWordsTokenizer",{enumerable:!0,get:function(){return p.StopWordsTokenizer}});var c=s(232);Object.defineProperty(a,"Search",{enumerable:!0,get:function(){return c.Search}});var i=s(151);Object.defineProperty(a,"StopWordsMap",{enumerable:!0,get:function(){return i.StopWordsMap}});var l=s(233);Object.defineProperty(a,"TokenHighlighter",{enumerable:!0,get:function(){return l.TokenHighlighter}})},66:function(n,a,s){n.exports={header:"mobile-header-module--header--2k-0H",homeLink:"mobile-header-module--home-link--tp11w",headerImage:"mobile-header-module--header-image--OoDQK",logoSection:"mobile-header-module--logo-section--38sB4",headerNav:"mobile-header-module--header-nav--2IOOv",searchSection:"mobile-header-module--search-section--2jc4_"}},67:function(n,a,s){n.exports={footer:"footer-module--footer--3zCYC",footerLink:"footer-module--footer-link--rG16h",separator:"footer-module--separator--3jUsh"}},84:function(n,a){n.exports="data:image/svg+xml;base64,PD94bWwgdmVyc2lvbj0iMS4wIiBlbmNvZGluZz0idXRmLTgiPz4KPCEtLSBHZW5lcmF0b3I6IEFkb2JlIElsbHVzdHJhdG9yIDIyLjAuMCwgU1ZHIEV4cG9ydCBQbHVnLUluIC4gU1ZHIFZlcnNpb246IDYuMDAgQnVpbGQgMCkgIC0tPgo8c3ZnIHZlcnNpb249IjEuMSIgaWQ9IkxheWVyXzEiIHhtbG5zPSJodHRwOi8vd3d3LnczLm9yZy8yMDAwL3N2ZyIgeG1sbnM6eGxpbms9Imh0dHA6Ly93d3cudzMub3JnLzE5OTkveGxpbmsiIHg9IjBweCIgeT0iMHB4IgoJIHZpZXdCb3g9IjAgMCAxMDAuNiA2OS42IiBzdHlsZT0iZW5hYmxlLWJhY2tncm91bmQ6bmV3IDAgMCAxMDAuNiA2OS42OyIgeG1sOnNwYWNlPSJwcmVzZXJ2ZSI+CjxzdHlsZSB0eXBlPSJ0ZXh0L2NzcyI+Cgkuc3Qwe2ZpbGw6IzAwQkJFNjt9Cgkuc3Qxe2ZpbGw6IzE1MjMzMzt9Cjwvc3R5bGU+CjxnPgoJPGc+CgkJPHBhdGggY2xhc3M9InN0MCIgZD0iTTY5LjcsNjAuMWMtMTEuOCwwLTIyLjQtNi41LTI3LjgtMTYuNmMtNS40LDEuOC0xMC4xLDUuMy0xMy40LDkuOGMtMi44LTEuNi02LTIuNS05LjQtMi41CgkJCWMtMTAuNSwwLTE5LDguNS0xOSwxOWg3OC4zYzAtMy40LTAuNi02LjYtMS43LTkuN0w2OS43LDYwLjFMNjkuNyw2MC4xeiIvPgoJCTxwYXRoIGNsYXNzPSJzdDEiIGQ9Ik05NC4zLDU2LjhjMC4xLTAuNCwwLjItMC43LDAuMi0xLjFjMC0xLjctMC45LTMuMS0yLjMtMy45bC0xMC44LTYuMWMzLjYtNC42LDMuOC0xMS4yLDAuMi0xNkw2My44LDYuMQoJCQljLTYuOSw2LjktOS41LDE2LjMtOC4xLDI1LjJMMCwwYzQuNiwxNi42LDE5LjQsMjcuNywzNS44LDI4LjNjMC43LDEuOSw0LjMsMTEuNiw0LjMsMTEuNmMwLjUsMS4yLDEsMi40LDEuNiwzLjZjMCwwLDAsMCwwLDAKCQkJYzIuOC0wLjksNS43LTEuNCw4LjgtMS40YzExLjksMCwyMi4xLDcuNSwyNiwxOC4xSDEwMGwwLDBMOTQuMyw1Ni44eiBNOTAsNTcuMWMtMC44LDAtMS40LTAuNi0xLjQtMS40YzAtMC44LDAuNi0xLjQsMS40LTEuNAoJCQljMC44LDAsMS40LDAuNiwxLjQsMS40QzkxLjUsNTYuNSw5MC44LDU3LjEsOTAsNTcuMXoiLz4KCTwvZz4KCTxnPgoJCTxwYXRoIGQ9Ik04Mi45LDY0LjFIODJ2LTAuM2gyLjF2MC4zaC0wLjl2Mi40aC0wLjRWNjQuMXogTTg0LjYsNjMuOGgwLjVMODYsNjZsMC44LTIuMmgwLjV2Mi43aC0wLjR2LTIuNGwwLDBsLTEsMi40aC0wLjJsLTEtMi40CgkJCWwwLDB2Mi40aC0wLjRWNjMuOHoiLz4KCTwvZz4KPC9nPgo8L3N2Zz4K"}}]);
//# sourceMappingURL=commons-d386e8a9a25af154b2ba.js.map